{
    "items": [
        {
            "answer_count": 5,
            "answers": [
                {
                    "body": "<h1><a href=\"http://www.w3.org/TR/css3-transitions/#transition-events-\">W3C CSS Transitions Draft</a></h1>\n\n<blockquote>\n  <p>The completion of a CSS Transition generates a corresponding DOM Event. An event is fired for each property that undergoes a transition. This allows a content developer to perform actions that synchronize with the completion of a transition.</p>\n</blockquote>\n\n<hr>\n\n<h2><a href=\"http://developer.apple.com/safari/library/documentation/InternetWeb/Conceptual/SafariVisualEffectsProgGuide/Transitions/Transitions.html\">Webkit</a></h2>\n\n<blockquote>\n  <p>You can set a handler for a DOM event\n  that is sent at the end of a\n  transition. The event is an instance\n  of WebKitTransitionEvent and its type\n  is webKitTransitionEnd in JavaScript.</p>\n</blockquote>\n\n<pre><code>box.addEventListener( 'webkitTransitionEnd', \n    function( event ) { alert( \"Finished transition!\" ); }, false );\n</code></pre>\n\n<h2><a href=\"https://developer.mozilla.org/en/CSS/CSS_transitions#Detecting_the_completion_of_a_transition\">Mozilla</a></h2>\n\n<blockquote>\n  <p>There is a single event that is fired when transitions complete. In Firefox, the event is <code>transitionend</code>, in Opera, <code>oTransitionEnd</code>, and in WebKit it is <code>webkitTransitionEnd</code>.</p>\n</blockquote>\n\n<h2><a href=\"http://www.opera.com/docs/specs/presto29/css/transitions/#events\">Opera</a></h2>\n\n<blockquote>\n  <p>There is one type of transition event\n  available. The <code>oTransitionEnd</code> event\n  occurs at the completion of the\n  transition.</p>\n</blockquote>\n\n<h2><a href=\"http://msdn.microsoft.com/en-us/library/ie/hh673535%28v=vs.85%29.aspx#transitions_dom_events\">Internet Explorer</a></h2>\n\n<blockquote>\n  <p>The <code>transitionend</code> event occurs at the completion of the transition. If the transition is removed before completion, the event will not fire.</p>\n</blockquote>\n\n<hr>\n\n<p><a href=\"http://stackoverflow.com/questions/5023514/how-do-i-normalize-css3-transition-functions-across-browsers\">SO: How do I normalize CSS3 Transition functions across browsers?</a></p>\n",
                    "is_accepted": true,
                    "score": 165
                },
                {
                    "body": "<p>In Opera 12 when you bind using the plain JavaScript, 'oTransitionEnd' will work:</p>\n\n<pre><code>document.addEventListener(\"oTransitionEnd\", function(){\n    alert(\"Transition Ended\");\n});\n</code></pre>\n\n<p>however if you bind through jQuery, you need to use 'otransitionend'</p>\n\n<pre><code>$(document).bind(\"otransitionend\", function(){\n    alert(\"Transition Ended\");\n});\n</code></pre>\n\n<p>In case you are using Modernizr or bootstrap-transition.js you can simply do a change:</p>\n\n<pre><code>var transEndEventNames = {\n    'WebkitTransition' : 'webkitTransitionEnd',\n    'MozTransition'    : 'transitionend',\n    'OTransition'      : 'oTransitionEnd otransitionend',\n    'msTransition'     : 'MSTransitionEnd',\n    'transition'       : 'transitionend'\n},\ntransEndEventName = transEndEventNames[ Modernizr.prefixed('transition') ];\n</code></pre>\n\n<p>You can find some info here as well <a href=\"http://www.ianlunn.co.uk/blog/articles/opera-12-otransitionend-bugs-and-workarounds/\">http://www.ianlunn.co.uk/blog/articles/opera-12-otransitionend-bugs-and-workarounds/</a></p>\n",
                    "is_accepted": false,
                    "score": 14
                },
                {
                    "body": "<p>I was using the approach given by Pete, however I have now started using the following </p>\n\n<pre><code>$(\".myClass\").one('transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd', \nfunction() {\n //do something\n});\n</code></pre>\n\n<hr>\n\n<p>Alternatively if you use bootstrap then you can simply do </p>\n\n<pre><code>$(\".myClass\").one($.support.transition.end,\nfunction() {\n //do something\n});\n</code></pre>\n\n<p>This is becuase they include the following in bootstrap.js </p>\n\n<pre><code>+function ($) {\n  'use strict';\n\n  // CSS TRANSITION SUPPORT (Shoutout: http://www.modernizr.com/)\n  // ============================================================\n\n  function transitionEnd() {\n    var el = document.createElement('bootstrap')\n\n    var transEndEventNames = {\n      'WebkitTransition' : 'webkitTransitionEnd',\n      'MozTransition'    : 'transitionend',\n      'OTransition'      : 'oTransitionEnd otransitionend',\n      'transition'       : 'transitionend'\n    }\n\n    for (var name in transEndEventNames) {\n      if (el.style[name] !== undefined) {\n        return { end: transEndEventNames[name] }\n      }\n    }\n\n    return false // explicit for ie8 (  ._.)\n  }\n\n\n  $(function () {\n    $.support.transition = transitionEnd()\n  })\n\n}(jQuery);\n</code></pre>\n\n<p>Note they also include an emulateTransitionEnd function which may be needed to ensure a callback always occurs.</p>\n\n<pre><code>  // http://blog.alexmaccaw.com/css-transitions\n  $.fn.emulateTransitionEnd = function (duration) {\n    var called = false, $el = this\n    $(this).one($.support.transition.end, function () { called = true })\n    var callback = function () { if (!called) $($el).trigger($.support.transition.end) }\n    setTimeout(callback, duration)\n    return this\n  }\n</code></pre>\n\n<blockquote>\n  <p>Be aware that sometimes this event doesn\u2019t fire, usually in the case\n  when properties don\u2019t change or a paint isn\u2019t triggered. To ensure we\n  always get a callback, let\u2019s set a timeout that\u2019ll trigger the event\n  manually.</p>\n</blockquote>\n\n<p><a href=\"http://blog.alexmaccaw.com/css-transitions\">http://blog.alexmaccaw.com/css-transitions</a></p>\n",
                    "is_accepted": false,
                    "score": 40
                },
                {
                    "body": "<p>Just for fun:</p>\n\n<pre><code>(function ($) {\n    $.fn.transitionend = function (fn) {\n        return this.each(function () {\n            var self = $(this),\n                duration = parseFloat(self.css('transitionDuration')) * 1000,\n                delay = parseFloat(self.css('transitionDelay')) * 1000;\n\n            $.data(this, 'timer', setTimeout(function () {\n                self.trigger('transitionend');\n                if ($.isFunction(fn)) fn();\n            }, delay + duration));\n        });\n    };\n})(this.jQuery || this.Zepto);\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 4
                },
                {
                    "body": "<p>All modern browsers now support the unprefixed event:</p>\n\n<p><code>element.addEventListener('transitionend', callback, false);</code></p>\n\n<p>Works in the latest versions of Chrome, Firefox and Safari. Even IE10+.</p>\n",
                    "is_accepted": false,
                    "score": 24
                }
            ],
            "body": "<p>Are there any events fired by an element to check wether a css3 transition has started or end?</p>\n",
            "last_activity_date": 1412874137,
            "question_id": 2794148,
            "score": 126,
            "tags": [
                "javascript",
                "events",
                "css3",
                "transition",
                "css-transitions"
            ],
            "title": "CSS3 transition events"
        },
        {
            "answer_count": 13,
            "answers": [
                {
                    "body": "<p>According to <a href=\"http://tools.ietf.org/html/rfc2397\" rel=\"nofollow\">RFC 2397</a>, no, there isn't.</p>\n\n<p><strike>Nor does there appear to be any <a href=\"http://www.w3schools.com/tags/tag_a.asp\" rel=\"nofollow\">attribute</a> of the <code>&lt;a&gt;</code> element that you can use either.</strike></p>\n\n<p>However HTML5 has subsequently introduced the <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/a#Attributes\" rel=\"nofollow\"><code>download</code></a> attribute on the <code>&lt;a&gt;</code> element, although at the time of writing support is not universal (no MSIE support, for example)</p>\n",
                    "is_accepted": false,
                    "score": 26
                },
                {
                    "body": "<p>No.</p>\n\n<p>The entire purpose is that it's a datastream, not a file. The data source should not have any knowledge of the user agent handling it as a file... and it doesn't.</p>\n",
                    "is_accepted": false,
                    "score": 12
                },
                {
                    "body": "<p>It's kind of hackish, but I've been in the same situation before. I was dynamically generating a text file in javascript and wanted to provide it for download by encoding it with the data-URI.</p>\n\n<p>This is possible with <strike>minor</strike>major user intervention. Generate a link <code>&lt;a href=\"data:...\"&gt;right-click me and select \"Save Link As...\" and save as \"example.txt\"&lt;/a&gt;</code>. As I said, this is inelegant, but it works if you do not need a professional solution.</p>\n\n<p>This could be made less painful by using flash to copy the name into the clipboard first. Of course if you let yourself use Flash or Java (now with less and less browser support I think?), you could probably find a another way to do this.</p>\n",
                    "is_accepted": false,
                    "score": 2
                },
                {
                    "body": "<p>Look at this link:\n<a href=\"http://lists.w3.org/Archives/Public/uri/2010Feb/0069.html\" rel=\"nofollow\">http://lists.w3.org/Archives/Public/uri/2010Feb/0069.html</a></p>\n\n<p>Quote:</p>\n\n<blockquote>\n  <p>It even works (as in, doesn't cause a problem) with ;base64 at the end<br>\n  like this (in Opera at least):</p>\n  \n  <p><strong>data:text/plain;charset=utf-8;headers=Content-Disposition%3A%20attachment%3B%20filename%3D%22with%20spaces.txt%22%0D%0AContent-Language%3A%20en;base64,4oiaDQo%3D</strong></p>\n</blockquote>\n\n<p>Also there is some info in the rest messages of the discussion.</p>\n",
                    "is_accepted": false,
                    "score": 3
                },
                {
                    "body": "<p>I've looked a bit in firefox sources in netwerk/protocol/data/nsDataHandler.cpp</p>\n\n<p>data handler only parses content/type and charset, and looks if there is \";base64\"\nin the string</p>\n\n<p>the rfc specifices no filename and at least firefox handles no filename for it,\nthe code generates a random name plus \".part\"</p>\n\n<p>I've also checked firefox log</p>\n\n\n\n<pre class=\"lang-none prettyprint-override\"><code>[b2e140]: DOCSHELL 6e5ae00 InternalLoad data:application/octet-stream;base64,SGVsbG8=\n[b2e140]: Found extension '' (filename is '', handling attachment: 0)\n[b2e140]: HelperAppService::DoContent: mime 'application/octet-stream', extension ''\n[b2e140]: Getting mimeinfo from type 'application/octet-stream' ext ''\n[b2e140]: Extension lookup on '' found: 0x0\n[b2e140]: Ext. lookup for '' found 0x0\n[b2e140]: OS gave back 0x43609a0 - found: 0\n[b2e140]: Searched extras (by type), rv 0x80004005\n[b2e140]: MIME Info Summary: Type 'application/octet-stream', Primary Ext ''\n[b2e140]: Type/Ext lookup found 0x43609a0\n</code></pre>\n\n<p>interesting files if you want to look at mozilla sources:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>data uri handler: netwerk/protocol/data/nsDataHandler.cpp\nwhere mozilla decides the filename: uriloader/exthandler/nsExternalHelperAppService.cpp\nInternalLoad string in the log: docshell/base/nsDocShell.cpp\n</code></pre>\n\n<p>I think you can stop searching a solution for now, because I suspect there is none :)</p>\n\n<p>as noticed in this thread html5 has <code>download</code> attribute, it works also on firefox 20 <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/links.html#attr-hyperlink-download\" rel=\"nofollow\">http://www.whatwg.org/specs/web-apps/current-work/multipage/links.html#attr-hyperlink-download</a></p>\n",
                    "is_accepted": false,
                    "score": 20
                },
                {
                    "body": "<p>Use the <code>download</code> attribute:</p>\n\n<pre><code>&lt;a download='FileName' href='your_url'&gt;\n</code></pre>\n\n<p>Live example on <a href=\"http://html5-demos.appspot.com/static/a.download.html\" rel=\"nofollow\">html5-demos.appspot.com/...</a>.</p>\n\n<p><a href=\"http://caniuse.com/#search=download\" rel=\"nofollow\">Currently works on</a> Chrome, Firefox, Opera, but not Safari 8 or IE11.</p>\n",
                    "is_accepted": false,
                    "score": 62
                },
                {
                    "body": "<p>There is a tiny workaround script on Google Code that worked for me: </p>\n\n<p><a href=\"http://code.google.com/p/download-data-uri/\">http://code.google.com/p/download-data-uri/</a></p>\n\n<p>It adds a form with the data in it, submits it and then removes the form again. Hacky, but it did the job for me. Requires jQuery. </p>\n\n<p>This thread showed up in Google before the Google Code page and I thought it might be helpful to have the link in here, too.</p>\n",
                    "is_accepted": false,
                    "score": 5
                },
                {
                    "body": "<p>you can add a download attribute to the anchor element. </p>\n\n<p>sample:</p>\n\n<pre><code>&lt;a download=\"abcd.cer\"\n    href=\"data:application/stream;base64,MIIDhTC......\"&gt;down&lt;/a&gt;\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 6
                },
                {
                    "body": "<p>The following Javascript snippet works in Chrome by using the new 'download' attribute of links and simulating a click.</p>\n\n<pre><code>function downloadWithName(uri, name) {\n\n    function eventFire(el, etype){\n        if (el.fireEvent) {\n            (el.fireEvent('on' + etype));\n        } else {\n            var evObj = document.createEvent('Events');\n            evObj.initEvent(etype, true, false);\n            el.dispatchEvent(evObj);\n        }\n    }\n\n    var link = document.createElement(\"a\");\n    link.download = name;\n    link.href = uri;\n    eventFire(link, \"click\");\n\n}\n</code></pre>\n\n<p>And the following example shows it's use:</p>\n\n<pre><code>downloadWithName(\"data:,Hello%2C%20World!\", \"helloWorld.txt\")\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 10
                },
                {
                    "body": "<p>Chrome makes this very simple these days:</p>\n\n<pre><code>function saveContent(fileContents, fileName)\n{\n    var link = document.createElement('a');\n    link.download = fileName;\n    link.href = 'data:,' + fileContents;\n    link.click();\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 18
                },
                {
                    "body": "<p>Here is a jQuery version based off of Holf's version and works with Chrome and Firefox whereas his version seems to only work with Chrome.  It's a little strange to add something to the body to do this but if someone has a better option I'm all for it.</p>\n\n<pre><code>var exportFileName = \"export-\" + filename;\n$('&lt;a&gt;&lt;/a&gt;', {\n    \"download\": exportFileName,\n    \"href\": \"data:,\" + JSON.stringify(exportData, null,5),\n    \"id\": \"exportDataID\"\n}).appendTo(\"body\")[0].click().remove();\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 3
                },
                {
                    "body": "<p><strong>HTML only:</strong> use the <code>download</code> attribute:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;a download=\"logo.png\" href=\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\"&gt;Download transparent png&lt;/a&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<hr>\n\n<p><strong>Javascript only:</strong> you can save any data URI with this code:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>function saveAs(uri, filename) {\r\n  var link = document.createElement('a');\r\n  if (typeof link.download === 'string') {\r\n    link.href = uri;\r\n    link.download = filename;\r\n\r\n    //Firefox requires the link to be in the body\r\n    document.body.appendChild(link);\r\n    \r\n    //simulate click\r\n    link.click();\r\n\r\n    //remove the link when done\r\n    document.body.removeChild(link);\r\n  } else {\r\n    window.open(uri);\r\n  }\r\n}\r\n\r\nvar file = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7'\r\nsaveAs(file, 'logo.png');</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p><strong>Chrome and Firefox will use the specified filename.</strong> Browsers that don't support the <code>download</code> attribute, like IE11 and Safari 8, will download the file with their default name.</p>\n\n<p>Full compatibility list of the <code>download</code> attribute: <a href=\"http://caniuse.com/#feat=download\" rel=\"nofollow\">http://caniuse.com/#feat=download</a></p>\n\n<hr>\n\n<p>If need better compatibility <em>now</em>, use the Flash-based <a href=\"https://github.com/dcneiner/Downloadify\" rel=\"nofollow\">Downloadify</a> as a fallback.</p>\n",
                    "is_accepted": false,
                    "score": 2
                },
                {
                    "body": "<p>Using <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorker_API/Using_Service_Workers\" rel=\"nofollow\">service workers</a>, this is finally possible in the truest sense.</p>\n\n<ol>\n<li>Create a fake URL. For example /saveAs/myPrettyName.jpg</li>\n<li>Use URL in <code>&lt;a href, &lt;img src</code>, window.open( url ), absolutely anything that can be done with a \"real\" URL.  </li>\n<li>Inside the worker, catch the fetch event, and respond with the correct data.</li>\n</ol>\n\n<p>The browser will now suggest myPrettyName.jpg even if the user opens the file in a new tab, and tries to save it there. It will be exactly as if the file had come from the server.</p>\n\n<pre><code>// In the service worker\nself.addEventListener( 'fetch', function(e)\n{\n    if( e.request.url.startsWith( '/blobUri/' ) )\n    {\n        // Logic to select correct dataUri, and return it as a Response\n        e.respondWith( dataURLAsRequest );\n    }\n});\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                }
            ],
            "body": "<p>If for example you follow the link:</p>\n\n<p><code>data:application/octet-stream;base64,SGVsbG8=</code></p>\n\n<p>The browser will prompt you to download a file consisting of the data held as base64 in the hyperlink itself.  Is there any way of suggesting a default name in the markup?  If not, is there a JavaScript solution?</p>\n",
            "last_activity_date": 1425944579,
            "question_id": 283956,
            "score": 120,
            "tags": [
                "javascript",
                "html",
                "url",
                "data-uri",
                "save-as"
            ],
            "title": "Is there any way to specify a suggested filename when using data: URI?"
        },
        {
            "answer_count": 8,
            "answers": [
                {
                    "body": "<p>By default the sort method sorts elements alphabetically. To sort numerically just add a new method which handles numeric sorts (sortNumber, shown below) - </p>\n\n<pre><code>function sortNumber(a,b) {\n    return a - b;\n}\n\nvar numArray = [140000, 104, 99];\nnumArray.sort(sortNumber);\nalert(numArray[0] + \", \" + numArray[numArray.length - 1]);\n</code></pre>\n",
                    "is_accepted": true,
                    "score": 134
                },
                {
                    "body": "<p>You can pass into .sort() a function that tells it how to sort it. <a href=\"http://javascript.about.com/library/blsort.htm\" rel=\"nofollow\">Here's</a> a tutorial on this.</p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p><a href=\"https://developer.mozilla.org/en/Core%5FJavaScript%5F1.5%5FReference/Global%5FObjects/Array/sort\">array.sort</a> does a lexicographic sort by default, for a numeric sort, provide your own function. Here's a simple example:</p>\n\n<pre><code>function compareNumbers(a, b)\n{\n    return a - b;\n}\n\nnumArray.sort(compareNumbers);\n</code></pre>\n\n<p>Also note that sort works \"in place\", there's no need for the assignment.</p>\n",
                    "is_accepted": false,
                    "score": 23
                },
                {
                    "body": "<p>In Javascript the sort() method's default behaviour is to sort values in an array alphabetically.</p>\n\n<p>To sort by number you have to define a numeric sort function (which is very easy):</p>\n\n<pre><code>...\nfunction sortNumber(a,b)\n{\n  return a - b;\n}\n\nnumArray = numArray.sort(sortNumber);\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 3
                },
                {
                    "body": "<p>Just building on all of the above answers, they can also be done in one line like this:</p>\n\n<pre><code>var numArray = [140000, 104, 99];\nnumArray = numArray.sort(function (a, b) { \n    return a - b;\n});\n\n//outputs: 99, 104, 140000\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 19
                },
                {
                    "body": "<p>here is my sort array function in utils library:</p>\n\n<pre><code>sortArray: function(array) {\n    array.sort(function(a, b) {\n        return a &gt; b;\n    });\n},\n\n\n# let's test a string array\nvar arr = ['bbc', 'chrome', 'aux', 'ext', 'dog'];\nutils.sortArray(arr);\nconsole.log(arr);\n&gt;&gt;&gt; [\"aux\", \"bbc\", \"chrome\", \"dog\", \"ext\", remove: function]\n\n# let's test a number array\nvar arr = [55, 22, 1425, 12, 78];\nutils.sortArray(arr);\nconsole.log(arr);\n&gt;&gt;&gt; [12, 22, 55, 78, 1425, remove: function]\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>I agree with aks, however instead of using    </p>\n\n<pre><code>return a - b;\n</code></pre>\n\n<p>You should use</p>\n\n<pre><code>return a &gt; b ? 1 : a &lt; b ? -1 : 0;\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>My personal favorite form of this function allows for a param for Ascending, or Descending:</p>\n\n<pre><code>function intArraySort(c, a) {\n    function d(a, b) { return b - a }\n    \"string\" == typeof a &amp;&amp; a.toLowerCase();\n    switch (a) {\n        default: return c.sort(function(a, b) { return a - b });\n        case 1:\n        case \"d\":\n        case \"dc\":\n        case \"desc\":\n        return c.sort(d)\n    }\n}\n</code></pre>\n\n<p>Usage as simple as:</p>\n\n<pre><code>var ara = function getArray() {\n        var a = Math.floor(Math.random()*50)+1, b = [];\n        for (i=0;i&lt;=a;i++) b.push(Math.floor(Math.random()*50)+1);\n        return b;\n    }();\n\n//    Ascending\nintArraySort(ara);\nconsole.log(ara);\n\n//    Descending\nintArraySort(ara, 1);\nconsole.log(ara);\n\n//    Ascending\nintArraySort(ara, 'a');\nconsole.log(ara);\n\n//    Descending\nintArraySort(ara, 'dc');\nconsole.log(ara);\n\n//    Ascending\nintArraySort(ara, 'asc');\nconsole.log(ara);\n</code></pre>\n\n<p><a href=\"http://jsfiddle.net/SpYk3/eLn96sga/\" rel=\"nofollow\"><h1>jsFiddle</h1></a></p>\n\n<hr>\n\n<h2>Or Code Snippet Example Here!</h2>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>function intArraySort(c, a) {\r\n\tfunction d(a, b) { return b - a }\r\n\t\"string\" == typeof a &amp;&amp; a.toLowerCase();\r\n\tswitch (a) {\r\n\t\tdefault: return c.sort(function(a, b) { return a - b });\r\n\t\tcase 1:\r\n\t\tcase \"d\":\r\n\t\tcase \"dc\":\r\n\t\tcase \"desc\":\r\n\t\treturn c.sort(d)\r\n\t}\r\n};\r\n\r\nfunction tableExample() {\r\n\tvar d = function() {\r\n\t\t\tvar a = Math.floor(50 * Math.random()) + 1,\r\n\t\t\t\tb = [];\r\n\t\t\tfor (i = 0; i &lt;= a; i++) b.push(Math.floor(50 * Math.random()) + 1);\r\n\t\t\treturn b\r\n\t\t},\r\n\t\ta = function(a) {\r\n\t\t\tvar b = $(\"&lt;tr/&gt;\"),\r\n\t\t\t\tc = $(\"&lt;th/&gt;\").prependTo(b);\r\n\t\t\t$(\"&lt;td/&gt;\", {\r\n\t\t\t\ttext: intArraySort(d(), a).join(\", \")\r\n\t\t\t}).appendTo(b);\r\n\t\t\tswitch (a) {\r\n\t\t\t\tcase 1:\r\n\t\t\t\tcase \"d\":\r\n\t\t\t\tcase \"dc\":\r\n\t\t\t\tcase \"desc\":\r\n\t\t\t\t\tc.addClass(\"desc\").text(\"Descending\");\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tc.addClass(\"asc\").text(\"Ascending\")\r\n\t\t\t}\r\n\t\t\treturn b\r\n\t\t};\r\n\treturn $(\"tbody\").empty().append(a(), a(1), a(), a(1), a(), a(1), a(), a(1), a(), a(1), a(), a(1))\r\n};\r\n\r\ntableExample();</code></pre>\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>table { border-collapse: collapse; }\r\nth, td { border: 1px solid; padding: .25em .5em; vertical-align: top; }\r\n.asc { color: red; }\r\n.desc { color: blue }</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js\"&gt;&lt;/script&gt;\r\n&lt;table&gt;&lt;tbody&gt;&lt;/tbody&gt;&lt;/table&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n",
                    "is_accepted": false,
                    "score": 0
                }
            ],
            "body": "<p>Trying to get the highest and lowest value from a array that I know will contain only integers seems to be harder than I thought?</p>\n\n<pre><code>var numArray = [140000, 104, 99];\nnumArray = numArray.sort();\nalert(numArray[0] + \", \" + numArray[numArray.length - 1]);\n</code></pre>\n\n<p>I'd expect this to show \"99, 140000\". Instead it shows \"104, 99\". So it seems the sort is handling the values as strings?</p>\n\n<p>Any way to get the sort function to actually sort on integer value?</p>\n",
            "last_activity_date": 1420047604,
            "question_id": 1063007,
            "score": 76,
            "tags": [
                "javascript",
                "arrays",
                "sorting",
                "numbers"
            ],
            "title": "arr.sort() does not sort integers correctly"
        },
        {
            "answer_count": 5,
            "answers": [
                {
                    "body": "<p>I believe this is the easiest way:\n<a href=\"http://plugins.jquery.com/project/collidable\">http://plugins.jquery.com/project/collidable</a></p>\n\n<p>Here is another one, in German:\n<a href=\"http://www.48design.de/news/2009/11/20/kollisionsabfrage-per-jquery-plugin-update-v11-8/\">http://www.48design.de/news/2009/11/20/kollisionsabfrage-per-jquery-plugin-update-v11-8/</a></p>\n\n<p>I'd give those a try.</p>\n\n<p>--UPDATE--</p>\n\n<p>I can't really spend anytime on it right now, but i can when i get home if no one answers but you;d do something like:</p>\n\n<pre><code>setInterval(function(){\n            //First step would be to get the offset of item 1 and item 2\n            //Second would be to get the width of each\n            //Third would be to check if the offset+width ever overlaps\n                //the offset+width of the 2nd\n            //Fourth would be, if so, do X or set a class...\n        },10);\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 12
                },
                {
                    "body": "<p><s>Working demo: hxxp://vidasp.net/tinydemos/javascript-detect-overlapping.html </s></p>\n\n<p>(Sorry, I lost the source code of my original demo.<br>\nAs a substitute, I give you <strong>this demo</strong>: <a href=\"http://jsfiddle.net/98sAG/\">http://jsfiddle.net/98sAG/</a>)</p>\n\n<p>Oscar gave you the general idea - you get the offsets and dimensions of the boxes and check whether they overlap. Thanks to jQuery, I got it done in less than 20 lines of code :) </p>\n\n<p><em><strong>Update</em></strong>  </p>\n\n<p>If you want it to update, you can use setInterval for example:  </p>\n\n<pre><code>function detectOverlapping() {\n    // code that detects if the box overlaps with a moving box\n    setInterval(detectOverlapping, 25);\n}\n\ndetectOverlapping();  \n</code></pre>\n\n<p>Also, note that you can optimize the function for your specific example.</p>\n\n<ul>\n<li><p>you don't have to read the box dimensions repeatedly (like I do in my code) since they are fixed. You can read them on page load (into a variable) and then just read the variable</p></li>\n<li><p>the horizontal position of the little box does not change (unless the user resizes the window). The vertical positions of the car boxes does not change. Therefore, those values also do not have to be read repeatedly, but can also be stored into variables.</p></li>\n<li><p>you don't have to test whether the little box overlaps with all car boxes at all times. You can - based on its vertical position - figure out in which lane the box is currently, and test only the specific car box from that lane. </p></li>\n</ul>\n",
                    "is_accepted": true,
                    "score": 43
                },
                {
                    "body": "<p>Its a little late on this but I guess you could use this approach that I tried when I was faced with the similar situation. The advantage here is that there are no additional plugin, or scripts involved and neither do you have to introduce performance hungry polling into it.\nThis technique uses the the built-in methods and events that Jquery's droppable has to offer.</p>\n\n<p>Ok, enough said, here's the solution technique:\nSay if you have two elements (images in my case) and you don't want them to overlap or detect when they do, make the two elements a droppable and make them to 'accept' each other:</p>\n\n<pre><code>$([div1, div2]).droppable(CONFIG_COLLISSION_PREVENTION_DROPPABLE);\n</code></pre>\n\n<p>The 'CONFIG_COLLISSION_PREVENTION_DROPPABLE' looks like this:</p>\n\n<pre><code>var originatingOffset = null;\nCONFIG_COLLISSION_PREVENTION_DROPPABLE = {\n    tolerance: \"touch\",\n    activate : function (event, ui) {\n        // note the initial position/offset when drag starts\n        // will be usedful in drop handler to check if the move\n        // occurred and in cae overlap occurred, restore the original positions.\n        originatingOffset = ui.offset;\n    },\n    drop : function (event, ui) {\n            // If this callback gets invoked, the overlap has occurred. \n            // Use this method to either generate a custom event etc.\n\n            // Here, i used it to nullify the move and resetting the dragged element's \n            // position back to it's original position/offset\n            // (which was captured in the 'activate' handler)\n        $(ui.draggable).animate({\n            top: originatingOffset.top + \"px\",\n            left: originatingOffset.left + \"px\"\n        }, 300);\n     }\n}\n</code></pre>\n\n<p>The 'activate' and 'drop' handlers refer to the 'dropactivate' and 'drop' events of \"droppable\" plugin</p>\n\n<p>Here, the key is the 'drop' callback. Whenever any of the two elements overlap and they are dropped over each other, the 'drop' will be called. This is the place to detect and take actions, may be sending out custom events or calling other actions (I here chose to revert the overlapping element's positions to the initial position when the drag started, which was captured in 'activate' callback).</p>\n\n<p>That's it. No polling, no plugins, just the built-in events.</p>\n\n<p>Well, there can be other optimizations/extensions done to it, this was simply the first shot out of my head that worked :)</p>\n\n<p>You can also use the 'dropover' and 'dropout' events to signal and create a visual feedback to the user that two elements are overlapping, while they may be still on the move.</p>\n\n<pre><code>var CLASS_INVALID = \"invalid\";\n// .invalid { border: 1px solid red; }\n...\n$.extend(CONFIG_COLLISSION_PREVENTION_DROPPABLE, {\n   over : function (event, ui) {\n        // When an element is over another, it gets detected here;\n        // while it may still be moved.\n        // the draggable element becomes 'invalid' and so apply the class here\n        $(ui.draggable).addClass(CLASS_INVALID);\n    },\n    out : function(event, ui) {               \n         // the element has exited the overlapped droppable now\n         // So element is valid now and so remove the invalid class from it\n         $(ui.draggable).removeClass(CLASS_INVALID);\n    }\n});\n</code></pre>\n\n<p>Hope this helps!</p>\n",
                    "is_accepted": false,
                    "score": 4
                },
                {
                    "body": "<p>I ran into this generalized issue myself, so (full disclosure) I made a plugin for it. For simple collision queries about static objects, try this:</p>\n\n<p><a href=\"http://sourceforge.net/projects/jquerycollision/\" rel=\"nofollow\">http://sourceforge.net/projects/jquerycollision/</a></p>\n\n<p>Which allows you to get a list of overlapping collision boxes (or none if there's no collision):</p>\n\n<p><code>hits = $(\"#collider\").collision(\".obstacles\");</code></p>\n\n<p>Or to get a collision event during \"dragging\", use this:</p>\n\n<p><a href=\"http://sourceforge.net/apps/mediawiki/jquidragcollide/?source=navbar#collision\" rel=\"nofollow\">http://sourceforge.net/apps/mediawiki/jquidragcollide/?source=navbar#collision</a></p>\n\n<p>Which gives you a \"collision\" event to connect to. (Or a \"protrusion\" event, to see if a div escapes another div that currently contains it.)</p>\n\n<pre><code>$(draggable).bind( \n   \"collision\",\n   function(event,ui) {\n      ...\n   }\n);\n</code></pre>\n\n<p>If you are checking collisions during motion other than dragging, just call the original repeatedly, it's pretty quick. Note: the dragging one doesn't play nicely with resizing.</p>\n",
                    "is_accepted": false,
                    "score": 3
                },
                {
                    "body": "<p>Well I had the same problem but thanks to the answer of Oscar Godson I got a function that works. I used Jquery for easy coding and because i'm lazy ;p. I put the function in a other function that is fired every second so keep that in mind.</p>\n\n<pre><code>function collidesWith (element1, element2) {\n    var Element1;\n    var Element2;\n\n    Element1.top = $(element1).offset().top;\n    Element1.left = $(element1).offset().left;\n    Element1.right = Number($(element1).offset().left) + Number($(element1).width());\n    Element1.bottom = Number($(element1).offset().top) + Number($(element1).height());\n\n    Element2.top = $(element2).offset().top;\n    Element2.left = $(element2).offset().left;\n    Element2.right = Number($(element2).offset().left) + Number($(element2).width());\n    Element2.bottom = Number($(element2).offset().top) + Number($(element2).height());\n\n    if (Element1.right &gt; Element2.left &amp;&amp; Element1.left &lt; Element2.right &amp;&amp; Element1.top &lt; Element2.bottom &amp;&amp; Element1.bottom &gt; Element2.top) {\n        // Do your stuff here\n    }\n}\n</code></pre>\n\n<p>What it does is basically it gets all the values of <code>element1</code> and then get all the values of <code>element2</code>. Then with the help of some calculations it figures out all the values. Then in the <code>if</code> statement it compares the square of <code>element1</code> to the square of <code>element2</code>. If the values of <code>element1</code> are between the left, right, top and bottom values of <code>element2</code>. If that is true the code in the bottom is executed.</p>\n",
                    "is_accepted": false,
                    "score": 2
                }
            ],
            "body": "<p>I'm looking for a dead simple way to detect if two <code>&lt;div&gt;</code> elements (with class 'car' and 'player' respectively) have collided, and if so to trigger an event. The two divs are simple coloured boxes travelling perpendicular to each other, so no complicated shapes or angles (take a look here to get an idea of what I'm making <a href=\"http://chris-armstrong.com/late\">http://chris-armstrong.com/late</a>)</p>\n\n<p>What would be the best way to go about this? Do I need to use a library or is there simple enough code that would do the trick?</p>\n\n<p>Appreciate any help you can offer!</p>\n",
            "last_activity_date": 1425479475,
            "question_id": 4230029,
            "score": 41,
            "tags": [
                "javascript",
                "jquery",
                "html",
                "collision-detection"
            ],
            "title": "jQuery/Javascript collision detection"
        },
        {
            "answer_count": 4,
            "answers": [
                {
                    "body": "<p>I'm going to wager that it's something funky going on with the parseInt's 2nd parameter, the radix.  Why it is breaking with the use of Array.map and not when you call it directly, I do not know.</p>\n\n<pre><code>//  Works fine\nparseInt( 4 );\nparseInt( 9 );\n\n//  Breaks!  Why?\n[1,4,9].map( parseInt );\n\n//  Fixes the problem\n[1,4,9].map( function( num ){ return parseInt( num, 10 ) } );\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 5
                },
                {
                    "body": "<p>The callback function in <code>Array.map</code> has three parameters:</p>\n\n<p>From the same <a href=\"https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Objects/Array/map\">Mozilla page</a> that you linked to:</p>\n\n<blockquote>\n  <p>callback is invoked with three arguments: the value of the element, the index of the element, and the Array object being traversed.\"</p>\n</blockquote>\n\n<p>So if you call a function which actually expects two arguments, the second argument will be the index of the element.</p>\n\n<p>In this case, you ended up calling <code>parseInt</code> with radix 0, 1 and 2 in turn.  The first is the same as not supplying the parameter, so it defaulted to base 10.  Base 1 is an impossible number base, and 3 is not a valid number in base 2:</p>\n\n<pre><code>parseInt('1', 0); // OK - gives 1\nparseInt('2', 1); // FAIL - 1 isn't a legal radix\nparseInt('3', 2); // FAIL - 3 isn't legal in base 2 \n</code></pre>\n",
                    "is_accepted": true,
                    "score": 177
                },
                {
                    "body": "<p>Quick fix:                          </p>\n\n<pre><code>['10', '10', '10', '10', '10'].map(parseInt.bind(null, 10))\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 3
                },
                {
                    "body": "<p><code>map</code> is passing along a 2nd argument, which is (in many of the cases) messing up <code>parseInt</code>'s radix parameter.</p>\n\n<p>If you're using underscore you can do:</p>\n\n<p><code>['10','1','100'].map(_.partial(parseInt, _, 10))</code></p>\n\n<p>Or without underscore:</p>\n\n<p><code>['10','1','100'].map(function(x) { return parseInt(x, 10); });</code></p>\n",
                    "is_accepted": false,
                    "score": 1
                }
            ],
            "body": "<p>From the <a href=\"https://developer.mozilla.org/En/Core_JavaScript_1.5_Reference:Objects:Array:map\">Mozilla Dev Site</a>:</p>\n\n<pre><code>[1,4,9].map(Math.sqrt)\n</code></pre>\n\n<p>will yield:</p>\n\n<pre><code>[1,2,3]\n</code></pre>\n\n<p>Why then does this:</p>\n\n<pre><code>['1','2','3'].map(parseInt)\n</code></pre>\n\n<p>yield this:</p>\n\n<pre><code>[1, NaN, NaN]\n</code></pre>\n\n<p>I have tested in Firefox 3.0.1 and Chrome 0.3 and just as a disclaimer, I know this is not cross-browser functionality.  (No IE)</p>\n\n<p>[edit]\nI found out that the following will accomplish the desired effect.  However, it still doesn't explain the errant behavior of <strong>parseInt</strong>.</p>\n\n<pre><code>['1','2','3'].map(function(i){return +i;}) // returns [1,2,3]\n</code></pre>\n",
            "last_activity_date": 1415663642,
            "question_id": 262427,
            "score": 83,
            "tags": [
                "javascript"
            ],
            "title": "javascript - Array#map and parseInt"
        },
        {
            "answer_count": 9,
            "answers": [
                {
                    "body": "<p>The newer <a href=\"https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/slice\">array.slice</a> method can extract a slice from the beginning, middle, or end of an array for whatever purposes you require.</p>\n\n<pre><code>var i,j,temparray,chunk = 10;\nfor (i=0,j=array.length; i&lt;j; i+=chunk) {\n    temparray = array.slice(i,i+chunk);\n    // do whatever\n}\n</code></pre>\n",
                    "is_accepted": true,
                    "score": 98
                },
                {
                    "body": "<p>EDIT: @mblase75 added more concise code to the earlier answer while I was writing mine, so I recommend going with his solution.</p>\n\n<p>You could use code like this:</p>\n\n<pre><code>var longArray = [\"Element 1\",\"Element 2\",\"Element 3\", /*...*/];\nvar smallerArrays = []; // will contain the sub-arrays of 10 elements each\nvar arraySize = 10;\nfor (var i=0;i&lt;Math.ceil(longArray.length/arraySize);i++) {\n    smallerArrays.push(longArray.slice(i*arraySize,i*arraySize+arraySize));\n}\n</code></pre>\n\n<p>Change the value of <code>arraySize</code> to change the maximum length of the smaller arrays.</p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>Modified from an answer by dbaseman: <a href=\"http://stackoverflow.com/a/10456344/711085\">http://stackoverflow.com/a/10456344/711085</a></p>\n\n<pre><code>Array.prototype.chunk = function(chunkSize) {\n    var array=this;\n    return [].concat.apply([],\n        array.map(function(elem,i) {\n            return i%chunkSize ? [] : [array.slice(i,i+chunkSize)];\n        })\n    );\n}\n</code></pre>\n\n<p>Demo:</p>\n\n<pre><code>&gt; [1,2,3,4,5,6,7].chunk(3)\n[[1,2,3],[4,5,6],[7]]\n</code></pre>\n\n<hr>\n\n<p><em>minor addendum</em>:</p>\n\n<p>I should point out that the above is a not-that-elegant (in my mind) functional programming workaround. It basically does the following, where ~ is concatenation:</p>\n\n<pre><code>[[1,2,3]]~[]~[]~[] ~ [[4,5,6]]~[]~[]~[] ~ [[7]]\n</code></pre>\n\n<p>It has the same asymptotic running time as the method below, but perhaps a worse constant factor due to building empty lists. One could rewrite this as follows (mostly the same as Blazemonger's method, which is why I did not originally submit this answer):</p>\n\n<pre><code>Array.prototype.chunk = function(chunkSize) {\n    var R = [];\n    for (var i=0; i&lt;this.length; i+=chunkSize)\n        R.push(this.slice(i,i+chunkSize));\n    return R;\n}\n</code></pre>\n\n<hr>\n\n<p>[editing this answer because this question has inappropriately been marked a duplicate]</p>\n\n<p>alternatively you could do:</p>\n\n<pre><code>Array.range = function(n) {\n  // Array.range(5) --&gt; [0,1,2,3,4]\n  return Array.apply(null,Array(n)).map(function(x,i){return i})\n};\n\nObject.defineProperty(Array.prototype, 'chunk', {\n  value: function(n) {\n\n    // ACTUAL CODE FOR CHUNKING ARRAY:\n    return Array.range(Math.ceil(this.length/n)).map(function(x,i){\n      return this.slice(i*n,i*n+n);\n    }.bind(this));\n\n  }\n});\n</code></pre>\n\n<p>Demo:</p>\n\n<pre><code>&gt; JSON.stringify( Array.range(10).chunk(3) );\n[[1,2,3],[4,5,6],[7,8,9],[10]]\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 59
                },
                {
                    "body": "<p>Old question: New answer! I actually was working with an answer from this question and had a friend improve on it! So here it is: </p>\n\n<pre><code>Array.prototype.chunk = function ( n ) {\n    if ( !this.length ) {\n        return [];\n    }\n    return [ this.slice( 0, n ) ].concat( this.slice(n).chunk(n) );\n};\n\n[1,2,3,4,5,6,7,8,9,0].chunk(3);\n&gt; [[1,2,3],[4,5,6],[7,8,9],[0]]\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 5
                },
                {
                    "body": "<p>Try to avoid mucking with native prototypes, including Array.prototype, if you don't know who will be consuming your code (3rd parties, coworkers, yourself at a later date, etc.).</p>\n\n<p>There are ways to safely extend prototypes (but not in all browsers) and there are ways to safely consume objects created from extended prototypes, but a better rule of thumb is to follow the <a href=\"http://en.wikipedia.org/wiki/Principle_of_least_astonishment\">Principle of Least Surprise</a> and avoid these practices altogether.</p>\n\n<p>If you have some time, watch Andrew Dupont's JSConf 2011 talk, <a href=\"http://blip.tv/jsconf/jsconf2011-andrew-dupont-everything-is-permitted-extending-built-ins-5211542\">\"Everything is Permitted: Extending Built-ins\"</a>, for a good discussion about this topic. </p>\n\n<p>But back to the question, while the solutions above will work, they are overly complex and requiring unnecessary computational overhead. Here is my solution:</p>\n\n<pre><code>function chunk (arr, len) {\n\n  var chunks = [],\n      i = 0,\n      n = arr.length;\n\n  while (i &lt; n) {\n    chunks.push(arr.slice(i, i += len));\n  }\n\n  return chunks;\n}\n\n// Optionally, you can do the following to avoid cluttering the global namespace:\nArray.chunk = chunk;\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 12
                },
                {
                    "body": "<p>I'd prefer to use <a href=\"https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/splice\">splice</a> method:</p>\n\n<pre><code>var chunks = function(array, size) {\n  var results = [];\n  while (array.length) {\n    results.push(array.splice(0, size));\n  }\n  return results;\n};\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 9
                },
                {
                    "body": "<p>Ok, let's start with a fairly tight one:</p>\n\n<pre><code>function chunk(arr, n) {\n    return arr.slice(0,(arr.length+n-1)/n|0).\n           map(function(c,i) { return arr.slice(n*i,n*i+n); });\n}\n</code></pre>\n\n<p>Which is used like this:</p>\n\n<pre><code>chunk([1,2,3,4,5,6,7], 2);\n</code></pre>\n\n<p>Then we have this tight reducer function:</p>\n\n<pre><code>function chunker(p, c, i) {\n    (p[i/this|0] = p[i/this|0] || []).push(c);\n    return p;\n}\n</code></pre>\n\n<p>Which is used like this:</p>\n\n<pre><code>[1,2,3,4,5,6,7].reduce(chunker.bind(3),[]);\n</code></pre>\n\n<p>Since a kitten dies when we bind <code>this</code> to a number, we can do manual currying like this instead:</p>\n\n<pre><code>// Fluent alternative API without prototype hacks.\nfunction chunker(n) {\n   return function(p, c, i) {\n       (p[i/n|0] = p[i/n|0] || []).push(c);\n       return p;\n   };\n}\n</code></pre>\n\n<p>Which is used like this:</p>\n\n<pre><code>[1,2,3,4,5,6,7].reduce(chunker(3),[]);\n</code></pre>\n\n<p>Then the still pretty tight function which does it all in one go:</p>\n\n<pre><code>function chunk(arr, n) {\n    return arr.reduce(function(p, cur, i) {\n        (p[i/n|0] = p[i/n|0] || []).push(cur);\n        return p;\n    },[]);\n}\n\nchunk([1,2,3,4,5,6,7], 3);\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<pre><code>in coffeescript:\n\nb = (a.splice(0, len) while a.length)\n\ndemo \na = [1, 2, 3, 4, 5, 6, 7]\n\nb = (a.splice(0, 2) while a.length)\n[ [ 1, 2 ],\n  [ 3, 4 ],\n  [ 5, 6 ],\n  [ 7 ] ]\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 3
                },
                {
                    "body": "<p>I tested the different answers into jsperf.com. The result is available there: <a href=\"http://jsperf.com/chunk-mtds\" rel=\"nofollow\">http://jsperf.com/chunk-mtds</a></p>\n\n<p>And the fastest functio (and that works from IE8) is this one:</p>\n\n<pre><code>function chunk(arr, chunkSize) {\n  var R = [];\n  for (var i=0,len=arr.length; i&lt;len; i+=chunkSize)\n    R.push(arr.slice(i,i+chunkSize));\n  return R;\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 3
                }
            ],
            "body": "<p>Let's say that I have an Javascript array looking as following:  </p>\n\n<pre><code>[\"Element 1\",\"Element 2\",\"Element 3\",...]; // with close to a hundred elements.\n</code></pre>\n\n<p>What approach would be appropriate to chunk (split) the array into many smaller arrays with, lets say, 10 elements at its most?</p>\n",
            "last_activity_date": 1414476735,
            "question_id": 8495687,
            "score": 63,
            "tags": [
                "javascript",
                "arrays",
                "split"
            ],
            "title": "Split array into chunks"
        },
        {
            "answer_count": 4,
            "answers": [
                {
                    "body": "<p>Here's a <a href=\"http://aspalliance.com/895_Understanding_the_JavaScript___doPostBack_Function\">brief tutorial</a> on how <code>__doPostBack()</code> works.</p>\n\n<p>To be honest, I don't use it much; at least directly. Many server controls, (e.g., <code>Button</code>, <code>LinkButton</code>, <code>ImageButton</code>, parts of the <code>GridView</code>, etc.) use <code>__doPostBack</code> as their post back mechanism; <code>__doPostBack()</code> is often beneath my notice as a development concern.</p>\n",
                    "is_accepted": false,
                    "score": 7
                },
                {
                    "body": "<p>You can try this in your web form with a button called btnSave for example:</p>\n\n<pre><code>&lt;input type=\"button\" id=\"btnSave\" onclick=\"javascript:SaveWithParameter('Hello Michael')\" value=\"click me\"/&gt;\n\n&lt;script type=\"text/javascript\"&gt;\nfunction SaveWithParameter(parameter)\n{\n  __doPostBack('btnSave', parameter)\n}\n&lt;/script&gt;\n</code></pre>\n\n<p>And in your code behind add something like this to read the value and operate upon it:</p>\n\n<pre><code>public void Page_Load(object sender, EventArgs e)\n{\n  string parameter = Request[\"__EVENTARGUMENT\"]; // parameter\n  // Request[\"__EVENTTARGET\"]; // btnSave\n}\n</code></pre>\n\n<p>Give that a try and let us know if that worked for you.</p>\n",
                    "is_accepted": false,
                    "score": 69
                },
                {
                    "body": "<p>This is also a good way to get server-side controls to postback inside <strong>FancyBox and/or jQuery Dialog</strong>.\nFor example, in FancyBox-div:</p>\n\n<pre><code>   &lt;asp:Button OnClientClick=\"testMe('param1');\" ClientIDMode=\"Static\"  ID=\"MyButton\"  runat=\"server\" Text=\"Ok\" &gt;\n&lt;/asp:Button&gt;\n</code></pre>\n\n<p>JavaScript:</p>\n\n<pre><code>function testMe(params) {\n    var btnID= '&lt;%=MyButton.ClientID %&gt;';          \n    __doPostBack(btnID, params);\n}\n</code></pre>\n\n<p>Server-side Page_Load:</p>\n\n<pre><code> string parameter = Request[\"__EVENTARGUMENT\"];\n if (parameter == \"param1\")\n     MyButton_Click(sender, e);\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 6
                },
                {
                    "body": "<p>try this </p>\n\n<p>pass a parameter to c# function</p>\n\n<pre><code>&lt; a href=\"#\" onclick=\"__doPostBack('','Fill_prs_main_data;\n&lt;%#Eval(\"prs_idno\")%&gt;')\" &gt;\n\n\n        string parameter = Request[\"__EVENTARGUMENT\"];\n        if (parameter != null &amp;&amp; !parameter.Equals(\"\"))\n        {\n            string function = parameter.Split(';')[0];\n            string para = parameter.Split(';')[1];\n\n            if (function.Equals(\"Fill_prs_main_data\"))\n            {\n                Fill_prs_main_data(parameter.Split(';')[1]);\n            }\n        }\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                }
            ],
            "body": "<p>I'm trying to create an asyncrhonous postback in asp.net using __doPostBack(), but I have no idea how to do it.  I want to use vanilla javascript.</p>\n\n<p>Something simple like a button click can cause the __doPostBack() event to fire.  I'm just trying to learn how the mechanism works.</p>\n",
            "last_activity_date": 1408356189,
            "question_id": 3591634,
            "score": 61,
            "tags": [
                "c#",
                "javascript",
                "asp.net",
                "postback"
            ],
            "title": "How to use __doPostBack()"
        },
        {
            "answer_count": 13,
            "answers": [
                {
                    "body": "<p>You may take a look at <a href=\"http://poeticcode.wordpress.com/2007/10/03/innerhtml-and-script-tags/\" rel=\"nofollow\">this post</a>. The code might look like this:</p>\n\n<pre><code>var actualDivToBeUpdated = document.getElementById('test');\nvar div = document.createElement('div');\ndiv.innerHTML = '&lt;script type=\"text/javascript\"&gt;alert(\"test\");&lt;\\/script&gt;';\nvar children = div.childNodes;\nactualDivToBeUpdated.innerHTML = '';\nfor(var i = 0; i &lt; children.length; i++) {\n    actualDivToBeUpdated.appendChild(children[i]);\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>You should not use the innerHTML property but rather the appendChild method of the Node: a node in a document tree  [HTML DOM]. This way you are able to later call your injected code.</p>\n\n<p>Make sure that you understand that <code>node.innerHTML</code> <em>is not the same as</em> <code>node.appendChild</code>. You might want to spend some time on the Javascript Client Reference for more details and the DOM.  Hope the following helps...</p>\n\n<p>Sample injection works:</p>\n\n<pre><code>&lt;html&gt;\n&lt;head&gt;\n&lt;title&gt;test&lt;/title&gt;\n&lt;script language=\"javascript\" type=\"text/javascript\"&gt;\n    function doOnLoad(){\n        addScript('inject',\"function foo(){ alert('injected'); }\");\n    }\n\n\n    function addScript(inject,code){\n        var _in = document.getElementById('inject');\n        var scriptNode = document.createElement('script');\n        scriptNode.innerHTML = code;\n        _in.appendChild(scriptNode);\n    }\n\n&lt;/script&gt;\n&lt;/head&gt;\n&lt;body onload=\"doOnLoad();\"&gt;\n    &lt;div id=\"header\"&gt;some content&lt;/div&gt;\n    &lt;div id=\"inject\"&gt;&lt;/div&gt;\n    &lt;input type=\"button\" onclick=\"foo(); return false;\" value=\"Test Injected\" /&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>regards,</p>\n",
                    "is_accepted": false,
                    "score": -1
                },
                {
                    "body": "<p>Try this snippet:</p>\n\n<pre><code>function stripAndExecuteScript(text) {\n    var scripts = '';\n    var cleaned = text.replace(/&lt;script[^&gt;]*&gt;([\\s\\S]*?)&lt;\\/script&gt;/gi, function(){\n        scripts += arguments[1] + '\\n';\n        return '';\n    });\n\n    if (window.execScript){\n        window.execScript(scripts);\n    } else {\n        var head = document.getElementsByTagName('head')[0];\n        var scriptElement = document.createElement('script');\n        scriptElement.setAttribute('type', 'text/javascript');\n        scriptElement.innerText = scripts;\n        head.appendChild(scriptElement);\n        head.removeChild(scriptElement);\n    }\n    return cleaned;\n};\n\n\nvar scriptString = '&lt;scrip' + 't + type=\"text/javascript\"&gt;alert(\\'test\\');&lt;/scr' + 'ipt&gt;&lt;strong&gt;test&lt;/strong&gt;';\ndocument.getElementById('element').innerHTML = stripAndExecuteScript(scriptString);\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 7
                },
                {
                    "body": "<p>The OP's script doesn't work in IE 7. With help from SO, here's a script that does:</p>\n\n<pre><code>exec_body_scripts: function(body_el) {\n  // Finds and executes scripts in a newly added element's body.\n  // Needed since innerHTML does not run scripts.\n  //\n  // Argument body_el is an element in the dom.\n\n  function nodeName(elem, name) {\n    return elem.nodeName &amp;&amp; elem.nodeName.toUpperCase() ===\n              name.toUpperCase();\n  };\n\n  function evalScript(elem) {\n    var data = (elem.text || elem.textContent || elem.innerHTML || \"\" ),\n        head = document.getElementsByTagName(\"head\")[0] ||\n                  document.documentElement,\n        script = document.createElement(\"script\");\n\n    script.type = \"text/javascript\";\n    try {\n      // doesn't work on ie...\n      script.appendChild(document.createTextNode(data));      \n    } catch(e) {\n      // IE has funky script nodes\n      script.text = data;\n    }\n\n    head.insertBefore(script, head.firstChild);\n    head.removeChild(script);\n  };\n\n  // main section of function\n  var scripts = [],\n      script,\n      children_nodes = body_el.childNodes,\n      child,\n      i;\n\n  for (i = 0; children_nodes[i]; i++) {\n    child = children_nodes[i];\n    if (nodeName(child, \"script\" ) &amp;&amp;\n      (!child.type || child.type.toLowerCase() === \"text/javascript\")) {\n          scripts.push(child);\n      }\n  }\n\n  for (i = 0; scripts[i]; i++) {\n    script = scripts[i];\n    if (script.parentNode) {script.parentNode.removeChild(script);}\n    evalScript(scripts[i]);\n  }\n};\n</code></pre>\n",
                    "is_accepted": true,
                    "score": 12
                },
                {
                    "body": "<p>@phidah... Here is a very interesting solution to your problem:\n<a href=\"http://24ways.org/2005/have-your-dom-and-script-it-too\">http://24ways.org/2005/have-your-dom-and-script-it-too</a></p>\n\n<p>So it would look like this instead:</p>\n\n<p><code>&lt;img src=\"empty.gif\" onload=\"alert('test');this.parentNode.removeChild(this);\" /&gt;</code></p>\n",
                    "is_accepted": false,
                    "score": 9
                },
                {
                    "body": "<p><code>scriptNode.innerHTML = code</code> didn't work for IE. The only thing to do is replace with <code>scriptNode.text = code</code> and it work fine</p>\n",
                    "is_accepted": false,
                    "score": 3
                },
                {
                    "body": "<pre><code>function insertHtml(id, html)  \n{  \n   var ele = document.getElementById(id);  \n   ele.innerHTML = html;  \n   var codes = ele.getElementsByTagName(\"script\");   \n   for(var i=0;i&lt;codes.length;i++)  \n   {  \n       eval(codes[i].text);  \n   }  \n}  \n</code></pre>\n\n<p>It works in Chrome in my project</p>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>Thanks to Larry's script, which worked perfectly well in IE10, this is what I've used:</p>\n\n<pre><code>$('#' + id)[0].innerHTML = result;\n$('#' + id + \" script\").each(function() { this.text = this.text || $(this).text();} );\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>It's easier to use jquery <code>$(parent).html(code)</code> instead of <code>parent.innerHTML = code</code>:</p>\n\n<pre><code>var oldDocumentWrite = document.write;\nvar oldDocumentWriteln = document.writeln;\ntry {\n    document.write = function(code) {\n        $(parent).append(code);\n    }\n    document.writeln = function(code) {\n        document.write(code + \"&lt;br/&gt;\");\n    }\n    $(parent).html(html); \n} finally {\n    $(window).load(function() {\n        document.write = oldDocumentWrite\n        document.writeln = oldDocumentWriteln\n    })\n}\n</code></pre>\n\n<p>This also works with scripts that use <code>document.write</code> and scripts loaded via <code>src</code> attribute. Unfortunately even this doesn't work with Google AdSense scripts.</p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>Try function eval().</p>\n\n<pre><code>data.newScript = '&lt;script type=\"text/javascript\"&gt;//my script...&lt;/script&gt;'\nvar element = document.getElementById('elementToRefresh');\nelement.innerHTML = data.newScript;\neval(element.firstChild.innerHTML);\n</code></pre>\n\n<p>This is a real example from a project that i am developing.\nThanks to this <a href=\"http://stackoverflow.com/a/939343/2835520\">post</a></p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>Extending off of Larry's.  I made it recursively search the entire block and children nodes.<br>\nThe script now will also call external scripts that are specified with src parameter.\nScripts are appended to the head instead of inserted and placed in the order they are found. So specifically order scripts are preserved.  And each script is executed synchronously similar to how the browser handles the initial DOM loading.  So if you have a script block that calls jQuery from a CDN and than the next script node uses jQuery... No prob!  Oh and I tagged the appended scripts with a serialized id based off of what you set in the tag parameter so you can find what was added by this script.</p>\n\n<pre><code>exec_body_scripts: function(body_el, tag) {\n    // Finds and executes scripts in a newly added element's body.\n    // Needed since innerHTML does not run scripts.\n    //\n    // Argument body_el is an element in the dom.\n\n    function nodeName(elem, name) {\n        return elem.nodeName &amp;&amp; elem.nodeName.toUpperCase() ===\n              name.toUpperCase();\n    };\n\n    function evalScript(elem, id, callback) {\n        var data = (elem.text || elem.textContent || elem.innerHTML || \"\" ),\n            head = document.getElementsByTagName(\"head\")[0] ||\n                      document.documentElement;\n\n        var script = document.createElement(\"script\");\n        script.type = \"text/javascript\";\n        if (id != '') {\n            script.setAttribute('id', id);\n        }\n\n        if (elem.src != '') {\n            script.src = elem.src;\n            head.appendChild(script);\n            // Then bind the event to the callback function.\n            // There are several events for cross browser compatibility.\n            script.onreadystatechange = callback;\n            script.onload = callback;\n        } else {\n            try {\n                // doesn't work on ie...\n                script.appendChild(document.createTextNode(data));      \n            } catch(e) {\n                // IE has funky script nodes\n                script.text = data;\n            }\n            head.appendChild(script);\n            callback();\n        }\n    };\n\n    function walk_children(node) {\n        var scripts = [],\n          script,\n          children_nodes = node.childNodes,\n          child,\n          i;\n\n        if (children_nodes === undefined) return;\n\n        for (i = 0; i&lt;children_nodes.length; i++) {\n            child = children_nodes[i];\n            if (nodeName(child, \"script\" ) &amp;&amp;\n                (!child.type || child.type.toLowerCase() === \"text/javascript\")) {\n                scripts.push(child);\n            } else {\n                var new_scripts = walk_children(child);\n                for(j=0; j&lt;new_scripts.length; j++) {\n                    scripts.push(new_scripts[j]);\n                }\n            }\n        }\n\n        return scripts;\n    }\n\n    var i = 0;\n    function execute_script(i) {\n        script = scripts[i];\n        if (script.parentNode) {script.parentNode.removeChild(script);}\n        evalScript(scripts[i], tag+\"_\"+i, function() {\n            if (i &lt; scripts.length-1) {\n                execute_script(++i);\n            }                \n        });\n    }\n\n    // main section of function\n    if (tag === undefined) tag = 'tmp';\n\n    var scripts = walk_children(body_el);\n\n    execute_script(i);\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>Just do:</p>\n\n<pre><code>document.body.innerHTML = '&lt;img src=\"../images/loaded.gif\" alt=\"\" onload=\"alert(\\'test\\');this.parentNode.removeChild(this);\" /&gt;';\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>Here's a shorter, more efficient script that also works for scripts with the <code>src</code> property:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>function insertAndExecute(id, text) {\n    document.getElementById(id).innerHTML = text;\n    var scripts = document.getElementById(id).getElementsByTagName(\"script\");\n    for (var i = 0; i &lt; scripts.length; i++) {\n        if (scripts[i].src != \"\") {\n            var tag = document.createElement(\"script\");\n            tag.src = scripts[i].src;\n            document.getElementsByTagName(\"head\")[0].appendChild(tag);\n        }\n        else {\n            eval(scripts[i].innerHTML);\n        }\n    }\n}\n</code></pre>\n\n<p>Note: whilst <code>eval</code> may cause a security vulnerability if not used properly, it is <strong>much</strong> faster than creating a script tag on the fly. If someone finds a vulnerability in my teeny tiny code, please edit/comment</p>\n",
                    "is_accepted": false,
                    "score": 1
                }
            ],
            "body": "<p>I've got a script that inserts some content into an element using <code>innerHTML</code>.</p>\n\n<p>The content could for example be:</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;alert('test');&lt;/script&gt;\n&lt;strong&gt;test&lt;/strong&gt;\n</code></pre>\n\n<p>Problem is that the code inside the <code>&lt;script&gt;</code> tag doesn't get executed.\nI googled it a bit but there were no apparent solutions. If I inserted the content using jQuery <code>$(element).append(content);</code>the script parts got <code>eval</code>'d before being injected into the DOM.</p>\n\n<p>Has anyone got a snippet of code that executes all the <code>&lt;script&gt;</code> elements? The jQuery code was a bit complex so I couldn't really figure out how it was done.</p>\n\n<p><strong>Edit</strong>:</p>\n\n<p>By peeking into the jQuery code I've managed to figure out how jQuery does it, which resulted in the following code:</p>\n\n<pre><code>Demo:\n&lt;div id=\"element\"&gt;&lt;/div&gt;\n\n&lt;script type=\"text/javascript\"&gt;\n  function insertAndExecute(id, text)\n  {\n    domelement = document.getElementById(id);\n    domelement.innerHTML = text;\n    var scripts = [];\n\n    ret = domelement.childNodes;\n    for ( var i = 0; ret[i]; i++ ) {\n      if ( scripts &amp;&amp; nodeName( ret[i], \"script\" ) &amp;&amp; (!ret[i].type || ret[i].type.toLowerCase() === \"text/javascript\") ) {\n            scripts.push( ret[i].parentNode ? ret[i].parentNode.removeChild( ret[i] ) : ret[i] );\n        }\n    }\n\n    for(script in scripts)\n    {\n      evalScript(scripts[script]);\n    }\n  }\n  function nodeName( elem, name ) {\n    return elem.nodeName &amp;&amp; elem.nodeName.toUpperCase() === name.toUpperCase();\n  }\n  function evalScript( elem ) {\n    data = ( elem.text || elem.textContent || elem.innerHTML || \"\" );\n\n    var head = document.getElementsByTagName(\"head\")[0] || document.documentElement,\n    script = document.createElement(\"script\");\n    script.type = \"text/javascript\";\n    script.appendChild( document.createTextNode( data ) );\n    head.insertBefore( script, head.firstChild );\n    head.removeChild( script );\n\n    if ( elem.parentNode ) {\n        elem.parentNode.removeChild( elem );\n    }\n  }\n\n  insertAndExecute(\"element\", \"&lt;scri\"+\"pt type='text/javascript'&gt;document.write('This text should appear as well.')&lt;/scr\"+\"ipt&gt;&lt;strong&gt;this text should also be inserted.&lt;/strong&gt;\");\n&lt;/script&gt;\n</code></pre>\n",
            "last_activity_date": 1415025074,
            "question_id": 2592092,
            "score": 29,
            "tags": [
                "javascript",
                "dom",
                "eval",
                "innerhtml"
            ],
            "title": "Executing &lt;script&gt; elements inserted with .innerHTML"
        },
        {
            "answer_count": 3,
            "answers": [
                {
                    "body": "<p>The ideal solution would be to have a combination of both feature and browser detection. The former falls down because of the points you mentioned and the latter because sometimes browsers publish false information to \"make things work\" just so.</p>\n\n<p>Mozilla has a great <a href=\"https://developer.mozilla.org/en/Browser%5FDetection%5Fand%5FCross%5FBrowser%5FSupport\" rel=\"nofollow\">Browser Detection Primer</a> that might be helpful to you as well.</p>\n\n<p>From <a href=\"http://en.wikipedia.org/wiki/User%5Fagent\" rel=\"nofollow\">wikipedia</a>\n\"At various points in its history, use of the Web has been dominated by one browser to the extent that many websites are designed to work only with that particular browser, rather than according to standards from bodies such as the W3C and IETF. Such sites often include \"browser sniffing\" code, which alters the information sent out depending on the User-Agent string received. This can mean that less popular browsers are not sent complex content, even though they might be able to deal with it correctly, or in extreme cases refused all content. Thus various browsers \"cloak\" or \"spoof\" this string, in order to identify themselves as something else to such detection code; often, the browser's real identity is then included later in the string.\"</p>\n",
                    "is_accepted": false,
                    "score": 3
                },
                {
                    "body": "<p><a href=\"http://www.jibbering.com/faq/faq_notes/not_browser_detect.html\">Here's a good article</a> explaining how feature detection is superior in so many ways to browser sniffing.</p>\n\n<p>The truth is that sniffing is extremely fragile. It's fragile in theory, as it relies on an <strong>arbitrary</strong> <code>userAgent</code> string and then practically maps that string to a certain behavior. It's also fragile in practice, as time has shown. Testing every major and minor version of dozens of browsers and trying to parse build numbers of some of those versions is not practical at all; Testing certain behavior for quirks, on the other hand, is much more robust. Feature tests, for example, often catch bugs and inconsistencies that browser vendors incidentally copy from each other.</p>\n\n<p>From my own experience, fixing Prototype.js in IE8, I know that 90% of the problems could have been avoided if we didn't sniff in the first place.</p>\n\n<p>While fixing Prototype.js I discovered that some of the features that need to be tested are actually very common among JS libraries, so I made a little collection of <a href=\"http://kangax.github.com/cft/\">common feature tests</a> for anyone willing to get rid of sniffing.</p>\n",
                    "is_accepted": false,
                    "score": 17
                },
                {
                    "body": "<p>It seems to me browser detection has been widely frowned upon since <a href=\"http://ejohn.org/blog/future-proofing-javascript-libraries/\">this post</a> by Resig a couple of years ago. Resig's comments however were specific to libraries/framework code, i.e. code that will be <em>consumed</em> by other [domain-specific] applications/sites.</p>\n\n<p>I think feature detection is without question a good fit <em>for libraries/frameworks</em>. For domain-specific applications however I'm not so sure browser detection is that bad. It's suitable for working around known browser characteristics that are difficult to feature-detect, or for browsers that have bugs in their implementation of the feature itself. Times that browser detection is appropriate:</p>\n\n<ul>\n<li>sites/applications that are not cross-browser and need to show a warning/dialog/DifferentPage tailoring to that client's browser. This is common in legacy applications.</li>\n<li>Banks or private sites with strict policies on what browsers and versions are supported (to avoid known security exploits that may compromise user's data)</li>\n<li>micro-optimizations: occasionally one browser is ridiculously faster than the others when performing some operation a certain way. It can be advantageous depending on your user base to branch on that particular browser/version.</li>\n<li>Lack of png transparency in IE6</li>\n<li>many display/rendering issues (read: IE css support) that are only witnessed in specific browser versions and you don't actually know what feature to test for.</li>\n</ul>\n\n<p>That said, there are some <a href=\"https://developer.mozilla.org/en/Browser%5FDetection%5Fand%5FCross%5FBrowser%5FSupport\">major pitfalls</a> (probably committed by most of us) to avoid when doing browser detection.</p>\n",
                    "is_accepted": true,
                    "score": 18
                }
            ],
            "body": "<p>I\u2019m going to play a devil's advocate for moment. I have been always wondering why browser detection (as opposed to feature detection) is considered to be a flat out a bad practise. If I test a certain version of certain browser and confirm that that certain functionality behaves is some predicable way then it seems OK to special case it. The reasoning is that it will be future foolproof, because this partial browser version is not going to change. On the other hand, if I detect that a DOM element has a function X, it does not necessarily mean that:</p>\n\n<ol>\n<li>this function works the same way in all browsers, and</li>\n<li>more crucially, it will work the same way even in all future browsers.</li>\n</ol>\n\n<p>I just peeked into the jQuery source and they do feature detection by inserting a carefully constructed snipped of HTML into DOM and then they check it for certain features. It\u2019s a sensible and solid way, but I would say that it would be a bit too heavy if I just did something like this in my little piece of personal JavaScript (without jQuery). They also have the advantage of practically infinite QA resources. On the other hand, what you often see people doing is that they check for the existence of function X, and then based on this, they assume the function will behave certain way in all browsers which have this function.</p>\n\n<p>I\u2019m not saying anything in the sense that feature detection is not a good thing (if used correctly), but I wonder why browser detection is usually immediately dismissed even if it sounds logical. I wonder whether it is another trendy thing to say.</p>\n",
            "last_activity_date": 1360878976,
            "question_id": 1294586,
            "score": 20,
            "tags": [
                "javascript",
                "html",
                "dom",
                "cross-browser"
            ],
            "title": "Browser detection versus feature detection"
        },
        {
            "answer_count": 1,
            "answers": [
                {
                    "body": "<p>Your problem can be simplified to:</p>\n\n<pre><code>/*1.*/ var fourmTabs = [];\n/*2.*/ chrome.tabs.query({}, function(tabs) {\n/*3.*/     fourmTabs[0] = tabs[0];\n/*4.*/ });\n/*5.*/ console.log(fourmTabs[0]);\n</code></pre>\n\n<p>You expect that the <code>fourmTabs</code> array is updated (by line 3) when line 5 is reached.<br>\nThat is <strong>wrong</strong>, because the <code>chrome.tabs.query</code> method is <strong>asynchronous</strong>.</p>\n\n<hr>\n\n<p>In an attempt to make you understand the significance of the asynchronous aspect, I show a code snippet with the same structure as your code <strong>and</strong> a story.</p>\n\n<pre><code>/*1.*/ var rope = null;\n/*2.*/ requestRope(function(receivedRope) {\n/*3.*/     rope = receivedRope;\n/*4.*/ });\n/*5.*/ grab(rope);\n</code></pre>\n\n<ul>\n<li>At line 1, the presence of a rope is announced.  </li>\n<li>At lines 2-4, a <em>callback function</em> is created, which ought to be called by the <code>requestRope</code> function.</li>\n<li>At line 5, you're going to grab the rope via the <code>grab</code> function.</li>\n</ul>\n\n<p>When <code>requestRope</code> is implemented <strong>synchronously</strong>, there's no problem:<br>\n&emsp; You: \"Hi, I want a rope. Please <em>throw the rope</em><sup>\"call the callback function\"</sup> when you've got one.\"<br>\n&emsp; She: \"Sure.\" <em>throws rope</em><br>\n&emsp; You: <em>Jumps and grabs rope</em> - You manage to get at the other side, <em>alive</em>.</p>\n\n<p>When <code>requestRope</code> is implemented <strong>asynchronously</strong>, you may have a problem if you treat it as synchronous:<br>\n&emsp; You: \"Please throw a rope at me.\"<br>\n&emsp; She: \"Sure. Let's have a look...\"<br>\n&emsp; You: <em>Jumps and attempts to grab rope</em> Because there's no rope, you fall and die.<br>\n&emsp; She: <em>Throws rope</em> <sub>Too late, of course.</sub></p>\n\n<hr>\n\n<p>Now you've seen the difference between an asynchronously and synchronously implemented function, let's solve your original question:</p>\n\n<pre><code>var fourmTabs = new Array();\nchrome.tabs.query({}, function (tabs) {\n    for (var i = 0; i &lt; tabs.length; i++) {\n        fourmTabs[i] = tabs[i];\n    }\n    // Moved code inside the callback handler\n    for (var i = 0; i &lt; fourmTabs.length; i++) {\n        if (fourmTabs[i] != null)\n           window.console.log(fourmTabs[i].url);\n        else {\n            window.console.log(\"??\" + i);\n        }\n    }\n});\n// &lt;moved code inside callback function of chrome.tabs.query&gt;\n</code></pre>\n\n<p>With breakpoints, your code works, because by the time that the second part of the code is reached, the callback has already been called.</p>\n",
                    "is_accepted": true,
                    "score": 60
                }
            ],
            "body": "<p>I'm creating (learning) an extension for Google Chrome.</p>\n\n<p>To debug some code, I inserted <code>console.log()</code>, as follows:</p>\n\n<pre><code>var fourmTabs = new Array();\nchrome.tabs.query({}, function (tabs) {\n    for (var i = 0; i &lt; tabs.length; i++) {\n        fourmTabs[i] = tabs[i];\n    }\n});\nfor (var i = 0; i &lt; fourmTabs.length; i++) {\n    if (fourmTabs[i] != null)\n        window.console.log(fourmTabs[i].url);\n    else {\n        window.console.log(\"??\" + i);\n    }\n}\n</code></pre>\n\n<p>It's very simple code: get all tabs info into an array of my own, and print some things.</p>\n\n<p>To check whether the code works as it should, I run the code. Here comes the problem:</p>\n\n<ul>\n<li>When I use breakpoints (via the Developer tools), the code runs fine.</li>\n<li>Without breakpoints, nothing is printed.</li>\n</ul>\n\n<p>Any idea why?</p>\n",
            "last_activity_date": 1380100874,
            "question_id": 11688171,
            "score": 10,
            "tags": [
                "javascript",
                "asynchronous",
                "google-chrome-extension",
                "breakpoints",
                "google-chrome-devtools"
            ],
            "title": "After calling chrome.tabs.query, the results are not available"
        },
        {
            "answer_count": 3,
            "answers": [
                {
                    "body": "<p><code>jQuery.fn</code> is defined shorthand for <code>jQuery.prototype</code>.  From the <a href=\"https://github.com/jquery/jquery/blob/1.7.1/src/core.js#L76\">source code</a>:</p>\n\n<pre><code>jQuery.fn = jQuery.prototype = {\n    // ...\n}\n</code></pre>\n\n<p>That means <code>jQuery.fn.jquery</code> is an alias for <code>jQuery.prototype.jquery</code>, which returns the current jQuery version.  Again from the <a href=\"https://github.com/jquery/jquery/blob/1.7.1/src/core.js#L192\">source code</a>:</p>\n\n<pre><code>// The current version of jQuery being used\njquery: \"@VERSION\",\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 91
                },
                {
                    "body": "<p>In jQuery, the <code>fn</code> property is just an alias to the <code>prototype</code> property.</p>\n\n<p>The <code>jQuery</code> identifier (or <code>$</code>) is just a <em>constructor function</em>, and all instances created with it, inherit from the constructor's prototype.</p>\n\n<p>A simple constructor function:</p>\n\n<pre><code>function Test() {\n  this.a = 'a';\n}\nTest.prototype.b = 'b';\n\nvar test = new Test(); \ntest.a; // \"a\", own property\ntest.b; // \"b\", inherited property\n</code></pre>\n\n<p>A simple structure that resembles the architecture of jQuery:</p>\n\n<pre><code>(function() {\n  var foo = function(arg) { // core constructor\n    // ensure to use the `new` operator\n    if (!(this instanceof foo))\n      return new foo(arg);\n    // store an argument for this example\n    this.myArg = arg;\n    //..\n  };\n\n  // create `fn` alias to `prototype` property\n  foo.fn = foo.prototype = {\n    init: function () {/*...*/}\n    //...\n  };\n\n  // expose the library\n  window.foo = foo;\n})();\n\n// Extension:\n\nfoo.fn.myPlugin = function () {\n  alert(this.myArg);\n  return this; // return `this` for chainability\n};\n\nfoo(\"bar\").myPlugin(); // alerts \"bar\"\n</code></pre>\n",
                    "is_accepted": true,
                    "score": 525
                },
                {
                    "body": "<p><code>fn</code> literally refers to the jquery <code>prototype</code>.</p>\n\n<p>This line of code is in the source code:</p>\n\n<pre><code>jQuery.fn = jQuery.prototype = {\n //list of functions available to the jQuery api\n}\n</code></pre>\n\n<p>But the real tool behind <code>fn</code> is its availability to hook your own functionality into jQuery. Remember that jquery will be the parent scope to your function, so <code>this</code> will refer to the jquery object.</p>\n\n<pre><code>$.fn.myExtension = function(){\n var currentjQueryObject = this;\n //work with currentObject\n return this;//you can include this if you would like to support chaining\n};\n</code></pre>\n\n<p>So here is a simple example of that. Lets say I want to make two extensions, one which puts a blue border, and which colors the text blue, and I want them chained.</p>\n\n<h2><em><strong><a href=\"http://jsfiddle.net/CVrFU/\"><code>jsFiddle Demo</code></a></em></strong></h2>\n\n<pre><code>$.fn.blueBorder = function(){\n this.each(function(){\n  $(this).css(\"border\",\"solid blue 2px\");\n });\n return this;\n};\n$.fn.blueText = function(){\n this.each(function(){\n  $(this).css(\"color\",\"blue\");\n });\n return this;\n};\n</code></pre>\n\n<p>Now you can use those against a class like this:</p>\n\n<pre><code>$('.blue').blueBorder().blueText();\n</code></pre>\n\n<p>(I know this is best done with css such as applying different class names, but please keep in mind this is just a demo to show the concept)</p>\n\n<p><a href=\"http://stackoverflow.com/a/16025232/1026459\">This answer</a> has a good example of a full fledged extension.</p>\n",
                    "is_accepted": false,
                    "score": 58
                }
            ],
            "body": "<p>What does the 'fn' here mean?</p>\n\n<pre><code>window.jQuery.fn.jquery\n</code></pre>\n",
            "last_activity_date": 1399073185,
            "question_id": 4083351,
            "score": 269,
            "tags": [
                "javascript",
                "jquery"
            ],
            "title": "What does jQuery.fn mean?"
        },
        {
            "answer_count": 23,
            "answers": [
                {
                    "body": "<p>Your logic fails if optionalArg is passed, but evaluates as false - try this as an alternative</p>\n\n<pre><code>if (typeof optionalArg === 'undefined') { optionalArg = 'default'; }\n</code></pre>\n\n<p>Or an alternative idiom:</p>\n\n<pre><code>optionalArg = (typeof optionalArg === 'undefined') ? 'default' : optionalArg;\n</code></pre>\n\n<p>Use whichever idiom communicates the intent best to you!</p>\n",
                    "is_accepted": true,
                    "score": 621
                },
                {
                    "body": "<p>You can use some different schemes for that, I've always tested for arguments.length:</p>\n\n<pre><code>function myFunc(requiredArg, optionalArg){\n  optionalArg = myFunc.arguments.length&lt;2 ? 'defaultValue' : optionalArg;\n\n  ...\n</code></pre>\n\n<p>-- doing so, it can't possibly fail, but I don't know if your way has any chance of failing, just now I can't think up a scenario, where it actually would fail ...</p>\n\n<p>Edit:\nAnd then Paul provided one failing scenario !-)</p>\n",
                    "is_accepted": false,
                    "score": 9
                },
                {
                    "body": "<p>If you need to chuck a literal <code>NULL</code> in, then you could have some issues. Apart from that, no, I think you're probably on the right track.</p>\n\n<p>The other method some people choose is taking an assoc array of variables iterating through the argument list. It looks a bit neater but I imagine it's a little (very little) bit more process/memory intensive.</p>\n\n<pre><code>function myFunction (argArray) {\n    var defaults = {\n    \t'arg1'\t:\t\"value 1\",\n    \t'arg2'\t:\t\"value 2\",\n    \t'arg3'\t:\t\"value 3\",\n    \t'arg4'\t:\t\"value 4\"\n    }\n\n    for(var i in defaults) \n    \tif(typeof argArray[i] == \"undefined\") \n        \t   argArray[index] = defaults[i];\n\n    // ...\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 31
                },
                {
                    "body": "<p>Similar to Oli's answer, I use an argument Object and an Object which defines the default values. With a little bit of sugar...</p>\n\n<pre><code>/**\n * Updates an object's properties with other objects' properties. All\n * additional non-falsy arguments will have their properties copied to the\n * destination object, in the order given.\n */\nfunction extend(dest) {\n  for (var i = 1, l = arguments.length; i &lt; l; i++) {\n    var src = arguments[i]\n    if (!src) {\n      continue\n    }\n    for (var property in src) {\n      if (src.hasOwnProperty(property)) {\n        dest[property] = src[property]\n      }\n    }\n  }\n  return dest\n}\n\n/**\n * Inherit another function's prototype without invoking the function.\n */\nfunction inherits(child, parent) {\n  var F = function() {}\n  F.prototype = parent.prototype\n  child.prototype = new F()\n  child.prototype.constructor = child\n  return child\n}\n</code></pre>\n\n<p>...this can be made a bit nicer.</p>\n\n<pre><code>function Field(kwargs) {\n  kwargs = extend({\n    required: true, widget: null, label: null, initial: null,\n    helpText: null, errorMessages: null\n  }, kwargs)\n  this.required = kwargs.required\n  this.label = kwargs.label\n  this.initial = kwargs.initial\n  // ...and so on...\n}\n\nfunction CharField(kwargs) {\n  kwargs = extend({\n    maxLength: null, minLength: null\n  }, kwargs)\n  this.maxLength = kwargs.maxLength\n  this.minLength = kwargs.minLength\n  Field.call(this, kwargs)\n}\ninherits(CharField, Field)\n</code></pre>\n\n<p>What's nice about this method?</p>\n\n<ul>\n<li>You can omit as many arguments as you like - if you only want to override the value of one argument, you can just provide that argument, instead of having to explicitly pass <code>undefined</code> when, say there are 5 arguments and you only want to customise the last one, as you would have to do with some of the other methods suggested.</li>\n<li>When working with a constructor Function for an object which inherits from another, it's easy to accept any arguments which are required by the constructor of the Object you're inheriting from, as you don't have to name those arguments in your constructor signature, or even provide your own defaults (let the parent Object's constructor do that for you, as seen above when <code>CharField</code> calls <code>Field</code>'s constructor).</li>\n<li>Child objects in inheritance hierarchies can customise arguments for their parent constructor as they see fit, enforcing their own default values or ensuring that a certain value will <em>always</em> be used.</li>\n</ul>\n",
                    "is_accepted": false,
                    "score": 12
                },
                {
                    "body": "<p>I find this to be the simplest, most readable way:</p>\n\n<pre><code>if (typeof myVariable === 'undefined') { myVariable = 'default'; }\n//use myVariable here\n</code></pre>\n\n<p>Paul Dixon's answer (in my humble opinion) is less readable than this, but it comes down to preference.</p>\n\n<p>insin's answer is much more advanced, but much more useful for big functions!</p>\n\n<p><strong>EDIT 11/17/2013 9:33pm:</strong> I've created a package for Node.js that makes it easier to \"overload\" functions (methods) called <a href=\"https://npmjs.org/package/parametric\">parametric</a>.</p>\n",
                    "is_accepted": false,
                    "score": 91
                },
                {
                    "body": "<p>Ideally, you would refactor to pass an object and <a href=\"http://stackoverflow.com/questions/171251/?answertab=votes\">merge</a> it with a default object, so the order in which arguments are passed doesn't matter (see the second section of this answer, below).</p>\n\n<p>If, however, you just want something quick, reliable, easy to use and not bulky, try this:</p>\n\n<hr>\n\n<h2>A clean quick fix for any number of default arguments</h2>\n\n<ul>\n<li>It scales elegantly: minimal extra code for each new default</li>\n<li>You can paste it anywhere: just change the number of required args and variables</li>\n<li>If you want to pass <code>undefined</code> to an argument with a default value, this way, the variable is set as <code>undefined</code>. Most other options on this page would replace <code>undefined</code> with the default value.</li>\n</ul>\n\n<p>Here's an example for providing defaults for three optional arguments (with two required  arguments)</p>\n\n<pre><code>function myFunc( requiredA, requiredB,  optionalA, optionalB, optionalC ) {\n\n  switch (arguments.length - 2) { // 2 is the number of required arguments\n    case 0:  optionalA = 'Some default';\n    case 1:  optionalB = 'Another default';\n    case 2:  optionalC = 'Some other default';\n    // no breaks between cases: each case implies the next cases are also needed\n  }\n\n}\n</code></pre>\n\n<p><a href=\"http://jsbin.com/pecorogevi/1/edit\" rel=\"nofollow\"><strong>Simple demo</strong></a>. This is similar to <a href=\"http://stackoverflow.com/a/148933/568458\">roenving's answer</a>, but easily extendible for any number of default arguments, easier to update, and <a href=\"https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments\" rel=\"nofollow\">using <code>arguments</code> not <code>Function.arguments</code></a>.</p>\n\n<hr>\n\n<h2>Passing and merging objects for more flexibility</h2>\n\n<p>The above code, like many ways of doing default arguments, can't pass arguments out of sequence, e.g., passing <code>optionalC</code> but leaving <code>optionalB</code> to fall back to its default. </p>\n\n<p>A good option for that is to pass objects and merge with a default object. This is also good for maintainability (just take care to keep your code readable, so future collaborators won't be left guessing about the possible contents of the objects you pass around).</p>\n\n<p>Example using jQuery. If you don't use jQuery, you could instead use Underscore's <code>_.defaults(object, defaults)</code> or <a href=\"http://stackoverflow.com/questions/171251/?answertab=votes\">browse these options</a>:</p>\n\n<pre><code>function myFunc( args ) {\n  var defaults = {\n    optionalA: 'Some default',\n    optionalB: 'Another default',\n    optionalC: 'Some other default'\n  };\n  args = $.extend({}, defaults, args);\n}\n</code></pre>\n\n<p>Here's <a href=\"http://jsbin.com/yahuqocira/1/edit?html,js,output\" rel=\"nofollow\">a simple example of it in action</a>.</p>\n",
                    "is_accepted": false,
                    "score": 20
                },
                {
                    "body": "<p>If you're using defaults extensively, this seems much more readable:</p>\n\n<pre><code>function usageExemple(a,b,c,d){\n    //defaults\n    a=defaultValue(a,1);\n    b=defaultValue(b,2);\n    c=defaultValue(c,4);\n    d=defaultValue(d,8);\n\n    var x = a+b+c+d;\n    return x;\n}\n</code></pre>\n\n<p>Just declare this function on the global escope.</p>\n\n<pre><code>function defaultValue(variable,defaultValue){\n    return(typeof variable!=='undefined')?(variable):(defaultValue);\n}\n</code></pre>\n\n<p>Usage pattern <code>fruit = defaultValue(fruit,'Apple');</code></p>\n\n<p>*PS you can rename the <code>defaultValue</code> function to a short name, just don't use <code>default</code> it's a reserved word in javascript.</p>\n",
                    "is_accepted": false,
                    "score": 5
                },
                {
                    "body": "<p>ECMAScript 6 draft currently includes the ability to declare default parameter values in the function declaration.</p>\n\n<pre><code>function myFunc(requiredArg, optionalArg = 'defaultValue') {\n    // do stuff\n}\n</code></pre>\n\n<p>But this is currently only supported by Firefox.  See <a href=\"https://developer.mozilla.org/en-US/docs/JavaScript/Reference/default_parameters\">default parameters on MDN</a>.</p>\n",
                    "is_accepted": false,
                    "score": 35
                },
                {
                    "body": "<p>Correct me if I'm wrong, but this seems like the simplest way (for one argument, anyway):</p>\n\n<pre><code>function myFunction(Required,Optional)\n{\n    if (arguments.length&lt;2) Optional = \"Default\";\n    //Your code\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>I suggest you to use <a href=\"https://github.com/zvictor/ArgueJs\" rel=\"nofollow\">ArgueJS</a> this way:</p>\n\n<pre><code>function myFunc(){\n  arguments = __({requiredArg: undefined, optionalArg: [undefined: 'defaultValue'})\n\n  //do stuff, using arguments.requiredArg and arguments.optionalArg\n  //    to access your arguments\n\n}\n</code></pre>\n\n<p>You can also replace <code>undefined</code> by the type of the argument you expect to receive, like this:</p>\n\n<pre><code>function myFunc(){\n  arguments = __({requiredArg: Number, optionalArg: [String: 'defaultValue'})\n\n  //do stuff, using arguments.requiredArg and arguments.optionalArg\n  //    to access your arguments\n\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>Don't know why @Paul's reply is downvoted but the validaition against <code>null</code> is a good choice. May be more affirmative example will make sense better:</p>\n\n<p>In JS a missed parameter is like a declared variable that is not initialized (just var a1;).\nAnd the equality operator converts the undefined to null so this works great with both value \ntypes and objects and this is how CoffeeScript handles optional parameters. </p>\n\n<pre><code>function overLoad(p1){\n    alert(p1 == null); // caution, don't use the strict comparison: === won't work.\n    alert(typeof p1 === 'undefined');\n}\n\noverLoad(); // true, true\noverLoad(undefined); // true, true. Yes, undefined is treated as null for equality operator.\noverLoad(10); // false, false\n\n\nfunction overLoad(p1){\n    if (p1 == null) p1 = 'default value goes here...';\n    //...\n}\n</code></pre>\n\n<p>Though, there are concerns that for the best semantics is <code>typeof variable === 'undefined'</code> is slightly better. I'm not about to defense this since it's the matter of underlying API how a function is implemented, it should not interest the API user.</p>\n\n<p>Should also add that here's the only way to physically make sure any argument were missed, using the <code>in</code> operator which unfortunately won't work with the parameter names so have to pass an index of the <code>arguments</code>.</p>\n\n<pre><code>function foo(a, b) {\n    // Both a and b will evaluate to undefined when used in an expression\n    alert(a); // undefined\n    alert(b); // undefined\n\n    alert(\"0\" in arguments); // true\n    alert(\"1\" in arguments); // false\n}\n\nfoo (undefined); \n</code></pre>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>The test for undefined is unnecessary and isn't as robust as it could be because as user568458 pointed out the solution provided fails if null or false is passed. Users of your API might thing false or null would force the method to avoid that param.</p>\n\n<pre><code>function PaulDixonSolution(required, optionalArg){\n   optionalArg = (typeof optionalArg === \"undefined\") ? \"defaultValue\" : optionalArg;\n   console.log(optionalArg);\n};\nPaulDixonSolution(\"required\");\nPaulDixonSolution(\"required\", \"provided\");\nPaulDixonSolution(\"required\", null);\nPaulDixonSolution(\"required\", false);\n</code></pre>\n\n<p>The result is:</p>\n\n<pre><code>defaultValue\nprovided\nnull\nfalse\n</code></pre>\n\n<p>Those last two are potentially bad. Instead try:</p>\n\n<pre><code>function bulletproof(required, optionalArg){\n   optionalArg = optionalArg ? optionalArg : \"defaultValue\";;\n   console.log(optionalArg);\n};\nbulletproof(\"required\");\nbulletproof(\"required\", \"provided\");\nbulletproof(\"required\", null);\nbulletproof(\"required\", false);\n</code></pre>\n\n<p>Which results in:</p>\n\n<pre><code>defaultValue\nprovided\ndefaultValue\ndefaultValue\n</code></pre>\n\n<p>The only scenario where this isn't optimal is when you actually have optional params that are meant to be booleans or intentional null.</p>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>Those ones are shorter than the typeof operator version.</p>\n\n<pre><code>function foo(a, b) {\n    a !== undefined || (a = 'defaultA');\n    if(b === undefined) b = 'defaultB';\n    ...\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>This is what I ended up with:</p>\n\n<pre><code>function WhoLikesCake(options) {\n  options = options || {};\n  var defaultOptions = {\n    a : options.a || \"Huh?\",\n    b : options.b || \"I don't like cake.\"\n  }\n  console.log('a: ' + defaultOptions.b + ' - b: ' + defaultOptions.b);\n\n  // Do more stuff here ...\n}\n</code></pre>\n\n<p>Called like this:</p>\n\n<pre><code>WhoLikesCake({ b : \"I do\" });\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>In ECMAscript 6 ( the next version of JavaScript) this will be more easier </p>\n\n<p>you can do it in this way</p>\n\n<pre><code>function myFunc(requiredArg, optionalArg='defaultValue'){\n  //do stuff\n}\n</code></pre>\n\n<p>reference: \n<a href=\"http://wiki.ecmascript.org/doku.php?id=harmony:parameter_default_values\" rel=\"nofollow\">http://wiki.ecmascript.org/doku.php?id=harmony:parameter_default_values</a></p>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>I am used to seeing a few basic variations on handling optional variables. Sometimes, the relaxed versions are useful.</p>\n\n<pre><code>function foo(a, b, c) {\n  a = a || \"default\";   // matches 0, \"\", null, undefined, NaN, false.\n  a || (a = \"default\"); // matches 0, \"\", null, undefined, NaN, false.\n\n  if (b == null) { b = \"default\"; } // matches null, undefined. \n\n  if (typeof c === \"undefined\") { c = \"default\"; } // matches undefined.\n}\n</code></pre>\n\n<p>The falsy default used with variable <code>a</code> is, for example, used extensively in backbone.js.</p>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>Some code intel tools, in particular the WebStorm IDE and perhaps jshint, give warnings when you call a function with less arguments than declared:</p>\n\n<pre><code>function foo(a, b) {\n    if (typeof b === 'undefined') {\n        b = 5;\n    }\n    \u2026\n}\n\nfoo(1); /* warning */\n</code></pre>\n\n<p>What you can do instead is this:</p>\n\n<pre><code>function foo(a /*, b */) {\n    var b = arguments.length &gt; 1 ? arguments[1] : 2;\n    \u2026\n}\n\nfoo(1);\n</code></pre>\n\n<p>Note that the <code>b</code> argument is declared in a comment for clarity.</p>\n",
                    "is_accepted": false,
                    "score": -3
                },
                {
                    "body": "<pre><code>function foo(requiredArg){\n  if(arguments.length&gt;1) var optionalArg = arguments[1];\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": -3
                },
                {
                    "body": "<p>Folks -</p>\n\n<p>After looking at these and other solutions, I tried a number of them out using a snippet of code originally from W3Schools as a base.  You can find what works in the following.  Each of the items commented out work as well and are that way to allow you to experiment simply by removing individual comments.  To be clear, it is the \"eyecolor\" parameter that is not being defined.</p>\n\n<pre><code>function person(firstname, lastname, age, eyecolor)\n{\nthis.firstname = firstname;\nthis.lastname = lastname;\nthis.age = age;\nthis.eyecolor = eyecolor;\n// if(null==eyecolor)\n//   this.eyecolor = \"unknown1\";\n//if(typeof(eyecolor)==='undefined') \n//   this.eyecolor = \"unknown2\";\n// if(!eyecolor)\n//   this.eyecolor = \"unknown3\";\nthis.eyecolor = this.eyecolor || \"unknown4\";\n}\n\nvar myFather = new person(\"John\", \"Doe\", 60);\nvar myMother = new person(\"Sally\", \"Rally\", 48, \"green\");\n\nvar elem = document.getElementById(\"demo\");\nelem.innerHTML = \"My father \" +\n              myFather.firstname + \" \" +\n              myFather.lastname + \" is \" +\n              myFather.age + \" with \" +\n              myFather.eyecolor + \" eyes.&lt;br/&gt;\" +\n              \"My mother \" +\n              myMother.firstname + \" \" +\n              myMother.lastname + \" is \" +\n              myMother.age + \" with \" +\n              myMother.eyecolor + \" eyes.\"; \n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>I tried some options mentioned in here and performance tested them.  The typeof is the winner.  And it is a big time winner!<br>\nBe aware of this before you use one of this solutions in all of your functions</p>\n\n<p><a href=\"http://jsperf.com/optional-parameters-typeof-vs-switch/2\" rel=\"nofollow\">http://jsperf.com/optional-parameters-typeof-vs-switch/2</a></p>\n",
                    "is_accepted": false,
                    "score": -1
                },
                {
                    "body": "<p>If you're using the <a href=\"http://underscorejs.org/#defaults\" rel=\"nofollow\">Underscore</a> library (you should, it's an awesome library):</p>\n\n<pre><code>_.defaults(optionalArg, 'defaultValue');\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<pre><code>function Default(variable, new_value)\n{\n    if(new_value === undefined) { return (variable === undefined) ? null : variable; }\n    return (variable === undefined) ? new_value : variable;\n}\n\nvar a = 2, b = \"hello\", c = true, d;\n\nvar test = Default(a, 0),\ntest2 = Default(b, \"Hi\"),\ntest3 = Default(c, false),\ntest4 = Default(d, \"Hello world\");\n\nwindow.alert(test + \"\\n\" + test2 + \"\\n\" + test3 + \"\\n\" + test4);\n</code></pre>\n\n<p><a href=\"http://jsfiddle.net/mq60hqrf/\" rel=\"nofollow\">http://jsfiddle.net/mq60hqrf/</a></p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>This works for me:</p>\n\n<pre><code>function dest(site)\n{\n  if(!site)\n   site=\"angelcool.net\";//default value\n\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 1
                }
            ],
            "body": "<p>I've always handled optional parameters in Javascript like this:</p>\n\n<pre><code>function myFunc(requiredArg, optionalArg){\n  optionalArg = optionalArg || 'defaultValue';\n\n  //do stuff\n\n}\n</code></pre>\n\n<p>Is there a better way to do it?</p>\n\n<p>Are there any cases where using <code>||</code> like that is going to fail?</p>\n",
            "last_activity_date": 1425891416,
            "question_id": 148901,
            "score": 415,
            "tags": [
                "javascript",
                "function",
                "arguments"
            ],
            "title": "Is there a better way to do optional function parameters in Javascript?"
        },
        {
            "answer_count": 18,
            "answers": [
                {
                    "body": "<p>With <em>for (var i in myArray)</em> you can loop over objects too, <em>i</em> will contain the key name and you can access the property via <em>myArray[i]</em>. Additionaly, any methods you will have added to the object will be included in the loop, too, i.e., if you use any external framework like jQuery or prototype, or if you add methods to object prototypes directly, at one point <em>i</em> will point to those methods.</p>\n",
                    "is_accepted": false,
                    "score": 3
                },
                {
                    "body": "<p>I'd use the different methods based on how I wanted to reference the items.</p>\n\n<p>Use foreach if you just want the current item.</p>\n\n<p>Use for if you need an indexer to do relative comparisons. (I.e. how does this compare to the previous/next item?)</p>\n\n<p>I have never noticed a performance difference. I'd wait until having a performance issue before worrying about it.</p>\n",
                    "is_accepted": false,
                    "score": 6
                },
                {
                    "body": "<p>The choice should be based on the which idiom is best understood.</p>\n\n<p>An array is iterated using:</p>\n\n<pre><code>for (var i = 0; i &lt; a.length; i++)\n   //do stuff with a[i]\n</code></pre>\n\n<p>An object being used as an associative array is iterated using:</p>\n\n<pre><code>for (var key in o)\n  //do stuff with o[key]\n</code></pre>\n\n<p>Unless you have earth shattering reasons, stick to the established pattern of usage.</p>\n",
                    "is_accepted": true,
                    "score": 479
                },
                {
                    "body": "<p>there are performance differences depending on what kind of loop you use and on what browser.</p>\n\n<p>For instance:</p>\n\n<pre><code>for (var i = myArray.length-1; i &gt;= 0; i--)\n</code></pre>\n\n<p>is almost twice as fast on some browsers than:</p>\n\n<pre><code>for (var i = 0; i &lt; myArray.length; i++)\n</code></pre>\n\n<p>However unless your arrays are HUGE or you loop them constantly all are fast enough. I seriously doubt that array looping is a bottleneck in your project (or for any other project for that matter)</p>\n",
                    "is_accepted": false,
                    "score": 26
                },
                {
                    "body": "<p>For in loops on Arrays is not compatible with Prototype. If you think you might need to use that library in the future, it would make sense to stick to for loops.</p>\n\n<p><a href=\"http://www.prototypejs.org/api/array\" rel=\"nofollow\">http://www.prototypejs.org/api/array</a></p>\n",
                    "is_accepted": false,
                    "score": 2
                },
                {
                    "body": "<p>I second opinions that you should choose the iteration method according to your need. I would suggest you actually not to <strong>ever</strong> loop through native <code>Array</code> with <code>for in</code> structure. It is way slower <strong>and</strong>, as Chase Seibert pointed at the moment ago, not compatible with Prototype framework.</p>\n\n<p>There is an excellent <a href=\"http://blogs.oracle.com/greimer/entry/best_way_to_code_a\">benchmark on different looping styles that you absolutely should take a look at if you work with JavaScript</a>. Do not do early optimizations, but you should keep that stuff somewhere in the back of your head.</p>\n\n<p>I would use <code>for in</code> to get all properties of an object, which is especially useful when debugging your scripts. For example, I like to have this line handy when I explore unfamiliar object:</p>\n\n<pre><code>l = ''; for (m in obj) { l += m + ' =&gt; ' + obj[m] + '\\n' } console.log(l);\n</code></pre>\n\n<p>It dumps content of the whole object (together with method bodies) to my Firebug log. <strong>Very</strong> handy.</p>\n",
                    "is_accepted": false,
                    "score": 14
                },
                {
                    "body": "<p>Douglas Crockford recommends in <a href=\"http://oreilly.com/catalog/9780596517748/\">JavaScript: The Good Parts</a> (page 24) to avoid using the <code>for in</code> statement. </p>\n\n<p>If you use <code>for in</code> to loop over property names in an object, the results are not ordered. Worse: You might get unexpected results; it includes members inherited from the prototype chain and the name of methods.</p>\n\n<p>Everything but the properties can be filtered out with .hasOwnProperty.  <i>Javascript: The Good Parts</i> presents this code sample which does what you probably wanted originally:</p>\n\n<pre><code>for(var name in obj)\n{\n    if (obj.hasOwnProperty(name))\n    {\n    }\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 144
                },
                {
                    "body": "<p>I have seen problems with the \"for each\" using objects and prototype and arrays</p>\n\n<p>my understanding is that the for each is for properties of objects and NOT arrays</p>\n",
                    "is_accepted": false,
                    "score": 2
                },
                {
                    "body": "<p>here is something i did.</p>\n\n<pre><code>function foreach(o, f) {\n for(var i = 0; i &lt; o.length; i++) { // simple for loop\n  f(o[i], i); // execute a function and make the obj, objIndex available\n }\n}\n</code></pre>\n\n<p>this is how you would use it<br />\nthis will work on arrays and objects( such as a list of HTML elements )</p>\n\n<pre><code>foreach(o, function(obj, i) { // for each obj in o\n  alert(obj); // obj\n  alert(i); // obj index\n  /*\n    say if you were dealing with an html element may be you have a collection of divs\n  */\n  if(typeof obj == 'object') { \n   obj.style.marginLeft = '20px';\n  }\n});\n</code></pre>\n\n<p>I just made this so I'm open to suggestions :)</p>\n",
                    "is_accepted": false,
                    "score": 7
                },
                {
                    "body": "<h2>FYI - jQuery Users</h2>\n\n<p><hr /></p>\n\n<p>jQuery's <code>each(callback)</code> method uses <code>for( ; ; )</code> loop by default, and will use <code>for( in )</code> <em>only</em> if the length is <code>undefined</code>. </p>\n\n<p>Therefore, I would say it is safe to assume the correct order when using this function.</p>\n\n<p><strong>Example</strong>:</p>\n\n<pre><code>$(['a','b','c']).each(function() {\n    alert(this);\n});\n//Outputs \"a\" then \"b\" then \"c\"\n</code></pre>\n\n<p>The downside of using this is that if you're doing some non UI logic, your functions will be less portable to other frameworks. The <code>each()</code> function is probably best reserved for use with jQuery selectors and <code>for( ; ; )</code> might be advisable otherwise.</p>\n\n<p><hr /></p>\n",
                    "is_accepted": false,
                    "score": 59
                },
                {
                    "body": "<p>If you really want to speed up your code, what about that?</p>\n\n<pre><code>for( var i=0,j=null; j=array[i++]; foo(j) );\n</code></pre>\n\n<p>it's kinda of having the while logic within the for statement and it's less redundant. Also firefox has Array.forEach and Array.filter</p>\n",
                    "is_accepted": false,
                    "score": 2
                },
                {
                    "body": "<p>Note that the native Array.forEach method is now <a href=\"http://kangax.github.com/es5-compat-table/\">widely supported</a>.</p>\n",
                    "is_accepted": false,
                    "score": 21
                },
                {
                    "body": "<p>The two are not the same when the array is sparse.</p>\n\n<pre><code>var array = [0, 1, 2, , , 5];\n\nfor (var k in array) {\n  // Not guaranteed by the language spec to iterate in order.\n  alert(k);  // Outputs 0, 1, 2, 5.\n  // Behavior when loop body adds to the array is unclear.\n}\n\nfor (var i = 0; i &lt; array.length; ++i) {\n  // Iterates in order.\n  // i is a number, not a string.\n  alert(i);  // Outputs 0, 1, 2, 3, 4, 5\n  // Behavior when loop body modifies array is clearer.\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 11
                },
                {
                    "body": "<p><strong>Updated answer for 2012</strong> current version of all major browsers - Chrome, Firefox, IE9, Safari and Opera support ES5's native array.forEach.</p>\n\n<p>Unless you have some reason to support IE8 natively (keeping in mind ES5-shim or Chrome frame can be provided to these users, which will provide a proper JS environment), it's cleaner to simply use the language's proper syntax:</p>\n\n<pre><code>myArray.forEach(function(item, index) {\n    console.log(item, index);\n});\n</code></pre>\n\n<p>Full documentation is at MDC, who maintain Javascript: <a href=\"https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/forEach\">https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/forEach</a></p>\n",
                    "is_accepted": false,
                    "score": 19
                },
                {
                    "body": "<p><strong>Using forEach to skip the prototype chain</strong> </p>\n\n<p>Just a quick addendum to <a href=\"http://stackoverflow.com/a/8826575/648802\">@nailer's answer above</a>, using forEach with Object.keys means you can avoid iterating over the prototype chain without having to use hasOwnProperty. </p>\n\n<pre><code>var Base = function () {\n    this.coming = \"hey\";\n};\n\nvar Sub = function () {\n    this.leaving = \"bye\";\n};\n\nSub.prototype = new Base();\nvar tst = new Sub();\n\nfor (var i in tst) {\n    console.log(tst.hasOwnProperty(i) + i + tst[i]);\n}\n\nObject.keys(tst).forEach(function (val) {\n    console.log(val + tst[val]);\n});\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 12
                },
                {
                    "body": "<p>Use the Array().forEach loop to take advantage of parallelism</p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>Watch out!</p>\n\n<p>If you have several script tags and your're searching an information in tag attributes for example, you have to use .length property with a for loop because it isn't a simple array but an HTMLCollection object.</p>\n\n<p><a href=\"https://developer.mozilla.org/en/DOM/HTMLCollection\" rel=\"nofollow\">https://developer.mozilla.org/en/DOM/HTMLCollection</a></p>\n\n<p>If you use the foreach statement for(var i in yourList) it will return proterties and methods of the HTMLCollection in most browsers!</p>\n\n<pre><code>var scriptTags = document.getElementsByTagName(\"script\");\n\nfor(var i = 0; i &lt; scriptTags.length; i++)\nalert(i); // Will print all your elements index (you can get src attribute value using scriptTags[i].attributes[0].value)\n\nfor(var i in scriptTags)\nalert(i); // Will print \"length\", \"item\" and \"namedItem\" in addition to your elements!\n</code></pre>\n\n<p>Even if getElementsByTagName should return a NodeList, most browser are returning an HTMLCollection:\n<a href=\"https://developer.mozilla.org/en/DOM/document.getElementsByTagName\" rel=\"nofollow\">https://developer.mozilla.org/en/DOM/document.getElementsByTagName</a></p>\n",
                    "is_accepted": false,
                    "score": 4
                },
                {
                    "body": "<p>Be careful!!!\nI am using Chrome 22.0 in Mac OS and I am having problem with the for each syntax.</p>\n\n<p>I do not know if this is a browser issue, javascript issue or some error in the code, but it is VERY strange. Outside of the object it works perfectly.</p>\n\n<pre><code>var MyTest = {\n    a:string = \"a\",\n    b:string = \"b\"\n};\n\nmyfunction = function(dicts) {\n    for (var dict in dicts) {\n        alert(dict);\n        alert(typeof dict); // print 'string' (incorrect)\n    }\n\n    for (var i = 0; i &lt; dicts.length; i++) {\n        alert(dicts[i]);\n        alert(typeof dicts[i]); // print 'object' (correct, it must be {abc: \"xyz\"})\n    }\n};\n\nMyObj = function() {\n    this.aaa = function() {\n        myfunction([MyTest]);\n    };\n};\nnew MyObj().aaa(); // This does not work\n\nmyfunction([MyTest]); // This works\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                }
            ],
            "body": "<p>Do you think there is a big difference in for...in and for loops? What kind of \"for\" do you prefer to use and why?</p>\n\n<p>Let's say we have an array of associative arrays:</p>\n\n<pre><code>var myArray = [{'key': 'value'}, {'key': 'value1'}];\n</code></pre>\n\n<p>So we can iterate:</p>\n\n<pre><code>for (var i = 0; i &lt; myArray.length; i++)\n</code></pre>\n\n<p>And:</p>\n\n<pre><code>for (var i in myArray)\n</code></pre>\n\n<p>I don't see a big difference. Are there any performance issues?</p>\n",
            "last_activity_date": 1359727772,
            "question_id": 242841,
            "score": 366,
            "tags": [
                "javascript"
            ],
            "title": "JavaScript for...in vs for"
        },
        {
            "answer_count": 17,
            "answers": [
                {
                    "body": "<p>I think the easiest way is to declare a simple object literal:</p>\n\n<pre><code>var myInstance = {\n  method1: function () {\n    // ...\n  },\n  method2: function () {\n    // ...\n  }\n};\n</code></pre>\n\n<p>If you want private members on your singleton instance, you can do something like this:</p>\n\n<pre><code>var myInstance = (function() {\n  var privateVar = '';\n\n  function privateMethod () {\n    // ...\n  }\n\n  return { // public interface\n    publicMethod1: function () {\n      // all private members are accesible here\n    },\n    publicMethod2: function () {\n    }\n  };\n})();\n</code></pre>\n\n<p>This is has been called <em>the <a href=\"http://www.yuiblog.com/blog/2007/06/12/module-pattern/\">module pattern</a></em>, it basically allows you to encapsulate private members on an object, by taking advantage of the use of <a href=\"http://www.jibbering.com/faq/faq%5Fnotes/closures.html\">closures</a>.</p>\n",
                    "is_accepted": true,
                    "score": 184
                },
                {
                    "body": "<p>I think the cleanest approach is something like:</p>\n\n<pre><code>var SingletonClass = (function(){\n    function SingletonClass() {\n        //do stuff\n    }\n    var instance;\n    return {\n        getInstance: function(){\n            if (instance == null) {\n                instance = new SingletonClass();\n                // Hide the constructor so the returned objected can't be new'd...\n                instance.constructor = null;\n            }\n            return instance;\n        }\n   };\n})();\n</code></pre>\n\n<p>Afterwards, you can invoke the function as</p>\n\n<pre><code>var test = SingletonClass.getInstance();\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 79
                },
                {
                    "body": "<p>There is more than one ways to skin a cat :) Depending on your taste or specific need you can apply any of the proposed solutions. I personally go for CMS' first solution whenever possible (when you don't need privacy). Since the question was about the simplest and cleanest, that's the winner. Or even:</p>\n\n<pre><code>var myInstance = {}; // done!\n</code></pre>\n\n<p>This (quote from my blog) ...</p>\n\n<pre><code>var SingletonClass = new function() { \n    this.myFunction() { \n        //do stuff \n    } \n    this.instance = 1; \n}\n</code></pre>\n\n<p>doesn't make much sense (my blog example doesn't either) because it doesn't need any private vars, so it's pretty much the same as:</p>\n\n<pre><code>var SingletonClass = { \n    myFunction: function () { \n        //do stuff \n    },\n    instance: 1 \n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 7
                },
                {
                    "body": "<p>I deprecate my answer, see <a href=\"http://stackoverflow.com/a/19458623/304175\">my other one</a>.</p>\n\n<p>Usually module pattern (see CMS' answer) which is NOT singleton pattern is good enough. However one of the features of singleton is that its initialization is delayed till object is needed. Module pattern lacks this feature.</p>\n\n<p>My proposition (CoffeeScript):</p>\n\n<pre><code>window.singleton = (initializer) -&gt;\n  instance = undefined\n  () -&gt;\n    return instance unless instance is undefined\n    instance = initializer()\n</code></pre>\n\n<p>Which compiled to this in JavaScript:</p>\n\n<pre><code>window.singleton = function(initializer) {\n    var instance;\n    instance = void 0;\n    return function() {\n        if (instance !== void 0) {\n            return instance;\n        }\n        return instance = initializer();\n    };\n};\n</code></pre>\n\n<p>Then I can do following:</p>\n\n<pre><code>window.iAmSingleton = singleton(function() {\n    /* This function should create and initialize singleton. */\n    alert(\"creating\");\n    return {property1: 'value1', property2: 'value2'};\n});\n\n\nalert(window.iAmSingleton().property2); // \"creating\" will pop up; then \"value2\" will pop up\nalert(window.iAmSingleton().property2); // \"value2\" will pop up but \"creating\" will not\nwindow.iAmSingleton().property2 = 'new value';\nalert(window.iAmSingleton().property2); // \"new value\" will pop up\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 6
                },
                {
                    "body": "<p>I'm not sure I agree with the module pattern being used as a replacement for a singleton pattern. I've often seen singletons used and abused in places where they're wholly unnecessary, and I'm sure the module pattern fills many gaps where programmers would otherwise use a singleton, however the module pattern is <em>not</em> a singleton.</p>\n\n<h1>module pattern:</h1>\n\n<pre><code>var foo = (function () {\n    \"use strict\";\n    function aPrivateFunction() {}\n    return { aPublicFunction: function () {...}, ... };\n}());\n</code></pre>\n\n<p>Everything initialized in the module pattern happens when <code>Foo</code> is declared. Additionally, the module pattern can be used to initialize a constructor, which could then be instantiated multiple times. While the module pattern is the right tool for many jobs, it's not equivalent to a singleton.</p>\n\n<h1>singleton pattern:</h1>\n\n<sub>short form</sub>\n\n<pre><code>var Foo = function () {\n    \"use strict\";\n    if (Foo._instance) {\n        //this allows the constructor to be called multiple times\n        //and refer to the same instance. Another option is to\n        //throw an error.\n        return Foo._instance;\n    }\n    Foo._instance = this;\n    //Foo initialization code\n};\nFoo.getInstance = function () {\n    \"use strict\";\n    return Foo._instance || new Foo();\n}\n</code></pre>\n\n<sub>long form, using module pattern</sub>\n\n<pre><code>var Foo = (function () {\n    \"use strict\";\n    var instance; //prevent modification of \"instance\" variable\n    function Singleton() {\n        if (instance) {\n            return instance;\n        }\n        instance = this;\n        //Singleton initialization code\n    }\n    //instance accessor\n    Singleton.getInstance = function () {\n        return instance || new Singleton();\n    }\n    return Singleton;\n}());\n</code></pre>\n\n<p>In both versions of the Singleton pattern that I've provided, the constructor itself can be used as the accessor:</p>\n\n<pre><code>var a,\n    b;\na = new Foo(); //constructor initialization happens here\nb = new Foo();\nconsole.log(a === b); //true\n</code></pre>\n\n<p>If you don't feel comfortable using the constructor this way, you can throw an error in the <code>if (instance)</code> statement, and stick to using the long form:</p>\n\n<pre><code>var a,\n    b;\na = Foo.getInstance(); //constructor initialization happens here\nb = Foo.getInstance();\nconsole.log(a === b); //true\n</code></pre>\n\n<hr>\n\n<p>I should also mention that the singleton pattern fits well with the implicit constructor function pattern:</p>\n\n<pre><code>function Foo() {\n    if (Foo._instance) {\n        return Foo._instance;\n    }\n    //if the function wasn't called as a constructor,\n    //call it as a constructor and return the result\n    if (!(this instanceof Foo)) {\n        return new Foo();\n    }\n    Foo._instance = this;\n}\nvar f = new Foo(); //calls Foo as a constructor\n-or-\nvar f = Foo(); //also calls Foo as a constructor\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 56
                },
                {
                    "body": "<p>I needed several singletons with:</p>\n\n<ul>\n<li>lazy initialisation</li>\n<li>initial parameters</li>\n</ul>\n\n<p>and so this was what I came up with:</p>\n\n<pre><code>createSingleton ('a', 'add', [1, 2]);\nconsole.log(a);\n\nfunction createSingleton (name, construct, args) {\n    window[name] = {};\n    window[construct].apply(window[name], args);\n    window[construct] = null;\n}\n\nfunction add (a, b) {\n    this.a = a;\n    this.b = b;\n    this.sum = a + b;\n}\n</code></pre>\n\n<ul>\n<li><p>args must be Array for this to work so if you have empty variables, just\npass in []</p></li>\n<li><p>I used window object in the function but I could have passed in a parameter to create   my own scope</p></li>\n<li><p>name and construct parameters are only String for window[] to work but with some simple type-checking, window.name and window.construct are also possible.</p></li>\n</ul>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>What's wrong with this?</p>\n\n<pre><code>function Klass() {\n   var instance = this;\n   Klass = function () { return instance; }\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>@CMS and @zzzzBov have both given wonderful answers, but just to add my own interpretation based on my having moved into heavy node.js development from PHP/Zend Framework where singleton patterns were common.</p>\n\n<p>The following, comment-documented code is based on the following requirements:</p>\n\n<ul>\n<li>one and only one instance of the function object may be instantiated</li>\n<li>the instance is not publicly available and may only be accessed through a public method</li>\n<li>the constructor is not publicly available and may only be instantiated if there is not already an instance available</li>\n<li>the declaration of the constructor must allow its prototype chain to be modified. This will allow the constructor to inherit from other prototypes, and offer \"public\" methods for the instance</li>\n</ul>\n\n<p>My code is very similar to @zzzzBov's except I've added a prototype chain to the constructor and more comments that should help those coming from PHP or a similar language translate traditional OOP to Javascripts prototypical nature. It may not be the \"simplest\" but I believe it is the most proper.</p>\n\n<pre><code>// declare 'Singleton' as the returned value of a self-executing anonymous function\nvar Singleton = (function () {\n    \"use strict\";\n    // 'instance' and 'constructor' should not be availble in a \"public\" scope\n    // here they are \"private\", thus available only within \n    // the scope of the self-executing anonymous function\n    var _instance=null;\n    var _constructor = function (name) {\n        this.name = name || 'default';\n    }\n\n    // prototypes will be \"public\" methods available from the instance\n    _constructor.prototype.getName = function () {\n        return this.name;\n    }\n\n    // using the module pattern, return a static object\n    // which essentially is a list of \"public static\" methods\n    return {\n        // because getInstance is defined within the same scope\n        // it can access the \"private\" 'instance' and 'constructor' vars\n        getInstance:function (name) {\n            if (!_instance) {\n                console.log('creating'); // this should only happen once\n                _instance = new _constructor(name);\n            }\n            console.log('returning');\n            return _instance;\n        }\n    }\n\n})(); // self execute\n\n// ensure 'instance' and 'constructor' are unavailable \n// outside the scope in which they were defined\n// thus making them \"private\" and not \"public\"\nconsole.log(typeof _instance); // undefined\nconsole.log(typeof _constructor); // undefined\n\n// assign instance to two different variables\nvar a = Singleton.getInstance('first');\nvar b = Singleton.getInstance('second'); // passing a name here does nothing because the single instance was already instantiated\n\n// ensure 'a' and 'b' are truly equal\nconsole.log(a === b); // true\n\nconsole.log(a.getName()); // \"first\"\nconsole.log(b.getName()); // also returns \"first\" because it's the same instance as 'a'\n</code></pre>\n\n<p>Note that technically, the self-executing anonymous function is itself a Singleton as demonstrated nicely in the code provided by @CMS. The only catch here is that it is not possible to modify the prototype chain of the constructor when the constructor itself is anonymous.</p>\n\n<p>Keep in mind that to Javascript, the concepts of &#8220;public&#8221; and &#8220;private&#8221; do not apply as they do in PHP or Java. But we have achieved the same effect by leveraging Javascript&#8217;s rules of functional scope availability.</p>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>Hi my two cents is part of Module pattern: But with a little \"more readable style\". You can see easy which methods are publics and which are privates</p>\n\n<pre><code>var module = (function(_name){\n   /*Local Methods &amp; Values*/\n   var _local = {\n      name : _name,\n      flags : {\n        init : false\n      }\n   }\n\n   function init(){\n     _local.flags.init = true;\n   }\n\n   function imaprivatemethod(){\n     alert(\"hi im a private method\");\n   }\n\n   /*Public Methods &amp; variables*/\n\n   var $r = {}; //this object will hold all public methods.\n\n   $r.methdo1 = function(){\n       console.log(\"method1 call it\");\n   }\n\n   $r.method2 = function(){\n      imaprivatemethod(); //calling private method\n   }\n\n   $r.init = function(){\n      inti(); //making init public in case you want to init manually and not automatically\n   }\n\n   init(); //automatically calling init method\n\n   return $r; //returning all publics methods\n\n})(\"module\");\n</code></pre>\n\n<p>now you can use publics methods like</p>\n\n<p>module.method2(); //-> I'm calling a private method over a public method alert(\"hi im a private method\")</p>\n\n<p><a href=\"http://jsfiddle.net/ncubica/xMwS9/\" rel=\"nofollow\">http://jsfiddle.net/ncubica/xMwS9/</a></p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>Not sure why nobody brought this up, but you could just do:</p>\n\n<pre><code>var singleton = new (function() {\n  var bar = 123\n\n  this.foo = function() {\n    // whatever\n  }\n})()\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 2
                },
                {
                    "body": "<p>How about this way, just insure the class can not new again.</p>\n\n<p>By this, you can use the <code>instanceof</code> op, also, you can use the prototype chain to inherit the class,it's a regular class, but can not new it,if yuu want to get the instance just use <code>getInstance</code></p>\n\n<pre><code>function CA()\n{\n    if(CA.instance)\n    {\n        throw new Error('can not new this class');\n    }else{\n        CA.instance = this;\n    }\n\n}\n/**\n * @protected\n * @static\n * @type {CA}\n */\nCA.instance = null;\n/** @static */\nCA.getInstance = function()\n{\n    return CA.instance;\n}\n\nCA.prototype = \n/** @lends CA#*/\n{\n    func: function(){console.log('the func');}\n}\n// initilize the instance\nnew CA();\n\n// test here\nvar c = CA.getInstance()\nc.func();\nconsole.assert(c instanceof CA)\n// this will failed\nvar b = new CA();\n</code></pre>\n\n<p>If you don't want to expose the <code>instance</code> member, just put it into a closure.</p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<pre><code>function Unicode()\n  {\n  var i = 0, unicode = {}, zero_padding = \"0000\", max = 9999;\n  //Loop through code points\n  while (i &lt; max) {\n    //Convert decimal to hex value, find the character, then pad zeroes to the codepoint\n    unicode[String.fromCharCode(parseInt(i, 16))] = (\"u\" + zero_padding + i).substr(-4);\n    i = i + 1;\n    }\n\n  //Replace this function with the resulting lookup table\n  Unicode = unicode;\n  }\n\n//Usage\nUnicode();\n//Lookup\nUnicode[\"%\"]; //returns 0025\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>following is the snippet from my walk through to implement a singleton pattern. This occurred to me during an interview process and I felt that I should capture this somewhere.</p>\n\n<pre><code>/*************************************************\n   *     SINGLETON PATTERN IMPLEMENTATION          *\n   *************************************************/\n\n  //since there are no classes in javascript, every object is technically a singleton\n  //if you don't inherit from it or copy from it.\n  var single = {};\n  //Singleton Implementations\n  //Declaring as a Global Object...you are being judged!\n\n\n  var Logger = function() {\n    //global_log is/will be defined in GLOBAL scope here\n    if(typeof global_log === 'undefined'){\n      global_log = this;\n    }\n    return global_log;\n  };\n\n\n  //the below 'fix' solves the GLOABL variable problem but\n  //the log_instance is publicly available and thus can be \n\n  //tampered with.\n  function Logger() {\n    if(typeof Logger.log_instance === 'undefined'){\n      Logger.log_instance = this;\n    }\n\n\n    return Logger.log_instance;\n   };\n\n\n  //the correct way to do it to give it a closure!\n\n\n  function logFactory() {\n    var log_instance; //private instance\n    var _initLog = function() { //private init method\n      log_instance = 'initialized';\n      console.log(\"logger initialized!\")\n    }\n    return {\n      getLog : function(){ //the 'privileged' method \n        if(typeof log_instance === 'undefined'){\n          _initLog();\n        }\n        return log_instance;\n      }\n    };\n  }\n\n  /***** TEST CODE ************************************************\n  //using the Logger singleton\n  var logger = logFactory();//did i just gave LogFactory a closure?\n  //create an instance of the logger\n  var a = logger.getLog();\n  //do some work\n  //get another instance of the logger\n  var b = logger.getLog();\n\n\n  //check if the two logger instances are same?\n  console.log(a === b); //true\n  *******************************************************************/\n</code></pre>\n\n<p>the same can be found on my <a href=\"https://gist.github.com/ankurshukla/6321828\" rel=\"nofollow\">gist</a> page</p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<h2>Short answer:</h2>\n\n<p>Because non-blocking nature of JavaScript, Singletons in JavaScript are really ugly in use.  Global variables will give you one instance through whole application too without all these callbacks, module pattern gently hides internals behind the interface.  See @CMS answer.</p>\n\n<p>But, since you wanted a singleton\u2026</p>\n\n<pre><code>var singleton = function(initializer) {\n\n  var state = 'initial';\n  var instance;\n  var queue = [];\n\n  var instanceReady = function(createdInstance) {\n    state = 'ready';\n    instance = createdInstance;\n    while (callback = queue.shift()) {\n      callback(instance);\n    }\n  };\n\n  return function(callback) {\n    if (state === 'initial') {\n      state = 'waiting';\n      queue.push(callback);\n      initializer(instanceReady);\n    } else if (state === 'waiting') {\n      queue.push(callback);\n    } else {\n      callback(instance);\n    }\n  };\n\n};\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>var singletonInitializer = function(instanceReady) {\n  var preparedObject = {property: 'value'};\n  // calling instanceReady notifies singleton that instance is ready to use\n  instanceReady(preparedObject);\n}\nvar s = singleton(singletonInitializer);\n\n// get instance and use it\ns(function(instance) {\n  instance.doSomething();\n});\n</code></pre>\n\n<h2>Explanation:</h2>\n\n<p>Singletons give you more than just one instance through whole application: their initialization is delayed till first use.  This is really big thing when you deal with objects whose initialization is expensive.  Expensive usually means I/O and in JavaScript I/O always mean callbacks.</p>\n\n<p><strong>Don't trust answers which give you interface like <code>instance = singleton.getInstance()</code>, they all miss the point.</strong></p>\n\n<p>If they don't take callback to be run when instance is ready, then they won't work when initializer does I/O.  </p>\n\n<p>Yeah, callbacks always look uglier than function call which immediately returns object instance.  But again: when you do I/O, callbacks are obligatory.  If you don't want to do any I/O, then instantiation is cheap enough to do it at program start.</p>\n\n<h2>Example 1, cheap initializer:</h2>\n\n<pre><code>var simpleInitializer = function(instanceReady) {\n  console.log(\"Initializer started\");\n  instanceReady({property: \"initial value\"});\n}\n\nvar simple = singleton(simpleInitializer);\n\nconsole.log(\"Tests started. Singleton instance should not be initalized yet.\");\n\nsimple(function(inst) {\n  console.log(\"Access 1\");\n  console.log(\"Current property value: \" + inst.property);\n  console.log(\"Let's reassign this property\");\n  inst.property = \"new value\";\n});\nsimple(function(inst) {\n  console.log(\"Access 2\");\n  console.log(\"Current property value: \" + inst.property);\n});\n</code></pre>\n\n<h2>Example 2, initialization with I/O:</h2>\n\n<p>In this example <code>setTimeout</code> fakes some expensive I/O operation.  This illustrates why singletons in JavaScript really need callbacks.</p>\n\n<pre><code>var heavyInitializer = function(instanceReady) {\n  console.log(\"Initializer started\");\n  var onTimeout = function() {\n    console.log(\"Initializer did his heavy work\");\n    instanceReady({property: \"initial value\"});\n  };\n  setTimeout(onTimeout, 500);\n};\n\nvar heavy = singleton(heavyInitializer);\n\nconsole.log(\"In this example we will be trying\");\nconsole.log(\"to access singleton twice before it finishes initialization.\");\n\nheavy(function(inst) {\n  console.log(\"Access 1\");\n  console.log(\"Current property value: \" + inst.property);\n  console.log(\"Let's reassign this property\");\n  inst.property = \"new value\";\n});\n\nheavy(function(inst) {\n  console.log(\"Access 2. You can see callbacks order is preserved.\");\n  console.log(\"Current property value: \" + inst.property);\n});\n\nconsole.log(\"We made it to the end of the file. Instance is not ready yet.\");\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 2
                },
                {
                    "body": "<p>I like to use a combination of the Singleton with the module pattern, init-time branching with a Global NS check, wrapped within a closure. In a case where the environment isn't going to change after the initialization of the singleton; the use of an immediately invoked object-literal to return a module full of utilities that will persist for some duration should be fine. I'm not passing any dependencies, just invoking the singletons within their own little world - the only goal being to: create a utilities module for event binding / unbinding (device orientation / orientation changes could also work in this case).</p>\n\n<pre><code>window.onload = ( function( _w ) {\n            console.log.apply( console, ['it', 'is', 'on'] );\n            ( {\n                globalNS : function() {\n                    var nameSpaces = [\"utils\", \"eventUtils\"],\n                        nsLength = nameSpaces.length,\n                        possibleNS = null;\n\n                    outerLoop:\n                    for ( var i = 0; i &lt; nsLength; i++ ) {\n                        if ( !window[nameSpaces[i]] ) {\n                            window[nameSpaces[i]] = this.utils;\n                            break outerLoop;\n                        };\n                    };\n                },\n                utils : {\n                    addListener : null,\n                    removeListener : null\n                },\n                listenerTypes : {\n                    addEvent : function( el, type, fn ) {\n                        el.addEventListener( type, fn, false );\n                    },\n                    removeEvent : function( el, type, fn ) {\n                        el.removeEventListener( type, fn, false );\n                    },\n                    attachEvent : function( el, type, fn ) {\n                        el.attachEvent( 'on'+type, fn );\n                    },\n                    detatchEvent : function( el, type, fn ) {\n                        el.detachEvent( 'on'+type, fn );\n                    }\n                },\n                buildUtils : function() {\n                    if ( typeof window.addEventListener === 'function' ) {\n                        this.utils.addListener = this.listenerTypes.addEvent;\n                        this.utils.removeListener = this.listenerTypes.removeEvent;\n                    } else {\n                        this.utils.attachEvent = this.listenerTypes.attachEvent;\n                        this.utils.removeListener = this.listenerTypes.detatchEvent;\n                    };\n                    this.globalNS();\n                },\n                init : function() {\n                    this.buildUtils();\n                }\n            } ).init();\n        }( window ) );\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>I got this example from <a href=\"http://shop.oreilly.com/product/9780596806767.do?green=E59AEBDE-6D17-5419-A502-8FD3C4DD78AB&amp;intcmp=af-mybuy-9780596806767.IP\" rel=\"nofollow\">JavaScript Patterns\nBuild Better Applications with Coding and Design Patterns\nBy Stoyan Stefanov</a>'s book in case you need some simple implementation class like singltone object you can use immediate function as following:</p>\n\n<pre><code>var ClassName;\n\n(function() {\n    var instance;\n    ClassName = function ClassName() {\n        //If private instance variable already initialized return reference\n        if(instance) {\n            return instance;   \n        }\n        //If instance does not created save pointer of original reference\n        //to private instance variable. \n        instance = this;\n\n        //All constructor initialization will be here\n        // i.e.: \n        this.someProperty = 0;\n        this.someMethod = function() {\n            //Some action here\n        };\n    };\n}());\n</code></pre>\n\n<p>And you can check this example by following test case:</p>\n\n<pre><code>//Extending defined class like Singltone object using new prototype property\nClassName.prototype.nothing = true;\nvar obj_1 = new ClassName();\n//Extending defined class like Singltone object using new prototype property\nClassName.prototype.everything = true; \nvar obj_2 = new ClassName();\n\n//Testing does this two object pointing to same instance\nconsole.log(obj_1 === obj_2); //Result is true, it points to same instance object\n\n//All prototype properites work\n//no matter when they were defined\nconsole.log(obj_1.nothing &amp;&amp; obj_1.everything \n            &amp;&amp; obj_2.nothing &amp;&amp; obj_2.everything); //Result true\n\n\n//Values of properties which is defined inside of constructor\nconsole.log(obj_1.someProperty);// output 0\nconsole.log(obj_2.someProperty);// output 0 \n//Changing property value \nobj_1.someProperty = 1;\n\nconsole.log(obj_1.someProperty);// output 1\nconsole.log(obj_2.someProperty);// output 1\n\nconsole.log(obj_1.constructor === ClassName); //Output true \n</code></pre>\n\n<p>This approaches passes all test cases while private static implementation will fail when prototype extension is used (it can be fixed but it will not be simple) and public static implementation less advisable due to instance is exposed to the public.</p>\n\n<p><a href=\"http://jsfiddle.net/TgU9V/\" rel=\"nofollow\"><strong>jsFiddly demo.</strong></a></p>\n",
                    "is_accepted": false,
                    "score": 2
                },
                {
                    "body": "<p>I think I have found the cleanest way to program in JavaScript, but you'll need some imagination. I got this idea from a working technique in the book \"javascript the good parts\".</p>\n\n<p>Instead of using the new keyword, you could create a class like this:</p>\n\n<pre><code>function Class()\n{\n    var obj = {}; // Could also be used for inheritence if you don't start with an empty object.\n\n    var privateVar;\n    obj.publicVar;\n\n    obj.publicMethod= publicMethod;\n    function publicMethod(){} \n\n    function privateMethod(){} \n\n    return obj;\n}\n</code></pre>\n\n<p>You can instantiate the above object by saying:</p>\n\n<pre><code>var objInst = Class(); // !!! NO NEW KEYWORD\n</code></pre>\n\n<p>Now with this work method in mind you could create a singleton like this:</p>\n\n<pre><code>ClassSingleton = function()\n{\n    var instance= null;\n\n    function Class() // This is the class like the above one\n    {\n        var obj = {};\n        return obj;\n    }\n\n    function getInstance()\n    {\n        if( !instance )\n            instance = Class(); // Again no new keyword;\n\n        return instance;\n    }   \n\n    return { getInstance : getInstance };\n\n}();\n</code></pre>\n\n<p>Now you can get your instance by calling</p>\n\n<pre><code>var obj = ClassSingleton.getInstance();\n</code></pre>\n\n<p>I think this is the neatest way as the complete \"Class\" is not even accessible. </p>\n",
                    "is_accepted": false,
                    "score": 1
                }
            ],
            "body": "<p>What is the simplest/cleanest way to implement singleton pattern in JavaScript?</p>\n",
            "last_activity_date": 1409660316,
            "question_id": 1479319,
            "score": 148,
            "tags": [
                "javascript",
                "function",
                "design-patterns",
                "singleton"
            ],
            "title": "Simplest/Cleanest way to implement singleton in JavaScript?"
        },
        {
            "answer_count": 8,
            "answers": [
                {
                    "body": "<p>Have you had a look at <a href=\"https://docs.angularjs.org/api/ngRoute/provider/%24routeProvider\"><code>$routeProvider.when('/path',{ resolve:{...}</code></a>? It can make the promise approach a bit cleaner:</p>\n\n<p>Expose a promise in your service:\n</p>\n\n<pre><code>app.service('MyService', function($http) {\n    var myData = null;\n\n    var promise = $http.get('data.json').success(function (data) {\n      myData = data;\n    });\n\n    return {\n      promise:promise,\n      setData: function (data) {\n          myData = data;\n      },\n      doStuff: function () {\n          return myData;//.getSomeData();\n      }\n    };\n});\n</code></pre>\n\n<p>Add <code>resolve</code> to your route config:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>app.config(function($routeProvider){\n  $routeProvider\n    .when('/',{controller:'MainCtrl',\n    template:'&lt;div&gt;From MyService:&lt;pre&gt;{{data | json}}&lt;/pre&gt;&lt;/div&gt;',\n    resolve:{\n      'MyServiceData':function(MyService){\n        // MyServiceData will also be injectable in your controller, if you don't want this you could create a new promise with the $q service\n        return MyService.promise;\n      }\n    }})\n  }):\n</code></pre>\n\n<p>Your controller won't get instantiated before all dependencies are resolved:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>app.controller('MainCtrl', function($scope,MyService) {\n  console.log('Promise is now resolved: '+MyService.doStuff().data)\n  $scope.data = MyService.doStuff();\n});\n</code></pre>\n\n<p>I've made an example at plnkr: <a href=\"http://plnkr.co/edit/GKg21XH0RwCMEQGUdZKH?p=preview\">http://plnkr.co/edit/GKg21XH0RwCMEQGUdZKH?p=preview</a></p>\n",
                    "is_accepted": true,
                    "score": 147
                },
                {
                    "body": "<p>So I found a solution. I created an angularJS service, we'll call it MyDataRepository and I  created a module for it. I then serve up this javascript file from my server-side controller:</p>\n\n<p><strong>HTML:</strong></p>\n\n<pre><code>&lt;script src=\"path/myData.js\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p><strong>Server-side:</strong></p>\n\n<pre><code>@RequestMapping(value=\"path/myData.js\", method=RequestMethod.GET)\npublic ResponseEntity&lt;String&gt; getMyDataRepositoryJS()\n{\n    // Populate data that I need into a Map\n    Map&lt;String, String&gt; myData = new HashMap&lt;String,String&gt;();\n    ...\n    // Use Jackson to convert it to JSON\n    ObjectMapper mapper = new ObjectMapper();\n    String myDataStr = mapper.writeValueAsString(myData);\n\n    // Then create a String that is my javascript file\n    String myJS = \"'use strict';\" +\n    \"(function() {\" +\n    \"var myDataModule = angular.module('myApp.myData', []);\" +\n    \"myDataModule.service('MyDataRepository', function() {\" +\n        \"var myData = \"+myDataStr+\";\" +\n        \"return {\" +\n            \"getData: function () {\" +\n                \"return myData;\" +\n            \"}\" +\n        \"}\" +\n    \"});\" +\n    \"})();\"\n\n    // Now send it to the client:\n    HttpHeaders responseHeaders = new HttpHeaders();\n    responseHeaders.add(\"Content-Type\", \"text/javascript\");\n    return new ResponseEntity&lt;String&gt;(myJS , responseHeaders, HttpStatus.OK);\n}\n</code></pre>\n\n<p>I can then inject MyDataRepository where ever I need it:</p>\n\n<pre><code>someOtherModule.service('MyOtherService', function(MyDataRepository) {\n    var myData = MyDataRepository.getData();\n    // Do what you have to do...\n}\n</code></pre>\n\n<p>This worked great for me, but I am open to any feedback if anyone has any.\n}</p>\n",
                    "is_accepted": false,
                    "score": 4
                },
                {
                    "body": "<p>What you can do is in your .config for the app is create the resolve object for the route and in the function pass in $q (promise object) and the name of the service you're depending on, and resolve the promise in the callback function for the $http in the service like so:</p>\n\n<p>ROUTE CONFIG</p>\n\n<pre><code>app.config(function($routeProvider){\n    $routeProvider\n     .when('/',{\n          templateUrl: 'home.html',\n          controller: 'homeCtrl',\n          resolve:function($q,MyService) {\n                //create the defer variable and pass it to our service\n                var defer = $q.defer();\n                MyService.fetchData(defer);\n                //this will only return when the promise\n                //has been resolved. MyService is going to\n                //do that for us\n                return defer.promise;\n          }\n      })\n}\n</code></pre>\n\n<p>Angular won't render the template or make the controller available until defer.resolve() has been called. We can do that in our service:</p>\n\n<p>SERVICE</p>\n\n<pre><code>app.service('MyService',function($http){\n       var MyService = {};\n       //our service accepts a promise object which \n       //it will resolve on behalf of the calling function\n       MyService.fetchData = function(q) {\n             $http({method:'GET',url:'data.php'}).success(function(data){\n                 MyService.data = data;\n                 //when the following is called it will\n                 //release the calling function. in this\n                 //case it's the resolve function in our\n                 //route config\n                 q.resolve();\n             }\n       }\n\n       return MyService;\n});\n</code></pre>\n\n<p>Now that MyService has the data assigned to it's data property, and the promise in the route resolve object has been resolved, our controller for the route kicks into life, and we can assign the data from the service to our controller object.</p>\n\n<p>CONTROLLER</p>\n\n<pre><code>  app.controller('homeCtrl',function($scope,MyService){\n       $scope.servicedata = MyService.data;\n  });\n</code></pre>\n\n<p>Now all our binding in the scope of the controller will be able to use the data which originated from MyService.</p>\n",
                    "is_accepted": false,
                    "score": 6
                },
                {
                    "body": "<p>I had the same problem: I love the <code>resolve</code> object, but that only works for the content of ng-view. What if you have controllers (for top-level nav, let's say) that exist outside of ng-view and which need to be initialized with data before the routing even begins to happen? How do we avoid mucking around on the server-side just to make that work?</p>\n\n<p><strong>Use manual bootstrap and an angular constant</strong>. A naiive XHR gets you your data, and you bootstrap angular in its callback, which deals with your async issues. In the example below, you don't even need to create a global variable. The returned data exists only in angular scope as an injectable, and isn't even present inside of controllers, services, etc. unless you inject it. (Much as you would inject the output of your <code>resolve</code> object into the controller for a routed view.) If you prefer to thereafter interact with that data as a service, you can create a service, inject the data, and nobody will ever be the wiser.</p>\n\n<p>Example:</p>\n\n<pre><code>//First, we have to create the angular module, because all the other JS files are going to load while we're getting data and bootstrapping, and they need to be able to attach to it.\nvar MyApp = angular.module('MyApp', ['dependency1', 'dependency2']);\n\n// Use angular's version of document.ready() just to make extra-sure DOM is fully \n// loaded before you bootstrap. This is probably optional, given that the async \n// data call will probably take significantly longer than DOM load. YMMV.\n// Has the added virtue of keeping your XHR junk out of global scope. \nangular.element(document).ready(function() {\n\n    //first, we create the callback that will fire after the data is down\n    function xhrCallback() {\n        var myData = this.responseText; // the XHR output\n\n        // here's where we attach a constant containing the API data to our app \n        // module. Don't forget to parse JSON, which `$http` normally does for you.\n        MyApp.constant('NavData', JSON.parse(myData));\n\n        // now, perform any other final configuration of your angular module.\n        MyApp.config(['$routeProvider', function ($routeProvider) {\n            $routeProvider\n              .when('/someroute', {configs})\n              .otherwise({redirectTo: '/someroute'});\n          }]);\n\n        // And last, bootstrap the app. Be sure to remove `ng-app` from your index.html.\n        angular.bootstrap(document, ['NYSP']);\n    };\n\n    //here, the basic mechanics of the XHR, which you can customize.\n    var oReq = new XMLHttpRequest();\n    oReq.onload = xhrCallback;\n    oReq.open(\"get\", \"/api/overview\", true); // your specific API URL\n    oReq.send();\n})\n</code></pre>\n\n<p>Now, your <code>NavData</code> constant exists. Go ahead and inject it into a controller or service: </p>\n\n<pre><code>angular.module('MyApp')\n    .controller('NavCtrl', ['NavData', function (NavData) {\n        $scope.localObject = NavData; //now it's addressable in your templates \n}]);\n</code></pre>\n\n<p>Of course, using a bare XHR object strips away a number of the niceties that <code>$http</code> or JQuery would take care of for you, but this example works with no special dependencies, at least for a simple <code>get</code>. If you want a little more power for your request, load up an external library to help you out. But I don't think it's possible to access angular's <code>$http</code> or other tools in this context. </p>\n\n<p>(SO <a href=\"http://stackoverflow.com/questions/16537783/which-method-should-i-use-to-manually-bootstrap-my-angularjs\">related post</a>)</p>\n",
                    "is_accepted": false,
                    "score": 11
                },
                {
                    "body": "<p>I used a similar approach to the one described by @XMLilley but wanted to have the ability to use AngularJS services like <code>$http</code> to load the configuration and do further initialization without the use of low level APIs or jQuery.</p>\n\n<p>Using <code>resolve</code> on routes was also not an option because I needed the values to be available as constants when my app is started, even in <code>module.config()</code> blocks.</p>\n\n<p>I created a small AngularJS app that loads the config, sets them as constants on the actual app and bootstraps it.</p>\n\n<pre><code>// define the module of your app\nangular.module('MyApp', []);\n\n// define the module of the bootstrap app\nvar bootstrapModule = angular.module('bootstrapModule', []);\n\n// the bootstrapper service loads the config and bootstraps the specified app\nbootstrapModule.factory('bootstrapper', function ($http, $log, $q) {\n  return {\n    bootstrap: function (appName) {\n      var deferred = $q.defer();\n\n      $http.get('/some/url')\n        .success(function (config) {\n          // set all returned values as constants on the app...\n          var myApp = angular.module(appName);\n          angular.forEach(config, function(value, key){\n            myApp.constant(key, value);\n          });\n          // ...and bootstrap the actual app.\n          angular.bootstrap(document, [appName]);\n          deferred.resolve();\n        })\n        .error(function () {\n          $log.warn('Could not initialize application, configuration could not be loaded.');\n          deferred.reject();\n        });\n\n      return deferred.promise;\n    }\n  };\n});\n\n// create a div which is used as the root of the bootstrap app\nvar appContainer = document.createElement('div');\n\n// in run() function you can now use the bootstrapper service and shutdown the bootstrapping app after initialization of your actual app\nbootstrapModule.run(function (bootstrapper) {\n\n  bootstrapper.bootstrap('MyApp').then(function () {\n    // removing the container will destroy the bootstrap app\n    appContainer.remove();\n  });\n\n});\n\n// make sure the DOM is fully loaded before bootstrapping.\nangular.element(document).ready(function() {\n  angular.bootstrap(appContainer, ['bootstrapModule']);\n});\n</code></pre>\n\n<p>See it in action (using <code>$timeout</code> instead of <code>$http</code>) here: <a href=\"http://plnkr.co/edit/FYznxP3xe8dxzwxs37hi?p=preview\">http://plnkr.co/edit/FYznxP3xe8dxzwxs37hi?p=preview</a></p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>I would recommend to use the approach described below by Martin Atkins and JBCP.</p>\n\n<p><strong>UPDATE 2</strong></p>\n\n<p>Because I needed it in multiple projects, I just released a bower module that takes care of this: <a href=\"https://github.com/philippd/angular-deferred-bootstrap\">https://github.com/philippd/angular-deferred-bootstrap</a></p>\n\n<p>Example that loads data from the back-end and sets a constant called APP_CONFIG on the AngularJS module:</p>\n\n<pre><code>deferredBootstrapper.bootstrap({\n  element: document.body,\n  module: 'MyApp',\n  resolve: {\n    APP_CONFIG: function ($http) {\n      return $http.get('/api/demo-config');\n    }\n  }\n});\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 27
                },
                {
                    "body": "<p>The \"manual bootstrap\" case can gain access to Angular services by manually creating an injector before bootstrap. This initial injector will stand alone (not be attached to any elements) and include only a subset of the modules that are loaded. If all you need is core Angular services, it's sufficient to just load <code>ng</code>, like this:</p>\n\n<pre><code>angular.element(document).ready(\n    function() {\n        var initInjector = angular.injector(['ng']);\n        var $http = initInjector.get('$http');\n        $http.get('/config.json').then(\n            function (response) {\n               var config = response.data;\n               // Add additional services/constants/variables to your app,\n               // and then finally bootstrap it:\n               angular.bootstrap(document, ['myApp']);\n            }\n        );\n    }\n);\n</code></pre>\n\n<p>You can, for example, use the <code>module.constant</code> mechanism to make data available to your app:</p>\n\n<pre><code>myApp.constant('myAppConfig', data);\n</code></pre>\n\n<p>This <code>myAppConfig</code> can now be injected just like any other service, and in particular it's available during the configuration phase:</p>\n\n<pre><code>myApp.config(\n    function (myAppConfig, someService) {\n        someService.config(myAppConfig.someServiceConfig);\n    }\n);\n</code></pre>\n\n<p>or, for a smaller app, you could just inject the global config directly into your service, at the expense of spreading knowledge about the configuration format throughout the application.</p>\n\n<p>Of course, since the async operations here will block the bootstrap of the application, and thus block the compilation/linking of the template, it's wise to use the <code>ng-cloak</code> directive to prevent the unparsed template from showing up during the work. You could also provide some sort of loading indication in the DOM , by providing some HTML that gets shown only until AngularJS initializes:</p>\n\n<pre><code>&lt;div ng-if=\"initialLoad\"&gt;\n    &lt;!-- initialLoad never gets set, so this div vanishes as soon as Angular is done compiling --&gt;\n    &lt;p&gt;Loading the app.....&lt;/p&gt;\n&lt;/div&gt;\n&lt;div ng-cloak&gt;\n    &lt;!-- ng-cloak attribute is removed once the app is done bootstrapping --&gt;\n    &lt;p&gt;Done loading the app!&lt;/p&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>I created <a href=\"http://plnkr.co/edit/tVbq24\">a complete, working example</a> of this approach on Plunker, loading the configuration from a static JSON file as an example.</p>\n",
                    "is_accepted": false,
                    "score": 22
                },
                {
                    "body": "<p>Based on Martin Atkins' solution, here is a complete, concise pure-Angular solution:</p>\n\n<pre><code>(function() {\n  var initInjector = angular.injector(['ng']);\n  var $http = initInjector.get('$http');\n  $http.get('/config.json').then(\n    function (response) {\n      angular.module('config', []).constant('CONFIG', response.data);\n\n      angular.element(document).ready(function() {\n          angular.bootstrap(document, ['myApp']);\n        });\n    }\n  );\n})();\n</code></pre>\n\n<p>This solution uses a self-executing anonymous function to get the $http service, request the config, and inject it into a constant called CONFIG when it becomes available. </p>\n\n<p>Once completely, we wait until the document is ready and then bootstrap the Angular app. </p>\n\n<p>This is a slight enhancement over Martin's solution, which deferred fetching the config until after the document is ready. As far as I know, there is no reason to delay the $http call for that. </p>\n\n<p><strong>Unit Testing</strong></p>\n\n<p>Note: I have discovered this solution does not work well when unit-testing when the code is included in your <code>app.js</code> file. The reason for this is that the above code runs immediately when the JS file is loaded. This means the test framework (Jasmine in my case) doesn't have a chance to provide a mock implementation of <code>$http</code>. </p>\n\n<p>My solution, which I'm not completely satisfied with, was to move this code to our <code>index.html</code> file, so the Grunt/Karma/Jasmine unit test infrastructure does not see it.</p>\n",
                    "is_accepted": false,
                    "score": 34
                },
                {
                    "body": "<p>Also, you can use the following techniques to provision your service globally, before actual controllers are executed: <a href=\"http://stackoverflow.com/a/27050497/1056679\">http://stackoverflow.com/a/27050497/1056679</a>. Just resolve your data globally and then pass it to your service in <code>run</code> block for example.</p>\n",
                    "is_accepted": false,
                    "score": 1
                }
            ],
            "body": "<p>I have an AngularJS service that I want to initialize with some asynchronous data. Something like this:</p>\n\n<pre><code>myModule.service('MyService', function($http) {\n    var myData = null;\n\n    $http.get('data.json').success(function (data) {\n        myData = data;\n    });\n\n    return {\n        setData: function (data) {\n            myData = data;\n        },\n        doStuff: function () {\n            return myData.getSomeData();\n        }\n    };\n});\n</code></pre>\n\n<p>Obviously this won't work because if something tries to call <code>doStuff()</code> before <code>myData</code> gets back I will get a null pointer exception. As far as I can tell from reading some of the other questions asked <a href=\"http://stackoverflow.com/questions/12657389/angularjs-load-service-then-call-controller-and-render\">here</a> and <a href=\"http://stackoverflow.com/questions/15164013/json-to-initialize-data-in-service\">here</a> I have a few options, but none of them seem very clean (perhaps I am missing something):</p>\n\n<p><strong>Setup Service with \"run\"</strong></p>\n\n<p>When setting up my app do this:</p>\n\n<pre><code>myApp.run(function ($http, MyService) {\n    $http.get('data.json').success(function (data) {\n        MyService.setData(data);\n    });\n});\n</code></pre>\n\n<p>Then my service would look like this:</p>\n\n<pre><code>myModule.service('MyService', function() {\n    var myData = null;\n    return {\n        setData: function (data) {\n            myData = data;\n        },\n        doStuff: function () {\n            return myData.getSomeData();\n        }\n    };\n});\n</code></pre>\n\n<p>This works some of the time but if the asynchronous data happens to take longer than it takes for everything to get initialized I get a null pointer exception when I call <code>doStuff()</code></p>\n\n<p><strong>Use promise objects</strong></p>\n\n<p>This would probably work. The only downside it everywhere I call MyService I will have to know that doStuff() returns a promise and all the code will have to us <code>then</code> to interact with the promise. I would rather just wait until myData is back before loading the my application.</p>\n\n<p><strong>Manual Bootstrap</strong> </p>\n\n<pre><code>angular.element(document).ready(function() {\n    $.getJSON(\"data.json\", function (data) {\n       // can't initialize the data here because the service doesn't exist yet\n       angular.bootstrap(document);\n       // too late to initialize here because something may have already\n       // tried to call doStuff() and would have got a null pointer exception\n    });\n});\n</code></pre>\n\n<p><strong>Global Javascript Var</strong>\nI could send my JSON directly to a global Javascript variable:</p>\n\n<p>HTML:</p>\n\n<pre><code>&lt;script type=\"text/javascript\" src=\"data.js\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>data.js:</p>\n\n<pre><code>var dataForMyService = { \n// myData here\n};\n</code></pre>\n\n<p>Then it would be available when initializing <code>MyService</code>:</p>\n\n<pre><code>myModule.service('MyService', function() {\n    var myData = dataForMyService;\n    return {\n        doStuff: function () {\n            return myData.getSomeData();\n        }\n    };\n});\n</code></pre>\n\n<p>This would work too, but then I have a global javascript variable which smells bad.</p>\n\n<p>Are these my only options? Are one of these options better than the others? I know this is a pretty long question, but I wanted to show that I have tried to explore all my options. Any guidance would greatly be appreciated. </p>\n",
            "last_activity_date": 1416928888,
            "question_id": 16286605,
            "score": 188,
            "tags": [
                "javascript",
                "angularjs",
                "asynchronous",
                "service",
                "angular-promise"
            ],
            "title": "Initialize AngularJS service with asynchronous data"
        },
        {
            "answer_count": 48,
            "answers": [
                {
                    "body": "<pre><code> var myBool = Boolean.parse(\"true\");\n</code></pre>\n\n<p>or</p>\n\n<pre><code>var myBool = Boolean(\"true\");\n</code></pre>\n\n<p>or </p>\n\n<pre><code>var myBool = !!\"true\";\n</code></pre>\n\n<p>Not sure if the first one is IE specific.</p>\n",
                    "is_accepted": false,
                    "score": -9
                },
                {
                    "body": "<p>You should probably <strong>be cautious about using these two methods</strong> for your specific needs:</p>\n\n<pre><code>var myBool = Boolean(\"false\");  // == true\n\nvar myBool = !!\"false\";  // == true\n</code></pre>\n\n<p>Any string which isn't the empty string will evaluate to <code>true</code> by using them. Although they're the cleanest methods I can think of concerning to boolean conversion, I think they're not what you're looking for.</p>\n\n<p>About the way you suggested, you could make it stricter by using the identity operator (<code>===</code>), which doesn't make any implicit type conversions when the compared variables have different types, instead of the equality operator (<code>==</code>), which does:</p>\n\n<pre><code>var isTrueSet = (myValue === 'true');\n</code></pre>\n",
                    "is_accepted": true,
                    "score": 813
                },
                {
                    "body": "<p>Remember to match case:</p>\n\n<pre><code>var isTrueSet = (myValue.toLowerCase() === 'true');\n</code></pre>\n\n<p>Also, if it's a form element checkbox, you can also detect if the checkbox is checked:</p>\n\n<pre><code>var isTrueSet = document.myForm.IS_TRUE.checked;\n</code></pre>\n\n<p>Assuming that if it is checked, it is \"set\" equal to true. This evaluates as true/false.</p>\n",
                    "is_accepted": false,
                    "score": 63
                },
                {
                    "body": "<p>Your solution is fine.</p>\n\n<p>Using <code>===</code> would just be silly in this case, as the field's <code>value</code> will always be a <code>String</code>.</p>\n",
                    "is_accepted": false,
                    "score": 21
                },
                {
                    "body": "<p>You need to separate (in your thinking) the value of your selections and the representation of that value. </p>\n\n<p>Pick a point in the JavaScript logic where they need to transition from string sentinels to native type and do a comparison there, preferably where it only gets done once for each value that needs to be converted. Remember to address what needs to happen if the string sentinel is not one the script knows (i.e. do you default to true or to false?)</p>\n\n<p>In other words, yes, you need to depend on the string's value. :-)</p>\n",
                    "is_accepted": false,
                    "score": 4
                },
                {
                    "body": "<p>If there's some other code that's converting the boolean value to a string, you need to know exactly how that code stores true/false values. Either that or you need to have access to a function that reverses that conversion.</p>\n\n<p>There are infinitely many ways to represent boolean values in strings (\"true\", \"Y\", \"1\", etc.). So you shouldn't rely on some general-purpose string-to-boolean converter, like Boolean(myValue). You need to use a routine that reverses the original boolean-to-string conversion, whatever that is.</p>\n\n<p>If you know that it converts true booleans to \"true\" strings, then your sample code is fine. Except that you should use === instead of ==, so there's no automatic type conversion.</p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<pre><code>String.prototype.bool = function() {\n    return (/^true$/i).test(this);\n};\nalert(\"true\".bool());\n</code></pre>\n\n<p>For those (see the comments) that would like to extend the String object to get this but are worried about enumerability and are worried about clashing with other code that extends the String object:</p>\n\n<pre><code>Object.defineProperty(String.prototype, \"com_example_bool\", {\n    get : function() {\n        return (/^(true|1)$/i).test(this);\n    }\n});\nalert(\"true\".com_example_bool);\n</code></pre>\n\n<p>(Won't work in older browsers of course and Firefox shows false while Opera, Chrome, Safari and IE show true. <a href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=720760\">Bug 720760</a>)    </p>\n",
                    "is_accepted": false,
                    "score": 79
                },
                {
                    "body": "<p>I think this is much universal:</p>\n\n<p><code>if (String(a) == \"true\")</code> ...</p>\n\n<p>It goes:</p>\n\n<pre><code>String(true) == \"true\"     //returns true`\nString(false) == \"true\"    //returns false\nString(\"true\") == \"true\"   //returns true\nString(\"false\") == \"true\"  //returns false\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 37
                },
                {
                    "body": "<pre><code>if (String(a) == \"true\"){\n  //true block\n} else {\n  //false block\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<pre><code>stringToBoolean: function(string){\n\tswitch(string.toLowerCase()){\n\t\tcase \"true\": case \"yes\": case \"1\": return true;\n\t\tcase \"false\": case \"no\": case \"0\": case null: return false;\n\t\tdefault: return Boolean(string);\n\t}\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 101
                },
                {
                    "body": "<p>Just do a:</p>\n\n<pre><code>var myBool = eval (yourString);\n</code></pre>\n\n<p>Examples:</p>\n\n<pre><code>alert (eval (\"true\") == true); // TRUE\nalert (eval (\"true\") == false); // FALSE\nalert (eval (\"1\") == true); // TRUE\nalert (eval (\"1\") == false); // FALSE\nalert (eval (\"false\") == true); // FALSE;\nalert (eval (\"false\") == false); // TRUE\nalert (eval (\"0\") == true); // FALSE\nalert (eval (\"0\") == false); // TRUE\nalert (eval (\"\") == undefined); // TRUE\nalert (eval () == undefined); // TRUE\n</code></pre>\n\n<p>This method handles the empty string and undefined string naturally as if you declare a variable without assigning it a value.</p>\n",
                    "is_accepted": false,
                    "score": -15
                },
                {
                    "body": "<pre><code>Boolean.parse = function (str) {\n  switch (str.toLowerCase ()) {\n    case \"true\":\n      return true;\n    case \"false\":\n      return false;\n    default:\n      throw new Error (\"Boolean.parse: Cannot convert string to boolean.\");\n  }\n};\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 11
                },
                {
                    "body": "<p>The following would be enough</p>\n\n<pre><code>String.prototype.boolean = function() {\n    return \"true\" == this; \n};\n\n\"true\".boolean() // returns true \"false\".boolean() // returns false\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>The Boolean object doesn't have a 'parse' method. <code>Boolean(\"false\")</code> returns true, so that won't work. <code>!!\"false\"</code> also returns <code>true</code>, so that won't work also.</p>\n\n<p>If you want string <code>\"true\"</code> to return boolean <code>true</code> and string <code>\"false\"</code> to return boolean <code>\"false\"</code> then the simplest solution is to use <code>eval()</code>. <code>eval(\"true\")</code> returns true and <code>eval(\"false\")</code> returns false. Keep in mind the performance implications when using <code>eval()</code> though.</p>\n",
                    "is_accepted": false,
                    "score": 5
                },
                {
                    "body": "<p>Hands down the easiest way (assuming you string will be 'true' or 'false') is:</p>\n\n<pre><code>var z = 'true';\nvar y = 'false';\nvar b = (z === 'true'); // will evaluate to true\nvar c = (y === 'true'); // will evaluate to false\n</code></pre>\n\n<p><em><strong>Always</em></strong> use the === operator instead of the == operator for these types of conversions!</p>\n",
                    "is_accepted": false,
                    "score": 5
                },
                {
                    "body": "<pre><code>function returnBoolean(str){\n\n    str=str.toString().toLowerCase();\n\n    if(str=='true' || str=='1' || str=='yes' || str=='y' || str=='on' || str=='+'){\n        return(true);\n    }\n    else if(str=='false' || str=='0' || str=='no' || str=='n' || str=='off' || str=='-'){\n        return(false);\n    }else{\n        return(undefined);\n    }\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>How about?</p>\n\n<pre><code>JSON.parse(\"true\");\n</code></pre>\n\n<p>or with jQuery</p>\n\n<pre><code>$.parseJSON(\"true\");\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 137
                },
                {
                    "body": "<p>I've found that using '1' and an empty value '' for boolean values works far more predictably than 'true' or 'false' string values... specifically with html forms since uninitialized/empty values in Dom elements will consistently evaluate to false whereas <em>any</em> value within them evaluates to true. </p>\n\n<p>For instance:</p>\n\n<pre><code>&lt;input type='button' onclick='this.value = tog(this.value);' /&gt;\n\n&lt;script type=\"text/javascript\"&gt;\n\n    function tog(off) {\n        if(off) {\n            alert('true, toggle to false');\n            return '';\n        } else {\n            alert('false, toggle to true');\n            return '1';\n        }\n    }   \n&lt;/script&gt;\n</code></pre>\n\n<p>Just seemed like an easier road, so far it's been very consistent/easy... perhaps someone can determine a way to break this?</p>\n",
                    "is_accepted": false,
                    "score": 2
                },
                {
                    "body": "<p>Like @Shadow2531 said, you can't just convert it directly. I'd also suggest that you consider string inputs besides \"true\" and \"false\" that are 'truthy' and 'falsey' if your code is going to be reused/used by others. This is what I use:</p>\n\n<pre><code>function parseBoolean(string) {\n  switch (String(string).toLowerCase()) {\n    case \"true\":\n    case \"1\":\n    case \"yes\":\n    case \"y\":\n      return true;\n    case \"false\":\n    case \"0\":\n    case \"no\":\n    case \"n\":\n      return false;\n    default:\n      //you could throw an error, but 'undefined' seems a more logical reply\n      return undefined;\n  }\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 6
                },
                {
                    "body": "<p>@guinaps> Any string which isn't the empty string will evaluate to true by using them.</p>\n\n<p>How about using the String.match() method</p>\n\n<pre><code>var str=\"true\";\nvar boolStr=Boolean(str.match(/^true$/i)); \n</code></pre>\n\n<p>this alone won't get the 1/0 or the yes/no, but it will catch the TRUE/true, as well, it will return false for any string that happens to have  \"true\" as a substring.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Below is a function to handle true/false, 1/0, yes/no (case-insensitive)</p>\n\n<pre><code>\u200bfunction stringToBool(str) {\n    var bool;\n    if (str.match(/^(true|1|yes)$/i) !== null) {\n        bool = true;\n    } else if (str.match(/^(false|0|no)*$/i) !== null) {\n        bool = false;\n    } else {\n        bool = null;\n        if (console) console.log('\"' + str + '\" is not a boolean value');\n    }\n    return bool;\n}\n\nstringToBool('1'); // true\nstringToBool('No'); // false\nstringToBool('falsey'); // null (\"falsey\" is not a boolean value.)\nstringToBool(''); // false\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p><code>Boolean.parse()</code> does exist in some browser implementations.  It's definitely not universal, so if that's something that you need than you shouldn't use this method.  But in Chrome, for example (I'm using v21) it works just fine and as one would expect.  </p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>I've been using this snippet to convert Numbers and Booleans:</p>\n\n<pre><code>var result = !isNaN(value) ? parseFloat(value) : /^\\s*(true|false)\\s*$/i.exec(value) ? RegExp.$1.toLowerCase() === \"true\" : value;\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>The expression you're looking for simply is</p>\n\n<pre><code>/^true$/i.test(myValue)\n</code></pre>\n\n<p>as in</p>\n\n<pre><code>var isTrueSet = /^true$/i.test(myValue);\n</code></pre>\n\n<p>This tests <code>myValue</code> against a regular expression , case-insensitive, and doesn't modify the prototype.</p>\n\n<p>Examples:</p>\n\n<pre><code>/^true$/i.test(\"true\"); // true\n/^true$/i.test(\"TRUE\"); // true\n/^true$/i.test(\"tRuE\"); // true\n/^true$/i.test(\" tRuE\"); // false (notice the space at the beginning)\n/^true$/i.test(\"untrue\"); // false (some other solutions here will incorrectly return true\n/^true$/i.test(\"false\");// returns false\n/^true$/i.test(\"xyz\");  // returns false\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 5
                },
                {
                    "body": "<p>My take on this question is that it aims to satisfy three objectives:</p>\n\n<ul>\n<li>Return true/false for truthy and falsey values, but also return true/false for multiple string values that would be truthy or falsey if they were Booleans instead of strings.</li>\n<li>Second, provide a resilient interface so that values other than those specified will not fail, but rather return a default value</li>\n<li>Third, do all this with as little code as possible.</li>\n</ul>\n\n<p>The problem with using JSON is that it fails by causing a Javascript error. This solution is not resilient (though it satisfies 1 and 3):</p>\n\n<pre><code>JSON.parse(\"FALSE\") // fails\n</code></pre>\n\n<p>This solution is not concise enough:</p>\n\n<pre><code>if(value === \"TRUE\" || value === \"yes\" || ...) { return true; }\n</code></pre>\n\n<p>I am working on solving this exact problem for <a href=\"http://typecastjs.org\" rel=\"nofollow\">Typecast.js</a>. And the best solution to all three objectives is this one:</p>\n\n<pre><code>return /^true$/i.test(v);\n</code></pre>\n\n<p>It works for many cases, does not fail when values like {} are passed in, and is very concise. Also it returns false as the default value rather than undefined or throwing an Error, which is more useful in loosely-typed Javascript development. Bravo to the other answers that suggested it!</p>\n",
                    "is_accepted": false,
                    "score": 3
                },
                {
                    "body": "<p>Building on Steven's answer above, I wrote this function as a generic parser for string input:</p>\n\n<pre><code>parse:\n  function (value) {\n    switch (value &amp;&amp; value.toLowerCase()) {\n      case null: return null;\n      case \"true\": return true;\n      case \"false\": return false;\n      default: try { return parseFloat(value); } catch (e) { return value; }\n    }\n  }\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>use a json map, which map string into a boolean value</p>\n\n<pre><code>function parseBool2( str ){\n\n    var boolmap = { \n        'no'    : false ,\n        'NO'    : false ,\n        'FALSE' : false ,\n        'false' : false,\n        'yes'   : true ,\n        'YES'   : true ,\n        'TRUE'  : true ,\n        'true'  : true \n    };\n\n    return ( str in boolmap &amp;&amp; boolmap.hasOwnProperty(str)) ? \n      boolmap[ str ] :  !!str ;\n};\n</code></pre>\n\n<p>if value in map, it will return value from <code>boolmap</code> , other wise it converts into boolean using operator <code>!!</code> </p>\n\n<p>eg : <code>parseBool2( \"no\" );</code> which output <code>false</code></p>\n",
                    "is_accepted": false,
                    "score": 15
                },
                {
                    "body": "<p>You even do not need to convert the string to boolean. just use the following:\n<code>var yourstring = yourstringValue  == 1 ? true : false;</code></p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>i wrote a helper function that handles your cases (and some more). Feel free to alter it to your specific needs</p>\n\n<pre><code>/**\n * @example\n * &lt;code&gt;\n * var pageRequestParams = {'enableFeatureX': 'true'};\n * toBool(pageRequestParams.enableFeatureX);  // returns true\n *\n * toBool(pageRequestParams.enableFeatureY, true, options.enableFeatureY)\n * &lt;/code&gt;\n * @param {*}value\n * @param {Boolean}[mapEmptyStringToTrue=false]\n * @param {Boolean}[defaultVal=false] this is returned if value is undefined.\n *\n * @returns {Boolean}\n * @example\n * &lt;code&gt;\n * toBool({'enableFeatureX': ''        }.enableFeatureX);          // false\n * toBool({'enableFeatureX': ''        }.enableFeatureX, true);    // true\n * toBool({                            }.enableFeatureX, true);    // false\n * toBool({'enableFeatureX': 0         }.enableFeatureX);          // false\n * toBool({'enableFeatureX': '0'       }.enableFeatureX);          // false\n * toBool({'enableFeatureX': '0 '      }.enableFeatureX);          // false\n * toBool({'enableFeatureX': 'false'   }.enableFeatureX);          // false\n * toBool({'enableFeatureX': 'falsE '  }.enableFeatureX);          // false\n * toBool({'enableFeatureX': 'no'      }.enableFeatureX);          // false\n *\n * toBool({'enableFeatureX': 1         }.enableFeatureX);          // true\n * toBool({'enableFeatureX': '-2'      }.enableFeatureX);          // true\n * toBool({'enableFeatureX': 'true'    }.enableFeatureX);          // true\n * toBool({'enableFeatureX': 'false_'  }.enableFeatureX);          // true\n * toBool({'enableFeatureX': 'john doe'}.enableFeatureX);          // true\n * &lt;/code&gt;\n *\n */\nvar toBool = function (value, mapEmptyStringToTrue, defaultVal) {\n    if (value === undefined) {return Boolean(defaultVal); }\n    mapEmptyStringToTrue = mapEmptyStringToTrue !== undefined ? mapEmptyStringToTrue : false; // default to false\n    var strFalseValues = ['0', 'false', 'no'].concat(!mapEmptyStringToTrue ? [''] : []);\n    if (typeof value === 'string') {\n        return (strFalseValues.indexOf(value.toLowerCase().trim()) === -1);\n    }\n    // value is likely null, boolean, or number\n    return Boolean(value);\n};\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<pre><code>    MyLib.Convert.bool = function(param) {\n         var res = String(param).toLowerCase();\n         return !(!Boolean(res) || res === \"false\" || res === \"0\");\n     }; \n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>Here is my 1 liner submission: I needed to evaluate a string and output, true if 'true', false if 'false' and a number if anything like '-12.35673'.</p>\n\n<pre><code>val = 'false';\n\nval = /^false$/i.test(val) ? false : ( /^true$/i.test(val) ? true : val*1 ? val*1 : val );\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>I use the following:</p>\n\n<pre><code>function parseBool(b) {\n    return !(/^(false|0)$/i).test(b) &amp;&amp; !!b;\n}\n</code></pre>\n\n<p>This function performs the usual Boolean coercion with the exception of the strings \"false\" (case insensitive) and \"0\".</p>\n",
                    "is_accepted": false,
                    "score": 8
                },
                {
                    "body": "<p>I'm a little late, but I have a little snippet to do this, it essentially maintains all of JScripts truthey/falsey/<em>filthy</em>-ness but includes <code>\"false\"</code> as an acceptible value for false.</p>\n\n<p>I prefer this method to the ones mentioned because it doesn't rely on a 3rd party to parse the code (i.e: eval/JSON.parse), which is overkill in my mind, it's short enough to not require a utility function and maintains other truthey/falsey conventions.</p>\n\n<pre><code>var value = \"false\";\nvar result = (value == \"false\") != Boolean(value);\n\n// value = \"true\"  =&gt; result = true\n// value = \"false\" =&gt; result = false\n// value = true    =&gt; result = true\n// value = false   =&gt; result = false\n// value = null    =&gt; result = false\n// value = []      =&gt; result = true\n// etc..\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 3
                },
                {
                    "body": "<pre><code>function parseBool(value) {\n    if (typeof value === \"boolean\") return value;\n\n    if (typeof value === \"number\") {\n        return value === 1 ? true : value === 0 ? false : undefined;\n    }\n\n    if (typeof value != \"string\") return undefined;\n\n    return value.toLowerCase() === 'true' ? true : false;\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 3
                },
                {
                    "body": "<p>I wrote a function to match PHP's filter_var which does this nicely. Available in a gist: <a href=\"https://gist.github.com/CMCDragonkai/7389368\" rel=\"nofollow\">https://gist.github.com/CMCDragonkai/7389368</a></p>\n\n<pre><code>/**\n * Parses mixed type values into booleans. This is the same function as filter_var in PHP using boolean validation\n * @param  {Mixed}        value \n * @param  {Boolean}      nullOnFailure = false\n * @return {Boolean|Null}\n */\nvar parseBooleanStyle = function(value, nullOnFailure = false){\n    switch(value){\n        case true:\n        case 'true':\n        case 1:\n        case '1':\n        case 'on':\n        case 'yes':\n            value = true;\n            break;\n        case false:\n        case 'false':\n        case 0:\n        case '0':\n        case 'off':\n        case 'no':\n            value = false;\n            break;\n        default:\n            if(nullOnFailure){\n                value = null;\n            }else{\n                value = false;\n            }\n            break;\n    }\n    return value;\n};\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>Universal solution with JSON parse:</p>\n\n<pre><code>function getBool(val) {\n    return !!JSON.parse(String(val).toLowerCase());\n}\n\ngetBool(\"1\"); //true\ngetBool(\"0\"); //false\ngetBool(\"true\"); //true\ngetBool(\"false\"); //false\ngetBool(\"TRUE\"); //true\ngetBool(\"FALSE\"); //false\n</code></pre>\n\n<p>UPDATE (without JSON):</p>\n\n<pre><code>function getBool(val){ \n    var num = +val;\n    return !isNaN(num) ? !!num : !!String(val).toLowerCase().replace(!!0,'');\n}\n</code></pre>\n\n<p>I also created fiddle to test it <a href=\"http://jsfiddle.net/remunda/2GRhG/\">http://jsfiddle.net/remunda/2GRhG/</a></p>\n",
                    "is_accepted": false,
                    "score": 9
                },
                {
                    "body": "<p>A lot of the existing answers are similar, but most ignore the fact that the given argument could also be an object.</p>\n\n<p>Here is something I just whipped up:</p>\n\n<pre><code>Utils.parseBoolean = function(val){\n    if (typeof val === 'string' || val instanceof String){\n        return /true/i.test(val);\n    } else if (typeof val === 'boolean' || val instanceof Boolean){\n        return new Boolean(val).valueOf();\n    } else if (typeof val === 'number' || val instanceof Number){\n        return new Number(val).valueOf() !== 0;\n    }\n    return false;\n};\n</code></pre>\n\n<p>...and the unit test for it</p>\n\n<pre><code>Utils.Tests = function(){\n    window.console.log('running unit tests');\n\n    var booleanTests = [\n        ['true', true],\n        ['false', false],\n        ['True', true],\n        ['False', false],\n        [, false],\n        [true, true],\n        [false, false],\n        ['gibberish', false],\n        [0, false],\n        [1, true]\n    ];\n\n    for (var i = 0; i &lt; booleanTests.length; i++){\n        var lhs = Utils.parseBoolean(booleanTests[i][0]);\n        var rhs = booleanTests[i][1];\n        var result = lhs === rhs;\n\n        if (result){\n            console.log('Utils.parseBoolean('+booleanTests[i][0]+') === '+booleanTests[i][1]+'\\t : \\tpass');\n        } else {\n            console.log('Utils.parseBoolean('+booleanTests[i][0]+') === '+booleanTests[i][1]+'\\t : \\tfail');\n        }\n    }\n};\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>I thought that @Steven 's answer was the best one, and took care of a lot more cases than if the incoming value was just a string. I wanted to extend it a bit and offer the following:</p>\n\n<pre><code>function isTrue(value){\n    if (typeof(value) == 'string'){\n        value = value.toLowerCase();\n    }\n    switch(value){\n        case true:\n        case \"true\":\n        case 1:\n        case \"1\":\n        case \"on\":\n        case \"yes\":\n            return true;\n        default: \n            return false;\n    }\n}\n</code></pre>\n\n<p>It's not necessary to cover all the <code>false</code> cases if you already know all of the <code>true</code> cases you'd have to account for. You can pass anything into this method that could pass for a <code>true</code> value (or add others, it's pretty straightforward), and everything else would be considered <code>false</code></p>\n",
                    "is_accepted": false,
                    "score": 3
                },
                {
                    "body": "<p>Wood-eye be careful. \nAfter seeing the consequences after applying the the top answer with 500+ upvotes, I feel obligated to post something that is actually useful:</p>\n\n<p>Let's start with the shortest, but very strict way:</p>\n\n<pre><code>var str = \"true\";\nvar mybool = JSON.parse(str);\n</code></pre>\n\n<p>And end with a proper, more tolerant way:</p>\n\n<pre><code>var parseBool = function(str) \n{\n    // console.log(typeof str);\n    // strict: JSON.parse(str)\n\n    if(str == null)\n        return false;\n\n    if (typeof str === 'boolean')\n    {\n        if(str === true)\n            return true;\n\n        return false;\n    } \n\n    if(typeof str === 'string')\n    {\n        if(str == \"\")\n            return false;\n\n        str = str.replace(/^\\s+|\\s+$/g, '');\n        if(str.toLowerCase() == 'true' || str.toLowerCase() == 'yes')\n            return true;\n\n        str = str.replace(/,/g, '.');\n        str = str.replace(/^\\s*\\-\\s*/g, '-');\n    }\n\n    // var isNum = string.match(/^[0-9]+$/) != null;\n    // var isNum = /^\\d+$/.test(str);\n    if(!isNaN(str))\n        return (parseFloat(str) != 0);\n\n    return false;\n}\n</code></pre>\n\n<p>Testing:</p>\n\n<pre><code>var array_1 = new Array(true, 1, \"1\",-1, \"-1\", \" - 1\", \"true\", \"TrUe\", \"  true  \", \"  TrUe\", 1/0, \"1.5\", \"1,5\", 1.5, 5, -3, -0.1, 0.1, \" - 0.1\", Infinity, \"Infinity\", -Infinity, \"-Infinity\",\" - Infinity\", \" yEs\");\n\nvar array_2 = new Array(null, \"\", false, \"false\", \"   false   \", \" f alse\", \"FaLsE\", 0, \"00\", \"1/0\", 0.0, \"0.0\", \"0,0\", \"100a\", \"1 00\", \" 0 \", 0.0, \"0.0\", -0.0, \"-0.0\", \" -1a \", \"abc\");\n\n\nfor(var i =0; i &lt; array_1.length;++i){ console.log(\"array_1[\"+i+\"] (\"+array_1[i]+\"): \" + parseBool(array_1[i]));}\n\nfor(var i =0; i &lt; array_2.length;++i){ console.log(\"array_2[\"+i+\"] (\"+array_2[i]+\"): \" + parseBool(array_2[i]));}\n\nfor(var i =0; i &lt; array_1.length;++i){ console.log(parseBool(array_1[i]));}\nfor(var i =0; i &lt; array_2.length;++i){ console.log(parseBool(array_2[i]));}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 9
                },
                {
                    "body": "<p>A shorter way to write this, could be <code>var isTrueSet = (myValue === \"true\") ? true : false;</code> Presuming only \"true\" is true and other values are false. </p>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>Simple solution i have been using it for a while</p>\n\n<pre><code>function asBoolean(value) {\n\n    return (''+value) === 'true'; \n\n}\n\n\n// asBoolean(true) ==&gt; true\n// asBoolean(false) ==&gt; false\n// asBoolean('true') ==&gt; true\n// asBoolean('false') ==&gt; false\n</code></pre>\n",
                    "is_accepted": false,
                    "score": -1
                },
                {
                    "body": "<pre><code>var falsy = /^(?:f(?:alse)?|no?|0+)$/i;\nBoolean.parse = function(val) { \n    return !falsy.test(val) &amp;&amp; !!val;\n};\n</code></pre>\n\n<p>This returns <code>false</code> for every falsy value and <code>true</code> for every truthy value except for <code>'false'</code>, <code>'f'</code>, <code>'no'</code>, <code>'n'</code>, and <code>'0'</code> (case-insensitive).</p>\n\n<pre><code>// False\nBoolean.parse(false);\nBoolean.parse('false');\nBoolean.parse('False');\nBoolean.parse('FALSE');\nBoolean.parse('f');\nBoolean.parse('F');\nBoolean.parse('no');\nBoolean.parse('No');\nBoolean.parse('NO');\nBoolean.parse('n');\nBoolean.parse('N');\nBoolean.parse('0');\nBoolean.parse('');\nBoolean.parse(0);\nBoolean.parse(null);\nBoolean.parse(undefined);\nBoolean.parse(NaN);\nBoolean.parse();\n\n//True\nBoolean.parse(true);\nBoolean.parse('true');\nBoolean.parse('True');\nBoolean.parse('t');\nBoolean.parse('yes');\nBoolean.parse('YES');\nBoolean.parse('y');\nBoolean.parse('1');\nBoolean.parse('foo');\nBoolean.parse({});\nBoolean.parse(1);\nBoolean.parse(-1);\nBoolean.parse(new Date());\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 6
                },
                {
                    "body": "<p>I do this, which will handle 1=TRUE=yes=YES=true, 0=FALSE=no=NO=false:</p>\n\n<pre><code>BOOL=false\nif (STRING)\n  BOOL=JSON.parse(STRING.toLowerCase().replace('no','false').replace('yes','true'));\n</code></pre>\n\n<p>Replace STRING with the name of your string variable.</p>\n\n<p>If it's not null, a numerical value or one of these strings:\n\"true\", \"TRUE\", \"false\", \"FALSE\", \"yes\", \"YES\", \"no\", \"NO\"\nIt will throw an error (intentionally.)</p>\n",
                    "is_accepted": false,
                    "score": 2
                },
                {
                    "body": "<p>I use an own method which works pretty bulletproof:</p>\n\n<pre><code>function str2bool(strvalue){\n  return (strvalue &amp;&amp; typeof strvalue == 'string') ? (strvalue.toLowerCase() == 'true') : (strvalue == true);\n}\n</code></pre>\n\n<p>The results are:</p>\n\n<pre><code>var test; // false\nvar test2 = null; // false\nvar test3 = 'undefined'; // false\nvar test4 = 'true'; // true\nvar test5 = 'false'; // false\nvar test6 = true; // true\nvar test7 = false; // false\nvar test8 = 1; // true\nvar test9 = 0; // false\n</code></pre>\n\n<p>Fiddle:\n<a href=\"http://jsfiddle.net/av5xcj6s/\" rel=\"nofollow\">http://jsfiddle.net/av5xcj6s/</a></p>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>This should help.</p>\n\n<pre><code>JSON.parse(\"true\");\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 2
                },
                {
                    "body": "<p>I'm using this one</p>\n\n<pre><code>String.prototype.maybeBool = function(){\n\n    if ( [\"yes\", \"true\", \"1\", \"on\"].indexOf( this.toLowerCase() ) !== -1 ) return true;\n    if ( [\"no\", \"false\", \"0\", \"off\"].indexOf( this.toLowerCase() ) !== -1 ) return false;\n\n    return this;\n\n}\n\n\"on\".maybeBool(); //returns true;\n\"off\".maybeBool(); //returns false;\n\"I like js\".maybeBool(); //returns \"I like js\"\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 3
                },
                {
                    "body": "<p>There are a lot of answers and it's hard to pick one. In my case, I prioritise the performance when choosing, so I create <a href=\"https://jsperf.com/cast-booleans\" rel=\"nofollow\">this jsPerf</a> that I hope can throw some light here.</p>\n\n<p>Brief of results (the higher the better):</p>\n\n<ol>\n<li><a href=\"http://stackoverflow.com/a/264037/2824333\"><strong>Conditional statement</strong></a>: 2,826,922</li>\n<li><a href=\"http://stackoverflow.com/a/2114091/2824333\"><strong>Switch case on Bool object</strong></a>: 2,825,469</li>\n<li><a href=\"http://stackoverflow.com/a/7833897/2824333\"><strong>Casting to JSON</strong></a>: 1,867,774</li>\n<li><a href=\"http://stackoverflow.com/a/21285901/2824333\"><strong>!! conversions</strong></a>: 805,322</li>\n<li><a href=\"http://stackoverflow.com/a/264180/2824333\"><strong>Prototype of String</strong></a>: 713,637</li>\n</ol>\n\n<p>They are linked to the related answer where you can find more information (pros and cons) about each one; specially in the comments.</p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>To evaluate both boolean and boolean-like strings like boolean I used this easy formula:</p>\n\n<pre><code>var trueOrStringTrue = (trueOrStringTrue === true) || (trueOrStringTrue === 'true');\n</code></pre>\n\n<p>As is apparent, it will return true for both true and 'true'. Everything else returns false.</p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>To convert both string(\"true\", \"false\") and boolean to boolean</p>\n\n<pre><code>('' + flag) === \"true\"\n</code></pre>\n\n<p>Where <code>flag</code> can be </p>\n\n<pre><code> var flag = true\n var flag = \"true\"\n var flag = false\n var flag = \"false\"\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                }
            ],
            "body": "<p>Can I convert a string representing a boolean value (e.g., 'true', 'false') into a intrinsic type in JavaScript?</p>\n\n<p>I have a hidden form in HTML that is updated based upon a user's selection within a list. This form contains some fields which represent boolean values and are dynamically populated with an intrinsic boolean value. However, once this value is placed into the hidden input field it becomes a string.</p>\n\n<p>The only way I could find to determine the field's boolean value, once it was converted into a string, was to depend upon the literal value of its string representation.</p>\n\n<pre><code>var myValue = document.myForm.IS_TRUE.value;\nvar isTrueSet = myValue == 'true';\n</code></pre>\n\n<p>Is there a better way to accomplish this?</p>\n",
            "last_activity_date": 1426079785,
            "question_id": 263965,
            "score": 617,
            "tags": [
                "javascript"
            ],
            "title": "How can I convert a string to boolean in JavaScript?"
        },
        {
            "answer_count": 3,
            "answers": [
                {
                    "body": "<p>Googling for browser reliable detection often results in checking the User agent string. This method is <strong>not</strong> reliable, because it's trivial to spoof this value.<br>\nI've written a method to detect browsers by <a href=\"http://en.wikipedia.org/wiki/Duck_typing\">duck-typing</a>.</p>\n\n<p>Only use the browser detection method if it's truly necessary, such as showing browser-specific instructions to install an extension. <strong>Use feature detection when possible.</strong></p>\n\n<h2>Demo: <a href=\"http://jsfiddle.net/9zxvE/383/\">http://jsfiddle.net/9zxvE/383/</a></h2>\n\n<pre><code>var isOpera = !!window.opera || navigator.userAgent.indexOf(' OPR/') &gt;= 0;\n    // Opera 8.0+ (UA detection to detect Blink/v8-powered Opera)\nvar isFirefox = typeof InstallTrigger !== 'undefined';   // Firefox 1.0+\nvar isSafari = Object.prototype.toString.call(window.HTMLElement).indexOf('Constructor') &gt; 0;\n    // At least Safari 3+: \"[object HTMLElementConstructor]\"\nvar isChrome = !!window.chrome &amp;&amp; !isOpera;              // Chrome 1+\nvar isIE = /*@cc_on!@*/false || !!document.documentMode; // At least IE6\n</code></pre>\n\n<h2>Analysis of reliability</h2>\n\n<p>The <a href=\"http://stackoverflow.com/revisions/9851769/1\">previous method</a> depended on properties of the rendering engine (<a href=\"https://developer.mozilla.org/En/CSS/Box-sizing#Browser_compatibility\"><code>-moz-box-sizing</code></a> and <code>-webkit-transform</code>) to detect the browser. These prefixes will eventually be dropped, so to make detection even more robust, I switched to browser-specific characteristics:</p>\n\n<ul>\n<li>Internet Explorer: JScript's <a href=\"http://msdn.microsoft.com/en-us/library/8ka90k2e%28v=vs.94%29.aspx\">Conditional compilation</a> and <a href=\"http://msdn.microsoft.com/en-us/library/ie/cc196988%28v=vs.85%29.aspx\"><code>document.documentMode</code></a>.</li>\n<li>Firefox: Firefox's API to install add-ons: <a href=\"https://developer.mozilla.org/en-US/docs/XPInstall_API_Reference/InstallTrigger_Object\"><code>InstallTrigger</code></a></li>\n<li>Chrome: The global <code>chrome</code> object, containing several properties including a documented <a href=\"http://developer.chrome.com/extensions/webstore.html\"><code>chrome.webstore</code></a> object.</li>\n<li>Safari: An unique naming pattern in its naming of constructors. This is the least durable method of all listed properties, because it's undocumented. On the other hand, there's no benefit in renaming the constructor, so it's likely to stay for a long while.</li>\n<li>Opera: <code>window.opera</code> has existed for years, but <a href=\"http://my.opera.com/ODIN/blog/300-million-users-and-move-to-webkit\">will be dropped</a> when Opera replaces its engine with Blink + V8 (used by Chromium).<br>\nUpdate: <a href=\"http://my.opera.com/desktopteam/blog/opera-next-15-0-released\">Opera 15 has been released</a>, its UA string looks like Chrome, bit with the addition of \"OPR\". In this version the <code>chrome</code> object is defined (but <code>chrome.webstore</code> isn't). Since Opera tries hard to clone Chrome, I use user agent sniffing for this purpose.</li>\n</ul>\n\n<h2>Successfully tested in:</h2>\n\n<ul>\n<li>Firefox 0.8 - 25</li>\n<li>Chrome 1.0 - 30</li>\n<li>Opera 8.0 - 15.0</li>\n<li>Safari 3.0 - 6.0</li>\n<li>IE 6 - 11</li>\n</ul>\n",
                    "is_accepted": true,
                    "score": 270
                },
                {
                    "body": "<p>Simple single line of javascript code will give you name of browser:</p>\n\n<pre><code>function GetBrowser()\n{\n    return  navigator ? navigator.userAgent.toLowerCase() : \"other\";\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 2
                },
                {
                    "body": "<p><strong>You can try following way to check Browser version.</strong></p>\n\n<pre><code>    &lt;!DOCTYPE html&gt;\n    &lt;html&gt;\n    &lt;body&gt;\n    &lt;p&gt;What is the name(s) of your browser?&lt;/p&gt;\n    &lt;button onclick=\"myFunction()\"&gt;Try it&lt;/button&gt;\n    &lt;p id=\"demo\"&gt;&lt;/p&gt;\n    &lt;script&gt;\n\n    function myFunction() { \n     if(navigator.userAgent.indexOf(\"Chrome\") != -1 ) \n    {\n        alert('Chrome');\n    }\n    else if(navigator.userAgent.indexOf(\"Opera\") != -1 )\n    {\n     alert('Opera');\n    }\n    else if(navigator.userAgent.indexOf(\"Firefox\") != -1 ) \n    {\n         alert('Firefox');\n    }\n    else if((navigator.userAgent.indexOf(\"MSIE\") != -1 ) || (!!document.documentMode == true )) //IF IE &gt; 10\n    {\n      alert('IE'); \n    }  \n    else \n    {\n       alert('unknown');\n    }\n    }\n    &lt;/script&gt;\n\n    &lt;/body&gt;\n    &lt;/html&gt;\n</code></pre>\n\n<p><b>    And if you need to know only IE Browser version then you can follow below code. This code working well for version IE6 to IE11</b></p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;body&gt;\n\n&lt;p&gt;Click on Try button to check IE Browser version.&lt;/p&gt;\n\n&lt;button onclick=\"getInternetExplorerVersion()\"&gt;Try it&lt;/button&gt;\n\n&lt;p id=\"demo\"&gt;&lt;/p&gt;\n\n&lt;script&gt;\nfunction getInternetExplorerVersion() {\n   var ua = window.navigator.userAgent;\n        var msie = ua.indexOf(\"MSIE \");\n        var rv = -1;\n\n        if (msie &gt; 0 || !!navigator.userAgent.match(/Trident.*rv\\:11\\./))      // If Internet Explorer, return version number\n        {               \n\n            if (isNaN(parseInt(ua.substring(msie + 5, ua.indexOf(\".\", msie))))) {\n                //For IE 11 &gt;\n                if (navigator.appName == 'Netscape') {\n                    var ua = navigator.userAgent;\n                    var re = new RegExp(\"Trident/.*rv:([0-9]{1,}[\\.0-9]{0,})\");\n                    if (re.exec(ua) != null) {\n                        rv = parseFloat(RegExp.$1);\n                        alert(rv);\n                    }\n                }\n                else {\n                    alert('otherbrowser');\n                }\n            }\n            else {\n                //For &lt; IE11\n                alert(parseInt(ua.substring(msie + 5, ua.indexOf(\".\", msie))));\n            }\n            return false;\n        }}\n&lt;/script&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 5
                }
            ],
            "body": "<p>I have 5 addons / extensions for FF, Chrome, IE, Opera and Safari. </p>\n\n<p>I need the code to recognize the user browser and redirect (on click in an install button) to download the corresponding addon.</p>\n\n<p>Can you please help?</p>\n",
            "last_activity_date": 1421671866,
            "question_id": 9847580,
            "score": 87,
            "tags": [
                "javascript",
                "google-chrome",
                "safari",
                "browser-detection"
            ],
            "title": "How to detect Safari, Chrome, IE, Firefox and Opera browser?"
        },
        {
            "answer_count": 8,
            "answers": [
                {
                    "body": "<p>Here's what I do...\nCoffeeScript:</p>\n\n<pre><code>ready = -&gt;\n\n  ...your coffeescript goes here...\n\n$(document).ready(ready)\n$(document).on('page:load', ready)\n</code></pre>\n\n<p>last line listens for page load which is what turbo links will trigger.</p>\n\n<p><strong>Edit</strong>...adding Javascript version (per request):</p>\n\n<pre><code>var ready;\nready = function() {\n\n  ...your javascript goes here...\n\n};\n\n$(document).ready(ready);\n$(document).on('page:load', ready);\n</code></pre>\n",
                    "is_accepted": true,
                    "score": 223
                },
                {
                    "body": "<p>Either use the </p>\n\n<pre><code>$(document).on \"page:load\", attachRatingHandler\n</code></pre>\n\n<p>or use jQuery's .on function to achieve the same effect</p>\n\n<pre><code>$(document).on 'click', 'span.star', attachRatingHandler\n</code></pre>\n\n<p>see here for more details: <a href=\"http://srbiv.github.io/2013/04/06/rails-4-my-first-run-in-with-turbolinks.html\" rel=\"nofollow\">http://srbiv.github.io/2013/04/06/rails-4-my-first-run-in-with-turbolinks.html</a></p>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>I just learned of another option for solving this problem. If you load <a href=\"https://github.com/kossnocorp/jquery.turbolinks\">the <code>jquery-turbolinks</code> gem</a> it will bind the Rails Turbolinks events to the <code>document.ready</code> events so you can write your jQuery in the usual way. You just add <code>jquery.turbolinks</code> right after <code>jquery</code> in the js manifest file (by default: <code>application.js</code>).</p>\n",
                    "is_accepted": false,
                    "score": 109
                },
                {
                    "body": "<p><strong>NOTE: See @SDP's answer for a clean, built-in solution</strong></p>\n\n<p>I fixed it as follows:</p>\n\n<p>make sure you include application.js before the other app dependent js files get included by changing the include order as follows:</p>\n\n<pre><code>// in application.js - make sure `require_self` comes before `require_tree .`\n//= require_self\n//= require_tree .\n</code></pre>\n\n<p>Define a global function that handles the binding in <code>application.js</code></p>\n\n<pre><code>// application.js\nwindow.onLoad = function(callback) {\n  // binds ready event and turbolink page:load event\n  $(document).ready(callback);\n  $(document).on('page:load',callback);\n};\n</code></pre>\n\n<p>Now you can bind stuff like:</p>\n\n<pre><code>// in coffee script:\nonLoad -&gt;\n  $('a.clickable').click =&gt; \n    alert('link clicked!');\n\n// equivalent in javascript:\nonLoad(function() {\n  $('a.clickable').click(function() {\n    alert('link clicked');\n});\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 8
                },
                {
                    "body": "<p>Recently I found the most clean and easy to understand way of dealing with it:</p>\n\n<pre><code>$(document).on 'ready page:load', -&gt;\n  # Actions to do\n</code></pre>\n\n<p><strong>OR</strong></p>\n\n<pre><code>$(document).on('ready page:load', function () {\n  // Actions to do\n});\n</code></pre>\n\n<p><strong>EDIT</strong><br>\nIf you have <a href=\"https://api.jquery.com/on/#direct-and-delegated-events\">delegated events</a> bound to the <code>document</code>, make sure you attach them outside of the <code>ready</code> function, otherwise they will get rebound on every <code>page:load</code> event (causing the same functions to be run multiple times). For example, if you have any calls like this:</p>\n\n<pre><code>$(document).on 'ready page:load', -&gt;\n  ...\n  $(document).on 'click', '.button', -&gt;\n    ...\n  ...\n</code></pre>\n\n<p>Take them out of the <code>ready</code> function, like this:</p>\n\n<pre><code>$(document).on 'ready page:load', -&gt;\n  ...\n  ...\n\n$(document).on 'click', '.button', -&gt;\n  ...\n</code></pre>\n\n<p>Delegated events bound to the <code>document</code> do not need to be bound on the <code>ready</code> event.</p>\n",
                    "is_accepted": false,
                    "score": 81
                },
                {
                    "body": "<p>Found this in the <a href=\"http://guides.rubyonrails.org/working_with_javascript_in_rails.html#turbolinks\">Rails 4 documentation</a>, similar to DemoZluk's solution but slightly shorter:</p>\n\n<pre><code>$(document).on 'page:change', -&gt;\n  # Actions to do\n</code></pre>\n\n<p>OR</p>\n\n<pre><code>$(document).on('page:change', function () {\n  // Actions to do\n});\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 30
                },
                {
                    "body": "<pre><code>// BAD: this will not work.\n$(document).on('ready', function () { /* ... */ });\n\n// OK: these two are guaranteed to work.\n$(document).ready(function () { /* ... */ });\n$(function () { /* ... */ });\n</code></pre>\n",
                    "is_accepted": false,
                    "score": -2
                },
                {
                    "body": "<p>Instead of using a variable to save the \"ready\" function and bind it to the events, you might want to trigger the <code>ready</code> event whenever <code>page:load</code> triggers.</p>\n\n<pre><code>$(document).on('page:load', function() {\n  $(document).trigger('ready');\n});\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 1
                }
            ],
            "body": "<p>I ran into an issue in my Rails 4 app while trying to organize JS files \"the rails way\". They were previously scattered across different views. I organized them into separate files and compile them with the assets pipeline. However, I just learned that jQuery's \"ready\" event doesn't fire on subsequent clicks when turbo-linking is turned on. The first time you load a page it works. But when you click a link, anything inside the <code>ready( function($) {</code> won't get executed (because the page doesn't actually load again). Good explanation: <a href=\"http://stackoverflow.com/questions/18769109/rails-4-turbo-link-error-uncaught-typeerror-cannot-read-property-position-of/18770219?noredirect=1#18770219\">here</a>.</p>\n\n<p>So my question is: What is the right way to ensure that jQuery events work properly while turbo-links are on? Do you wrap the scripts in a Rails-specific listener? Or maybe rails has some magic that makes it unnecessary? The docs are a bit vague on how this should work, especially with respect to loading multiple files via the manifest(s) like application.js.</p>\n",
            "last_activity_date": 1416941125,
            "question_id": 18770517,
            "score": 148,
            "tags": [
                "javascript",
                "jquery",
                "ruby-on-rails-4",
                "asset-pipeline",
                "turbolinks"
            ],
            "title": "Rails 4: how to use $(document).ready() with turbo-links"
        },
        {
            "answer_count": 12,
            "answers": [
                {
                    "body": "<p>The onchange event doesn't fires when an element with the contentEditable attribute is changed, a suggested approach could be to add a button, to <em>\"save\"</em> the edition.</p>\n\n<p>Check this plugin which handles the issue in that way:</p>\n\n<ul>\n<li><a href=\"http://www.west-wind.com/Weblog/posts/778165.aspx\" rel=\"nofollow\">Creating a quick and dirty jQuery contentEditable Plugin</a></li>\n</ul>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>I'd suggest attaching listeners to key events fired by the editable element, though you need to be aware that <code>keydown</code> and <code>keypress</code> events are fired before the content itself is changed, so you may need to do something timer-based.</p>\n\n<p><strong>UPDATE 29 October 2014</strong></p>\n\n<p>The <a href=\"https://developer.mozilla.org/en-US/docs/Web/Reference/Events/input\">HTML5 <code>input</code> event</a> is the answer in the long term. At the time of writing, it is supported in current Mozilla (from Firefox 14) and WebKit browsers, but not IE.</p>\n\n<p>Demo: <a href=\"http://jsfiddle.net/ch6yn/\">http://jsfiddle.net/ch6yn/</a></p>\n",
                    "is_accepted": true,
                    "score": 89
                },
                {
                    "body": "<p>To avoid timers and \"save\" buttons, you may use blur event wich fires when the element loses focus. but to be sure that the element was actually changed (not just focused and defocused), its content should be compared against its last version. or use keydown event to set some \"dirty\" flag on this element.</p>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>Check this idea out.\n<a href=\"http://pastie.org/1096892\" rel=\"nofollow\">http://pastie.org/1096892</a></p>\n\n<p>I think it's close.  HTML 5 really needs to add the change event to the spec.  The only problem is that the callback function evaluates if (before == $(this).html()) before the content is actually updated in $(this).html().  setTimeout don't work, and it's sad.  Let me know what you think.</p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>I have modified lawwantsin 's answer like so and this works for me. I use the keyup event instead of keypress which works great.</p>\n\n \n\n<pre><code>$('#editor').on('focus', function() {\n  before = $(this).html();\n}).on('blur keyup paste', function() { \n  if (before != $(this).html()) { $(this).trigger('change'); }\n});\n\n$('#editor').on('change', function() {alert('changed')});\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 14
                },
                {
                    "body": "<p>Here's what worked for me:</p>\n\n<pre><code>   var clicked = {} \n   $(\"[contenteditable='true']\").each(function(){       \n        var id = $(this).attr(\"id\");\n        $(this).bind('focus', function() {\n            // store the original value of element first time it gets focus\n            if(!(id in clicked)){\n                clicked[id] = $(this).html()\n            }\n        });\n   });\n\n   // then once the user clicks on save\n   $(\"#save\").click(function(){\n            for(var id in clicked){\n                var original = clicked[id];\n                var current = $(\"#\"+id).html();\n                // check if value changed\n                if(original != current) save(id,current);\n            }\n   });\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 2
                },
                {
                    "body": "<p>Here is the solution I ended up using and works fabulously. I use $(this).text() instead because I am just using a one line div that is content editable. But you may also use .html() this way you dont have to worry about the scope of a global/non-global variable and the before is actually attached to the editor div.</p>\n\n<pre><code>$('body').delegate('#editor', 'focus', function(){\n    $(this).data('before', $(this).html());\n});\n$('#client_tasks').delegate('.task_text', 'blur', function(){\n    if($(this).data('before') != $(this).html()){\n        /* do your stuff here - like ajax save */\n        alert('I promise, I have changed!');\n    }\n});\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 2
                },
                {
                    "body": "<p>Here is a more efficient version which uses <code>on</code> for all contenteditables. It's based off the top answers here.</p>\n\n<p>In CoffeeScript using jQuery:</p>\n\n<pre><code>$('body')\n    .on 'focus', '[contenteditable]', -&gt;\n        $this = $(this)\n        $this.data 'before', $this.html()\n        return $this\n    .on 'blur keyup paste input', '[contenteditable]', -&gt;\n        $this = $(this)\n        if $this.data('before') isnt $this.html()\n            $this.data 'before', $this.html()\n            $this.trigger('change')\n        return $this\n</code></pre>\n\n<p>In JavaScript using jQuery:</p>\n\n<pre><code>$('body').on('focus', '[contenteditable]', function() {\n    var $this = $(this);\n    $this.data('before', $this.html());\n    return $this;\n}).on('blur keyup paste input', '[contenteditable]', function() {\n    var $this = $(this);\n    if ($this.data('before') !== $this.html()) {\n        $this.data('before', $this.html());\n        $this.trigger('change');\n    }\n    return $this;\n});\n</code></pre>\n\n<p>The project is here: <a href=\"https://github.com/balupton/html5edit\">https://github.com/balupton/html5edit</a></p>\n",
                    "is_accepted": false,
                    "score": 120
                },
                {
                    "body": "<p>Using <a href=\"http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-MutationEvent\" rel=\"nofollow\">DOMCharacterDataModified under MutationEvents</a> will lead to the same. The timeout is setup to prevent sending incorrect values (e.g. in Chrome I had some issues with space key)</p>\n\n<pre><code>var timeoutID;\n$('[contenteditable]').bind('DOMCharacterDataModified', function() {\n    clearTimeout(timeoutID);\n    $that = $(this);\n    timeoutID = setTimeout(function() {\n        $that.trigger('change')\n    }, 50)\n});\n$('[contentEditable]').bind('change', function() {\n    console.log($(this).text());\n})\n</code></pre>\n\n<p><a href=\"http://jsfiddle.net/vgnQg/\" rel=\"nofollow\">JSFIDDLE example</a></p>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>This thread was very helpful while I was investigating the subject. </p>\n\n<p>I've modified some of the code available here into a jQuery plugin so it is in a re-usable form, primarily to satisfy my needs but others may appreciate a simpler interface to jumpstart using contenteditable tags. </p>\n\n<p><a href=\"https://gist.github.com/3410122\" rel=\"nofollow\">https://gist.github.com/3410122</a></p>\n\n<h2>Update:</h2>\n\n<p>Due to its increasing popularity the plugin has been adopted by <a href=\"http://makesites.org\" rel=\"nofollow\">Makesites.org</a></p>\n\n<p>Development will continue from here:</p>\n\n<p><a href=\"https://github.com/makesites/jquery-contenteditable\" rel=\"nofollow\">https://github.com/makesites/jquery-contenteditable</a></p>\n",
                    "is_accepted": false,
                    "score": 3
                },
                {
                    "body": "<p>Consider using <a href=\"https://w3c.github.io/dom/#mutation-observers\" rel=\"nofollow\">MutationObserver</a>.  These observers are designed to react to changes in the DOM, and as a performant replacement to <a href=\"http://www.w3.org/TR/DOM-Level-3-Events/#interface-MutationEvent\" rel=\"nofollow\">Mutation Events</a>.</p>\n\n<p>Pros:</p>\n\n<ul>\n<li>Fires when <em>any</em> change occurs, which is difficult to achieve by listening to key events as suggested by other answers.  For example, all of these work well: drag &amp; drop, italicizing, copy/cut/paste through context menu.</li>\n<li>Designed with performance in mind.</li>\n<li>Simple, straightforward code.  It's a lot easier to understand and debug code that listens to one event rather than code that listens to 10 events.</li>\n<li>Google has an excellent <a href=\"http://code.google.com/p/mutation-summary/\" rel=\"nofollow\">mutation summary library</a> which makes using MutationObservers very easy.</li>\n</ul>\n\n<p>Cons:</p>\n\n<ul>\n<li>Requires a very recent version of Firefox (14.0+), Chrome (18+), or IE (11+).</li>\n<li>New API to understand</li>\n<li>Not a lot of information available yet on best practices or case studies</li>\n</ul>\n\n<p>Learn more:</p>\n\n<ul>\n<li>I wrote a little <a href=\"http://jrullmann.github.com/contenteditable-onchange-approaches/\" rel=\"nofollow\">snippet</a> to compare using MutationObserers to handling a variety of events.  I used balupton's code since his <a href=\"http://stackoverflow.com/a/6263537/194957\">answer</a> has the most upvotes.</li>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver\" rel=\"nofollow\">Mozilla</a> has an excellent page on the API</li>\n<li>Take a look at the <a href=\"http://code.google.com/p/mutation-summary/\" rel=\"nofollow\">MutationSummary</a> library</li>\n</ul>\n",
                    "is_accepted": false,
                    "score": 24
                },
                {
                    "body": "<p>I built a jQuery plugin to do this.</p>\n\n<pre><code>(function ($) {\n    $.fn.wysiwygEvt = function () {\n        return this.each(function () {\n            var $this = $(this);\n            var htmlold = $this.html();\n            $this.bind('blur keyup paste copy cut mouseup', function () {\n                var htmlnew = $this.html();\n                if (htmlold !== htmlnew) {\n                    $this.trigger('change')\n                }\n            })\n        })\n    }\n})(jQuery);\n</code></pre>\n\n<p>You can simply call <code>$('.wysiwyg').wysiwygEvt();</code></p>\n\n<p>You can also remove / add events if you wish</p>\n",
                    "is_accepted": false,
                    "score": 1
                }
            ],
            "body": "<p>I want to run a function when a user edits a contenteditable div. What's the equivalent of an onchange event?</p>\n\n<p>Thanks.</p>\n\n<p>I'm using jquery so any solutions that uses jquery is preferred. Thanks!</p>\n",
            "last_activity_date": 1423228189,
            "question_id": 1391278,
            "score": 143,
            "tags": [
                "javascript",
                "jquery",
                "contenteditable"
            ],
            "title": "contenteditable change events"
        },
        {
            "answer_count": 8,
            "answers": [
                {
                    "body": "<p>A description of the pattern: <a href=\"http://ajaxpatterns.org/HTTP_Streaming\" rel=\"nofollow\">http://ajaxpatterns.org/HTTP_Streaming</a></p>\n",
                    "is_accepted": false,
                    "score": 7
                },
                {
                    "body": "<p>Someone built <a href=\"http://plugins.jquery.com/project/Comet\" rel=\"nofollow\">a client for Comet using jQuery</a>. I don't know if it's any good though. I've read about Comet and heard about all the good it can do, but I have never gotten around to using it. Just had no time and no use case on any of my current projects.</p>\n\n<p>I totally forgot to add a link as for implementing comet.</p>\n\n<p>There is Comet Daily and they have a <a href=\"http://cometdaily.com/maturity.html\" rel=\"nofollow\">comparison</a> online. The comparison emphasizes on maturity of the different implementation. It's pretty interesting and should get you started.</p>\n\n<p>Hope that helps!</p>\n",
                    "is_accepted": false,
                    "score": 15
                },
                {
                    "body": "<p>I wrote the plugin mentioned by Till. The plugin is an implementation of the <a href=\"http://cometdproject.dojotoolkit.org/documentation/bayeux\" rel=\"nofollow\">Bayeux</a> protocol and currently supports long-polling (local server via AJAX) and callback-polling (remote server via XSS). There is a <a href=\"http://cometdproject.dojotoolkit.org/documentation/bayeux\" rel=\"nofollow\">Bayeux</a> implementation for Python called cometd-twisted that I have heard my plugin works with, but I have not verified this. I have tested and verified it works with <a href=\"http://cometdproject.dojotoolkit.org/documentation/cometd-jetty\" rel=\"nofollow\">cometd-jetty</a> and <a href=\"http://code.google.com/p/erlycomet/\" rel=\"nofollow\">erlycomet</a> which has a jQuery Comet example included. There is more info on my <a href=\"http://morglog.org\" rel=\"nofollow\">blog</a> and the current code with a basic chat example can be found on its <a href=\"http://code.google.com/p/jquerycomet/\" rel=\"nofollow\">google code page</a>. Hope this info is helpful and feel free to contact me if need any further help with the plugin.</p>\n",
                    "is_accepted": true,
                    "score": 76
                },
                {
                    "body": "<p>Comet is a great solution, and there are all kinds of implementations. Which one depends on your needs.</p>\n\n<p>We've implemented a solution for IIS/ASP.NET, <a href=\"http://www.frozenmountain.com/websync\" rel=\"nofollow\">WebSync</a>. It includes the javascript client, which plays nicely with jQuery. Technically, since it's the Bayeux protocol, any Bayeux client should work just dandy. The same protocol can also be found in the dojo library.</p>\n\n<p>For more detail, you can see the spec for <a href=\"http://svn.cometd.com/trunk/bayeux/bayeux.html\" rel=\"nofollow\">the Bayeux protocol</a>.</p>\n",
                    "is_accepted": false,
                    "score": 3
                },
                {
                    "body": "<p>Check out the <a href=\"http://www.ape-project.org/\">Ape Project</a> for a complete client and server side solution that implements the comet pattern.</p>\n",
                    "is_accepted": false,
                    "score": 8
                },
                {
                    "body": "<p>I have a very simple example here that can get you started with comet. It covers compiling Nginx with the NHPM module and includes code for simple publisher/subscriber roles in jQuery, PHP, and Bash.</p>\n\n<p><a href=\"http://blog.jamieisaacs.com/2010/08/27/comet-with-nginx-and-jquery/\" rel=\"nofollow\">http://blog.jamieisaacs.com/2010/08/27/comet-with-nginx-and-jquery/</a></p>\n\n<p>A working example (simple chat) can be found here:<br />\n<a href=\"http://cheetah.jamieisaacs.com/\" rel=\"nofollow\">http://cheetah.jamieisaacs.com/</a></p>\n",
                    "is_accepted": false,
                    "score": 3
                },
                {
                    "body": "<p>Look at socket.io.  Trust me.  This is exactly what the doctor ordered.</p>\n\n<p><a href=\"http://socket.io\" rel=\"nofollow\">http://socket.io</a></p>\n\n<p><a href=\"http://stackoverflow.com/questions/2558606/stream-data-with-node-js/6130564#6130564\">Stream data with Node.js</a></p>\n",
                    "is_accepted": false,
                    "score": 3
                },
                {
                    "body": "<p>If you're using JQuery, I'd recommend jquery-stream. I'm currently using jquery-stream on a project and so far its been reliable, well-documented and has an active Google code project.</p>\n\n<p><a href=\"http://code.google.com/p/jquery-stream/\" rel=\"nofollow\">http://code.google.com/p/jquery-stream/</a></p>\n",
                    "is_accepted": false,
                    "score": 2
                }
            ],
            "body": "<p>I've done some research into server push with javascript and have found the general consensus to be that what I'm looking for lies in the \"Comet\" design pattern. Are there any good implementations of this pattern built on top of jQuery? If not, are there any good implementations of this pattern at all? And regardless of the answer to those questions, is there any documentation on this pattern from an implementation stand-point?</p>\n",
            "last_activity_date": 1373999781,
            "question_id": 136012,
            "score": 105,
            "tags": [
                "javascript",
                "jquery",
                "design-patterns",
                "comet",
                "server-push"
            ],
            "title": "Comet and jQuery"
        },
        {
            "answer_count": 10,
            "answers": [
                {
                    "body": "<p>Here's what I use on my site (I didn't write it, I just found it somewhere since I don't know Javascript too well.)</p>\n\n<pre><code>var objDiv = document.getElementById(\"your_div\");\nobjDiv.scrollTop = objDiv.scrollHeight;\n</code></pre>\n",
                    "is_accepted": true,
                    "score": 374
                },
                {
                    "body": "<p>If you use jQuery then may be you can take a look at this great plugin, it has a lot of options for scrolling, check it out <a href=\"http://flesler.blogspot.com/2007/10/jqueryscrollto.html\" rel=\"nofollow\">here</a>.</p>\n",
                    "is_accepted": false,
                    "score": 4
                },
                {
                    "body": "<p>This is much easier if you're using jQuery:</p>\n\n<pre><code>$(\"#mydiv\").scrollTop($(\"#mydiv\")[0].scrollHeight);\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 176
                },
                {
                    "body": "<p>using <a href=\"http://api.jquery.com/animate\">jQuery animate</a>:</p>\n\n<pre><code>$('#DebugContainer').stop().animate({\n  scrollTop: $(\"#DebugContainer\")[0].scrollHeight\n}, 800);\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 31
                },
                {
                    "body": "<p>Pure jQuery version:</p>\n\n<pre><code>var mydiv = $('#scroll');\nmydiv.scrollTop(mydiv.prop('scrollHeight'));\n</code></pre>\n\n<p>Works from jQuery 1.6</p>\n\n<p><a href=\"https://api.jquery.com/scrollTop/\" rel=\"nofollow\">https://api.jquery.com/scrollTop/</a></p>\n\n<p><a href=\"http://api.jquery.com/prop/\" rel=\"nofollow\">http://api.jquery.com/prop/</a></p>\n",
                    "is_accepted": false,
                    "score": 15
                },
                {
                    "body": "<p>If you don't want to rely on <code>scrollHeight</code>, the following code helps:</p>\n\n<pre><code>$('#scroll').scrollTop(1000000);\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 6
                },
                {
                    "body": "<p>small addendum: scrolls only, if last line is already visible. if scrolled a tiny bit, leaves the content where it is (attention: not tested with different font sizes. this may need some adjustments inside \">= comparison\"):</p>\n\n<pre><code>var objDiv = document.getElementById(id);\nvar doScroll=objDiv.scrollTop&gt;=(objDiv.scrollHeight-objDiv.clientHeight);                   \n\n// add new content to div\n$('#' + id ).append(\"new line at end&lt;br&gt;\"); // this is jquery!\n\n// doScroll is true, if we the bottom line is already visible\nif( doScroll) objDiv.scrollTop = objDiv.scrollHeight;\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>Just as a bonus snippet. I'm using angular and was trying to scroll a message thread to the bottom when a user selected different conversations with users. In order to make sure that the scroll works after the new data had been loaded into the div with the ng-repeat for messages, just wrap the scroll snippet in a timeout.</p>\n\n<pre><code>$timeout(function(){\n    var messageThread = document.getElementById('message-thread-div-id');\n    messageThread.scrollTop = messageThread.scrollHeight;\n},0)\n</code></pre>\n\n<p>That will make sure that the scroll event is fired after the data has been inserted into the DOM.</p>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>Newer method :</p>\n\n<pre><code>   this.scrollIntoView(false);\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>Using jQuery, <a href=\"http://api.jquery.com/scrolltop/\" rel=\"nofollow\">scrollTop</a> is used to set the vertical position of scollbar for any given element. there is also a nice <a href=\"https://github.com/flesler/jquery.scrollTo\" rel=\"nofollow\">jquery scrollTo plugin</a> used to scroll with animation and different options (<a href=\"http://demos.flesler.com/jquery/scrollTo/\" rel=\"nofollow\">demos</a>)</p>\n\n<pre><code>var myDiv = $(\"#div_id\").get(0);\nmyDiv.scrollTop = myDiv.scrollHeight;\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 1
                }
            ],
            "body": "<p>I am creating an ajax chat in rails and I am trying to get a div to scroll to the bottom without much luck.</p>\n\n<p>I am wrapping everything in this div:</p>\n\n<pre><code>#scroll {\n    height:400px;\n    overflow:scroll;\n}\n</code></pre>\n\n<p>Is there a way to keep it scrolled to the bottom by default using JS?</p>\n\n<p><strong>Is there a way to keep it scrolled to the bottom after an ajax request?</strong></p>\n",
            "last_activity_date": 1416426017,
            "question_id": 270612,
            "score": 236,
            "tags": [
                "javascript",
                "html",
                "ajax"
            ],
            "title": "Scroll to bottom of div?"
        },
        {
            "answer_count": 22,
            "answers": [
                {
                    "body": "<p>You're using the higher value of the current clientHeight and the content scrollHeight. When you make the scrollHeight smaller by removing content, the calculated area can't get smaller because the clientHeight, previously set by style.height, is holding it open. You could instead take a max() of scrollHeight and a minimum height value you have predefined or calculated from textarea.rows.</p>\n\n<p>In general you probably shouldn't really rely on scrollHeight on form controls. Apart from scrollHeight being traditionally less widely-supported than some of the other IE extensions, HTML/CSS says nothing about how form controls are implemented internally and you aren't guaranteed scrollHeight will be anything meaningful. (Traditionally some browsers have used OS widgets for the task, making CSS and DOM interaction on their internals impossible.) At least sniff for scrollHeight/clientHeight's existance before trying to enable the effect.</p>\n\n<p>Another possible alternative approach to avoid the issue if it's important that it work more widely might be to use a hidden div sized to the same width as the textarea, and set in the same font. On keyup, you copy the text from the textarea to a text node in hidden div (remembering to replace '\\n' with a line break, and escape '&lt;'/'&amp;' properly if you're using innerHTML). Then simply measuring the div's offsetHeight will give you the height you need.</p>\n",
                    "is_accepted": false,
                    "score": 14
                },
                {
                    "body": "<p>I have tested script in common browsers, and it failed in Chrome and Safari. It is because of constantly updatable scrollHeight variable. </p>\n\n<p>I have applied DisgruntledGoat script using jQuery and added chrome fix</p>\n\n<pre><code>function fitToContent(/* JQuery */text, /* Number */maxHeight) {\n\tvar adjustedHeight = text.height();\n\tvar relative_error = parseInt(text.attr('relative_error'));\n\tif (!maxHeight || maxHeight &gt; adjustedHeight) {\n\t\tadjustedHeight = Math.max(text[0].scrollHeight, adjustedHeight);\n\t\tif (maxHeight)\n\t\t\tadjustedHeight = Math.min(maxHeight, adjustedHeight);\n\t\tif ((adjustedHeight - relative_error) &gt; text.height()) {\n\t\t\ttext.css('height', (adjustedHeight - relative_error) + \"px\");\n\t\t\t// chrome fix\n\t\t\tif (text[0].scrollHeight != adjustedHeight) {\n\t\t\t\tvar relative = text[0].scrollHeight - adjustedHeight;\n\t\t\t\tif (relative_error != relative) {\n\t\t\t\t\ttext.attr('relative_error', relative + relative_error);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction autoResizeText(/* Number */maxHeight) {\n\tvar resize = function() {\n\t\tfitToContent($(this), maxHeight);\n\t};\n\t$(\"textarea\").attr('relative_error', 0);\n\t$(\"textarea\").each(resize);\n\t$(\"textarea\").keyup(resize).keydown(resize);\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": -1
                },
                {
                    "body": "<p>If scrollHeight could be trusted, then:</p>\n\n<pre><code>textarea.onkeyup=function() {\n  this.style.height='';\n  this.rows=this.value.split('\\n').length;\n  this.style.height=this.scrollHeight+'px';\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": -2
                },
                {
                    "body": "<pre><code>$('textarea').bind('keyup change', function() {\n    var $this = $(this), $offset = this.offsetHeight;\n    $offset &gt; $this.height() &amp;&amp; $offset &lt; 300 ?\n        $this.css('height ', $offset)\n            .attr('rows', $this.val().split('\\n').length)\n            .css({'height' : $this.attr('scrollHeight'),'overflow' : 'hidden'}) :\n        $this.css('overflow','auto');\n});\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>This works for me (Firefox 3.6/4.0 and Chrome 10/11):</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;title&gt;autoresizing textarea&lt;/title&gt;\n&lt;style type=\"text/css\"&gt;\ntextarea {\n    border: 0 none white;\n    overflow: hidden;\n    padding: 0;\n    outline: none;\n    background-color: #D0D0D0;\n    resize: none;\n}\n&lt;/style&gt;\n&lt;script type=\"text/javascript\"&gt;\nvar observe;\nif (window.attachEvent) {\n    observe = function (element, event, handler) {\n        element.attachEvent('on'+event, handler);\n    };\n}\nelse {\n    observe = function (element, event, handler) {\n        element.addEventListener(event, handler, false);\n    };\n}\nfunction init () {\n    var text = document.getElementById('text');\n    function resize () {\n        text.style.height = 'auto';\n        text.style.height = text.scrollHeight+'px';\n    }\n    /* 0-timeout to get the already changed text */\n    function delayedResize () {\n        window.setTimeout(resize, 0);\n    }\n    observe(text, 'change',  resize);\n    observe(text, 'cut',     delayedResize);\n    observe(text, 'paste',   delayedResize);\n    observe(text, 'drop',    delayedResize);\n    observe(text, 'keydown', delayedResize);\n\n    text.focus();\n    text.select();\n    resize();\n}\n&lt;/script&gt;\n&lt;/head&gt;\n&lt;body onload=\"init();\"&gt;\n&lt;textarea rows=\"1\" style=\"height:1em;\" id=\"text\"&gt;&lt;/textarea&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p><em>If you want try it on <a href=\"http://jsfiddle.net/hmelenok/WM6Gq/\">jsfiddle</a></em>\nIt starts with a single line and grows only the exact amount necessary. It is ok for a single <code>textarea</code>, but I wanted to write something where I would have many many many such <code>textarea</code>s (about as much as one would normally have lines in a large text document). In that case it is really slow. (In Firefox its insanely slow.) So I really would like an approach that uses pure css. This would be possible with <code>contenteditable</code>, but I want it to be plaintext-only.</p>\n",
                    "is_accepted": true,
                    "score": 63
                },
                {
                    "body": "<p>A bit corrections. Works perfectly in Opera</p>\n\n<pre><code>  $('textarea').bind('keyup keypress', function() {\n      $(this).height('');\n      var brCount = this.value.split('\\n').length;\n      this.rows = brCount+1; //++ To remove twitching\n      var areaH = this.scrollHeight,\n          lineHeight = $(this).css('line-height').replace('px',''),\n          calcRows = Math.floor(areaH/lineHeight);\n      this.rows = calcRows;\n  });\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 2
                },
                {
                    "body": "<p>I used the following code for multiple textareas. Working fine in Chrome 12, Firefox 5 and IE 9, even with delete, cut and paste actions performed in the textareas.</p>\n\n<pre><code>&lt;!-- language: lang-html --&gt;\n&lt;style type='text/css'&gt;\ntextarea { border:0 none; overflow:hidden; outline:none; background-color:#eee }\n&lt;/style&gt;\n&lt;textarea style='height:100px;font-family:arial' id=\"txt1\"&gt;&lt;/textarea&gt;\n&lt;textarea style='height:125px;font-family:arial' id=\"txt2\"&gt;&lt;/textarea&gt;\n&lt;textarea style='height:150px;font-family:arial' id=\"txt3\"&gt;&lt;/textarea&gt;\n&lt;textarea style='height:175px;font-family:arial' id=\"txt4\"&gt;&lt;/textarea&gt;\n&lt;script type='text/javascript'&gt;\nfunction attachAutoResizeEvents()\n{   for(i=1;i&lt;=4;i++)\n    {   var txtX=document.getElementById('txt'+i)\n        var minH=txtX.style.height.substr(0,txtX.style.height.indexOf('px'))\n        txtX.onchange=new Function(\"resize(this,\"+minH+\")\")\n        txtX.onkeyup=new Function(\"resize(this,\"+minH+\")\")\n        txtX.onchange(txtX,minH)\n    }\n}\nfunction resize(txtX,minH)\n{   txtX.style.height = 'auto' // required when delete, cut or paste is performed\n    txtX.style.height = txtX.scrollHeight+'px'\n    if(txtX.scrollHeight&lt;=minH)\n        txtX.style.height = minH+'px'\n}\nwindow.onload=attachAutoResizeEvents\n&lt;/script&gt;\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 4
                },
                {
                    "body": "<p>jQuery solution \nadjust the css to match your requirements</p>\n\n<p>css...</p>\n\n<pre><code>div#container textarea {\n    min-width: 270px;\n    width: 270px;\n    height: 22px;\n    line-height: 24px;\n    min-height: 22px;\n    overflow-y: hidden; /* fixes scrollbar flash - kudos to @brettjonesdev */\n    padding-top: 1.1em; /* fixes text jump on Enter keypress */\n}\n</code></pre>\n\n<p>javascript...</p>\n\n<pre><code>// auto adjust the height of\n$('#container').delegate( 'textarea', 'keyup', function (){\n    $(this).height( 0 );\n    $(this).height( this.scrollHeight );\n});\n$('#container').find( 'textarea' ).keyup();\n</code></pre>\n\n<p>OR alternative for jQuery 1.7+...</p>\n\n<pre><code>// auto adjust the height of\n$('#container').on( 'keyup', 'textarea', function (){\n    $(this).height( 0 );\n    $(this).height( this.scrollHeight );\n});\n$('#container').find( 'textarea' ).keyup();\n</code></pre>\n\n<p>I've created a fiddle with the absolute minimum styling as a starting point for your experiments...\n<a href=\"http://jsfiddle.net/chim/53eAy/\">http://jsfiddle.net/chim/53eAy/</a></p>\n",
                    "is_accepted": false,
                    "score": 45
                },
                {
                    "body": "<p>I'm able to set the TextArea size in IE9 and Chrome with the following jQuery function. It binds to the textarea objects from the selector defined in the $(document).ready() function. </p>\n\n<pre><code>function autoResize(obj, size) {\n    obj.keyup(function () {\n        if ($(this).val().length &gt; size-1) {\n            $(this).val( function() {\n                $(this).height(function() {\n                    return this.scrollHeight + 13;\n                });\n                alert('The maximum comment length is '+size+' characters.');\n                return $(this).val().substring(0, size-1);\n            });\n        }\n        $(this).height(function() {\n            if  ($(this).val() == '') {\n                return 15;\n            } else {\n                $(this).height(15);\n                return ($(this).attr('scrollHeight')-2);\n            }\n        });\n    }).keyup();\n}\n</code></pre>\n\n<p>In my $(document).ready() function I have the following call for all of my textarea calls on this page.</p>\n\n<pre><code>$('textarea').each( function() {\n        autoResize($(this), 250);\n});\n</code></pre>\n\n<p>Where <code>250</code> is the character limit on my text area. This will grow as large as the text size will allow (based on your character count and font size). It will also shrink your text area appropriately when you remove characters from your textarea or if the user pastes too much text initially.</p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>I know a short and correct way of implementing this with jquery.No extra hidden div needed and works in most browser</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;$(function(){\n$(\"textarea\").live(\"keyup keydown\",function(){\nvar h=$(this);\nh.height(60).height(h[0].scrollHeight);//where 60 is minimum height of textarea\n});});\n\n&lt;/script&gt;\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 2
                },
                {
                    "body": "<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;meta charset=\"UTF-8\"&gt;\n    &lt;title&gt;Textarea autoresize&lt;/title&gt;\n    &lt;style&gt;\n    textarea {\n        overflow: hidden;\n    }\n    &lt;/style&gt;\n    &lt;script&gt;\n    var te = document.querySelector('textarea');\n    te.addEventListener('keydown', resizeTextarea);\n\n    function resizeTextarea(ev) {\n        this.style.height = '24px';\n        this.style.height = this.scrollHeight + 12 + 'px';\n    }\n    &lt;/script&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;textarea&gt;&lt;/textarea&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>Tested in Firefox 14 and Chromium 18. The numbers 24 and 12 are arbitrary, test to see what suits you best.</p>\n\n<p>You could do without the style and script tags, but it becomes a bit messy imho (this is old style HTML+JS and is not encouraged).</p>\n\n<pre><code>&lt;textarea style=\"overflow: hidden\" onkeyup=\"this.style.height='24px'; this.style.height = this.scrollHeight + 12 + 'px';\"&gt;&lt;/textarea&gt;\n</code></pre>\n\n<p>Edit: modernized code. Changed onkeyup attribute to addEventListener.\n<br>Edit: keydown works better than keyup</p>\n\n<p><a href=\"http://jsfiddle.net/GijsjanB/ErWxU/\" rel=\"nofollow\">jsfiddle</a></p>\n",
                    "is_accepted": false,
                    "score": 15
                },
                {
                    "body": "<p>my quick jquery>=1.7 way to do this (cross browser tested in IE8, FF15, Chrome21, Safari6, no hardcoded values or anything):</p>\n\n<pre><code>  $(document).on('input keyup change', 'textarea', function() { // keyup, change to get IE\n    var ch, copy, sh;\n    copy = $(this).data('tacopy');\n    if (!copy) {\n      copy = $(this).clone();\n      copy.css('position', 'absolute');\n      copy.css('left', '-99999999px');\n      copy.width($(this).width());\n      copy.height($(this).height());\n      copy.prop('disabled', true);\n      copy.insertAfter($(this));\n      $(this).data('tacopy', copy);\n    }\n    copy.val($(this).val());\n    copy.height(0);\n    sh = copy.get(0).scrollHeight;\n    ch = $(this).height();\n    if (sh !== ch) {\n      $(this).height(sh);\n    }\n  });\n</code></pre>\n\n<p>only drawback: right click pasting in IE8 does not trigger it ... don't know why.</p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>Some of the answers here don't account for padding.</p>\n\n<p>Assuming you have a maxHeight you don't want to go over, this worked for me:</p>\n\n<pre><code>    // obviously requires jQuery\n\n    // element is the textarea DOM node\n\n    var $el = $(element);\n    // inner height is height + padding\n    // outerHeight includes border (and possibly margins too?)\n    var padding = $el.innerHeight() - $el.height();\n    var originalHeight = $el.height();\n\n    // XXX: Don't leave this hardcoded\n    var maxHeight = 300;\n\n    var adjust = function() {\n        // reset it to the original height so that scrollHeight makes sense\n        $el.height(originalHeight);\n\n        // this is the desired height (adjusted to content size)\n        var height = element.scrollHeight - padding;\n\n        // If you don't want a maxHeight, you can ignore this\n        height = Math.min(height, maxHeight);\n\n        // Set the height to the new adjusted height\n        $el.height(height);\n    }\n\n    // The input event only works on modern browsers\n    element.addEventListener('input', adjust);\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>You can try my plugin for this:\n<a href=\"https://github.com/AndrewDryga/jQuery.Textarea.Autoresize\" rel=\"nofollow\">https://github.com/AndrewDryga/jQuery.Textarea.Autoresize</a></p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>Here is what I did while using MVC HTML Helper for TextArea. I had quite a few of textarea elements so had to distinguish them using Model Id.</p>\n\n<pre><code> @Html.TextAreaFor(m =&gt; m.Text, 2, 1, new { id = \"text\" + Model.Id, onkeyup = \"resizeTextBox(\" + Model.Id + \");\" })\n</code></pre>\n\n<p>and in script added this: </p>\n\n<pre><code>   function resizeTextBox(ID) {            \n        var text = document.getElementById('text' + ID);\n        text.style.height = 'auto';\n        text.style.height = text.scrollHeight + 'px';            \n    }\n</code></pre>\n\n<p>I have tested it on IE10 and Firefox23</p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>There is a slightly different approach.</p>\n\n<pre><code>&lt;div style=\"position: relative\"&gt;\n  &lt;pre style=\"white-space: pre-wrap; word-wrap: break-word\"&gt;&lt;/pre&gt;\n  &lt;textarea style=\"position: absolute; top: 0; left: 0; width: 100%; height: 100%\"&gt;&lt;/textarea&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>The idea is to copy the text from <code>textarea</code> into the <code>pre</code> and let CSS make sure that they have the same size.</p>\n\n<p>The benefit is that frameworks present simple tools to move text around without touching any events. Namely, in AngularJS you would add a <code>ng-model=\"foo\" ng-trim=\"false\"</code> to the <code>textarea</code> and <code>ng-bind=\"foo + '\\n'\"</code> to the <code>pre</code>. See a <a href=\"http://jsfiddle.net/Un73w/\" rel=\"nofollow\">fiddle</a>.</p>\n\n<p>Just make sure that <code>pre</code> has the same font size as the <code>textarea</code>.</p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>If you don\u2019t need to support IE8 you can use the <code>input</code> event:</p>\n\n<pre><code>var resizingTextareas = [].slice.call(document.querySelectorAll('textarea[autoresize]'));\n\nresizingTextareas.forEach(function(textarea) {\n  textarea.addEventListener('input', autoresize, false);\n});\n\nfunction autoresize() {\n  this.style.height = 'auto';\n  this.style.height = this.scrollHeight+'px';\n  this.scrollTop = this.scrollHeight;\n  window.scrollTo(window.scrollLeft,(this.scrollTop+this.scrollHeight));\n}\n</code></pre>\n\n<p>Now you only need to add some CSS and you are done:</p>\n\n<pre><code>textarea[autoresize] {\n  display: block;\n  overflow: hidden;\n  resize: none;\n}\n</code></pre>\n\n<p><strong>Usage:</strong></p>\n\n<pre><code>&lt;textarea autoresize&gt;Type here and I\u2019ll resize.&lt;/textarea&gt;\n</code></pre>\n\n<p>You can read more about how it works <strong><a href=\"http://maximilianhoffmann.com/posts/autoresizing-textareas\" rel=\"nofollow\">on my blog post</a></strong>.</p>\n",
                    "is_accepted": false,
                    "score": 3
                },
                {
                    "body": "<p>An even simpler, cleaner approach is this: </p>\n\n<pre><code>// adjust height of textarea.auto-height\n$(document).on( 'keyup', 'textarea.auto-height', function (e){\n    $(this).css('height', 'auto' ); // you can have this hear or declared in CSS\n    $(this).height( this.scrollHeight );\n}).keyup();\n</code></pre>\n\n<p>// and the CSS</p>\n\n<pre><code>textarea.auto-height {\n    resize: vertical;\n    max-height: 600px; /* set as you need it */\n    height: auto;      /* can be set here of in JS */\n    overflow-y: auto;\n    word-wrap:break-word\n}\n</code></pre>\n\n<p>All that is needed is to add the class of .auto-height to any textarea you want to target.</p>\n\n<p>Tested in FF, Chrome and Safari.. let me know if this doesn't work for you, for any reason. But, this is the cleanest and simplest way I've found this to work.. and it works great ! :D</p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>The autosize jQuery plugin <a href=\"https://github.com/jackmoore/autosize\" rel=\"nofollow\">https://github.com/jackmoore/autosize</a> just works, is popular (1.5k GitHub stars, cdnjs) and lightweight:</p>\n\n<p><a href=\"http://jsfiddle.net/cirosantilli/35ch4jxz/\" rel=\"nofollow\">http://jsfiddle.net/cirosantilli/35ch4jxz/</a></p>\n\n<pre><code>&lt;textarea id=\"autosize\" style=\"width:200px;\"&gt;a\nb\nc&lt;/textarea&gt;\n&lt;script src=\"http://code.jquery.com/jquery-1.11.0.min.js\"&gt;&lt;/script&gt;\n&lt;script src=\"http://cdnjs.cloudflare.com/ajax/libs/autosize.js/1.18.4/jquery.autosize.min.js\"&gt;&lt;/script&gt;\n&lt;script&gt;$('#autosize').autosize()&lt;/script&gt;\n</code></pre>\n\n<p>As mentioned in a comment by @crispy, JQuery dependency has been removed on version 2 as of Feb 2015. TODO update the snippet.</p>\n\n<p>BTW, if you are using the ACE editor, use <code>maxLines: Infinity</code>: <a href=\"http://stackoverflow.com/questions/11584061/automatically-adjust-height-to-contents-in-ace-cloud9-editor\">Automatically adjust height to contents in Ace Cloud9 editor</a></p>\n",
                    "is_accepted": false,
                    "score": 2
                },
                {
                    "body": "<h1>A COMPLETE YET SIMPLE SOLUTION</h1>\n\n<p>I have seen many solutions to accomplish this over the years, some good, some not so much. I have still not found a solution that achieved everything I required so I have wrote my own solution. </p>\n\n<p>The following code will work:</p>\n\n<ul>\n<li>On key input.</li>\n<li>With pasted text <em>(right click &amp; ctrl+v).</em></li>\n<li>With cut text <em>(right click &amp; ctrl+x).</em></li>\n<li>With pre-loaded text.</li>\n<li>With all textarea's (multiline textbox's) site wide.</li>\n<li>With <strong>Firefox</strong> <em>(v31 tested).</em></li>\n<li>With <strong>Chrome</strong> <em>(v37 tested).</em></li>\n<li>With <strong>IE</strong> <em>(v11 tested).</em></li>\n<li>Is <strong>w3c</strong> validated.</li>\n<li>And is streamlined and efficient.</li>\n</ul>\n\n<p>This code requires jQuery and has been tested and is working with <strong>1.7.2</strong> - <strong>2.1.1</strong></p>\n\n<hr>\n\n<p><a href=\"http://jsfiddle.net/ttwbxwon/\" rel=\"nofollow\"><h1>> CLICK TO DEMO &lt;</h1></a></p>\n\n<hr>\n\n<h2>OPTION 1</h2>\n\n<p><strong>JQUERY</strong> <em>(Add this jquery code to your master script file and forget about it.)</em></p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>function h(e) {\r\n    $(e).css({'height':'auto','overflow-y':'hidden'}).height(e.scrollHeight);\r\n}\r\n$('textarea').each(function () {\r\n  h(this);\r\n}).on('input', function () {\r\n  h(this);\r\n});</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script src=\"https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js\"&gt;&lt;/script&gt;\r\n&lt;textarea placeholder=\"Type, paste, cut text here...\"&gt;PRELOADED TEXT.\r\nLorem ipsum dolor sit amet, consectetur adipiscing elit. Nam ornare elementum sapien sit amet vestibulum. Maecenas et convallis lacus. Etiam maximus justo quis lorem finibus sollicitudin. Nulla eu risus nec tellus sollicitudin finibus id blandit urna. Pellentesque dictum et odio sed laoreet.&lt;/textarea&gt;\r\n\r\n&lt;textarea placeholder=\"Type, paste, cut text here...\"&gt;&lt;/textarea&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<h2>OPTION 2</h2>\n\n<p><strong>JQUERY EXTENSION</strong> <em>(Alternative)</em></p>\n\n<pre><code>jQuery.fn.extend({\n  autoHeight: function () {\n    function autoHeight_(element) {\n      return jQuery(element)\n        .css({ 'height': 'auto', 'overflow-y': 'hidden' })\n        .height(element.scrollHeight);\n    }\n    return this.each(function() {\n      autoHeight_(this).on('input', function() {\n        autoHeight_(this);\n      });\n    });\n  }\n});\n</code></pre>\n\n<p>Invoke with <code>$('textarea').autoHeight()</code> </p>\n\n<p>Useful if you want to apply further chaining to the textareas you want to be auto-sized. </p>\n",
                    "is_accepted": false,
                    "score": 10
                },
                {
                    "body": "<p>Has anyone considered contenteditable? No messing around with scrolling,a nd the only JS I like about it is if you plan on saving the data on blur... and apparently, it's compatible on all of the popular browsers : <a href=\"http://caniuse.com/#feat=contenteditable\" rel=\"nofollow\">http://caniuse.com/#feat=contenteditable</a></p>\n\n<p>Just style it to look like a text box, and it autosizes... Make its min-height the preferred text height and have at it.</p>\n\n<p>What's cool about this approach is that you can save  and  tags on some of the browsers.</p>\n\n<p><a href=\"http://jsfiddle.net/gbutiri/v31o8xfo/\" rel=\"nofollow\">http://jsfiddle.net/gbutiri/v31o8xfo/</a></p>\n\n<pre><code>&lt;style&gt;\n.autoheight {\n    min-height: 16px;\n    font-size: 16px;\n    margin: 0;\n    padding: 10px;\n    font-family: Arial;\n    line-height: 16px;\n    box-sizing: border-box;\n    -moz-box-sizing: border-box;\n    -webkit-box-sizing: border-box;\n    overflow: hidden;\n    resize: none;\n    border: 1px solid #ccc;\n    outline: none;\n    width: 200px;\n}\n&lt;/style&gt;\n&lt;script src=\"https://code.jquery.com/jquery-2.1.1.min.js\"&gt;&lt;/script&gt;\n&lt;script&gt;\n$(document).on('blur','.autoheight',function(e) {\n    var $this = $(this);\n    // The text is here. Do whatever you want with it.\n    console.log($this.html());\n});\n\n&lt;/script&gt;\n&lt;div class=\"autoheight contenteditable\" contenteditable=\"true\"&gt;Mickey Mouse&lt;/div&gt;\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>I Don't know if anyone mention this way but in some cases it's possible to resize the height with rows Attribute</p>\n\n<pre><code>textarea.setAttribute('rows',breaks);\n</code></pre>\n\n<p><a href=\"http://jsfiddle.net/rspr06pL/1/\" rel=\"nofollow\">Demo</a></p>\n",
                    "is_accepted": false,
                    "score": 1
                }
            ],
            "body": "<p>There was <a href=\"http://stackoverflow.com/questions/7477/autosizing-textarea\">another thread about this</a>, which I've tried. But there is one problem: the textarea doesn't shrink if you delete the content. I can't find any way to shrink it to the correct size - the clientHeight value comes back as the full size of the textarea, not its contents.</p>\n\n<p>The code from that page is below. I'd appreciate any help or pointers.</p>\n\n<pre><code>function FitToContent(id, maxHeight)\n{\n   var text = id &amp;&amp; id.style ? id : document.getElementById(id);\n   if ( !text )\n      return;\n\n   var adjustedHeight = text.clientHeight;\n   if ( !maxHeight || maxHeight &gt; adjustedHeight )\n   {\n      adjustedHeight = Math.max(text.scrollHeight, adjustedHeight);\n      if ( maxHeight )\n         adjustedHeight = Math.min(maxHeight, adjustedHeight);\n      if ( adjustedHeight &gt; text.clientHeight )\n         text.style.height = adjustedHeight + \"px\";\n   }\n}\n\nwindow.onload = function() {\n    document.getElementById(\"ta\").onkeyup = function() {\n      FitToContent( this, 500 )\n    };\n}\n</code></pre>\n",
            "last_activity_date": 1425199294,
            "question_id": 454202,
            "score": 92,
            "tags": [
                "javascript",
                "resize",
                "textarea",
                "height"
            ],
            "title": "Creating a textarea with auto-resize"
        },
        {
            "answer_count": 2,
            "answers": [
                {
                    "body": "<p><code>Access-Control-Allow-Origin</code> is a <a href=\"http://www.html5rocks.com/en/tutorials/cors/\">CORS (Cross-Origin Resource Sharing) header</a>.</p>\n\n<p>When Site A tries to fetch content from Site B,  Site B can send an <code>Access-Control-Allow-Origin</code> response header to tell the browser that the content of this page is accessible to certain origins. (An <em>origin</em> is a <a href=\"http://stackoverflow.com/a/19542686/710446\">domain, plus a scheme and port number</a>.)  By default, Site B's pages are <a href=\"https://en.wikipedia.org/wiki/Same-origin_policy\">not accessible to any other origin</a>; using the <code>Access-Control-Allow-Origin</code> header opens a door for cross-origin access by specific requesting origins.</p>\n\n<p>For each resource/page that Site B wants to make accessible to Site A, Site B should serve its pages with the response header:</p>\n\n<pre><code>Access-Control-Allow-Origin: http://siteA.com\n</code></pre>\n\n<p>Modern browsers will not block cross-domain requests outright.  If Site A requests a page from Site B, the browser will actually fetch the requested page <em>on the network level</em> and check if the response headers list Site A as a permitted requester domain.  If Site B has not indicated that Site A is allowed to access this page, the browser will trigger the <code>XMLHttpRequest</code>'s <code>error</code> event and  deny the response data to the requesting JavaScript code.</p>\n\n<h1>Non-simple requests</h1>\n\n<p>What happens on the network level can be <em>slightly</em> more complex than explained above. If the request is a <a href=\"http://www.html5rocks.com/en/tutorials/cors/#toc-handling-a-not-so-simple-request\">\"non-simple\" request</a>, the browser first sends a data-less \"preflight\" OPTIONS request, to verify that the server will accept the request. A request is non-simple when either (or both):</p>\n\n<ul>\n<li>using an HTTP verb other than GET or POST (e.g. PUT, DELETE)</li>\n<li>using non-simple request headers; the only simple requests headers are:\n<ul>\n<li><code>Accept</code></li>\n<li><code>Accept-Language</code></li>\n<li><code>Content-Language</code></li>\n<li><code>Content-Type</code> (this is only simple when its value is <code>application/x-www-form-urlencoded</code>, <code>multipart/form-data</code>, or <code>text/plain</code>)</li>\n</ul></li>\n</ul>\n\n<p>If the server responds to the OPTIONS preflight with appropriate response headers (<code>Access-Control-Allow-Headers</code> for non-simple headers, <code>Access-Control-Allow-Methods</code> for non-simple verbs) that match the non-simple verb and/or non-simple headers, then the browser sends the actual request.</p>\n\n<p>Supposing that Site A wants to send a PUT request for <code>/somePage</code>, with a non-simple <code>Content-Type</code> value of <code>application/json</code>, the browser would first send a preflight request:</p>\n\n<pre><code>OPTIONS /somePage HTTP/1.1\nOrigin: http://siteA.com\nAccess-Control-Request-Method: PUT\nAccess-Control-Request-Headers: Content-Type\n</code></pre>\n\n<p>Note that <code>Access-Control-Request-Method</code> <code>and Access-Control-Request-Headers</code> are added by the browser automatically; you do not need to add them. This OPTIONS preflight gets the successful response headers:</p>\n\n<pre><code>Access-Control-Allow-Origin: http://siteA.com\nAccess-Control-Allow-Methods: GET, POST, PUT\nAccess-Control-Allow-Headers: Content-Type\n</code></pre>\n\n<p>When sending the actual request (after preflight is done), the behavior is identical to how a simple request is handled. In other words, a non-simple request whose preflight is successful is treated the same as a simple request (i.e., the server must still send <code>Access-Control-Allow-Origin</code> again for the actual response).</p>\n\n<p>The browsers sends the actual request:</p>\n\n<pre><code>PUT /somePage HTTP/1.1\nOrigin: http://siteA.com\nContent-Type: application/json\n\n{ \"myRequestContent\": \"JSON is so great\" }\n</code></pre>\n\n<p>And the server sends back an <code>Access-Control-Allow-Origin</code>, just as it would for a simple request:</p>\n\n<pre><code>Access-Control-Allow-Origin: http://siteA.com\n</code></pre>\n\n<p>See <a href=\"http://stackoverflow.com/a/13400954/710446\">Understanding XMLHttpRequest over CORS</a> for a little more information about non-simple requests.</p>\n",
                    "is_accepted": true,
                    "score": 116
                },
                {
                    "body": "<p>Cross-Origin Request Sharing - CORS (A.K.A. Cross-Domain AJAX request) is an issue that most web developers might encounter, according to Same-Origin-Policy, browsers restrict client JavaScript in a security sandbox, usually JS cannot directly communicate with a remote server from a different domain. In the past developers created many tricky ways to achieve Cross-Domain resource request, most commonly using ways are:</p>\n\n<ol>\n<li>Use Flash/Silverlight or server side as a \"proxy\" to communicate\nwith remote. </li>\n<li>JSON With Padding (<a href=\"http://en.wikipedia.org/wiki/JSONP\">JSONP</a>). </li>\n<li>Embeds remote server in an iframe and communicate through fragment or window.name, refer <a href=\"http://www.ibm.com/developerworks/library/wa-crossdomaincomm/#N10120\">here</a>.</li>\n</ol>\n\n<p>Those tricky ways have more or less some issues, for example JSONP might result in security hole if developers simply \"eval\" it, and #3 above, although it works, both domains should build strict contract between each other, it neither flexible nor elegant IMHO:)</p>\n\n<p>W3C had introduced Cross-Origin Resource Sharing (CORS) as a standard solution to provide a safe, flexible and a recommended standard way to solve this issue. </p>\n\n<p><strong>The Mechanism</strong></p>\n\n<p>From a high level we can simply deem CORS is a contract between client AJAX call from domain A and a page hosted on domain B, a tipical Cross-Origin request/response would be:</p>\n\n<p><strong>DomainA AJAX request headers</strong></p>\n\n<pre><code>Host DomainB.com\nUser-Agent Mozilla/5.0 (Windows NT 6.1; WOW64; rv:2.0) Gecko/20100101 Firefox/4.0\nAccept text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8,application/json\nAccept-Language en-us;\nAccept-Encoding gzip, deflate\nKeep-Alive 115\nOrigin http://DomainA.com \n</code></pre>\n\n<p><strong>DomainB response headers</strong></p>\n\n<pre><code>Cache-Control private\nContent-Type application/json; charset=utf-8\nAccess-Control-Allow-Origin DomainA.com\nContent-Length 87\nProxy-Connection Keep-Alive\nConnection Keep-Alive\n</code></pre>\n\n<p>The blue parts I marked above were the kernal facts, \"Origin\" request header \"indicates where the cross-origin request or preflight request originates from\", the \"Access-Control-Allow-Origin\" response header indicates this page allows remote request from DomainA (if the value is * indicate allows remote requests from any domain).</p>\n\n<p>As I mentioned above, W3 recommended browser to implement a \"<strong>preflight request</strong>\" before submiting the actually Cross-Origin HTTP request, in a nutshell it is an HTTP \"OPTIONS\" request:</p>\n\n<pre><code>OPTIONS DomainB.com/foo.aspx HTTP/1.1\n</code></pre>\n\n<p>If foo.aspx supports OPTIONS HTTP verb, it might return response like below:</p>\n\n<pre><code>HTTP/1.1 200 OK\nDate: Wed, 01 Mar 2011 15:38:19 GMT\nAccess-Control-Allow-Origin: http://DomainA.com\nAccess-Control-Allow-Methods: POST, GET, OPTIONS, HEAD\nAccess-Control-Allow-Headers: X-Requested-With\nAccess-Control-Max-Age: 1728000\nConnection: Keep-Alive\nContent-Type: application/json\n</code></pre>\n\n<p>Only if the response contains \"Access-Control-Allow-Origin\" AND its value is \"*\" or contain the domain who submitted the CORS request, by satisfying this mandtory condition browser will submit the actual Cross-Domain request, and cache the result in \"<strong>Preflight-Result-Cache</strong>\".</p>\n\n<p>I blogged about CORS three years ago: <a href=\"http://wayneye.com/Blog/Ajax-Cross-Origin-HTTP-request\">http://wayneye.com/Blog/Ajax-Cross-Origin-HTTP-request</a></p>\n",
                    "is_accepted": false,
                    "score": 29
                }
            ],
            "body": "<p>Apparently, I have completely misunderstood its semantics. I thought of something like this:</p>\n\n<ol>\n<li>A client downloads javascript code MyCode.js from http://siteA - <strong>the origin</strong>.</li>\n<li>The response header of MyCode.js contains <strong>Access-Control-Allow-Origin: http://siteB</strong>, which I thought meant that MyCode.js was allowed to make cross-origin references to the site B.</li>\n<li>The client triggers some functionality of MyCode.js, which in turn make requests to http://siteB, which should be fine, despite being cross-origin requests.</li>\n</ol>\n\n<p>Well, I am wrong. It does not work like this at all. So, I have read <a href=\"http://en.wikipedia.org/wiki/Cross-origin_resource_sharing\">http://en.wikipedia.org/wiki/Cross-origin_resource_sharing</a> and attempted to read <a href=\"http://www.w3.org/TR/cors/\">http://www.w3.org/TR/cors/</a>.</p>\n\n<p>One thing is sure - I still do not understand how am I supposed to use this header. </p>\n\n<p>I have full control of both site A and site B. How do I enable the javascript code downloaded from the site A to access resources on the site B using this header?</p>\n\n<p>P.S.</p>\n\n<p>I do not want to utilize JSONP.</p>\n",
            "last_activity_date": 1412366556,
            "question_id": 10636611,
            "score": 88,
            "tags": [
                "javascript",
                "cross-domain",
                "cors"
            ],
            "title": "How does Access-Control-Allow-Origin header work?"
        },
        {
            "answer_count": 11,
            "answers": [
                {
                    "body": "<p>You can determine that the connection is lost by making <strong>failed XHR requests</strong>.</p>\n\n<p>The standard approach is to <strong>retry the request</strong> a few times.  If it doesn't go through, <strong>alert the user</strong> to check the connection, and <strong>fail gracefully</strong>.</p>\n\n<p><strong>Sidenote:</strong> To put the entire application in an \"offline\" state may lead to a lot of error-prone work of handling state.. wireless connections may come and go, etc.  So your best bet may be to just fail gracefully, preserve the data, and alert the user.. allowing them to eventually fix the connection problem if there is one, and to continue using your app with a fair amount of forgiveness.</p>\n\n<p><strong>Sidenote:</strong> You could check a reliable site like google for connectivity, but this may not be entirely useful as just trying to make your own request, because while google may be available, your own application may not be, and you're still going to have to handle your own connection problem.  Trying to send a ping to google would be a good way to confirm that the internet connection itself is down, so if that information is useful to you, then it might be worth the trouble.</p>\n\n<p><strong>Sidenote</strong>: <em>Sending a Ping</em> could be achieved in the same way that you would make any kind of two-way ajax request, but sending a ping to google in this case would pose some challenges.  First, we'd have the same cross-domain issues that are typically encountered in making ajax communications.  One option is to set up a server-side proxy, wherein we actually <code>ping</code> google (or whatever site), and return the results of the ping to the app.. This is a <strong>catch-22</strong>, because if the internet connection is actually the problem, we won't be able to get to the server, and if the connection problem is only on our own domain, we won't be able to tell the difference. Other cross-domain techniques could be tried, for example, embedding an iframe in your page which points to google.com, and then polling the iframe for success/failure (examine the contents, etc).  Embedding an image may not really tell us anything, because we need a useful response from the communication mechanism in order to draw a good conclusion about what's going on.  So again, determining the state of the internet connection as a whole may be more trouble than it's worth.  You'll have to weight these options out for your specific app.</p>\n",
                    "is_accepted": true,
                    "score": 57
                },
                {
                    "body": "<p>There are a number of ways to do this:</p>\n\n<ul>\n<li>AJAX request to your own website. If that request fails, there's a good chance it's the connection at fault. The <a href=\"http://www.jquery.com\">JQuery</a> documentation has a section on <a href=\"http://docs.jquery.com/Ajax/ajaxError#callback\">handling failed AJAX requests</a>. Beware of the <a href=\"http://en.wikipedia.org/wiki/Same_origin_policy\">Same Origin Policy</a> when doing this, which may stop you from accessing sites outside your domain.</li>\n<li><p>You could put an <code>onerror</code> in an <code>img</code>, like</p>\n\n<pre><code>&lt;img src='http://www.example.com/singlepixel.gif' \n      onerror='alert(\"Connection dead\");' /&gt;\n</code></pre>\n\n<p>This method could also fail if the source image is moved / renamed, and would generally be an inferior choice to the ajax option.</p></li>\n</ul>\n\n<p>So there are several different ways to try and detect this, none perfect, but in the absence of the ability to jump out of the browser sandbox and access the user's net connection status directly, they seem to be the best options.</p>\n",
                    "is_accepted": false,
                    "score": 25
                },
                {
                    "body": "<p>IE 8 will support the [window.navigator.onLine](<a href=\"http://msdn.microsoft.com/en-us/library/cc304129(VS.85).aspx#status_improvements)\" rel=\"nofollow\">http://msdn.microsoft.com/en-us/library/cc304129(VS.85).aspx#status_improvements)</a> property.</p>\n\n<p>But of course that doesn't help with other browsers or operating systems. I predict other browser vendors will decide to provide that property as well given the importance of knowing online/offline status in Ajax applications.</p>\n\n<p>Until that happens, either XHR or an <code>Image()</code> or <code>&lt;img&gt;</code> request can provide something close to the functionality you want.</p>\n\n<p><strong>Update (2014/11/16)</strong></p>\n\n<p>Major browsers now support this property, but your results will vary.</p>\n\n<p>Quote from <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/NavigatorOnLine.onLine\" rel=\"nofollow\">Mozilla Documentation</a>:</p>\n\n<blockquote>\n  <p>In Chrome and Safari, if the browser is not able to connect to a local area network (LAN) or a router, it is offline; all other conditions return <code>true</code>. So while you can assume that the browser is offline when it returns a <code>false</code> value, you cannot assume that a true value necessarily means that the browser can access the internet. You could be getting false positives, such as in cases where the computer is running a virtualization software that has virtual ethernet adapters that are always \"connected.\" Therefore, if you really want to determine the online status of the browser, you should develop additional means for checking.</p>\n  \n  <p>In Firefox and Internet Explorer, switching the browser to offline mode sends a <code>false</code> value. All other conditions return a <code>true</code> value.</p>\n</blockquote>\n",
                    "is_accepted": false,
                    "score": 22
                },
                {
                    "body": "<p>The HTML5 Application Cache API specifies navigator.onLine, which is currently available in the IE8 betas, WebKit (eg. Safari) nightlies, and is already supported in Firefox 3</p>\n",
                    "is_accepted": false,
                    "score": 10
                },
                {
                    "body": "<p>You can use <a href=\"http://docs.jquery.com/Ajax/jQuery.ajax#options\" rel=\"nofollow\">$.ajax()</a>'s <code>error</code> callback, which fires if the request fails. If <code>textStatus</code> equals the string \"timeout\" it probably means connection is broken:</p>\n\n<pre><code>function (XMLHttpRequest, textStatus, errorThrown) {\n  // typically only one of textStatus or errorThrown \n  // will have info\n  this; // the options for this ajax request\n}\n</code></pre>\n\n<p>From the <a href=\"http://docs.jquery.com/Ajax/jQuery.ajax#options\" rel=\"nofollow\">doc</a>:</p>\n\n<blockquote>\n  <p><strong>Error</strong>: A function to be called if the request\n  fails. The function is passed three\n  arguments: The XMLHttpRequest object,\n  a string describing the type of error\n  that occurred and an optional\n  exception object, if one occurred.\n  Possible values for the second\n  argument (besides null) are \"timeout\",\n  \"error\", \"notmodified\" and\n  \"parsererror\". This is an Ajax Event</p>\n</blockquote>\n\n<p>So for example:</p>\n\n<pre><code> $.ajax({\n   type: \"GET\",\n   url: \"keepalive.php\",\n   success: function(msg){\n     alert(\"Connection active!\")\n   },\n   error: function(XMLHttpRequest, textStatus, errorThrown) {\n       if(textStatus == 'timeout') {\n           alert('Connection seems dead!');\n       }\n   }\n });\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 4
                },
                {
                    "body": "<p>Very interesting script that resumes a lot of above:</p>\n\n<p><a href=\"http://www.codeproject.com/KB/scripting/InternetConnectionTest.aspx\" rel=\"nofollow\">http://www.codeproject.com/KB/scripting/InternetConnectionTest.aspx</a></p>\n\n<p>It is very useful, and because it is Ajax based, is asyncronous, so you can check if the Internet is conected without leaving the original page. Using this with a timer you can also have a component in the page checking every n minutes.</p>\n",
                    "is_accepted": false,
                    "score": -1
                },
                {
                    "body": "<p>As olliej said, using the <code>navigator.onLine</code> browser property is preferable than sending network requests and, accordingly with <a href=\"https://developer.mozilla.org/En/Online%5Fand%5Foffline%5Fevents#section%5F3\" rel=\"nofollow\">developer.mozilla.org/En/Online_and_offline_events</a>, it is even supported by old versions of Firefox and IE.</p>\n\n<p>Recently, the WHATWG has specified the addition of the <code>online</code> and <code>offline</code> events, in case you need to react on <code>navigator.onLine</code> changes.</p>\n\n<p>Please also pay attention to the link posted by Daniel Silveira which points out that relying on those signal/property for syncing with the server is not always a good idea.</p>\n",
                    "is_accepted": false,
                    "score": 3
                },
                {
                    "body": "<p>Here is a snippet of a helper utility I have. This is namespaced javascript:</p>\n\n<pre><code>network: function() {\n    var state = navigator.onLine ? \"online\" : \"offline\";\n    return state;\n}\n</code></pre>\n\n<p>You should use this with method detection else fire off an 'alternative' way of doing this. The time is fast approaching when this will be all that is needed. The other methods are hacks.</p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>My way.</p>\n\n<pre><code>&lt;!-- the file named \"tt.jpg\" should exist in the same directory --&gt;\n\n&lt;script&gt;\nfunction testConnection(callBack)\n{\n    document.getElementsByTagName('body')[0].innerHTML +=\n        '&lt;img id=\"testImage\" style=\"display: none;\" ' +\n        'src=\"tt.jpg?' + Math.random() + '\" ' +\n        'onerror=\"testConnectionCallback(false);\" ' +\n        'onload=\"testConnectionCallback(true);\"&gt;';\n\n    testConnectionCallback = function(result){\n        callBack(result);\n\n        var element = document.getElementById('testImage');\n        element.parentNode.removeChild(element);\n    }    \n}\n&lt;/script&gt;\n\n&lt;!-- usage example --&gt;\n\n&lt;script&gt;\nfunction myCallBack(result)\n{\n    alert(result);\n}\n&lt;/script&gt;\n\n&lt;a href=# onclick=testConnection(myCallBack);&gt;Am I online?&lt;/a&gt;\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>Best i found that works is this:</p>\n\n<pre><code>var a=navigator.onLine;\n if(a){\n  alert('online');\n }else{\n  alert('ofline');\n }\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 8
                },
                {
                    "body": "<p>I had to make a web app (ajax based) for a customer who works a lot with schools, these schools have often a bad internet connection I use this simple function to detect if there is a connection, works very well!</p>\n\n<p>I use CodeIgniter and Jquery:</p>\n\n<pre><code>    function checkOnline(){\n    setTimeout(\"doOnlineCheck()\", 20000);\n}\n\nfunction doOnlineCheck(){\n    var submitURL = $(\"#base_path\").val() + \"index.php/menu/online\";//if the server can be reached it returns 1, other wise it times out\n    $.ajax({\n        url     : submitURL     ,\n        type    : 'post'        ,\n        dataType: 'msg'         ,\n        timeout : 5000          ,\n        success : function(msg){\n            if(msg==1){\n                $(\"#online\").addClass(\"online\");\n                $(\"#online\").removeClass(\"offline\");\n            }else{\n                $(\"#online\").addClass(\"offline\");\n                $(\"#online\").removeClass(\"online\");\n            }\n            checkOnline();\n        }   ,\n        error   : function(){\n            $(\"#online\").addClass(\"offline\");\n            $(\"#online\").removeClass(\"online\");\n            checkOnline();\n        }\n    });\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 3
                }
            ],
            "body": "<p>How to detect that the Internet connection is offline in JavaScript?</p>\n",
            "last_activity_date": 1423859162,
            "question_id": 189430,
            "score": 84,
            "tags": [
                "javascript",
                "ajax",
                "offline",
                "connectivity"
            ],
            "title": "Detect that the Internet connection is offline?"
        },
        {
            "answer_count": 5,
            "answers": [
                {
                    "body": "<p>Copying to the clipboard is a tricky task to do in Javascript in terms of browser compatibility. The best way to do it is using a small flash. It will work on every browser. You can check it in <a href=\"http://wayback.archive.org/web/20091219184623/http://beckelman.net/demos/jQueryCopyToClipboard/Default.aspx\">this article</a>.</p>\n\n<p>Here's how to do it for Internet Explorer:</p>\n\n<pre><code>function copy (str)\n{\n    //for IE ONLY!\n    window.clipboardData.setData('Text',str);\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 26
                },
                {
                    "body": "<p>I was in need of something like this, and this one seems promising:</p>\n\n<p><a href=\"http://github.com/mojombo/clippy\">http://github.com/mojombo/clippy</a></p>\n\n<p>Here's a simple jquery plugin for it as well: <a href=\"http://gist.github.com/66579\">http://gist.github.com/66579</a></p>\n",
                    "is_accepted": false,
                    "score": 6
                },
                {
                    "body": "<p>This one is cross browser and works with Flash 10.</p>\n\n<p><a href=\"http://beckelman.net/post/2009/01/22/Copy-to-Clipboard-with-ZeroClipboard-Flash-10-and-jQuery.aspx\">http://beckelman.net/post/2009/01/22/Copy-to-Clipboard-with-ZeroClipboard-Flash-10-and-jQuery.aspx</a></p>\n",
                    "is_accepted": false,
                    "score": 6
                },
                {
                    "body": "<p>Started the search here and found <a href=\"http://www.steamdev.com/zclip\">http://www.steamdev.com/zclip</a> - works perfectly for me.</p>\n",
                    "is_accepted": false,
                    "score": 48
                },
                {
                    "body": "<p>There are a bunch of options over here:\n<a href=\"http://www.jquery4u.com/plugins/jquery-copy-clipboard-4-options/#.UFbo1YriYz0\">http://www.jquery4u.com/plugins/jquery-copy-clipboard-4-options/#.UFbo1YriYz0</a></p>\n",
                    "is_accepted": false,
                    "score": 8
                }
            ],
            "body": "<p>The workflow is simple:</p>\n\n<ol>\n<li>You click inside a textarea.</li>\n<li>The text is copied to the client's clipboard.</li>\n<li>Display notice to the user.</li>\n</ol>\n\n<p>How do you do it?</p>\n",
            "last_activity_date": 1380714432,
            "question_id": 1539641,
            "score": 171,
            "tags": [
                "javascript",
                "jquery",
                "browser",
                "clipboard",
                "copy-paste"
            ],
            "title": "How to copy text to the client&#39;s clipboard using jQuery?"
        },
        {
            "answer_count": 9,
            "answers": [
                {
                    "body": "<p>Should be obvious, but the link to that MSDN article is regarding an IE only feature.</p>\n\n<p>Generally the following cross-browser trick is what all the libraries do to get DOM elements from an html string (<a href=\"http://stackoverflow.com/questions/1848588/why-does-html-work-and-not-innerhtml-or-appendchild/1849100#1849100\">with some extra work for IE</a> for <code>&lt;td&gt;</code>s, <code>&lt;tr&gt;</code>s, <code>&lt;thead&gt;</code>s, <code>&lt;select&gt;</code>s and more):</p>\n\n<pre><code>// HTML string\nvar s = '&lt;li&gt;text&lt;/li&gt;';\n\nvar div = document.createElement('div');\ndiv.innerHTML = s;\nvar elements = div.childNodes;\n</code></pre>\n\n<p>Or <code>var element = div.firstChild</code> if you know you're getting a single root node.</p>\n\n<p>I would recommend you stick to the library-approved method of creating elements from HTML strings though. Prototype has this feature built-into its <a href=\"http://www.prototypejs.org/api/element/update\"><code>update()</code> method</a>.</p>\n",
                    "is_accepted": true,
                    "score": 212
                },
                {
                    "body": "<p>With Prototype, you can also do:</p>\n\n<p>HTML:</p>\n\n<pre><code>&lt;ul id=\"mylist\"&gt;&lt;/ul&gt;\n</code></pre>\n\n<p>JS:</p>\n\n<pre><code>$('mylist').insert('&lt;li&gt;text&lt;/li&gt;');\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 12
                },
                {
                    "body": "<p>Here's my code, and it works:</p>\n\n<pre><code>function parseTableHtml(s) { // s is string\n    var div = document.createElement('table');\n    div.innerHTML = s;\n\n    var tr = div.getElementsByTagName('tr');\n    // ...\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 2
                },
                {
                    "body": "<p>Newer DOM implementations have <a href=\"https://developer.mozilla.org/en/DOM/range.createContextualFragment\" rel=\"nofollow\"><code>range.createContextualFragment</code></a>, which does what you want in a framework-independent way. At a glance it appears to be well supported among modern implementations of Firefox, Chrome and Safari, and you can use the nonstandard implementation of <code>createElement</code> in IE.</p>\n",
                    "is_accepted": false,
                    "score": 7
                },
                {
                    "body": "<p>This will work too:</p>\n\n<pre><code>$('&lt;li&gt;').text('hello').appendTo('#mylist');\n</code></pre>\n\n<p>It feels more like a jquery way with the chained function calls.</p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<pre><code>var jtag = $j.li({ child:'text' }); // Represents: &lt;li&gt;text&lt;/li&gt;\nvar htmlContent = $('mylist').html();\n$('mylist').html(htmlContent + jtag.html());\n</code></pre>\n\n<p>Use <a href=\"http://jnerator.com/\" rel=\"nofollow\">jnerator</a></p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>Late but just as a note;</p>\n\n<p>It's possible to add a trivial element to target element as a container and remove it after using.</p>\n\n<p>// Tested on chrome 23.0, firefox 18.0, ie 7-8-9 and opera 12.11.</p>\n\n<pre><code>&lt;div id=\"div\"&gt;&lt;/div&gt;\n\n&lt;script&gt;\nwindow.onload = function() {\n    var foo, targetElement = document.getElementById('div')\n    foo = document.createElement('foo')\n    foo.innerHTML = '&lt;a href=\"#\" target=\"_self\"&gt;Text of A 1.&lt;/a&gt; '+\n                    '&lt;a href=\"#\" onclick=\"return !!alert(this.innerHTML)\"&gt;Text of &lt;b&gt;A 2&lt;/b&gt;.&lt;/a&gt; '+\n                    '&lt;hr size=\"1\" /&gt;'\n    // Append 'foo' element to target element\n    targetElement.appendChild(foo)\n\n    // Add event\n    foo.firstChild.onclick = function() { return !!alert(this.target) }\n\n    while (foo.firstChild) {\n        // Also removes child nodes from 'foo'\n        targetElement.insertBefore(foo.firstChild, foo)\n    }\n    // Remove 'foo' element from target element\n    targetElement.removeChild(foo)\n}\n&lt;/script&gt;\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 3
                },
                {
                    "body": "<p>Heres a simple way to do it:</p>\n\n<pre><code>String.prototype.toDOM=function(){\n  var d=document\n     ,i\n     ,a=d.createElement(\"div\")\n     ,b=d.createDocumentFragment();\n  a.innerHTML=this;\n  while(i=a.firstChild)b.appendChild(i);\n  return b;\n};\n\nvar foo=\"&lt;img src='//placekitten.com/100/100'&gt;foo&lt;i&gt;bar&lt;/i&gt;\".toDOM();\ndocument.body.appendChild(foo);\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 4
                },
                {
                    "body": "<p>For the heck of it I thought I'd share this over complicated but yet simple approach I came up with... Maybe someone will find something useful.</p>\n\n<pre><code>/*Creates a new element - By Jamin Szczesny*/\nfunction _new(args){\n    ele = document.createElement(args.node);\n    delete args.node;\n    for(x in args){ \n        if(typeof ele[x]==='string'){\n            ele[x] = args[x];\n        }else{\n            ele.setAttribute(x, args[x]);\n        }\n    }\n    return ele;\n}\n\n/*You would 'simply' use it like this*/\n\n$('body')[0].appendChild(_new({\n    node:'div',\n    id:'my-div',\n    style:'position:absolute; left:100px; top:100px;'+\n          'width:100px; height:100px; border:2px solid red;'+\n          'cursor:pointer; background-color:HoneyDew',\n    innerHTML:'My newly created div element!',\n    value:'for example only',\n    onclick:\"alert('yay')\"\n}));\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                }
            ],
            "body": "<p>I'm trying to create an element dynamically using an HTML string.  Here's a simple example using both prototype and DOM:</p>\n\n<pre><code>// HTML string\nvar s = '&lt;li&gt;text&lt;/li&gt;';\n// DOM\nvar el1 = document.createElement(s);\n// prototype\nvar el2 = new Element(s);\n$('mylist').appendChild(el1);\n$('mylist').appendChild(el2);\n</code></pre>\n\n<p>Both approaches insert an empty listitem to the list.</p>\n\n<p>I know that using prototype's Element as a constructor requires a tagName and an optional attributes parameter, but I figured it may let me pass in an HTML string too.</p>\n\n<p>However, <a href=\"http://msdn.microsoft.com/en-us/library/ms536389.aspx\">MSDN</a> states \"You can also specify all the attributes inside the createElement method by using an HTML string for the method argument.\"... so I'm not sure what the problem is.</p>\n\n<p>And yes, i know i could do this easily in jquery, unfortunately we're not using jquery.  Am i overlooking something really simple here?</p>\n",
            "last_activity_date": 1398346189,
            "question_id": 494143,
            "score": 118,
            "tags": [
                "javascript",
                "dom",
                "prototypejs"
            ],
            "title": "Creating a new DOM element from an HTML string using built-in DOM methods or prototype"
        },
        {
            "answer_count": 5,
            "answers": [
                {
                    "body": "<p>You cannot do this purely in Javascript. Javascript running on browsers does not have enough permission yet (there have been proposals) due to security reasons.</p>\n\n<p>Instead, I would recommend using <a href=\"https://github.com/dcneiner/Downloadify\">Downloadify</a>:</p>\n\n<blockquote>\n  <p>A tiny javascript + Flash library that enables the creation and download of text files without server interaction. </p>\n</blockquote>\n\n<p>You can see a simple demo <a href=\"http://pixelgraphics.us/downloadify/test.html\">here</a> where you supply the content and can test out saving/cancelling/error handling functionality. </p>\n",
                    "is_accepted": false,
                    "score": 9
                },
                {
                    "body": "<p>For latest browser, like Chrome, you can use the <a href=\"http://www.html5rocks.com/en/tutorials/file/filesystem/\">File API as in this tutorial</a>:</p>\n\n<pre><code>window.requestFileSystem  = window.requestFileSystem || window.webkitRequestFileSystem;\nwindow.requestFileSystem(window.PERSISTENT, 5*1024*1024 /*5MB*/, saveFile, errorHandler);\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 10
                },
                {
                    "body": "<p>This project on github looks promising: </p>\n\n<p><a href=\"https://github.com/eligrey/FileSaver.js\">https://github.com/eligrey/FileSaver.js</a></p>\n\n<blockquote>\n  <p>FileSaver.js implements the W3C saveAs() FileSaver interface in\n  browsers that do not natively support it.</p>\n</blockquote>\n\n<p>Also have a look at the demo here: </p>\n\n<p><a href=\"http://eligrey.com/demos/FileSaver.js/\">http://eligrey.com/demos/FileSaver.js/</a></p>\n",
                    "is_accepted": false,
                    "score": 57
                },
                {
                    "body": "<p>Choosing the location to save the file before creating it is not possible. But it is possible, at least in Chrome, to generate files using just JavaScript. Here is an old example of mine of creating a CSV file. The user will be prompted to download it. This, unfortunately, does not work well in other browsers, especially IE.</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;JS CSV&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;button id=\"b\"&gt;export to CSV&lt;/button&gt;\n    &lt;script type=\"text/javascript\"&gt;\n        function exportToCsv() {\n            var myCsv = \"Col1,Col2,Col3\\nval1,val2,val3\";\n\n            window.open('data:text/csv;charset=utf-8,' + escape(myCsv));\n        }\n\n        var button = document.getElementById('b');\n        button.addEventListener('click', exportToCsv);\n    &lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 19
                },
                {
                    "body": "<p>Javascript has a FileSystem API. If you can deal with having the feature only work in Chrome, a good starting point would be: <a href=\"http://www.html5rocks.com/en/tutorials/file/filesystem/\" rel=\"nofollow\">http://www.html5rocks.com/en/tutorials/file/filesystem/</a>.</p>\n",
                    "is_accepted": false,
                    "score": 1
                }
            ],
            "body": "<p>I have data that I want to write to a file, and open a file dialog for the user to choose where to save the file.  It would be great if it worked in all browsers, but it has to work in Chrome.  I want to do this all client-side.</p>\n\n<p>Basically I want to know what to put in this function:</p>\n\n<pre><code>saveFile: function(data)\n{\n}\n</code></pre>\n\n<p>Where the function takes in data, has the user select a location to save the file, and creates a file in that location with that data.</p>\n\n<p>Thanks in advance.</p>\n\n<p>EDIT:\nUsing HTML is fine too, if that helps.</p>\n",
            "last_activity_date": 1419056527,
            "question_id": 13405129,
            "score": 41,
            "tags": [
                "javascript",
                "file",
                "dialog",
                "save"
            ],
            "title": "Javascript: Create and save file"
        },
        {
            "answer_count": 6,
            "answers": [
                {
                    "body": "<p>Well generally JSONP is implemented by adding a <code>&lt;script&gt;</code> tag to the calling document, such that the URL of the JSONP service is the \"src\".  The browser fetches script source with an HTTP GET transaction.</p>\n\n<p>Now, if your JSONP service is in the same domain as your calling page, then you could probably cobble something together with a simple <code>$.ajax()</code> call.  If it's not in the same domain, then I'm not sure how it'd be possible.</p>\n",
                    "is_accepted": false,
                    "score": 3
                },
                {
                    "body": "<p>It is not possible to do an asynchronous <code>POST</code> to a service on another domain, due to the (quite sensible) limitation of the <a href=\"http://en.wikipedia.org/wiki/Same_origin_policy\">same origin policy</a>. JSON-P only works because you're allowed to insert <code>&lt;script&gt;</code> tags into the DOM, and they can point anywhere.</p>\n\n<p>You can, of course, make a page on another domain the action of a regular form POST.</p>\n\n<p><strong>Edit</strong>: There are some <a href=\"http://ajaxian.com/archives/how-to-make-xmlhttprequest-calls-to-another-server-in-your-domain\">interesting hacks</a> out there if you're willing to go to a lot of effort inserting hidden <code>&lt;iframe&gt;</code>s and mucking about with their properties. </p>\n",
                    "is_accepted": true,
                    "score": 62
                },
                {
                    "body": "<p>If you need to send a lot of data cross-domain. I usually create a service that you can call in two steps:</p>\n\n<ol>\n<li><p>First the client do a FORM submit (post allowed cross domain). The service stores the input in the session on the server (using the GUID as key). (the client creates a GUID and send's it as a part of the input)</p></li>\n<li><p>Then the client do a normal script-inject (JSONP) as a parameter you use the same GUID as you used in the FORM post. The service processes the input from the session and returns the data in the normal JSONP-fashion. After this the session is destroyed.</p></li>\n</ol>\n\n<p>This of course relies on that you write the server-backend.</p>\n",
                    "is_accepted": false,
                    "score": 15
                },
                {
                    "body": "<p>It is possible, here is my solution:</p>\n\n<p>In your javascript:</p>\n\n<pre><code>jQuery.post(\"url.php\",data).complete(function(data) {\n    eval(data.responseText.trim()); \n});\nfunction handleRequest(data){\n    ....\n}\n</code></pre>\n\n<p>In your url.php: </p>\n\n<pre><code>echo \"handleRequest(\".$responseData.\")\";\n</code></pre>\n",
                    "is_accepted": false,
                    "score": -5
                },
                {
                    "body": "<p>There's a (hack) solution I've did it many times, you'll be able to Post with JsonP.\n(You'll be able to Post Form, bigger than 2000 char than you can use by GET)</p>\n\n<p><strong>Client application Javascript</strong></p>\n\n<pre><code>$.ajax({\n  type: \"POST\", // you request will be a post request\n  data: postData, // javascript object with all my params\n  url: COMAPIURL, // my backoffice comunication api url\n  dataType: \"jsonp\", // datatype can be json or jsonp\n  success: function(result){\n    console.dir(result);\n  }\n});\n</code></pre>\n\n<p><strong>JAVA:</strong></p>\n\n<pre><code>response.addHeader( \"Access-Control-Allow-Origin\", \"*\" ); // open your api to any client \nresponse.addHeader( \"Access-Control-Allow-Methods\", \"POST\" ); // a allow post\nresponse.addHeader( \"Access-Control-Max-Age\", \"1000\" ); // time from request to response before timeout\n</code></pre>\n\n<p><strong>PHP:</strong></p>\n\n<pre><code>header('Access-Control-Allow-Origin: *');\nheader('Access-Control-Allow-Methods: POST');\nheader('Access-Control-Max-Age: 1000');\n</code></pre>\n\n<p>Doing like this, you are opening your server to any post request, you should re-secure this by providing ident or something else.</p>\n\n<p>With this method, you could also change the request type from jsonp to json, both work, just set the right response content type</p>\n\n<p><strong>jsonp</strong></p>\n\n<pre><code>response.setContentType( \"text/javascript; charset=utf-8\" );\n</code></pre>\n\n<p><strong>json</strong></p>\n\n<pre><code>response.setContentType( \"application/json; charset=utf-8\" );\n</code></pre>\n\n<p>Please not that you're server will no more respect the SOP (same origin policy), but who cares ?</p>\n",
                    "is_accepted": false,
                    "score": -1
                },
                {
                    "body": "<p>I know this is serious necromancy, but I thought I'd post my implementation of JSONP POST using jQuery, which I'm successfully using for my JS widget (this is used for customer registration and login):</p>\n\n<p>Basically, I'm using an IFrame approach, as suggested in the accepted answer. What I'm doing differently is after sending the request, I'm watchin, if the form can be reached in the iframe, using a timer. When the form cannot be reached, it means the request has returned. Then, I'm using a normal JSONP request to query for the status of the operation.</p>\n\n<p>I hope that someone finds it useful. Tested in >=IE8, Chrome, FireFox and Safari.</p>\n\n<pre><code>function JSONPPostForm(form, postUrl, queryStatusUrl, queryStatusSuccessFunc, queryStatusData)\n{\n    var tmpDiv = $('&lt;div style=\"display: none;\"&gt;&lt;/div&gt;');\n    form.parent().append(tmpDiv);\n    var clonedForm = cloneForm(form);\n    var iframe = createIFrameWithContent(tmpDiv, clonedForm);\n\n    if (postUrl)\n        clonedForm.attr('action', postUrl);\n\n    var postToken = 'JSONPPOST_' + (new Date).getTime();\n    clonedForm.attr('id', postToken);\n    clonedForm.append('&lt;input name=\"JSONPPOSTToken\" value=\"'+postToken+'\"&gt;');\n    clonedForm.attr('id', postToken );\n    clonedForm.submit();\n\n    var timerId;\n    var watchIFrameRedirectHelper = function()\n    {\n        if (watchIFrameRedirect(iframe, postToken ))\n        {\n            clearInterval(timerId);\n            tmpDiv.remove();\n            $.ajax({\n                url:  queryStatusUrl,\n                data: queryStatusData,\n                dataType: \"jsonp\",\n                type: \"GET\",\n                success: queryStatusSuccessFunc\n            });\n        }\n    }\n\n    if (queryStatusUrl &amp;&amp; queryStatusSuccessFunc)\n        timerId = setInterval(watchIFrameRedirectHelper, 200);\n}\n\nfunction createIFrameWithContent(parent, content)\n{\n    var iframe = $('&lt;iframe&gt;&lt;/iframe&gt;');\n    parent.append(iframe);\n\n    if (!iframe.contents().find('body').length)\n    {\n        //For certain IE versions that do not create document content...\n        var doc = iframe.contents().get()[0];\n        doc.open();\n        doc.close();\n    }\n\n    iframe.contents().find('body').append(content);\n    return iframe;\n}\n\nfunction watchIFrameRedirect(iframe, formId)\n{\n    try\n    {\n        if (iframe.contents().find('form[id=\"' + formId + '\"]').length)\n            return false;\n        else\n            return true;\n    }\n    catch (err)\n    {\n        return true;\n    }\n    return false;\n}\n\n//This one clones only form, without other HTML markup\nfunction cloneForm(form)\n{\n    var clonedForm = $('&lt;form&gt;&lt;/form&gt;');\n    //Copy form attributes\n    $.each(form.get()[0].attributes, function(i, attr)\n    {\n        clonedForm.attr(attr.name, attr.value);\n    });\n    form.find('input, select, textarea').each(function()\n    {\n        clonedForm.append($(this).clone());\n    });\n\n    return clonedForm;\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 2
                }
            ],
            "body": "<p>Is it possible to post data to JsonP? Or does all data have to be passed in the querystring as a GET request?</p>\n\n<p>I have alot of data that I need to send to the service, cross domain, and it is too large to send via the querystring</p>\n\n<p>What are the options for getting around this?</p>\n",
            "last_activity_date": 1402402167,
            "question_id": 2699277,
            "score": 78,
            "tags": [
                "javascript",
                "jquery",
                "ajax",
                "json",
                "jsonp"
            ],
            "title": "Post data to JsonP"
        },
        {
            "answer_count": 10,
            "answers": [
                {
                    "body": "<p>You can't. Take the characters before and after the position and concat into a new string:</p>\n\n<pre><code>var s = \"Hello world\";\nvar index = 3;\ns = s.substr(0, index) + 'x' + s.substr(index + 1);\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 15
                },
                {
                    "body": "<p>There is no replaceAt function in JavaScript. You can use the following code to replace any character in any string at specified position.</p>\n\n<pre><code>function Rep()\n{\n    var str = 'Hello World';\n    str = setCharAt(str,4,'a');\n    alert(str);\n}\n\nfunction setCharAt(str,index,chr) {\n    if(index &gt; str.length-1) return str;\n    return str.substr(0,index) + chr + str.substr(index+1);\n}\n\n&lt;button onclick=\"Rep();\"&gt;click&lt;/button&gt;\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 34
                },
                {
                    "body": "<p>In JavaScript, strings are <strong>immutable</strong>, which means the best you can do is create a new string with the changed content, and assign the variable to point to it.</p>\n\n<p>You'll need to define the <code>replaceAt()</code> function yourself:</p>\n\n<pre><code>String.prototype.replaceAt=function(index, character) {\n    return this.substr(0, index) + character + this.substr(index+character.length);\n}\n</code></pre>\n\n<p>And use it like this:</p>\n\n<pre><code>str = str.replaceAt(3, \"a\");\n</code></pre>\n",
                    "is_accepted": true,
                    "score": 168
                },
                {
                    "body": "<p>In Javascript strings are immutable so you have to do something like</p>\n\n<pre><code>var x = \"Hello world\"\nvar x = x.substring(0, i) + 'h' + x.substring(i+1);\n</code></pre>\n\n<p>To replace the character in x at i with 'h'</p>\n",
                    "is_accepted": false,
                    "score": 8
                },
                {
                    "body": "<p>The methods on here are complicated.\nI would do it this way:</p>\n\n<pre><code>var myString = \"this is my string\";\nmyString = myString.replace(myString.charAt(number goes here), \"insert replacement here\");\n</code></pre>\n\n<p>This is as simple as it gets.</p>\n",
                    "is_accepted": false,
                    "score": -1
                },
                {
                    "body": "<p>Work with vectors is usually most effective to contact String.</p>\n\n<p>I suggest the following function:</p>\n\n<pre><code>String.prototype.replaceAt=function(index, char) {\n    var a = this.split(\"\");\n    a[index] = char;\n    return a.join(\"\");\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 13
                },
                {
                    "body": "<p>@CemKalyoncu: Thanks for the great answer!</p>\n\n<p>I also adapted it slightly to make it more like the Array.splice method (and took @Ates' note into consideration):</p>\n\n<pre><code>spliceString=function(string, index, numToDelete, char) {\n      return string.substr(0, index) + char + string.substr(index+numToDelete);\n   }\n\nvar myString=\"hello world!\";\nspliceString(myString,myString.lastIndexOf('l'),2,'mhole'); // \"hello wormhole!\"\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>This works similar to <code>Array.splice</code>:</p>\n\n<pre><code>String.prototype.splice = function (i, j, str) {\n    return this.substr(0, i) + str + this.substr(j, this.length);\n};\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 2
                },
                {
                    "body": "<p>There are lot of answers here, and all of them are based on two methods:</p>\n\n<ul>\n<li>METHOD1: split the string using two substrings and stuff the character between them</li>\n<li>METHOD2: convert the string to character array, replace one array member and join it</li>\n</ul>\n\n<p>Personally, I would use these two methods in different cases. Let me explain.</p>\n\n<p>@FabioPhms: Your method was the one I initially used and I was afraid that it is bad on string with lots of characters. However, question is what's a lot of characters? I tested it on 10 \"lorem ipsum\" paragraphs and it took a few milliseconds. Then I tested it on 10 times larger string - there was really no big difference. Hm.</p>\n\n<p>@vsync, @Cory Mawhorter: Your comments are unambiguous; however, again, what is a large string? I agree that for 32...100kb performance should better and one should use substring-variant for this one operation of character replacement.</p>\n\n<p>But what will happen if I have to make quite a few replacements?</p>\n\n<p>I needed to perform my own tests to prove what is faster in that case. Let's say we have an algorithm that will manipulate a relatively short string that consists of 1000 characters. We expect that in average each character in that string will be replaced ~100 times. So, the code to test something like this is:</p>\n\n<pre><code>var str = \"... {A LARGE STRING HERE} ...\";\n\nfor(var i=0; i&lt;100000; i++)\n{\n  var n = '' + Math.floor(Math.random() * 10);\n  var p = Math.floor(Math.random() * 1000);\n  // replace character *n* on position *p*\n}\n</code></pre>\n\n<p>I created a fiddle for this, and it's <a href=\"http://jsfiddle.net/ozrentk/B5Uvu/2/\">here</a>.\nThere are two tests, TEST1 (substring) and TEST2 (array conversion).</p>\n\n<p>Results:</p>\n\n<ul>\n<li>TEST1: 195ms</li>\n<li>TEST2: 6ms</li>\n</ul>\n\n<p>It seems that array conversion beats substring by 2 orders of magnitude! So - what the hell happened here???</p>\n\n<p>What actually happens is that all operations in TEST2 are done on array itself, using assignment expression like <code>strarr2[p] = n</code>. Assignment is really fast compared to substring on a large string, and its clear that it's going to win.</p>\n\n<p>So, it's all about choosing the right tool for the job. Again.</p>\n",
                    "is_accepted": false,
                    "score": 11
                },
                {
                    "body": "<pre><code>str = str.split('');\nstr[3] = 'h';\nstr = str.join('');\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 4
                }
            ],
            "body": "<p>I have a string, let's say <code>Hello world</code> and I need to replace the char at index 3. How can I replace a char by specifying a index?</p>\n\n<pre><code>var str = \"hello world\";\n</code></pre>\n\n<p>I need something like</p>\n\n<pre><code>str.replaceAt(0,\"h\");\n</code></pre>\n",
            "last_activity_date": 1414637982,
            "question_id": 1431094,
            "score": 159,
            "tags": [
                "javascript",
                "string",
                "replace",
                "character-replacement"
            ],
            "title": "How do I replace a character at a particular index in JavaScript?"
        },
        {
            "answer_count": 5,
            "answers": [
                {
                    "body": "<p>No, the quotes do not make a difference (unless, as you noted, you want to use a key that\u2019s not a valid JavaScript identifier).</p>\n\n<p>As a side note, the <a href=\"http://json.org/\">JSON data exchange format</a> <em>does</em> require double quotes around identifiers.</p>\n",
                    "is_accepted": true,
                    "score": 33
                },
                {
                    "body": "<p>There is no difference here. Just a matter of style. One of the reasons for doing this is being able to use 'super' or 'class' as a key since those are reserved keywords.</p>\n\n<p>Some people might be tempted to pass in a string with whitespace then call o['I can have whitespace'] But I would call that bad practice.</p>\n",
                    "is_accepted": false,
                    "score": 3
                },
                {
                    "body": "<p>No, not to javascript.  However, some JSON parsers will fail when the quotes around the keys are not present.</p>\n",
                    "is_accepted": false,
                    "score": 3
                },
                {
                    "body": "<p>From <a href=\"http://mathiasbynens.be/notes/javascript-properties\"><strong><em>Unquoted property names / object keys in JavaScript</em></strong></a>, my write-up on the subject:</p>\n\n<blockquote>\n  <p>Quotes can only be omitted if the property name is a numeric literal or <a href=\"http://mathiasbynens.be/notes/javascript-identifiers\">a valid identifier name</a>.</p>\n  \n  <p>[\u2026]</p>\n  \n  <p>Bracket notation can safely be used for all property names.</p>\n  \n  <p>[\u2026]</p>\n  \n  <p>Dot notation can <em>only</em> be used when the property name is a valid identifier name. </p>\n</blockquote>\n\n<p>Note that reserved words are allowed to be used as unquoted property names in ES5. However, for backwards compatibility with ES3, I\u2019d suggest quoting them anyway.</p>\n\n<p>I also made a tool that will tell you if any given property name can be used without quotes and/or with dot notation. Try it at <a href=\"http://mothereff.in/js-properties\">mothereff.in/js-properties</a>.</p>\n\n<p><a href=\"http://mothereff.in/js-properties#12e34\"><img src=\"http://i.imgur.com/UYDEH.png\" alt=\"Screenshot\"></a></p>\n",
                    "is_accepted": false,
                    "score": 46
                },
                {
                    "body": "<p>There are some situations where they are different. For example, if you are using jQuery, and you are making a list of parameters to pass when calling the jQuery $() command to create an element, quoted words are turned into parameters, and non-quoted words are turned into functions. For example, \"size\" will set the size attribute of the object, and size (no quotes), will call the size() function on the object. See <a href=\"http://api.jquery.com/jQuery/\" rel=\"nofollow\">jQuery()</a>, near the bottom:</p>\n\n<blockquote>\n  <p>While the second argument is convenient, its flexibility can lead to unintended consequences (e.g. $( \"<code>&lt;input&gt;</code>\", {size: \"4\"} ) calling the .size() method instead of setting the size attribute). The previous code block could thus be written instead as:</p>\n</blockquote>\n",
                    "is_accepted": false,
                    "score": 0
                }
            ],
            "body": "<p>Is there any difference between</p>\n\n<pre><code>obj = {'foo':'bar'} \n</code></pre>\n\n<p>and</p>\n\n<pre><code>obj = {foo: 'bar'}\n</code></pre>\n\n<p>I have noticed that you can't use <code>-</code> in the key when you don't use the quotes. But does it actually make a difference? If yes, what is it?</p>\n",
            "last_activity_date": 1424446894,
            "question_id": 4348478,
            "score": 53,
            "tags": [
                "javascript"
            ],
            "title": "What is the difference between object keys with quotes and without quotes?"
        },
        {
            "answer_count": 17,
            "answers": [
                {
                    "body": "<p>You did a great job of summarizing what's awesome about Node.js. My feeling is that Node.js is especially suited for applications where you'd like to maintain a persistent connection from the browser back to the server. Using a technique known as <a href=\"http://en.wikipedia.org/wiki/Push_technology#Long_polling\">\"long-polling\"</a>, you can write an application that sends updates to the user in real time. Doing long polling on many of the web's giants, like <a href=\"http://en.wikipedia.org/wiki/Ruby_on_Rails\">Ruby on Rails</a> or <a href=\"http://en.wikipedia.org/wiki/Django_%28web_framework%29\">Django</a>, would create immense load on the server, because each active client eats up one server process. This situation amounts to a <a href=\"http://en.wikipedia.org/wiki/Tarpit_%28networking%29\">tarpit</a> attack. When you use something like Node.js, the server has no need of maintaining separate threads for each open connection.  </p>\n\n<p>This means you can create a <a href=\"https://github.com/rivalslayer/node_chat\">browser-based chat application</a> in Node.js that takes almost no system resources to serve a great many clients. Any time you want to do this sort of long-polling, Node.js is a great option.  </p>\n\n<p>It's worth mentioning that Ruby and Python both have tools to do this sort of thing (<a href=\"http://rubyeventmachine.com/\">eventmachine</a> and <a href=\"https://twistedmatrix.com/trac/\">twisted</a>, respectively), but that Node.js does it exceptionally well, and from the ground up. JavaScript is exceptionally well situated to a callback-based concurrency model, and it excels here. Also, being able to serialize and deserialize with JSON native to both the client and the server is pretty nifty. </p>\n\n<p>I look forward to reading other answers here, this is a fantastic question. </p>\n\n<p>It's worth pointing out that Node.js is also great for situations in which you'll be reusing a lot of code across the client/server gap. The <a href=\"http://meteor.com\">Meteor framework</a> makes this really easy, and a lot of folks are suggesting this might be the future of web development. I can say from experience that it's a whole lot of fun to write code in Meteor, and a big part of this is spending less time thinking about how you're going to restructure your data, so the code that runs in the browser can easily manipulate it and pass it back. </p>\n\n<p>Here's an article on Pyramid and long-polling, which turns out to be very easy to set up with a little help from gevent: <a href=\"http://michael.merickel.org/2011/6/21/tictactoe-and-long-polling-with-pyramid/\"><em>TicTacToe and Long Polling with Pyramid</em></a>.</p>\n",
                    "is_accepted": true,
                    "score": 781
                },
                {
                    "body": "<p>I believe Node.js is best suited for real-time applications: online games, collaboration tools, chat rooms, or anything where what one user (or robot?  or sensor?) does with the application needs to be seen by other users immediately, without a page refresh.</p>\n\n<p>I should also mention that Socket.IO in combination with Node.js will reduce your real-time latency even further than what is possible with long polling.  Socket.IO will fall back to long polling as a worst case scenario, and instead use web sockets or even Flash if they are available.</p>\n\n<p>But I should also mention that just about any situation where the code might block due to threads can be better addressed with Node.js.  Or any situation where you need the application to be event-driven.</p>\n\n<p>Also, Ryan Dahl said in a talk that I once attended that the Node.js benchmarks closely rival Nginx for regular old HTTP requests.  So if we build with Node.js, we can serve our normal resources quite effectively, and when we need the event-driven stuff, it's ready to handle it.</p>\n\n<p>Plus it's all JavaScript all the time.  Lingua Franca on the whole stack.</p>\n",
                    "is_accepted": false,
                    "score": 252
                },
                {
                    "body": "<p>To make it short:</p>\n\n<p>Node.js is well suited for applications that have a lot of concurrent connections and each request only needs very few CPU cycles, because the event loop (with all the other clients) is blocked during execution of a function.</p>\n\n<p>A good article about the event loop in Node.js is <a href=\"http://blog.mixu.net/2011/02/01/understanding-the-node-js-event-loop/\"><em>Mixu's tech blog: Understanding the node.js event loop</em></a>.</p>\n",
                    "is_accepted": false,
                    "score": 99
                },
                {
                    "body": "<p>There is nothing like Silver Bullet. Everything comes with some cost associated with it. It is like if you eat oily food, you will compromise your health and healthy food does not come with spices like oily food. It is individual choice whether they want health or spices as in their food.\nSame way Node.js consider to be used in specific scenario. If your app does not fit into that scenario you should not consider it for your app development. I am just putting my thought on the same:</p>\n\n<p><strong>When to use Node.JS</strong></p>\n\n<ol>\n<li>If your server side code requires very less cpu cycle. In other world you are doing non blocking operation and does not have heavy algorithm/Job which consumes lots of CPU cycle.</li>\n<li>If you are from Java Script back ground and comfortable in writing Single Threaded code just like client side JS.</li>\n</ol>\n\n<p><strong>When NOT to use Node.JS</strong></p>\n\n<ol>\n<li>Your server request is dependent on heavy CPU consuming algorithm/Job.</li>\n</ol>\n\n<p><strong>Scalability Consideration with Node.JS</strong></p>\n\n<ol>\n<li>Node.JS itself does not utilize all core of underlying system and it is single threaded by default, you have to write logic by your own to utilize multi core processor and make it multi threaded.</li>\n</ol>\n\n<p><strong>Node.JS Alternatives</strong></p>\n\n<p>There are other option to use in place of Node.JS however <a href=\"http://vertx.io/\">Vert.x</a> seems to be pretty promising and has lots of additional features like polygot and better scalability considerations.</p>\n",
                    "is_accepted": false,
                    "score": 26
                },
                {
                    "body": "<p>My piece: nodejs is great for making real time systems like analytics, chat-apps, apis, ad servers, etc.\nHell, I made my first chat app using nodejs and socket.io under 2 hours and that too during exam \nweek!</p>\n\n<p><strong>Edit</strong></p>\n\n<p>Its been several years since I have started using nodejs and I have used it in making many different things including static file servers, simple analytics, chat apps and much more.\nThis is my take on when to use nodejs</p>\n\n<p><strong>When to use</strong></p>\n\n<p>When making system which put emphasis on concurrency and speed.</p>\n\n<ul>\n<li>Sockets only servers like chat apps, irc apps, etc.</li>\n<li>Social networks which put emphasis on realtime resources like geolocation, video stream, audio        stream, etc.</li>\n<li>Handling small chunks of data really fast like an analytics webapp.</li>\n<li>As exposing a REST only api.</li>\n</ul>\n\n<p><strong>When not to use</strong></p>\n\n<p>Its a very versatile webserver so you can use it wherever you want but probably not these places.</p>\n\n<ul>\n<li>Simple blogs and static sites.</li>\n<li>Just as a static file server.</li>\n</ul>\n\n<p>Keep in mind that I am just nitpicking. For static file servers, apache is better mainly because it is widely available. The nodejs community has grown larger and more mature over the years and it is safe to say nodejs can be used just about everywhere if you have your own choice of hosting.</p>\n",
                    "is_accepted": false,
                    "score": 16
                },
                {
                    "body": "<p>I have one real-world example where I have used Node.js. The company where I work got one client who wanted to have a simple static HTML website. This website is for selling one item using <a href=\"http://en.wikipedia.org/wiki/PayPal\">PayPal</a> and the client also wanted to have a counter which shows the amount of sold items. Client expected to have huge amount of visitors to this website. I decided to make the counter using Node.js and the <a href=\"http://expressjs.com/\">Express.js</a> framework.</p>\n\n<p>The Node.js application was simple. Get the sold items amount from a <a href=\"http://en.wikipedia.org/wiki/Redis_%28data_store%29\">Redis</a> database, increase the counter when item is sold and serve the counter value to users via the <a href=\"http://en.wikipedia.org/wiki/Application_programming_interface\">API</a>.</p>\n\n<p><strong>Some reasons why I chose to use Node.js in this case</strong></p>\n\n<ol>\n<li>It is very lightweight and fast. There has been over 200000 visits on this website in three weeks and minimal server resources has been able to handle it all.</li>\n<li>The counter is really easy to make to be real time.</li>\n<li>Node.js was easy to configure.</li>\n<li>There are lots of modules available for free. For example, I found a Node.js module for PayPal.</li>\n</ol>\n\n<p>In this case, Node.js was an awesome choice.</p>\n",
                    "is_accepted": false,
                    "score": 78
                },
                {
                    "body": "<p>Another great thing that <em>I think</em> no one has mentioned about Node.js is the amazing community, the package management system (npm) and the amount of modules that exist that you can include by simply including them in your package.json file. </p>\n",
                    "is_accepted": false,
                    "score": 23
                },
                {
                    "body": "<p><strong>Some important things of NODEJS are:</strong></p>\n\n<ul>\n<li>NodeJS is Super-fast !! and Super cool to use</li>\n<li>It lets a developer to create a server with few lines of code</li>\n<li>It is 90% faster than PHP ----- It's a awesome way of computing!</li>\n</ul>\n\n<hr>\n\n<p><strong>Preferable choice to use NodeJS</strong> is when we have more requests (ex: thousands of requests) with less CPU cycles arriving in a very short interval of time. Instead of using a process based server like Apache, It is better to use a thread based server that handles concurrency like Nginx with the help of NodeJS.</p>\n\n<hr>\n\n<p><strong>Some more reasons to use Node are</strong> (<a href=\"http://programmers.stackexchange.com/a/184913\">source</a>):</p>\n\n<ul>\n<li>The event based single threaded non-blocking I/O model makes a lot of\nsense. It apparently scales very well.</li>\n<li>Developing the application using a single language both on the client\nand server sides is very appealing, you can share a lot of code which\nsaves potential development time.</li>\n<li>The node.js community is very enthusiastic</li>\n</ul>\n",
                    "is_accepted": false,
                    "score": 14
                },
                {
                    "body": "<p>My <strong>one more reason</strong> to choose Node.js for a new project is: </p>\n\n<p><strong>Be able to do pure cloud based development</strong></p>\n\n<p>I have used <a href=\"https://c9.io\" rel=\"nofollow\">Cloud9 IDE</a> for a while and now I can't imagine without it, it covers all the development lifecycles. All you need is a browser and you can code anytime anywhere on any devices. You don't need to check in code in one Computer(like at home), then checkout in another computer(like at work place). </p>\n\n<p>Of course, there maybe cloud based IDE for other languages or platforms (Cloud 9 IDE is adding supports for other languages as well), but using Cloud 9 to do Node.js developement is really a great experience for me.   </p>\n",
                    "is_accepted": false,
                    "score": 6
                },
                {
                    "body": "<p>Reasons to use NodeJS:</p>\n\n<ul>\n<li><p>It runs Javascript, so you can use the <strong>same language</strong> on server and client, and even share some code between them (e.g. for form validation, or to render views at either end.)</p></li>\n<li><p>The event-driven system is <strong>fast</strong>, compared to traditional Java or ROR frameworks, when handling lots of requests at once.</p></li>\n<li><p>The ever-growing pool of <strong>packages</strong>, most of which are conveniently hosted on github.  Sometimes you can report an issue and find it fixed within hours!  It's nice to have everything under one roof, with standardized issue reporting and easy forking.</p></li>\n<li><p>Seems rather suitable for agile development and <strong>rapid product iteration</strong>.</p></li>\n</ul>\n\n<p>Reasons <strong>not</strong> to use NodeJS:</p>\n\n<ul>\n<li><p>It runs Javascript, which has no compile-time type checking.  For large, complex <strong>safety-critical</strong> systems, or projects including collaboration between different organizations, a language which encourages <strong>contractual interfaces</strong> and provides <strong>static type checking</strong> may save you some debugging time (and <em>explosions</em>) in the long run.  (Although the JVM is stuck with <code>null</code>, so please use Haskell for your nuclear reactors.)</p></li>\n<li><p>Added to that, many of the packages in NPM are a little <strong>raw</strong>, and still under rapid development.  Some libraries for older frameworks have undergone a decade of testing and bugfixing, and are very <strong>stable</strong> by now. <a href=\"https://pinboard.in/u%3adandv/t%3anpm/t%3aagainst\">Npmjs.org has no mechanism to rate packages</a>, which has lead to a proliferation of packages doing more or less the same thing, out of which a large percentage are no longer maintained.</p></li>\n<li><p>Nested callback hell.  (Of course there are <a href=\"https://github.com/joyent/node/wiki/modules#wiki-async-flow\">20 different solutions</a> to this...)</p></li>\n<li><p>The ever-growing pool of packages can make one NodeJS project appear <strong>radically different</strong> from the next.  There is a large diversity in implementations due to the huge number of options available (e.g. Express/Sails.js/Meteor/Derby).  This can sometimes make it harder for a new developer to jump in on a Node project.  Contrast that with a <strong>Rails</strong> developer joining an existing project: he should be able to get familiar with the app pretty quickly, because all Rails apps are encouraged to use a <strong>similar structure</strong>.</p></li>\n<li><p>Dealing with files can be a bit of a pain. Things that are trivial in other languages, like reading a line from a text file, are <a href=\"http://stackoverflow.com/questions/6156501/read-a-file-one-line-at-a-time-in-node-js#comment23691959_6156501\">weird enough to do with Node.js</a> that there's a StackOverflow question on that with 80+ upvotes. There's <a href=\"http://stackoverflow.com/questions/19587936/how-can-i-parse-records-on-demand-with-node-js\">no simple way to read one record at a time from a CSV file</a>. Etc.</p></li>\n</ul>\n\n<p>I love NodeJS, it is fast and wild and fun, but I am concerned it has little interest in provable-correctness.  Let's hope we can eventually merge the best of both worlds.  I am eager to see what will replace Node in the future... :)</p>\n",
                    "is_accepted": false,
                    "score": 59
                },
                {
                    "body": "<p>One more thing node provides is the ability to create multiple v8 instanes of node using node's child process( <a href=\"http://nodejs.org/api/child_process.html#child_process_child_process_fork_modulepath_args_options\" rel=\"nofollow\">childProcess.fork()</a> each requiring 10mb memory as per docs) on the fly, thus not affecting the main process running the server. So offloading a background job that requires huge server load becomes a child's play and we can easily kill them as and when needed.</p>\n\n<p>I've been using node a lot and in most of the apps we build, require server connections at the same time thus a heavy network traffic. Frameworks like <a href=\"http://expressjs.com\" rel=\"nofollow\">Express.js</a> and the new <a href=\"http://koajs.com/\" rel=\"nofollow\">Koajs</a> (which removed callback hell) have made working on node even more easier.</p>\n",
                    "is_accepted": false,
                    "score": 4
                },
                {
                    "body": "<p>The most important reasons to start your next project using Node ...</p>\n\n<ul>\n<li>All the coolest dudes are into it ... so it <em>must</em> be fun.</li>\n<li>You can hangout at the cooler and have lots of Node adventures to brag about.</li>\n<li>You're a penny pincher when it comes to cloud hosting costs.</li>\n<li>Been there done that with Rails</li>\n<li>You hate IIS deployments</li>\n<li>Your old IT job is getting rather dull and you wish you were in a shiny new Start Up.</li>\n</ul>\n\n<p>What to expect ...</p>\n\n<ul>\n<li>You'll feel safe and secure with Express without all the server bloatware you never needed.</li>\n<li>Your hard drive will fill up with github clones.</li>\n<li>Your brain will get time warped in the land of nested callbacks ...</li>\n<li>... until you learn to keep your Promises.</li>\n<li>Sequalizer and Passport are your new API friends.</li>\n<li>Debugging mostly async code will get umm ... <em>interesting</em> . </li>\n</ul>\n",
                    "is_accepted": false,
                    "score": 19
                },
                {
                    "body": "<p>It can be used where</p>\n\n<ul>\n<li>Applications that are highly event driven &amp; are heavily I/O bound</li>\n<li>Applications handling a large number of connections to other systems</li>\n<li>Real-time applications (Node.js was designed from the ground up for real time and to be easy\nto use.)</li>\n<li>Applications that juggle scads of information streaming to and from other sources</li>\n<li>High traffic, Scalable applications</li>\n<li>Mobile apps that have to talk to platform API &amp; database, without having to do a lot of data\nanalytics</li>\n<li>Build out networked applications</li>\n<li>Applications that need to talk to the back end very often</li>\n</ul>\n\n<p>Prime-time companies have relied on Node.js for their mobile solutions. <strong>Check out why?</strong></p>\n\n<p><a href=\"http://venturebeat.com/2011/08/16/linkedin-node/\">LinkedIn</a> is a prominent user. Their entire mobile stack is built on Node.js. They went from running 15 servers with 15 instances on each physical machine, to just 4 instances \u2013 that can handle double the traffic!</p>\n\n<p><a href=\"http://www.ebaytechblog.com/2011/11/30/announcing-ql-io/\">eBay</a> launched ql.io, a web query language for HTTP APIs, which uses Node.js as the runtime stack. They were able to tune a regular developer-quality Ubuntu workstation to handle more than 120,000 active connections per node.js process, with each connection consuming about 2kB memory!</p>\n\n<p><a href=\"http://venturebeat.com/2012/01/24/why-walmart-is-using-node-js/\">Walmart</a> re-engineered its mobile app to use Node.js and pushed its JavaScript processing to the server.</p>\n\n<p>Read more at: <a href=\"http://blog.langoor.mobi/node-js-mobile-web-apps/\">http://blog.langoor.mobi/node-js-mobile-web-apps/</a></p>\n",
                    "is_accepted": false,
                    "score": 6
                },
                {
                    "body": "<p><strong>Node.js is suitable for any project that is small</strong>. Beyond a certain point, you cannot scale your code without terrible hacks for forcing modularity, readability and flow control. Some people like those hacks though, especially coming from an event-driven javascript background, they seem forgivable. </p>\n\n<p>In particular, when your application needs to perform synchronous flows, you really start bleeding over half-baked solutions that slow you down exponentially in terms of your development process and convolute your code around terrible API.</p>\n",
                    "is_accepted": false,
                    "score": 2
                },
                {
                    "body": "<ol>\n<li><p>Node is great for quick prototypes but I'd never use it again for anything complex.\nI spent 20 years developing a relationship with a compiler and I sure miss it. </p></li>\n<li><p>Node is especially painful for maintaining code that you haven't visited for awhile. Type info and compile time error detection are GOOD THINGS. Why throw all that out? For what? And dang, when something does go south the stack traces quite often completely useless.</p></li>\n</ol>\n",
                    "is_accepted": false,
                    "score": 2
                },
                {
                    "body": "<ul>\n<li><p>Node.js has also been declared save for secure transaction. That means banks, airline, stock exchange etc, are save to use it.</p></li>\n<li><p>Note that facebook HIPHOP VIRTUAL MACHINE (HHVN) can speed up php faster than NODE.JS if your code are well written (in functions).</p></li>\n<li>Therefore there is no rule as to which to use to get a certain job done as there is always a walk around in code.</li>\n</ul>\n\n<p>So learn both coding system and use as your heart desires</p>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p><a href=\"https://nodeway.wordpress.com/2015/01/16/why-rest-api-in-node/\" rel=\"nofollow\">Node best for concurrent request handling -</a></p>\n\n<p>So, Let\u2019s start with a story. From last 2 years I am working on JavaScript and developing web front end and I am enjoying it. Back end guys provide\u2019s us some API\u2019s written in Java,python (we don\u2019t care) and we simply write a AJAX call, get our data and guess what ! we are done. But in real it is not that easy, If data we are getting is not correct or there is some server error then we stuck and we have to contact our back end guys over the mail or chat(sometimes on whatsApp too :).) This is not cool. What if we wrote our API\u2019s in JavaScript and call those API\u2019s from our front end ? Yes that\u2019s pretty cool because if we face any problem in API we can look into it. Guess what ! you can do this now , How ? \u2013 Node is there for you.</p>\n\n<p>Ok agreed that you can write your API in JavaScript but what if I am ok with above problem. Do you have any other reason to use node for rest API ?</p>\n\n<p>so here is the magic begins. Yes I do have other reasons to use node for our API\u2019s.</p>\n\n<p>Let\u2019s go back to our traditional rest API system which is based on either blocking operation or threading. Suppose two concurrent request occurs( r1 and r2) , each of them require database operation. So In traditional system what will happens :</p>\n\n<p><strong>1. Waiting Way :</strong> Our server starts serving <code>r1</code> request and waits for query response. after completion of <code>r1</code> , server starts to serve <code>r2</code> and does it in same way. So waiting is not a good idea because we don\u2019t have that much time.</p>\n\n<p><strong>2. Threading Way :</strong> Our server will creates two threads for both requests <code>r1</code> and <code>r2</code> and serve their purpose after querying database so cool its fast.But it is memory consuming because you can see we started two threads also problem increases when both request is querying same data then you have to deal with deadlock kind of issues . So its better than waiting way but still issues are there.</p>\n\n<p>Now here is , how node will do it:</p>\n\n<p><strong>3. Nodeway :</strong> When same concurrent request comes in node then it will register an event with its callback and move ahead it will not wait for query response for a particular request.So when <code>r1</code> request comes then node\u2019s event loop (yes there is an event loop in node which serves this purpose.) register an event with its callback function and move ahead for serving <code>r2</code> request and similarly register its event with its callback. Whenever any query finishes it triggers its corresponding event and execute its callback  to completion without being interrupted.</p>\n\n<p>So no waiting, no threading , no memory consumption \u2013 yes this is nodeway for serving rest API.</p>\n",
                    "is_accepted": false,
                    "score": 2
                }
            ],
            "body": "<p>I am new to this kind of stuff, but lately I've been hearing a lot about how good <a href=\"http://en.wikipedia.org/wiki/Node.js\">Node.js</a> is. Considering how much I love working with jQuery and JavaScript in general, I can't help but wonder how to decide when to use Node.js. The web application I have in mind is something like <a href=\"https://en.wikipedia.org/wiki/Bitly\">Bitly</a> - takes some content, archives it. </p>\n\n<p>From all the homework I have been doing in the last few days, I obtained the following information. Node.js </p>\n\n<ul>\n<li>is a command-line tool that can be run as a regular web server and lets one run JavaScript programs</li>\n<li>utilizes the great <a href=\"http://en.wikipedia.org/wiki/V8_%28JavaScript_engine%29\">V8 JavaScript engine</a></li>\n<li>is very good when you need to do several things at the same time</li>\n<li>is event-based so all the wonderful <a href=\"http://en.wikipedia.org/wiki/Ajax_%28programming%29\">Ajax</a>-like stuff can be done on the server side</li>\n<li>lets us share code between the browser and the backend</li>\n<li>lets us talk with MySQL</li>\n</ul>\n\n<p>Some of the sources that I have come across are:</p>\n\n<ul>\n<li><a href=\"http://www.stoimen.com/blog/2010/11/16/diving-into-node-js-introduction-and-installation/\">Diving into Node.js \u2013 Introduction and Installation</a></li>\n<li><a href=\"http://debuggable.com/posts/understanding-node-js:4bd98440-45e4-4a9a-8ef7-0f7ecbdd56cb\">Understanding NodeJS</a></li>\n<li><a href=\"http://blog.osbutler.com/categories/node-by-example/?page=3\">Node by Example</a></li>\n<li><a href=\"http://dailyjs.com/2010/11/01/node-tutorial/\">Let\u2019s Make a Web App: NodePad</a></li>\n</ul>\n\n<p>Considering that Node.js can be run almost out-of-the-box on <a href=\"http://en.wikipedia.org/wiki/Amazon_Elastic_Compute_Cloud\">Amazon's EC2</a> instances, I am trying to understand what type of problems require Node.js as opposed to any of the mighty kings out there like <a href=\"http://en.wikipedia.org/wiki/PHP\">PHP</a>, <a href=\"http://en.wikipedia.org/wiki/Python_%28programming_language%29\">Python</a> and <a href=\"http://en.wikipedia.org/wiki/Ruby_%28programming_language%29\">Ruby</a>. I understand that it really depends on the expertise one has on a language, but my question falls more into the general category of: When to use a particular framework and what type of problems is it particularly suited for?</p>\n",
            "last_activity_date": 1422569770,
            "question_id": 5062614,
            "score": 1372,
            "tags": [
                "javascript",
                "design",
                "web-applications",
                "node.js"
            ],
            "title": "How to decide when to use Node.js?"
        },
        {
            "answer_count": 5,
            "answers": [
                {
                    "body": "<p>This is to ensure some other site can't do nasty tricks to try to steal your data. For example, by <a href=\"http://ejohn.org/blog/re-securing-json/\">replacing the array constructor</a>, then including this JSON URL via a <code>&lt;script&gt;</code> tag, a malicious third-party site could steal the data from the JSON response. By putting a <code>while(1);</code> at the start, the script will hang instead.</p>\n\n<p>A same-site request using XHR and a separate JSON parser, on the other hand, can easily ignore the <code>while(1);</code> prefix.</p>\n",
                    "is_accepted": false,
                    "score": 160
                },
                {
                    "body": "<p>It prevents it from being used as the target of a simple <code>&lt;script&gt;</code> tag. (Well, it doesn't prevent it, but it makes it unpleasant.)  That way bad guys can't just put that script tag in their own site and rely on an active session to make it possible to fetch your content.</p>\n",
                    "is_accepted": false,
                    "score": 23
                },
                {
                    "body": "<p>That would be to make it difficult for a third-party to insert the JSON response into an HTML document with the <code>&lt;script&gt;</code> tag. Remember that the <code>&lt;script&gt;</code> tag is exempt from the <a href=\"http://en.wikipedia.org/wiki/Same_origin_policy\">Same Origin Policy</a>.</p>\n",
                    "is_accepted": false,
                    "score": 54
                },
                {
                    "body": "<p>It prevents <a href=\"http://haacked.com/archive/2009/06/25/json-hijacking.aspx\">JSON hijacking</a>.</p>\n\n<p>Contrived example: say Google has a URL like <code>mail.google.com/json?action=inbox</code> which returns the first 50 messages of your inbox in JSON format. Evil websites on other domains can't make AJAX requests to get this data due to the same-origin policy, but they can include the URL via a <code>&lt;script&gt;</code> tag. The URL is visited with <em>your</em> cookies, and by <a href=\"http://ejohn.org/blog/re-securing-json/\">overriding the global array constructor or accessor methods</a> they can have a method called whenever an object (array or hash) attribute is set, allowing them to read the JSON content.</p>\n\n<p>The <code>while(1);</code> or <code>&amp;&amp;&amp;BLAH&amp;&amp;&amp;</code> prevents this: an AJAX request at <code>mail.google.com</code> will have full access to the text content, and can strip it away. But a <code>&lt;script&gt;</code> tag insertion blindly executes the JavaScript without any processing, resulting in either an infinite loop or a syntax error.</p>\n\n<p>This does not address the issue of cross-site request forgery.</p>\n",
                    "is_accepted": true,
                    "score": 1931
                },
                {
                    "body": "<p>It prevents disclosure of the response through JSON hijacking.</p>\n\n<p>In theory, Google's JSON responses are protected by the Same Origin Policy: pages from one domain cannot get any informations from pages on an other domain (unless explicitly allowed).</p>\n\n<p>An attacker can request pages on other domains on your behalf, e.g. by using a <code>&lt;script src=...&gt;</code> or <code>&lt;img&gt;</code>tag, but it can't get any information about the result (headers, contents).</p>\n\n<p>Thus, an attacker's page couldn't read your email from gmail.com while visiting it.</p>\n\n<p>Except that when using a script tag to request JSON content, the JSON is executed as Javascript in an attacker's controlled environment. If the attacker can replace the Array or Object contructor or some other method used during object construction, anything in the JSON would pass through the attacker's code, and be disclosed.  </p>\n\n<p>Note that this happens at the time the JSON is executed as Javascript, not at the time it's parsed.</p>\n\n<p>There are multiple counter measures:</p>\n\n<h1>Making sure the JSON never executes</h1>\n\n<p>By placing a <code>while(1);</code> statement before the JSON data, Google makes sure that the JSON data is never executed as Javascript.</p>\n\n<p>Only a legitimate page could actually get the whole content, strip the <code>while(1);</code>, and parse the remainder as JSON.</p>\n\n<h1>Making sure the JSON is not valid Javascript</h1>\n\n<p>Similarly, adding invalid tokens before the JSON, like <code>&amp;&amp;&amp;START&amp;&amp;&amp;</code>, makes sure that it is never executed.</p>\n\n<h1>Always return JSON with an Object on the outside</h1>\n\n<p>This is <a href=\"https://www.owasp.org/index.php/OWASP_AJAX_Security_Guidelines#Always_return_JSON_with_an_Object_on_the_outside\"><strong><code>OWASP</code></strong> recommended way</a> to protect from JSON hijacking, and is the less intrusive one.</p>\n\n<p>Similarly to the the previous counter-measures, it makes sure that the JSON is never executed as Javascript.</p>\n\n<p>A valid JSON object, when not enclosed by anything, is not valid in Javascript:</p>\n\n<pre><code>eval('{\"foo\":\"bar\"}')\n// SyntaxError: Unexpected token :\n</code></pre>\n\n<p>This is however valid JSON:</p>\n\n<pre><code>JSON.parse('{\"foo\":\"bar\"}')\n// Object {foo: \"bar\"}\n</code></pre>\n\n<p>So, making sure you always return an Object at the top level of the response makes sure that the JSON is not valid Javascript, while still being valid JSON.</p>\n\n<h1>Comparison of above methods</h1>\n\n<p>The OWASP way is less intrusive, as it needs no client library changes, and transfers valid JSON. It is unsure whether past or future browser bugs could defeat this, however.</p>\n\n<p>Google's way requires client library in order for it to support automatic de-serialization, and can be considered to be safer with regard to browser bugs.</p>\n\n<p>Both methods require server changes in order to avoid developers from accidentally sending vulnerable JSON.</p>\n",
                    "is_accepted": false,
                    "score": 78
                }
            ],
            "body": "<p>This is something I've always been curious about, is exactly why Google prepends <code>while(1);</code> to their (private) JSON responses.</p>\n\n<p>For example, here's a response while turning a calendar on and off in Google Calendar:</p>\n\n<pre><code>while(1);[['u',[['smsSentFlag','false'],['hideInvitations','false'],\n  ['remindOnRespondedEventsOnly','true'],\n  ['hideInvitations_remindOnRespondedEventsOnly','false_true'],\n  ['Calendar ID stripped for privacy','false'],['smsVerifiedFlag','true']]]]\n</code></pre>\n\n<p>I would assume this is to prevent people from doing an <code>eval()</code> on it, but all you'd really have to do is replace the while and then you'd be set. I would assume eval prevention is to make sure people write safe JSON parsing code.</p>\n\n<p>I've seen this used in a couple other places, too, but a lot more so with Google (Mail, Calendar, Contacts, etc.) Strangely enough, Google Docs starts with <code>&amp;&amp;&amp;START&amp;&amp;&amp;</code> instead, and Google Contacts seems to start with <code>while(1); &amp;&amp;&amp;START&amp;&amp;&amp;</code>.</p>\n\n<p>Does anyone know what's going on here?</p>\n",
            "last_activity_date": 1416579450,
            "question_id": 2669690,
            "score": 1581,
            "tags": [
                "javascript",
                "ajax",
                "json"
            ],
            "title": "Why does Google prepend while(1); to their JSON responses?"
        },
        {
            "answer_count": 5,
            "answers": [
                {
                    "body": "<p><code>__proto__</code> is the actual object that is used in the lookup chain to resolve methods, etc.  <code>prototype</code> is the object that is used to build <code>__proto__</code> when you create an object with <code>new</code>:</p>\n\n<pre><code>( new Foo ).__proto__ === Foo.prototype\n( new Foo ).prototype === undefined\n</code></pre>\n",
                    "is_accepted": true,
                    "score": 165
                },
                {
                    "body": "<p><code>prototype</code> is a property of a Function object. It is the prototype of objects constructed by that function.</p>\n\n<p><code>__proto__</code> is internal property of an object, pointing to its prototype. Current standards provide an equivalent <code>Object.getPrototypeOf(O)</code> method, though de facto standard <code>__proto__</code> is quicker.</p>\n\n<p>You can find <code>instanceof</code> relationships by comparing a function's <code>prototype</code> to an object's <code>__proto__</code> chain, and you can break these relationships by changing <code>prototype</code>.</p>\n\n<pre><code>function Point(x, y) {\n    this.x = x;\n    this.y = y;\n}\n\nvar myPoint = new Point();\n\n// the following are all true\nmyPoint.__proto__ == Point.prototype\nmyPoint.__proto__.__proto__ == Object.prototype\nmyPoint instanceof Point;\nmyPoint instanceof Object;\n</code></pre>\n\n<p>Here <code>Point</code> is a constructor function, it builds an object (data structure) procedurally. <code>myPoint</code> is an object constructed by <code>Point()</code> so <code>Point.prototype</code> gets saved to <code>myPoint.__proto__</code> at that time.</p>\n",
                    "is_accepted": false,
                    "score": 132
                },
                {
                    "body": "<p>Protoype property is created when a function is declared. </p>\n\n<p>For instance:</p>\n\n<pre><code> function Person(dob){\n    this.dob = dob\n }; \n</code></pre>\n\n<p>Person.prototype property is created internally once you declare above function.\nMany properties can be added to the Person.prototype which are shared by Person instances created using new Person().</p>\n\n<pre><code>// adds a new method age to the Person.prototype Object.\nPerson.prototype.age = function(){return date-dob}; \n</code></pre>\n\n<p>It is worth noting that <code>Person.prototype</code> is an <code>Object</code> literal by default (it can be changed as required). </p>\n\n<p>Every instance created using new Person() has a <code>__proto__</code> property which points to the Person.prototype. This is the chain that is used to traverse to find a property of a particular object. </p>\n\n<pre><code>var person1 = new Person(somedate);\nvar person2 = new Person(somedate);\n</code></pre>\n\n<p>creates 2 instaces of Person, these 2 objects can call age property of Person.prototype as person1.age, person2.age.</p>\n\n<p>In the above picture you can see that Foo is a Function Object and therefore it has a <code>__proto__</code> link to the Function.prototype which inturn is an instance of Object and has a <code>__proto__</code> link to Object.prototype. The proto link ends here with <code>__proto__</code> in the Object.prototype pointing to null.</p>\n\n<p>Any object can have access to all the properties in its protochain as linked by <code>__proto__</code> , thus forming the basis for prototypal inheritence.</p>\n\n<p><code>__proto__</code> is not a standard way of accessing the prototype chain, the standard but similar approach is to use Object.getPrototypeOf(obj).</p>\n\n<p>Below code for <code>instanceof</code> operator gives a better understanding:</p>\n\n<p>object <code>instanceof</code> Class operator returns <code>true</code> when an object is an instance of a Class, more specifically if <code>Class.prototype</code> is found in the proto chain of that object then the object is an instance of that Class.</p>\n\n<pre><code>function instanceOf(Func){\nvar obj = this;\nwhile(obj !== null){\n    if(Object.getPrototypeOf(obj) === Func.prototype)\n        return true;\n    obj = Object.getPrototypeOf(obj);\n}\nreturn false;\n}\n</code></pre>\n\n<p>The above method can be called as : <code>instanceOf.call(object,Class)</code> which return true if object is instance of Class.</p>\n",
                    "is_accepted": false,
                    "score": 30
                },
                {
                    "body": "<p>A nice way to think of it is...</p>\n\n<p><code>prototype</code> is used by <code>constructor()</code> functions. It should've really been called something like, \"prototypeToInstall\", since that's what it is.</p>\n\n<p>and <code>__proto__</code> is that \"installed prototype\" on an object (that was created/installed upon the object from said <code>constructor()</code> function)</p>\n",
                    "is_accepted": false,
                    "score": 11
                },
                {
                    "body": "<p>my understanding is: __proto__ and prototype are all served for the prototype chain technique . the difference is functions named with underscore(like __proto__) are not aim for developers invoked explicitly at all. in other words, they are just for some mechanisms like inherit etc. they are 'back-end'. but functions named without underscore are designed for invoked explicitly, they are 'front-end'. </p>\n",
                    "is_accepted": false,
                    "score": 0
                }
            ],
            "body": "<blockquote>\n  <p>This figure again shows that every object has a prototype. Constructor\n  function Foo also has its own <code>__proto__</code> which is Function.prototype,\n  and which in turn also references via its <code>__proto__</code> property again to\n  the Object.prototype. Thus, repeat, Foo.prototype is just an explicit\n  property of Foo which refers to the prototype of b and c objects.</p>\n</blockquote>\n\n<pre><code>var b = new Foo(20);\nvar c = new Foo(30);\n</code></pre>\n\n<p>What are the differences between <code>__proto__</code> and <code>prototype</code> properties?</p>\n\n<p><img src=\"http://i.stack.imgur.com/UfXRZ.png\" alt=\"enter image description here\"></p>\n\n<p>The figure is taken from <a href=\"http://dmitrysoshnikov.com/ecmascript/javascript-the-core/\">here</a>.</p>\n",
            "last_activity_date": 1419865322,
            "question_id": 9959727,
            "score": 180,
            "tags": [
                "javascript",
                "prototypal-inheritance"
            ],
            "title": "__proto__ VS. prototype in JavaScript"
        },
        {
            "answer_count": 12,
            "answers": [
                {
                    "body": "<p>I think you're using the best method, though you could optimize it to:</p>\n\n<pre><code> $(\"&lt;div/&gt;\");\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 13
                },
                {
                    "body": "<p>personally i'd suggest (for readability):</p>\n\n<pre><code>$('&lt;div&gt;');\n</code></pre>\n\n<p>some numbers on the suggestions so far (safari 3.2.1 / mac os x):</p>\n\n<pre><code>var it = 50000;\n\nvar start = new Date().getTime();\nfor (i = 0; i &lt; it; ++i)  {\n  // test creation of an element \n  // see below statements\n}\nvar end = new Date().getTime();\nalert( end - start );                \n\nvar e = $( document.createElement('div') );  // ~300ms\nvar e = $('&lt;div&gt;');                          // ~3100ms\nvar e = $('&lt;div&gt;&lt;/div&gt;');                    // ~3200ms\nvar e = $('&lt;div/&gt;');                         // ~3500ms\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 130
                },
                {
                    "body": "<p>I use <code>$(document.createElement('div'));</code>  <a href=\"http://jsperf.com/jquery-vs-createelement\">Benchmarking shows</a> this technique is the fastest.  I speculate this is because jQuery doesn't have to identify it as an element and create the element itself.</p>\n\n<p>You should really run benchmarks with different Javascript engines and weigh your audience with the results.  Make a decision from there.</p>\n",
                    "is_accepted": true,
                    "score": 186
                },
                {
                    "body": "<p>You don't need raw performance from an operation you will perform extremely infrequently from the point of view of the CPU.</p>\n",
                    "is_accepted": false,
                    "score": 7
                },
                {
                    "body": "<p>If you have a lot of HTML content (more than just a single div), you might consider building the HTML into the page within a hidden container, then updating it and making it visible when needed.  This way, a large portion of your markup can be pre-parsed by the browser and avoid getting bogged down by JavaScript when called.  Hope this helps!</p>\n",
                    "is_accepted": false,
                    "score": 14
                },
                {
                    "body": "<p>This is not the correct answer for the question but still I would like to share this...</p>\n\n<p>Using just <code>document.createElement('div')</code> and skipping JQuery will improve the performance a lot when you want to make lot of elements on the fly and append to DOM.</p>\n",
                    "is_accepted": false,
                    "score": 13
                },
                {
                    "body": "<p>Actually, if you're doing <code>$('&lt;div&gt;')</code>, jQuery will also use <code>document.createElement()</code>.</p>\n\n<p>(Just take a look at <a href=\"http://code.jquery.com/jquery-1.4.2.js\" rel=\"nofollow\">line 117</a>).</p>\n\n<p>There is some function-call overhead, but unless performance is critical (you're creating hundreds [thousands] of elements), there isn't much reason to revert to plain <strong>DOM</strong>.</p>\n\n<p>Just creating elements for a new webpage is probably a case in which you'll best stick to the <strong>jQuery</strong> way of doing things.</p>\n",
                    "is_accepted": false,
                    "score": 28
                },
                {
                    "body": "<p>One point is that it may be easier to do:</p>\n\n<pre><code>$(\"&lt;div class=foo id=bar style='color:white;bgcolor:blue;font-size:12pt'&gt;&lt;/div&gt;\")\n</code></pre>\n\n<p>Then to do all of that with jquery calls.</p>\n",
                    "is_accepted": false,
                    "score": 5
                },
                {
                    "body": "<p>Someone has already made a benchmark:\n<a href=\"http://stackoverflow.com/questions/268490/jquery-document-createelement-equivalent\">jQuery document.createElement equivalent?</a></p>\n\n<p><code>$(document.createElement('div'))</code> is the big winner.</p>\n",
                    "is_accepted": false,
                    "score": 6
                },
                {
                    "body": "<p>You'll have to understand that the significance of element creation performance is irrelevant in the context of using jQuery in the first place.</p>\n\n<p>Keep in mind, there's no real purpose of creating an element unless you're actually going to use it.</p>\n\n<p>You may be tempted to performance test something like <code>$(document.createElement('div'))</code> vs. <code>$('&lt;div&gt;')</code> and get great performance gains from using <code>$(document.createElement('div'))</code> but that's just an element that isn't in the DOM yet.</p>\n\n<p>However, in the end of the day, you'll want to use the element anyway so the real test should include f.ex. .appendTo();</p>\n\n<p>Let's see, if you test the following against each other:</p>\n\n<pre><code>var e = $(document.createElement('div')).appendTo('#target');\nvar e = $('&lt;div&gt;').appendTo('#target');\nvar e = $('&lt;div&gt;&lt;/div&gt;').appendTo('#target');\nvar e = $('&lt;div/&gt;').appendTo('#target');\n</code></pre>\n\n<p>You will notice the results will vary. Sometimes one way is better performing than the other. And this is only because the amount of background tasks on your computer change over time.</p>\n\n<p><strong><a href=\"http://jsperf.com/jquery-create-html\" rel=\"nofollow\">Test yourself here</a></strong></p>\n\n<p>So, in the end of the day, you do want to pick the smallest and most readable way of creating an element. That way, at least, your script files will be smallest possible. Probably a more significant factor on the performance point than the way of creating an element before you use it in the DOM.</p>\n",
                    "is_accepted": false,
                    "score": 4
                },
                {
                    "body": "<pre><code>The Question Is: What is the most efficient way to create HTML elements using jQuery?\n</code></pre>\n\n<h2>Answer:</h2>\n\n<p>Since it's about <code>jQuery</code> then I think it's better to use this (clean) approach (you are using)</p>\n\n<pre><code>$('&lt;div/&gt;', {\n    'id':'myDiv',\n    'class':'myClass',\n    'text':'Text Only',\n}).on('click', function(){\n    alert(this.id); // myDiv\n}).appendTo('body');\n</code></pre>\n\n<p><a href=\"http://jsfiddle.net/heera/RGerb/\">DEMO.</a></p>\n\n<p>This way, you can even use event handlers for the specific element like</p>\n\n<pre><code>$('&lt;div/&gt;', {\n    'id':'myDiv',\n    'class':'myClass',\n    'style':'cursor:pointer;font-weight:bold;',\n    'html':'&lt;span&gt;For HTML&lt;/span&gt;',\n    'click':function(){ alert(this.id) },\n    'mouseenter':function(){ $(this).css('color', 'red'); },\n    'mouseleave':function(){ $(this).css('color', 'black'); }\n}).appendTo('body');\n</code></pre>\n\n<p><a href=\"http://jsfiddle.net/heera/RGerb/1/\">DEMO.</a></p>\n\n<p>But when you are dealing with lots of dynamic elements, you should avoid adding event <code>handlers</code> in particular element, instead, you should use a delegated event handler, like</p>\n\n<pre><code>$(document).on('click', '.myClass', function(){\n    alert(this.innerHTML);\n});\n\nvar i=1;\nfor(;i&lt;=200;i++){\n    $('&lt;div/&gt;', {\n        'class':'myClass',\n        'html':'&lt;span&gt;Element'+i+'&lt;/span&gt;'\n    }).appendTo('body');\n}\n</code></pre>\n\n<p><a href=\"http://jsfiddle.net/heera/RGerb/3/\">DEMO.</a></p>\n\n<p>So, if you create and append hundreds of elements with same class, i.e. (<code>myClass</code>) then less memory will be consumed for event handling, because only one handler will be there to do the job for all dynamically inserted elements.</p>\n\n<p><strong>Update :</strong> Since we can use following approach to create a dynamic element</p>\n\n<pre><code>$('&lt;input/&gt;', {\n    'type': 'Text',\n    'value':'Some Text',\n    'size': '30'\n}).appendTo(\"body\");\n</code></pre>\n\n<p>But the <code>size</code> attribute can't be set using this approach using <code>jQuery-1.8.0</code> or later and here is an old <a href=\"http://bugs.jquery.com/ticket/12429\">bug report</a>, look at <a href=\"http://jsfiddle.net/heera/RGerb/\">this example</a> using <code>jQuery-1.7.2</code> which shows that <code>size</code> attribute is set to <code>30</code> using above example but using same approach we can't set <code>size</code> attribute using <code>jQuery-1.8.3</code>, here is a <a href=\"http://jsfiddle.net/RGerb/7/\">non-working fiddle</a>. So, to set the <code>size</code> attribute, we can use following approach</p>\n\n<pre><code>$('&lt;input/&gt;', {\n    'type': 'Text',\n    'value':'Some Text',\n    attr: { size: \"30\" }\n}).appendTo(\"body\");\n</code></pre>\n\n<p>Or this one</p>\n\n<pre><code>$('&lt;input/&gt;', {\n    'type': 'Text',\n    'value':'Some Text',\n    prop: { size: \"30\" }\n}).appendTo(\"body\");\n</code></pre>\n\n<p>We can pass <code>attr/prop</code> as a child object but it works in <code>jQuery-1.8.0 and later</code> versions check <a href=\"http://jsfiddle.net/RGerb/8/\">this example</a> but it <a href=\"http://jsfiddle.net/RGerb/9/\">won't work</a> in <code>jQuery-1.7.2 or earlier</code> (not tested in all earlier versions).</p>\n\n<p>BTW, taken from <code>jQuery</code> bug report</p>\n\n<blockquote>\n  <p>There are several solutions. The first is to not use it at all, since\n  it doesn't save you any space and this improves the clarity of the\n  code:</p>\n</blockquote>\n\n<p>They advised to use following approach (<a href=\"http://jsfiddle.net/RGerb/11/\">works in earlier ones</a> as well, tested in <code>1.6.4</code>)</p>\n\n<pre><code>$('&lt;input/&gt;')\n.attr( { type:'text', size:50, autofocus:1 } )\n.val(\"Some text\").appendTo(\"body\");\n</code></pre>\n\n<p>So, it is better to use this approach, IMO. This update is made after I read/found <a href=\"http://stackoverflow.com/a/19576388/741747\">this answer</a> and in this answer shows that if you use <code>'Size'(capital S)</code> instead of <code>'size'</code> then it will just <a href=\"http://jsfiddle.net/g9Hct/1/\">work fine</a>, even in <code>version-2.0.2</code></p>\n\n<pre><code>$('&lt;input&gt;', {\n    'type' : 'text',\n    'Size' : '50', // size won't work\n    'autofocus' : 'true'\n}).appendTo('body');\n</code></pre>\n\n<p>Also read about <a href=\"http://api.jquery.com/prop/\">prop</a>, because there is a difference, <code>Attributes vs. Properties</code>, it varies through versions.</p>\n",
                    "is_accepted": false,
                    "score": 44
                },
                {
                    "body": "<p>I am using jquery.min v2.0.3 . \nIt's for me better to use following:</p>\n\n<pre><code>var select = jQuery(\"#selecter\");\njQuery(\"`&lt;option/&gt;`\",{value: someValue, text: someText}).appendTo(select);\n</code></pre>\n\n<p>as following:<br/></p>\n\n<pre><code>var select = jQuery(\"#selecter\");\njQuery(document.createElement('option')).prop({value: someValue, text: someText}).appendTo(select);\n</code></pre>\n\n<p>Time of first code is mutch lower as second code.</p>\n",
                    "is_accepted": false,
                    "score": 0
                }
            ],
            "body": "<p>Recently I've been doing a lot of modal window pop-ups and what not, for which I used jQuery. The method that I used to create the new elements on the page has overwhelmingly been along the lines of: </p>\n\n<pre><code>$(\"&lt;div&gt;&lt;/div&gt;\");\n</code></pre>\n\n<p>However, I'm getting the feeling that this isn't the best or the most efficient method of doing this. What is the best way to create elements in jQuery from a performance perspective?</p>\n\n<p><a href=\"http://stackoverflow.com/a/268520/32943\">This answer</a> has the benchmarks to the suggestions below.</p>\n",
            "last_activity_date": 1424127508,
            "question_id": 327047,
            "score": 251,
            "tags": [
                "javascript",
                "jquery",
                "html",
                "dom"
            ],
            "title": "What is the most efficient way to create HTML elements using jQuery?"
        },
        {
            "answer_count": 9,
            "answers": [
                {
                    "body": "<p>When binding the UI to your array you'll want to make sure you update that same array directly by setting the length to 0 and pushing the data into the array.</p>\n\n<p>Instead of this (which set a different array reference to <code>data</code> which your UI won't know about):</p>\n\n<pre><code> myService.async = function() {\n    $http.get('test.json')\n    .success(function (d) {\n      data = d;\n    });\n  };\n</code></pre>\n\n<p>try this:</p>\n\n<pre><code> myService.async = function() {\n    $http.get('test.json')\n    .success(function (d) {\n      data.length = 0;\n      for(var i = 0; i &lt; d.length; i++){\n        data.push(d[i]);\n      }\n    });\n  };\n</code></pre>\n\n<p><a href=\"http://jsfiddle.net/Gloopy/76fVm/\" rel=\"nofollow\">Here is a fiddle</a> that shows the difference between setting a new array vs emptying and adding to an existing one. I couldn't get your plnkr working but hopefully this works for you!</p>\n",
                    "is_accepted": false,
                    "score": 3
                },
                {
                    "body": "<p>Because it is asynchronous, the <code>$scope</code> is getting the data before the ajax call is complete.</p>\n\n<p>You could use <code>$q</code> in your service to create <code>promise</code> and give it back to\ncontroller, and controller obtain the result within <code>then()</code> call against <code>promise</code>.</p>\n\n<p>In your service,</p>\n\n<pre><code>app.factory('myService', function($http, $q) {\n  var deffered = $q.defer();\n  var data = [];  \n  var myService = {};\n\n  myService.async = function() {\n    $http.get('test.json')\n    .success(function (d) {\n      data = d;\n      console.log(d);\n      deffered.resolve();\n    });\n    return deffered.promise;\n  };\n  myService.data = function() { return data; };\n\n  return myService;\n});\n</code></pre>\n\n<p>Then, in your controller:</p>\n\n<pre><code>app.controller('MainCtrl', function( myService,$scope) {\n  myService.async().then(function() {\n    $scope.data = myService.data();\n  });\n});\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 32
                },
                {
                    "body": "<p>tosh shimayama have a solution but you can simplify a lot if you use the fact that $http returns promises and that promises can return a value:</p>\n\n<pre><code>app.factory('myService', function($http, $q) {\n  myService.async = function() {\n    return $http.get('test.json')\n    .then(function (response) {\n      var data = reponse.data;\n      console.log(data);\n      return data;\n    });\n  };\n\n  return myService;\n});\n\napp.controller('MainCtrl', function( myService,$scope) {\n  $scope.asyncData = myService.async();\n  $scope.$watch('asyncData', function(asyncData) {\n    if(angular.isDefined(asyncData)) {\n      // Do something with the returned data, angular handle promises fine, you don't have to reassign the value to the scope if you just want to use it with angular directives\n    }\n  });\n\n});\n</code></pre>\n\n<p>A little demonstration in coffeescript: <a href=\"http://plunker.no.de/edit/ksnErx?live=preview\">http://plunker.no.de/edit/ksnErx?live=preview</a></p>\n\n<p>Your plunker updated with my method: <a href=\"http://plnkr.co/edit/mwSZGK?p=preview\">http://plnkr.co/edit/mwSZGK?p=preview</a></p>\n",
                    "is_accepted": false,
                    "score": 20
                },
                {
                    "body": "<p>Here is a Plunk that does what you want: <a href=\"http://plnkr.co/edit/TTlbSv?p=preview\">http://plnkr.co/edit/TTlbSv?p=preview</a></p>\n\n<p>The idea is that you work with promises directly and their \"then\" functions to manipulate and access the asynchronously returned responses.</p>\n\n<pre><code>app.factory('myService', function($http) {\n  var myService = {\n    async: function() {\n      // $http returns a promise, which has a then function, which also returns a promise\n      var promise = $http.get('test.json').then(function (response) {\n        // The then function here is an opportunity to modify the response\n        console.log(response);\n        // The return value gets picked up by the then in the controller.\n        return response.data;\n      });\n      // Return the promise to the controller\n      return promise;\n    }\n  };\n  return myService;\n});\n\napp.controller('MainCtrl', function( myService,$scope) {\n  // Call the async method and then do stuff with what is returned inside our own then function\n  myService.async().then(function(d) {\n    $scope.data = d;\n  });\n});\n</code></pre>\n\n<p>Here is a slightly more complicated version that caches the request so you only make it first time (<a href=\"http://plnkr.co/edit/2yH1F4IMZlMS8QsV9rHv?p=preview\">http://plnkr.co/edit/2yH1F4IMZlMS8QsV9rHv?p=preview</a>):</p>\n\n<pre><code>app.factory('myService', function($http) {\n  var promise;\n  var myService = {\n    async: function() {\n      if ( !promise ) {\n        // $http returns a promise, which has a then function, which also returns a promise\n        promise = $http.get('test.json').then(function (response) {\n          // The then function here is an opportunity to modify the response\n          console.log(response);\n          // The return value gets picked up by the then in the controller.\n          return response.data;\n        });\n      }\n      // Return the promise to the controller\n      return promise;\n    }\n  };\n  return myService;\n});\n\napp.controller('MainCtrl', function( myService,$scope) {\n  $scope.clearData = function() {\n    $scope.data = {};\n  };\n  $scope.getData = function() {\n    // Call the async method and then do stuff with what is returned inside our own then function\n    myService.async().then(function(d) {\n      $scope.data = d;\n    });\n  };\n});\n</code></pre>\n",
                    "is_accepted": true,
                    "score": 223
                },
                {
                    "body": "<p>Related to this I went through a similar problem, but not with get or post made by Angular but with an extension made by a 3rd party (in my case Chrome Extension).<br>\nThe problem that I faced is that the Chrome Extension won't return <code>then()</code> so I was unable to do it the way in the solution above but the result is still Asynchronous.<br>\nSo my solution is to create a service and to proceed to a callback</p>\n\n<pre><code>app.service('cookieInfoService', function() {\n    this.getInfo = function(callback) {\n        var model = {};\n        chrome.cookies.get({url:serverUrl, name:'userId'}, function (response) {\n            model.response= response;\n            callback(model);\n        });\n    };\n});\n</code></pre>\n\n<p>Then in my controller</p>\n\n<pre><code>app.controller(\"MyCtrl\", function ($scope, cookieInfoService) {\n    cookieInfoService.getInfo(function (info) {\n        console.log(info);\n    });\n});\n</code></pre>\n\n<p>Hope this can help others getting the same issue.</p>\n",
                    "is_accepted": false,
                    "score": 2
                },
                {
                    "body": "<p>I've read <a href=\"http://markdalgleish.com/2013/06/using-promises-in-angularjs-views/\" rel=\"nofollow\">http://markdalgleish.com/2013/06/using-promises-in-angularjs-views/</a>\n[AngularJS allows us to streamline our controller logic by placing a promise directly on the scope, rather than manually handing the resolved value in a success callback.]</p>\n\n<p>so simply and handy :)</p>\n\n<pre><code>var app = angular.module('myApp', []);\n            app.factory('Data', function($http,$q) {\n                return {\n                    getData : function(){\n                        var deferred = $q.defer();\n                        var promise = $http.get('./largeLoad').success(function (response) {\n                            deferred.resolve(response);\n                        });\n                        // Return the promise to the controller\n                        return deferred.promise; \n                    }\n                }\n            });\n            app.controller('FetchCtrl',function($scope,Data){\n                $scope.items = Data.getData();\n            });\n</code></pre>\n\n<p>Hope this help</p>\n",
                    "is_accepted": false,
                    "score": 2
                },
                {
                    "body": "<p>A much better way I think would be something like this:</p>\n\n<p>Service:</p>\n\n<pre><code>app.service('FruitsManager',function($q){\n\n    function getAllFruits(){\n        var deferred = $q.defer();\n\n        ...\n\n        // somewhere here use: deferred.resolve(awesomeFruits);\n\n        ...\n\n        return deferred.promise;\n    }\n\n    return{\n        getAllFruits:getAllFruits\n    }\n\n});\n</code></pre>\n\n<p>And in the controller you can simply use:</p>\n\n<pre><code>$scope.fruits = FruitsManager.getAllFruits();\n</code></pre>\n\n<p>Angular will automatically put the resolved <code>awesomeFruits</code> into the <code>$scope.fruits</code>.</p>\n",
                    "is_accepted": false,
                    "score": 5
                },
                {
                    "body": "<p>Let it be simple. It's as simple as </p>\n\n<ol>\n<li>Return <code>promise</code> in your service(no need to use <code>then</code> in service)</li>\n<li>Use <code>then</code> in your controller</li>\n</ol>\n\n<p>Demo. <a href=\"http://plnkr.co/edit/cbdG5p?p=preview\">http://plnkr.co/edit/cbdG5p?p=preview</a></p>\n\n<pre><code>var app = angular.module('plunker', []);\n\napp.service('myService', function($http) {\n  return {\n    async: function() {\n      return $http.get('test.json');  //1. this returns promise\n    }\n  };\n});\n\napp.controller('MainCtrl', function( myService,$scope) {\n  myService.async().then(function(d) { //2. so you can use .then()\n    $scope.data = d;\n  });\n});\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 20
                },
                {
                    "body": "<p>I really don't like the fact that, because of the \"promise\" way of doing things, the consumer of the service that uses $http has to \"know\" about how to unpack the response. </p>\n\n<p>I just want to call something and get the data out, similar to the old <code>$scope.items = Data.getData();</code> way, which is <a href=\"https://docs.angularjs.org/guide/migration#templates-no-longer-automatically-unwrap-promises\" rel=\"nofollow\">now deprecated</a>.</p>\n\n<p>I tried for a while and didn't come up with a perfect solution, but here's my best shot (<a href=\"http://plnkr.co/edit/xHVHPmRhbcnrJFom9R0L?p=preview\" rel=\"nofollow\">Plunker</a>). It may be useful to someone.</p>\n\n<pre><code>app.factory('myService', function($http) {\n  var _data;  // cache data rather than promise\n  var myService = {};\n\n  myService.getData = function(obj) { \n    if(!_data) {\n      $http.get('test.json').then(function(result){\n        _data = result.data;\n        console.log(_data);  // prove that it executes once\n        angular.extend(obj, _data);\n      }); \n    } else {  \n      angular.extend(obj, _data);\n    }\n  };\n\n  return myService;\n}); \n</code></pre>\n\n<p>Then controller:</p>\n\n<pre><code>app.controller('MainCtrl', function( myService,$scope) {\n  $scope.clearData = function() {\n    $scope.data = Object.create(null);\n  };\n  $scope.getData = function() {\n    $scope.clearData();  // also important: need to prepare input to getData as an object\n    myService.getData($scope.data); // **important bit** pass in object you want to augment\n  };\n});\n</code></pre>\n\n<p>Flaws I can already spot are</p>\n\n<ul>\n<li>You have to pass in the object which you want the data <strong>added to</strong>, which isn't an intuitive or common pattern in Angular </li>\n<li><code>getData</code> can only accept the <code>obj</code> parameter in the form of an object (although it could also accept an array), which won't be a problem for many applications, but it's a sore limitation</li>\n<li>You have to prepare the input object <code>$scope.data</code> with <code>= {}</code> to make it an object (essentially what <code>$scope.clearData()</code> does above), or <code>= []</code> for an array, or it won't work (we're already having to assume something about what data is coming).  I tried to do this preparation step IN <code>getData</code>, but no luck.</li>\n</ul>\n\n<p>Nevertheless, it provides a pattern which removes controller \"promise unwrap\" boilerplate, and might be useful in cases when you want to use certain data obtained from $http in more than one place while keeping it DRY.</p>\n",
                    "is_accepted": false,
                    "score": 1
                }
            ],
            "body": "<p>I recently posted a detailed description of the issue I am facing <a href=\"http://stackoverflow.com/questions/12504747/angularjs-processing-asynchronous-data-in-service\">here</a> at SO. As I couldn't send an actual <code>$http</code> request, I used timeout to simulate asynchronous behavior. Data binding from my model to view is working correct, with the help of @Gloopy</p>\n\n<p>Now, when I use <code>$http</code> instead of <code>$timeout</code> (tested locally), I could see the asynchronous request was successful and <code>data</code> is filled with json response in my service. But, my view is not updating.</p>\n\n<p>updated Plunkr <a href=\"http://plnkr.co/edit/RbzODj?p=preview\">here</a></p>\n",
            "last_activity_date": 1411580596,
            "question_id": 12505760,
            "score": 102,
            "tags": [
                "javascript",
                "angularjs",
                "angular-http"
            ],
            "title": "Processing $http response in service"
        },
        {
            "answer_count": 12,
            "answers": [
                {
                    "body": "<p><a href=\"http://api.jquery.com/category/dimensions/\">jQuery dimension functions</a></p>\n\n<p><code>$(window).width()</code> and <code>$(window).height()</code></p>\n",
                    "is_accepted": false,
                    "score": 69
                },
                {
                    "body": "<p>If you aren't using jQuery, it gets ugly. Here's a snippet that should work on all new browsers. The behavior is different in Quirks mode and standards mode in IE. This takes care of it.</p>\n\n<pre><code>var elem = (document.compatMode === \"CSS1Compat\") ? \n    document.documentElement :\n    document.body;\n\nvar height = elem.clientHeight;\nvar width = elem.clientWidth;\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 26
                },
                {
                    "body": "<p>You can use the <a href=\"https://developer.mozilla.org/en/DOM/window.innerWidth\">window.innerWidth</a> and <a href=\"https://developer.mozilla.org/en/DOM/window.innerHeight\">window.innerHeight</a> properties.</p>\n\n<p><img src=\"https://developer.mozilla.org/@api/deki/files/213/=FirefoxInnerVsOuterWidth2.png\" alt=\"innerHeight vs outerHeight\"></p>\n",
                    "is_accepted": false,
                    "score": 39
                },
                {
                    "body": "<h2><b>Cross-browser</b> <a href=\"http://dev.w3.org/csswg/mediaqueries4/#width\"><code>@media (width)</code></a> and <a href=\"http://dev.w3.org/csswg/mediaqueries4/#height\"><code>@media (height)</code></a> values</h2>\n\n<pre><code>var w = Math.max(document.documentElement.clientWidth, window.innerWidth || 0)\nvar h = Math.max(document.documentElement.clientHeight, window.innerHeight || 0)\n</code></pre>\n\n<h2><code>window.innerWidth</code> and <code>.innerHeight</code></h2>\n\n<ul>\n<li>gets <a href=\"http://www.w3.org/TR/CSS2/visuren.html#viewport\">CSS viewport</a> <code>@media (width)</code> and <code>@media (height)</code> which include scrollbars</li>\n<li><code>initial-scale</code> and zoom <a href=\"https://github.com/ryanve/verge/issues/13\">variations</a> may cause mobile values to <b>wrongly</b> scale down to what PPK calls the <a href=\"http://www.quirksmode.org/mobile/viewports2.html\">visual viewport</a> and be smaller than the <code>@media</code> values</li>\n<li>zoom may cause values to be 1px off due to native rounding</li>\n<li><code>undefined</code> in IE8-</li>\n</ul>\n\n<h2><code>document.documentElement.clientWidth</code> and <code>.clientHeight</code></h2>\n\n<ul>\n<li>equals CSS viewport width <strong>minus</strong> scrollbar width</li>\n<li>matches <code>@media (width)</code> and <code>@media (height)</code> when there is <strong>no</strong> scrollbar</li>\n<li><a href=\"https://github.com/jquery/jquery/blob/1.9.1/src/dimensions.js#L12-L17\">same as</a> <code>jQuery(window).width()</code> which <a href=\"https://api.jquery.com/width/\">jQuery</a> <em>calls</em> the browser viewport</li>\n<li><a href=\"http://www.quirksmode.org/mobile/tableViewport.html\">available cross-browser</a></li>\n</ul>\n\n<h2>Resources</h2>\n\n<ul>\n<li><a href=\"http://ryanve.com/lab/dimensions/\">Live outputs for various dimensions</a> </li>\n<li><a href=\"http://github.com/ryanve/verge\"><b>verge</b></a> uses cross-browser viewport techniques </li>\n<li><a href=\"http://github.com/ryanve/actual\"><b>actual</b></a> uses <code>matchMedia</code> to obtain precise dimensions in any unit</li>\n</ul>\n",
                    "is_accepted": true,
                    "score": 262
                },
                {
                    "body": "<p>This code is from <a href=\"http://andylangton.co.uk/articles/javascript/get-viewport-size-javascript/\" rel=\"nofollow\">http://andylangton.co.uk/articles/javascript/get-viewport-size-javascript/</a></p>\n\n<pre><code>function viewport() {\n    var e = window, a = 'inner';\n    if (!('innerWidth' in window )) {\n        a = 'client';\n        e = document.documentElement || document.body;\n    }\n    return { width : e[ a+'Width' ] , height : e[ a+'Height' ] };\n}\n</code></pre>\n\n<p>NB : to read the width, use <code>console.log('viewport width'+viewport().width);</code></p>\n",
                    "is_accepted": false,
                    "score": 3
                },
                {
                    "body": "<p>There is a difference between <code>window.innerHeight</code> and <code>document.documentElement.clientHeight</code>. The first includes the height of the horizontal scrollbar.</p>\n",
                    "is_accepted": false,
                    "score": 4
                },
                {
                    "body": "<p>A solution that would conform to W3C standards would be to create a transparent div (for example dynamically with JavaScript), set its width and height to 100vw/100vh (Viewport units) and then get its offsetWidth and offsetHeight. After that, the element can be removed again. This will not work in older browsers because the viewport units are relatively new, but if you don't care about them but about (soon-to-be) standards instead, you could definitely go this way:</p>\n\n<pre><code>var objNode = document.createElement(\"div\");\nobjNode.style.width  = \"100vw\";\nobjNode.style.height = \"100vh\";\ndocument.body.appendChild(objNode);\nvar intViewportWidth  = objNode.offsetWidth;\nvar intViewportHeight = objNode.offsetHeight;\ndocument.body.removeChild(objNode);\n</code></pre>\n\n<p>Of course, you could also set objNode.style.position = \"fixed\" and then use 100% as width/height - this should have the same effect and improve compatibility to some extent. Also, setting position to fixed might be a good idea in general, because otherwise the div will be invisible but consume some space, which will lead to scrollbars appearing etc.</p>\n",
                    "is_accepted": false,
                    "score": 2
                },
                {
                    "body": "<p>I know this has an acceptable answer, but I ran into a situation where clientWidth didn't work, as iPhone (at least mine) returned 980, not 320, so I used window.screen.width. I was working on existing site being made \"responsive\" and needed to force larger browsers to use a different meta viewport. </p>\n\n<p>Hope this helps someone, it may not be perfect, but it works in my testing on iOs and Android. </p>\n\n<pre><code>//sweet hack to set meta viewport for desktop sites squeezing down to mobile that are big and have a fixed width \n  //first see if they have window.screen.width avail\n  (function() {\n    if (window.screen.width)\n    {\n      var setViewport = {\n        //smaller devices\n        phone: 'width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no',\n        //bigger ones, be sure to set width to the needed and likely hardcoded width of your site at large breakpoints  \n        other: 'width=1045,user-scalable=yes',\n        //current browser width\n        widthDevice: window.screen.width,\n        //your css breakpoint for mobile, etc. non-mobile first\n        widthMin: 560,\n        //add the tag based on above vars and environment \n        setMeta: function () {\n          var params = (this.widthDevice &lt;= this.widthMin) ? this.phone : this.other; \n          var head = document.getElementsByTagName(\"head\")[0];\n          var viewport = document.createElement('meta');\n          viewport.setAttribute('name','viewport');\n          viewport.setAttribute('content',params);\n          head.appendChild(viewport);\n        }\n      }\n      //call it \n      setViewport.setMeta();\n    }\n  }).call(this);\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 4
                },
                {
                    "body": "<p>I was able to find a definitive answer in JavaScript: The Definitive Guide, 6th Edition by O'Reilly, p. 391:</p>\n\n<p>This solution works even in Quirks mode, while ryanve and ScottEvernden's current solution do not.</p>\n\n<pre><code>function getViewportSize(w) {\n\n    // Use the specified window or the current window if no argument\n    w = w || window;\n\n    // This works for all browsers except IE8 and before\n    if (w.innerWidth != null) return { w: w.innerWidth, h: w.innerHeight };\n\n    // For IE (or any browser) in Standards mode\n    var d = w.document;\n    if (document.compatMode == \"CSS1Compat\")\n        return { w: d.documentElement.clientWidth,\n           h: d.documentElement.clientHeight };\n\n    // For browsers in Quirks mode\n    return { w: d.body.clientWidth, h: d.body.clientHeight };\n\n}\n</code></pre>\n\n<p>except for the fact that I wonder why the line <code>if (document.compatMode == \"CSS1Compat\")</code> is not <code>if (d.compatMode == \"CSS1Compat\")</code>, everything looks good.</p>\n",
                    "is_accepted": false,
                    "score": 4
                },
                {
                    "body": "<p>If you are looking for non-jQuery solution <strong>that gives correct values in virtual pixels on mobile</strong>, and you think that plain <code>window.innerHeight</code> or <code>document.documentElement.clientHeight</code> can solve your problem, please study this link first: <a href=\"http://tripleodeon.com/wp-content/uploads/2011/12/table.html\" rel=\"nofollow\">http://tripleodeon.com/wp-content/uploads/2011/12/table.html</a></p>\n\n<p>The developer has done good testing that reveals the problem: you can get unexpected values for Android/iOS, landscape/portrait, normal/high density displays. </p>\n\n<p>My current answer is not silver bullet yet (//todo), but rather a warning to those who are going to quickly copy-paste any given solution from this thread into production code.</p>\n\n<p>I was looking for page width in <em>virtual pixels</em> on mobile, and I've found the  only working code is (unexpectedly!) <code>window.outerWidth</code>. I will later examine this table for correct solution giving height excluding navigation bar, when I have time.</p>\n",
                    "is_accepted": false,
                    "score": 2
                },
                {
                    "body": "<p>I looked and found a cross browser way: </p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;script&gt;\nfunction myFunction()\n{\nif(window.innerWidth !== undefined &amp;&amp; window.innerHeight !== undefined) {\nvar w=window.innerWidth;\nvar h=window.innerHeight;\n} else {\nvar w=document.documentElement.clientWidth;\nvar h=document.documentElement.clientHeight;\n}\nvar txt=\"Page size: width=\" + w + \", height=\" + h;\ndocument.getElementById(\"demo\").innerHTML=txt;\n}\n&lt;/script&gt;\n&lt;body onresize=\"myFunction()\" onload=\"myFunction()\"&gt;\n&lt;p&gt;\nTry to resize the page.\n&lt;/p&gt;\n&lt;p id=\"demo\"&gt;\n&amp;nbsp;\n&lt;/p&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>This is the way I do it, I tried it in IE 8 -> 10, FF 35, Chrome 40, it will work very smooth in all modern browsers (as window.innerWidth is defined) and in IE 8 (with no window.innerWidth) it works smooth as well, any issue (like flashing because of overflow: \"hidden\"), please report it. I'm not really interested on the viewport height as I made this function just to workaround some responsive tools, but it might be implemented. Hope it helps, I appreciate comments and suggestions.</p>\n\n<pre><code>function viewportWidth () {\n  if (window.innerWidth) return window.innerWidth;\n  var\n  doc = document,\n  html = doc &amp;&amp; doc.documentElement,\n  body = doc &amp;&amp; (doc.body || doc.getElementsByTagName(\"body\")[0]),\n  getWidth = function (elm) {\n    if (!elm) return 0;\n    var setOverflow = function (style, value) {\n      var oldValue = style.overflow;\n      style.overflow = value;\n      return oldValue || \"\";\n    }, style = elm.style, oldValue = setOverflow(style, \"hidden\"), width = elm.clientWidth || 0;\n    setOverflow(style, oldValue);\n    return width;\n  };\n  return Math.max(\n    getWidth(html),\n    getWidth(body)\n  );\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                }
            ],
            "body": "<p>I want to provide my visitors the ability to see images in high quality, is there any way I can detect the window size?</p>\n\n<p>Or better yet, the viewport size of the browser with JavaScript? See green area here:</p>\n\n<p><a href=\"http://i.stack.imgur.com/zYrB7.jpg\"><img src=\"http://i.stack.imgur.com/zYrB7.jpg\" alt=\"\"></a></p>\n",
            "last_activity_date": 1424779076,
            "question_id": 1248081,
            "score": 187,
            "tags": [
                "javascript",
                "cross-browser",
                "viewport"
            ],
            "title": "Get the browser viewport dimensions with JavaScript"
        },
        {
            "answer_count": 7,
            "answers": [
                {
                    "body": "<p>This is compatible with the standards-based browsers, but will probably fail in IE. I'm providing it as a starting point. IE doesn't support DOM Range.</p>\n\n<pre><code>var editable = document.getElementById('editable'),\n    selection, range;\n\n// Populates selection and range variables\nvar captureSelection = function(e) {\n    // Don't capture selection outside editable region\n    var isOrContainsAnchor = false,\n        isOrContainsFocus = false,\n        sel = window.getSelection(),\n        parentAnchor = sel.anchorNode,\n        parentFocus = sel.focusNode;\n\n    while(parentAnchor &amp;&amp; parentAnchor != document.documentElement) {\n        if(parentAnchor == editable) {\n            isOrContainsAnchor = true;\n        }\n        parentAnchor = parentAnchor.parentNode;\n    }\n\n    while(parentFocus &amp;&amp; parentFocus != document.documentElement) {\n        if(parentFocus == editable) {\n            isOrContainsFocus = true;\n        }\n        parentFocus = parentFocus.parentNode;\n    }\n\n    if(!isOrContainsAnchor || !isOrContainsFocus) {\n        return;\n    }\n\n    selection = window.getSelection();\n\n    // Get range (standards)\n    if(selection.getRangeAt !== undefined) {\n        range = selection.getRangeAt(0);\n\n    // Get range (Safari 2)\n    } else if(\n        document.createRange &amp;&amp;\n        selection.anchorNode &amp;&amp;\n        selection.anchorOffset &amp;&amp;\n        selection.focusNode &amp;&amp;\n        selection.focusOffset\n    ) {\n        range = document.createRange();\n        range.setStart(selection.anchorNode, selection.anchorOffset);\n        range.setEnd(selection.focusNode, selection.focusOffset);\n    } else {\n        // Failure here, not handled by the rest of the script.\n        // Probably IE or some older browser\n    }\n};\n\n// Recalculate selection while typing\neditable.onkeyup = captureSelection;\n\n// Recalculate selection after clicking/drag-selecting\neditable.onmousedown = function(e) {\n    editable.className = editable.className + ' selecting';\n};\ndocument.onmouseup = function(e) {\n    if(editable.className.match(/\\sselecting(\\s|$)/)) {\n        editable.className = editable.className.replace(/ selecting(\\s|$)/, '');\n        captureSelection();\n    }\n};\n\neditable.onblur = function(e) {\n    var cursorStart = document.createElement('span'),\n        collapsed = !!range.collapsed;\n\n    cursorStart.id = 'cursorStart';\n    cursorStart.appendChild(document.createTextNode('\u2014'));\n\n    // Insert beginning cursor marker\n    range.insertNode(cursorStart);\n\n    // Insert end cursor marker if any text is selected\n    if(!collapsed) {\n        var cursorEnd = document.createElement('span');\n        cursorEnd.id = 'cursorEnd';\n        range.collapse();\n        range.insertNode(cursorEnd);\n    }\n};\n\n// Add callbacks to afterFocus to be called after cursor is replaced\n// if you like, this would be useful for styling buttons and so on\nvar afterFocus = [];\neditable.onfocus = function(e) {\n    // Slight delay will avoid the initial selection\n    // (at start or of contents depending on browser) being mistaken\n    setTimeout(function() {\n        var cursorStart = document.getElementById('cursorStart'),\n            cursorEnd = document.getElementById('cursorEnd');\n\n        // Don't do anything if user is creating a new selection\n        if(editable.className.match(/\\sselecting(\\s|$)/)) {\n            if(cursorStart) {\n                cursorStart.parentNode.removeChild(cursorStart);\n            }\n            if(cursorEnd) {\n                cursorEnd.parentNode.removeChild(cursorEnd);\n            }\n        } else if(cursorStart) {\n            captureSelection();\n            var range = document.createRange();\n\n            if(cursorEnd) {\n                range.setStartAfter(cursorStart);\n                range.setEndBefore(cursorEnd);\n\n                // Delete cursor markers\n                cursorStart.parentNode.removeChild(cursorStart);\n                cursorEnd.parentNode.removeChild(cursorEnd);\n\n                // Select range\n                selection.removeAllRanges();\n                selection.addRange(range);\n            } else {\n                range.selectNode(cursorStart);\n\n                // Select range\n                selection.removeAllRanges();\n                selection.addRange(range);\n\n                // Delete cursor marker\n                document.execCommand('delete', false, null);\n            }\n        }\n\n        // Call callbacks here\n        for(var i = 0; i &lt; afterFocus.length; i++) {\n            afterFocus[i]();\n        }\n        afterFocus = [];\n\n        // Register selection again\n        captureSelection();\n    }, 10);\n};\n</code></pre>\n",
                    "is_accepted": true,
                    "score": 47
                },
                {
                    "body": "<p><strong>Update</strong></p>\n\n<p>I've written a cross-browser range and selection library called <a href=\"http://code.google.com/p/rangy\">Rangy</a> that incorporates an improved version of the code I posted below. You can use the <a href=\"http://code.google.com/p/rangy/wiki/SelectionSaveRestoreModule\">selection save and restore module</a> for this particular question, although I'd be tempted to use something like <a href=\"http://stackoverflow.com/questions/1181700/set-cursor-position-on-contenteditable-div/3323835#3323835\">@Nico Burns's answer</a> if you're not doing anything else with selections in your project and don't need the bulk of a library.</p>\n\n<p><strong>Previous answer</strong></p>\n\n<p><strike>You can use IERange (http://code.google.com/p/ierange/) to convert IE's TextRange into something like a DOM Range and use it in conjunction with something like eyelidlessness's starting point. Personally I would only use the algorithms from IERange that do the Range &lt;-> TextRange conversions rather than use the whole thing. And IE's selection object doesn't have the focusNode and anchorNode properties but you should be able to just use the Range/TextRange obtained from the selection instead.</p>\n\n<p>I might put something together to do this, will post back here if and when I do.</p>\n\n<p>EDIT:</p>\n\n<p>I've created a demo of a script that does this. It works in everything I've tried it in so far except for a bug in Opera 9, which I haven't had time to look into yet. Browsers it works in are IE 5.5, 6 and 7, Chrome 2, Firefox 2, 3 and 3.5, and Safari 4, all on Windows.</p>\n\n<p><a href=\"http://www.timdown.co.uk/code/selections/\">http://www.timdown.co.uk/code/selections/</a></p>\n\n<p>Note that selections may be made backwards in browsers so that the focus node is at the start of the selection and hitting the right or left cursor key will move the caret to a position relative to the start of the selection. I don't think it is possible to replicate this when restoring a selection, so the focus node is always at the end of the selection.</p>\n\n<p>I will write this up fully at some point soon.</strike></p>\n",
                    "is_accepted": false,
                    "score": 14
                },
                {
                    "body": "<p><strong>This solution works in all major browsers:</strong></p>\n\n<p><code>saveSelection()</code> is attached to the <code>onmouseup</code> and <code>onkeyup</code> events of the div and saves the selection to the variable <code>savedRange</code>.</p>\n\n<p><code>restoreSelection()</code> is attached to the <code>onfocus</code> event of the div and reselects the selection saved in <code>savedRange</code>.</p>\n\n<p>This works perfectly unless you want the selection to be restored when the user clicks the div aswell (which is a bit unintuitative as normally you expect the cursor to go where you click but code included for completeness)</p>\n\n<p>To achieve this the <code>onclick</code> and <code>onmousedown</code> events are canceled by the function <code>cancelEvent()</code> which is a cross browser function to cancel the event. The <code>cancelEvent()</code> function also runs the <code>restoreSelection()</code> function because as the click event is cancelled the div doesn't receive focus and therefore nothing is selected at all unless this functions is run.</p>\n\n<p>The variable <code>isInFocus</code> stores whether it is in focus and is changed to \"false\" <code>onblur</code> and \"true\" <code>onfocus</code>. This allows click events to be cancelled only if the div is not in focus (otherwise you would not be able to change the selection at all).</p>\n\n<p>If you wish to the selection to be change when the div is focused by a click, and not restore the selection <code>onclick</code> (and only when focus is given to the element programtically using <code>document.getElementById(\"area\").focus();</code> or similar then simply remove the <code>onclick</code> and <code>onmousedown</code> events. The <code>onblur</code> event and the <code>onDivBlur()</code> and <code>cancelEvent()</code> functions can also safely be removed in these circumstances.</p>\n\n<p>This code should work if dropped directly into the body of an html page if you want to test it quickly:</p>\n\n<pre><code>&lt;div id=\"area\" style=\"width:300px;height:300px;\" onblur=\"onDivBlur();\" onmousedown=\"return cancelEvent(event);\" onclick=\"return cancelEvent(event);\" contentEditable=\"true\" onmouseup=\"saveSelection();\" onkeyup=\"saveSelection();\" onfocus=\"restoreSelection();\"&gt;&lt;/div&gt;\n&lt;script type=\"text/javascript\"&gt;\nvar savedRange,isInFocus;\nfunction saveSelection()\n{\n    if(window.getSelection)//non IE Browsers\n    {\n        savedRange = window.getSelection().getRangeAt(0);\n    }\n    else if(document.selection)//IE\n    { \n        savedRange = document.selection.createRange();  \n    } \n}\n\nfunction restoreSelection()\n{\n    isInFocus = true;\n    document.getElementById(\"area\").focus();\n    if (savedRange != null) {\n        if (window.getSelection)//non IE and there is already a selection\n        {\n            var s = window.getSelection();\n            if (s.rangeCount &gt; 0) \n                s.removeAllRanges();\n            s.addRange(savedRange);\n        }\n        else if (document.createRange)//non IE and no selection\n        {\n            window.getSelection().addRange(savedRange);\n        }\n        else if (document.selection)//IE\n        {\n            savedRange.select();\n        }\n    }\n}\n//this part onwards is only needed if you want to restore selection onclick\nvar isInFocus = false;\nfunction onDivBlur()\n{\n    isInFocus = false;\n}\n\nfunction cancelEvent(e)\n{\n    if (isInFocus == false &amp;&amp; savedRange != null) {\n        if (e &amp;&amp; e.preventDefault) {\n            //alert(\"FF\");\n            e.stopPropagation(); // DOM style (return false doesn't always work in FF)\n            e.preventDefault();\n        }\n        else {\n            window.event.cancelBubble = true;//IE stopPropagation\n        }\n        restoreSelection();\n        return false; // false = IE style\n    }\n}\n&lt;/script&gt;\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 69
                },
                {
                    "body": "<p>In Firefox you might have the text of the div in a child node (<code>o_div.childNodes[0]</code>)               </p>\n\n<pre><code>var range = document.createRange();\n\nrange.setStart(o_div.childNodes[0],last_caret_pos);\nrange.setEnd(o_div.childNodes[0],last_caret_pos);\nrange.collapse(false);\n\nvar sel = window.getSelection(); \nsel.removeAllRanges();\nsel.addRange(range);\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>I had a related situation, where I specifically needed to set the cursor position to the END of a contenteditable div. I didn't want to use a full fledged library like Rangy, and many solutions were far too heavyweight. </p>\n\n<p>In the end, I came up with this simple jQuery function to set the carat position to the end of a contenteditable div:</p>\n\n<pre><code>$.fn.focusEnd = function() {\n    $(this).focus();\n    var tmp = $('&lt;span /&gt;').appendTo($(this)),\n        node = tmp.get(0),\n        range = null,\n        sel = null;\n\n    if (document.selection) {\n        range = document.body.createTextRange();\n        range.moveToElementText(node);\n        range.select();\n    } else if (window.getSelection) {\n        range = document.createRange();\n        range.selectNode(node);\n        sel = window.getSelection();\n        sel.removeAllRanges();\n        sel.addRange(range);\n    }\n    tmp.remove();\n    return this;\n}\n</code></pre>\n\n<p>The theory is simple: append a span to the end of the editable, select it, and then remove the span - leaving us with a cursor at the end of the div. You could adapt this solution to insert the span wherever you want, thus putting the cursor at a specific spot.</p>\n\n<p>Usage is simple:</p>\n\n<pre><code>$('#editable').focusEnd();\n</code></pre>\n\n<p>That's it!</p>\n",
                    "is_accepted": false,
                    "score": 10
                },
                {
                    "body": "<p>I took Nico Burns's answer and made it using jQuery:</p>\n\n<ul>\n<li>Generic: For every <code>div contentEditable=\"true\"</code></li>\n<li>Shorter</li>\n</ul>\n\n<p><i>You'll need jQuery 1.6 or higher:</i></p>\n\n<pre><code>savedRanges = new Object();\n$('div[contenteditable=\"true\"]').focus(function(){\n    var s = window.getSelection();\n    var t = $('div[contenteditable=\"true\"]').index(this);\n    if (typeof(savedRanges[t]) === \"undefined\"){\n        savedRanges[t]= new Range();\n    } else if(s.rangeCount &gt; 0) {\n        s.removeAllRanges();\n        s.addRange(savedRanges[t]);\n    }\n}).bind(\"mouseup keyup\",function(){\n    var t = $('div[contenteditable=\"true\"]').index(this);\n    savedRanges[t] = window.getSelection().getRangeAt(0);\n}).on(\"mousedown click\",function(e){\n    if(!$(this).is(\":focus\")){\n        e.stopPropagation();\n        e.preventDefault();\n        $(this).focus();\n    }\n});\n</code></pre>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"true\">\r\n<div class=\"snippet-code snippet-currently-hidden\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>savedRanges = new Object();\r\n$('div[contenteditable=\"true\"]').focus(function(){\r\n    var s = window.getSelection();\r\n    var t = $('div[contenteditable=\"true\"]').index(this);\r\n    if (typeof(savedRanges[t]) === \"undefined\"){\r\n        savedRanges[t]= new Range();\r\n    } else if(s.rangeCount &gt; 0) {\r\n        s.removeAllRanges();\r\n        s.addRange(savedRanges[t]);\r\n    }\r\n}).bind(\"mouseup keyup\",function(){\r\n    var t = $('div[contenteditable=\"true\"]').index(this);\r\n    savedRanges[t] = window.getSelection().getRangeAt(0);\r\n}).on(\"mousedown click\",function(e){\r\n    if(!$(this).is(\":focus\")){\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n        $(this).focus();\r\n    }\r\n});</code></pre>\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>div[contenteditable] {\r\n    padding: 1em;\r\n    font-family: Arial;\r\n    outline: 1px solid rgba(0,0,0,0.5);\r\n}</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script src=\"https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js\"&gt;&lt;/script&gt;\r\n&lt;div contentEditable=\"true\"&gt;&lt;/div&gt;\r\n&lt;div contentEditable=\"true\"&gt;&lt;/div&gt;\r\n&lt;div contentEditable=\"true\"&gt;&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n",
                    "is_accepted": false,
                    "score": 2
                },
                {
                    "body": "<p>After playing around I've modified eyelidlessness' answer above and made it a jQuery plugin so you can just do one of these:</p>\n\n<pre><code>var html = \"The quick brown fox\";\n$div.html(html);\n\n// Select at the text \"quick\":\n$div.setContentEditableSelection(4, 5);\n\n// Select at the beginning of the contenteditable div:\n$div.setContentEditableSelection(0);\n\n// Select at the end of the contenteditable div:\n$div.setContentEditableSelection(html.length);\n</code></pre>\n\n<p>Excuse the long code post, but it may help someone:</p>\n\n<pre><code>$.fn.setContentEditableSelection = function(position, length) {\n    if (typeof(length) == \"undefined\") {\n        length = 0;\n    }\n\n    return this.each(function() {\n        var $this = $(this);\n        var editable = this;\n        var selection;\n        var range;\n\n        var html = $this.html();\n        html = html.substring(0, position) +\n            '&lt;a id=\"cursorStart\"&gt;&lt;/a&gt;' +\n            html.substring(position, position + length) +\n            '&lt;a id=\"cursorEnd\"&gt;&lt;/a&gt;' +\n            html.substring(position + length, html.length);\n        console.log(html);\n        $this.html(html);\n\n        // Populates selection and range variables\n        var captureSelection = function(e) {\n            // Don't capture selection outside editable region\n            var isOrContainsAnchor = false,\n                isOrContainsFocus = false,\n                sel = window.getSelection(),\n                parentAnchor = sel.anchorNode,\n                parentFocus = sel.focusNode;\n\n            while (parentAnchor &amp;&amp; parentAnchor != document.documentElement) {\n                if (parentAnchor == editable) {\n                    isOrContainsAnchor = true;\n                }\n                parentAnchor = parentAnchor.parentNode;\n            }\n\n            while (parentFocus &amp;&amp; parentFocus != document.documentElement) {\n                if (parentFocus == editable) {\n                    isOrContainsFocus = true;\n                }\n                parentFocus = parentFocus.parentNode;\n            }\n\n            if (!isOrContainsAnchor || !isOrContainsFocus) {\n                return;\n            }\n\n            selection = window.getSelection();\n\n            // Get range (standards)\n            if (selection.getRangeAt !== undefined) {\n                range = selection.getRangeAt(0);\n\n                // Get range (Safari 2)\n            } else if (\n                document.createRange &amp;&amp;\n                selection.anchorNode &amp;&amp;\n                selection.anchorOffset &amp;&amp;\n                selection.focusNode &amp;&amp;\n                selection.focusOffset\n            ) {\n                range = document.createRange();\n                range.setStart(selection.anchorNode, selection.anchorOffset);\n                range.setEnd(selection.focusNode, selection.focusOffset);\n            } else {\n                // Failure here, not handled by the rest of the script.\n                // Probably IE or some older browser\n            }\n        };\n\n        // Slight delay will avoid the initial selection\n        // (at start or of contents depending on browser) being mistaken\n        setTimeout(function() {\n            var cursorStart = document.getElementById('cursorStart');\n            var cursorEnd = document.getElementById('cursorEnd');\n\n            // Don't do anything if user is creating a new selection\n            if (editable.className.match(/\\sselecting(\\s|$)/)) {\n                if (cursorStart) {\n                    cursorStart.parentNode.removeChild(cursorStart);\n                }\n                if (cursorEnd) {\n                    cursorEnd.parentNode.removeChild(cursorEnd);\n                }\n            } else if (cursorStart) {\n                captureSelection();\n                range = document.createRange();\n\n                if (cursorEnd) {\n                    range.setStartAfter(cursorStart);\n                    range.setEndBefore(cursorEnd);\n\n                    // Delete cursor markers\n                    cursorStart.parentNode.removeChild(cursorStart);\n                    cursorEnd.parentNode.removeChild(cursorEnd);\n\n                    // Select range\n                    selection.removeAllRanges();\n                    selection.addRange(range);\n                } else {\n                    range.selectNode(cursorStart);\n\n                    // Select range\n                    selection.removeAllRanges();\n                    selection.addRange(range);\n\n                    // Delete cursor marker\n                    document.execCommand('delete', false, null);\n                }\n            }\n\n            // Register selection again\n            captureSelection();\n        }, 10);\n    });\n};\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 2
                }
            ],
            "body": "<p>I am after a definitive, cross-browser solution to set the cursor/caret position to the last known position when a contentEditable='on' &lt;div> regains focus.  It appears default functionality of a content editable div is to move the caret/cursor to the beginning of the text in the div each time you click on it, which is undesirable.</p>\n\n<p>I believe I would have to store in a variable the current cursor position when they are leaving focus of the div, and then re-set this when they have focus inside again, but I have not been able to put together, or find a working code sample yet.</p>\n\n<p>If anybody has any thoughts, working code snippets or samples I'd be happy to see them.</p>\n\n<p>I don't really have any code yet but here is what I do have:</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n// jQuery\n$(document).ready(function() {\n   $('#area').focus(function() { .. }  // focus I would imagine I need.\n}\n&lt;/script&gt;\n&lt;div id=\"area\" contentEditable=\"true\"&gt;&lt;/div&gt;\n</code></pre>\n\n<p><em>PS. I have tried this resource but it appears it does not work for a &lt;div>.  Perhaps only for textarea (<a href=\"http://stackoverflow.com/questions/1125292/how-to-move-cursor-to-end-of-contenteditable-entity\">How to move cursor to end of contenteditable entity</a>)</em></p>\n",
            "last_activity_date": 1423135073,
            "question_id": 1181700,
            "score": 105,
            "tags": [
                "javascript",
                "jquery",
                "html",
                "contenteditable",
                "cursor-position"
            ],
            "title": "Set cursor position on contentEditable &lt;div&gt;"
        },
        {
            "answer_count": 18,
            "answers": [
                {
                    "body": "<p>Hey, this is in dojo, just cause it's what I had the code in already for a project.</p>\n\n<p>It should be fairly Obvious how to convert it back to non dojo vanilla JavaScript. </p>\n\n<pre><code>  function onMouseClick(e) {\n      var x = e.clientX;\n      var y = e.clientY;\n  }\n  var canvas = dojo.byId(canvasId);\n  dojo.connect(canvas,\"click\",onMouseClick);\n</code></pre>\n\n<p>Hope that helps. </p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>Be wary while doing the coordinate conversion; there are multiple non-cross-browser values returned in a click event. Using clientX and clientY alone are not sufficient if the browser window is scrolled (verified in Firefox 3.5 and Chrome 3.0). </p>\n\n<p><a href=\"http://www.quirksmode.org/js/events_properties.html\">This quirks mode</a> article provides a more correct function that can use either pageX or pageY or a combination of clientX with document.body.scrollLeft and clientY with document.body.scrollTop to calculate the click coordinate relative to the document origin. </p>\n\n<p>UPDATE: Additionally, offsetLeft and offsetTop are relative to the padded size of the element, not the interior size. A canvas with the padding: style applied will not report the top-left of its content region as offsetLeft. There are various solutions to this problem; the simplest one may be to clear all border, padding, etc. styles on the canvas itself and instead apply them to a box containing the canvas.</p>\n",
                    "is_accepted": false,
                    "score": 7
                },
                {
                    "body": "<p>As described <a href=\"http://answers.oreilly.com/topic/1929-how-to-use-the-canvas-and-draw-elements-in-html5/\">here</a>:</p>\n\n<pre><code>var x;\nvar y;\nif (e.pageX || e.pageY) { \n  x = e.pageX;\n  y = e.pageY;\n}\nelse { \n  x = e.clientX + document.body.scrollLeft + document.documentElement.scrollLeft; \n  y = e.clientY + document.body.scrollTop + document.documentElement.scrollTop; \n} \nx -= gCanvasElement.offsetLeft;\ny -= gCanvasElement.offsetTop;\n</code></pre>\n\n<p>Worked perfectly fine for me.</p>\n",
                    "is_accepted": true,
                    "score": 46
                },
                {
                    "body": "<p>According to fresh <a href=\"http://www.quirksmode.org/dom/w3c_cssom.html#mousepos\">Quirksmode</a> the <em>clientX</em> and <em>clientY</em> methods are supported in all major browsers.\nSo, here it goes - the good, working code that works in a scrolling div on a page with scrollbars:</p>\n\n<pre><code>function getCursorPosition(canvas, event) {\nvar x, y;\n\ncanoffset = $(canvas).offset();\nx = event.clientX + document.body.scrollLeft + document.documentElement.scrollLeft - Math.floor(canoffset.left);\ny = event.clientY + document.body.scrollTop + document.documentElement.scrollTop - Math.floor(canoffset.top) + 1;\n\nreturn [x,y];\n}\n</code></pre>\n\n<p>This also requires jQuery for <em>$(canvas).offset()</em>.</p>\n",
                    "is_accepted": false,
                    "score": 14
                },
                {
                    "body": "<p>I made a full demostration that works in every browser with the full source code of the solution of this problem: <a href=\"http://miloq.blogspot.com/2011/05/coordinates-mouse-click-canvas.html\">Coordinates of a mouse click on Canvas in Javascript</a>. To try the demo, copy the code and paste it into a text editor. Then save it as example.html and, finally, open the file with a browser.</p>\n",
                    "is_accepted": false,
                    "score": 11
                },
                {
                    "body": "<p>Since the canvas isn't always styled relative to the entire page, the <code>canvas.offsetLeft/Top</code> doesn't always return what you need. It will return the number of pixels it is offset relative to its offsetParent element, which can be something like a <code>div</code> element containing the canvas with a <code>position: relative</code> style applied. To account for this you need to loop through the chain of <code>offsetParent</code>s, beginning with the canvas element itself. This code works perfectly for me, tested in Firefox and Safari but should work for all. </p>\n\n<pre><code>function relMouseCoords(event){\n    var totalOffsetX = 0;\n    var totalOffsetY = 0;\n    var canvasX = 0;\n    var canvasY = 0;\n    var currentElement = this;\n\n    do{\n        totalOffsetX += currentElement.offsetLeft - currentElement.scrollLeft;\n        totalOffsetY += currentElement.offsetTop - currentElement.scrollTop;\n    }\n    while(currentElement = currentElement.offsetParent)\n\n    canvasX = event.pageX - totalOffsetX;\n    canvasY = event.pageY - totalOffsetY;\n\n    return {x:canvasX, y:canvasY}\n}\nHTMLCanvasElement.prototype.relMouseCoords = relMouseCoords;\n</code></pre>\n\n<p>The last line makes things convenient for getting the mouse coordinates relative to a canvas element. All that's needed to get the useful coordinates is</p>\n\n<pre><code>coords = canvas.relMouseCoords(event);\ncanvasX = coords.x;\ncanvasY = coords.y;\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 122
                },
                {
                    "body": "<p>In Prototype, use cumulativeOffset() to do the recursive summation as mentioned by Ryan Artecona above.</p>\n\n<p><a href=\"http://www.prototypejs.org/api/element/cumulativeoffset\" rel=\"nofollow\">http://www.prototypejs.org/api/element/cumulativeoffset</a></p>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>Here is a small modification to <a href=\"http://stackoverflow.com/a/5932203/1305768\">Ryan Artecona's answer</a> for canvases with a variable (%) width:</p>\n\n<pre><code> HTMLCanvasElement.prototype.relMouseCoords = function (event) {\n    var totalOffsetX = 0;\n    var totalOffsetY = 0;\n    var canvasX = 0;\n    var canvasY = 0;\n    var currentElement = this;\n\n    do {\n        totalOffsetX += currentElement.offsetLeft;\n        totalOffsetY += currentElement.offsetTop;\n    }\n    while (currentElement = currentElement.offsetParent)\n\n    canvasX = event.pageX - totalOffsetX;\n    canvasY = event.pageY - totalOffsetY;\n\n    // Fix for variable canvas width\n    canvasX = Math.round( canvasX * (this.width / this.offsetWidth) );\n    canvasY = Math.round( canvasY * (this.height / this.offsetHeight) );\n\n    return {x:canvasX, y:canvasY}\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 7
                },
                {
                    "body": "<p>Modern browser's now seem to handle this for you now. Chrome and IE9 (at least) support the offsetX/Y and Firefox supports layerX/Y. The following function gives me what I need. Just pass it the event from the click handler.</p>\n\n<pre><code>function getRelativeCoords(event) {\n    if (event.offsetX !== undefined &amp;&amp; event.offsetY !== undefined) { return { x: event.offsetX, y: event.offsetY }; }\n    return { x: event.layerX, y: event.layerY };\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 11
                },
                {
                    "body": "<p>Here is some modifications of the above Ryan Artecona's solution.</p>\n\n<pre><code>function myGetPxStyle(e,p)\n{\n    var r=window.getComputedStyle?window.getComputedStyle(e,null)[p]:\"\";\n    return parseFloat(r);\n}\n\nfunction myGetClick=function(ev)\n{\n    // {x:ev.layerX,y:ev.layerY} doesn't work when zooming with mac chrome 27\n    // {x:ev.clientX,y:ev.clientY} not supported by mac firefox 21\n    // document.body.scrollLeft and document.body.scrollTop seem required when scrolling on iPad\n    // html is not an offsetParent of body but can have non null offsetX or offsetY (case of wordpress 3.5.1 admin pages for instance)\n    // html.offsetX and html.offsetY don't work with mac firefox 21\n\n    var offsetX=0,offsetY=0,e=this,x,y;\n    var htmls=document.getElementsByTagName(\"html\"),html=(htmls?htmls[0]:0);\n\n    do\n    {\n        offsetX+=e.offsetLeft-e.scrollLeft;\n        offsetY+=e.offsetTop-e.scrollTop;\n    } while (e=e.offsetParent);\n\n    if (html)\n    {\n        offsetX+=myGetPxStyle(html,\"marginLeft\");\n        offsetY+=myGetPxStyle(html,\"marginTop\");\n    }\n\n    x=ev.pageX-offsetX-document.body.scrollLeft;\n    y=ev.pageY-offsetY-document.body.scrollTop;\n    return {x:x,y:y};\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>Here is a very nice tutorial-</p>\n\n<p><a href=\"http://www.html5canvastutorials.com/advanced/html5-canvas-mouse-coordinates/\" rel=\"nofollow\">http://www.html5canvastutorials.com/advanced/html5-canvas-mouse-coordinates/</a></p>\n\n<pre><code> &lt;canvas id=\"myCanvas\" width=\"578\" height=\"200\"&gt;&lt;/canvas&gt;\n&lt;script&gt;\n  function writeMessage(canvas, message) {\n    var context = canvas.getContext('2d');\n    context.clearRect(0, 0, canvas.width, canvas.height);\n    context.font = '18pt Calibri';\n    context.fillStyle = 'black';\n    context.fillText(message, 10, 25);\n  }\n  function getMousePos(canvas, evt) {\n    var rect = canvas.getBoundingClientRect();\n    return {\n      x: evt.clientX - rect.left,\n      y: evt.clientY - rect.top\n    };\n  }\n  var canvas = document.getElementById('myCanvas');\n  var context = canvas.getContext('2d');\n\n  canvas.addEventListener('mousemove', function(evt) {\n    var mousePos = getMousePos(canvas, evt);\n    var message = 'Mouse position: ' + mousePos.x + ',' + mousePos.y;\n    writeMessage(canvas, message);\n  }, false);\n</code></pre>\n\n<p>hope this helps!</p>\n",
                    "is_accepted": false,
                    "score": 4
                },
                {
                    "body": "<p>I recommend this link-\n<a href=\"http://miloq.blogspot.in/2011/05/coordinates-mouse-click-canvas.html\" rel=\"nofollow\">http://miloq.blogspot.in/2011/05/coordinates-mouse-click-canvas.html</a></p>\n\n<p></p>\n\n<pre><code>&lt;style type=\"text/css\"&gt;\n\n  #canvas{background-color: #000;}\n\n&lt;/style&gt;\n\n&lt;script type=\"text/javascript\"&gt;\n\n  document.addEventListener(\"DOMContentLoaded\", init, false);\n\n  function init()\n  {\n    var canvas = document.getElementById(\"canvas\");\n    canvas.addEventListener(\"mousedown\", getPosition, false);\n  }\n\n  function getPosition(event)\n  {\n    var x = new Number();\n    var y = new Number();\n    var canvas = document.getElementById(\"canvas\");\n\n    if (event.x != undefined &amp;&amp; event.y != undefined)\n    {\n      x = event.x;\n      y = event.y;\n    }\n    else // Firefox method to get the position\n    {\n      x = event.clientX + document.body.scrollLeft +\n          document.documentElement.scrollLeft;\n      y = event.clientY + document.body.scrollTop +\n          document.documentElement.scrollTop;\n    }\n\n    x -= canvas.offsetLeft;\n    y -= canvas.offsetTop;\n\n    alert(\"x: \" + x + \"  y: \" + y);\n  }\n\n&lt;/script&gt;\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 2
                },
                {
                    "body": "<p>If you like simplicity but still want cross-browser functionality I found this solution worked best for me. This is a simplification of @Aldekein\u00b4s solution but <strong>without jQuery</strong>.</p>\n\n<pre><code>function getCursorPosition(canvas, event) {\n    var rect = canvas.getBoundingClientRect();\n    var x = event.clientX - rect.left;\n    var y = event.clientY - rect.top;\n    console.log(\"x: \" + x + \" y: \" + y);\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 6
                },
                {
                    "body": "<p>You could just do: </p>\n\n<pre><code>var canvas = yourCanvasElement;\nvar mouseX = (event.clientX - (canvas.offsetLeft - canvas.scrollLeft)) - 2;\nvar mouseY = (event.clientY - (canvas.offsetTop - canvas.scrollTop)) - 2;\n</code></pre>\n\n<p>This will give you the exact position of the mouse pointer.</p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>See demo at <a href=\"http://jsbin.com/ApuJOSA/1/edit?html,output\" rel=\"nofollow\">http://jsbin.com/ApuJOSA/1/edit?html,output</a> .</p>\n\n<pre><code>  function mousePositionOnCanvas(e) {\n      var el=e.target, c=el;\n      var scaleX = c.width/c.offsetWidth || 1;\n      var scaleY = c.height/c.offsetHeight || 1;\n\n      if (!isNaN(e.offsetX)) \n          return { x:e.offsetX*scaleX, y:e.offsetY*scaleY };\n\n      var x=e.pageX, y=e.pageY;\n      do {\n        x -= el.offsetLeft;\n        y -= el.offsetTop;\n        el = el.offsetParent;\n      } while (el);\n      return { x: x*scaleX, y: y*scaleY };\n  }\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>Modified from <a href=\"http://www.kirupa.com/html5/getting_mouse_click_position.htm\" rel=\"nofollow\">http://www.kirupa.com/html5/getting_mouse_click_position.htm</a></p>\n\n<pre><code>function getClickPosition(e) {\n    var xPosition = e.clientX;\n    var yPosition = e.clientY;\n    console.log('x: ' + xPosition + ' y: '+ yPosition);//or return from this function\n}\n</code></pre>\n\n<p>and then somewhere else</p>\n\n<pre><code> document.addEventListener(\"click\", getClickPosition, false);\n</code></pre>\n",
                    "is_accepted": false,
                    "score": -1
                },
                {
                    "body": "<p>First, as others have said, you need a function to get the <a href=\"http://www.quirksmode.org/js/findpos.html\" rel=\"nofollow\">position of the canvas element</a>. Here's a method that's a little more elegant than some of the others on this page (IMHO). You can pass it <em>any</em> element and get its position in the document:</p>\n\n<pre><code>function findPos(obj) {\n    var curleft = 0, curtop = 0;\n    if (obj.offsetParent) {\n        do {\n            curleft += obj.offsetLeft;\n            curtop += obj.offsetTop;\n        } while (obj = obj.offsetParent);\n        return { x: curleft, y: curtop };\n    }\n    return undefined;\n}\n</code></pre>\n\n<p>Now calculate the current position of the cursor relative to that:</p>\n\n<pre><code>$('#canvas').mousemove(function(e) {\n    var pos = findPos(this);\n    var x = e.pageX - pos.x;\n    var y = e.pageY - pos.y;\n    var coordinateDisplay = \"x=\" + x + \", y=\" + y;\n    writeCoordinateDisplay(coordinateDisplay);\n});\n</code></pre>\n\n<p>Notice that I've separated the generic <code>findPos</code> function from the event handling code. (<em>As it should be</em>. We should try to keep our functions to one task each.)</p>\n\n<p>The values of <code>offsetLeft</code> and <code>offsetTop</code> are relative to <code>offsetParent</code>, which could be some wrapper <code>div</code> node (or anything else, for that matter). When there is no element wrapping the <code>canvas</code> they're relative to the <code>body</code>, so there is no offset to subtract. This is why we need to determine the position of the canvas before we can do anything else.</p>\n\n<p>Similary, <code>e.pageX</code> and <code>e.pageY</code> give the position of the cursor relative to the document. That's why we subtract the canvas's offset from those values to arrive at the true position.</p>\n\n<p>An alternative for <em>positioned</em> elements is to directly use the values of <code>e.layerX</code> and <code>e.layerY</code>. This is less reliable than the method above for two reasons:</p>\n\n<ol>\n<li>These values are also relative to the entire document when the event does not take place inside a positioned element</li>\n<li>They are not part of any standard</li>\n</ol>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>I'm not sure what's the point of all these answers that <a href=\"http://stackoverflow.com/a/5932203/607407\">loop through parent elements</a> and do all kinds of <a href=\"http://en.wikipedia.org/wiki/Deep_magic\" rel=\"nofollow\">weird stuff</a>.</p>\n\n<p>The <code>HTMLElement.getBoundingClientRect</code> method is designed to to handle actual screen position of any element. This includes scrolling, so stuff like <code>scrollTop</code> is not needed:</p>\n\n<blockquote>\n  <p><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Element.getBoundingClientRect\" rel=\"nofollow\"><strong>(from MDN)</strong></a> The amount of scrolling that has been done of the viewport area (or\n  <strong>any other scrollable element</strong>) is taken into account when computing the\n  bounding rectangle</p>\n</blockquote>\n\n<h3>Normal image</h3>\n\n<p>The <a href=\"http://stackoverflow.com/a/20788872/607407\">very simplest approach</a> was already posted here. This is correct as long as <em>no wild CSS</em> rules are involved.</p>\n\n<h3>Handling stretched canvas/image</h3>\n\n<p>When image pixel width isn't matched by it's CSS width, you'll need to apply some ratio on pixel values:</p>\n\n<pre><code>/* Returns pixel coordinates according to the pixel that's under the mouse cursor**/\nHTMLCanvasElement.prototype.relativeCoords = function(event) {\n  var x,y;\n  //This is the current screen rectangle of canvas\n  var rect = this.getBoundingClientRect();\n  var top = rect.top;\n  var bottom = rect.bottom;\n  var left = rect.left;\n  var right = rect.right;\n  //Recalculate mouse offsets to relative offsets\n  x = event.clientX - left;\n  y = event.clientY - top;\n  //Also recalculate offsets of canvas is stretched\n  var width = right - left;\n  //I use this to reduce number of calculations for images that have normal size \n  if(this.width!=width) {\n    var height = bottom - top;\n    //changes coordinates by ratio\n    x = x*(this.width/width);\n    y = y*(this.height/height);\n  } \n  //Return as an array\n  return [x,y];\n}\n</code></pre>\n\n<p>As long as the canvas has no border, <a href=\"http://jsfiddle.net/Darker/cfzn01c6/\" rel=\"nofollow\"><strong>it works for stretched images (jsFiddle)</strong></a>.</p>\n\n<h3>Handling CSS borders</h3>\n\n<p>If the canvas has thick border, <a href=\"http://jsfiddle.net/Darker/nrw7xu2r/1/\" rel=\"nofollow\">the things get little complicated</a>. You'll literally need to subtract the border from the bounding rectangle. This can be done using <a href=\"https://developer.mozilla.org/en/docs/Web/API/window.getComputedStyle\" rel=\"nofollow\">.getComputedStyle</a>. This <a href=\"http://stackoverflow.com/a/27204448/607407\">answer describes the process</a>.</p>\n\n<p>The function then grows up a little:</p>\n\n<pre><code>/* Returns pixel coordinates according to the pixel that's under the mouse cursor**/\nHTMLCanvasElement.prototype.relativeCoords = function(event) {\n  var x,y;\n  //This is the current screen rectangle of canvas\n  var rect = this.getBoundingClientRect();\n  var top = rect.top;\n  var bottom = rect.bottom;\n  var left = rect.left;\n  var right = rect.right;\n  //Subtract border size\n  // Get computed style\n  var styling=getComputedStyle(this,null);\n  // Turn the border widths in integers\n  var topBorder=parseInt(styling.getPropertyValue('border-top-width'),10);\n  var rightBorder=parseInt(styling.getPropertyValue('border-right-width'),10);\n  var bottomBorder=parseInt(styling.getPropertyValue('border-bottom-width'),10);\n  var leftBorder=parseInt(styling.getPropertyValue('border-left-width'),10);\n  //Subtract border from rectangle\n  left+=leftBorder;\n  right-=rightBorder;\n  top+=topBorder;\n  bottom-=bottomBorder;\n  //Proceed as usual\n  ...\n}\n</code></pre>\n\n<p>I can't think of anything that would confuse this final function. See yourself at <a href=\"http://jsfiddle.net/Darker/nrw7xu2r/2/\" rel=\"nofollow\"><strong>JsFiddle</strong></a>.</p>\n\n<h3>Notes</h3>\n\n<p>If you don't like modifying the native <code>prototype</code>s, just change the function and call it with <code>(canvas, event)</code> (and replace any <code>this</code> with <code>canvas</code>).</p>\n",
                    "is_accepted": false,
                    "score": 1
                }
            ],
            "body": "<p>What's the simplest way to add a click event handler to a canvas element that will return the x and y coordinates of the click (relative to the canvas element)?</p>\n\n<p>No legacy browser compatibility required, Safari, Opera and Firefox will do.</p>\n",
            "last_activity_date": 1417282028,
            "question_id": 55677,
            "score": 146,
            "tags": [
                "javascript",
                "canvas"
            ],
            "title": "How do I get the coordinates of a mouse click on a canvas element?"
        },
        {
            "answer_count": 3,
            "answers": [
                {
                    "body": "<pre><code>referenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling);\n</code></pre>\n\n<p>Where <code>referenceNode</code> is the node you want to put <code>newNode</code> after. If <code>referenceNode</code> is the last child within its parent element, that's fine, because <code>referenceNode.nextSibling</code> will be <code>null</code> and <a href=\"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-952280727\"><code>insertBefore</code></a> handles that case by adding to the end of the list.</p>\n\n<p>So:</p>\n\n<pre><code>function insertAfter(newNode, referenceNode) {\n    referenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling);\n}\n</code></pre>\n\n<p><a href=\"http://jsfiddle.net/UqDJk/\"><strong>Try it here.</strong></a></p>\n",
                    "is_accepted": true,
                    "score": 343
                },
                {
                    "body": "<p>A quick Google search reveals <a href=\"http://snipplr.com/view/2107/insertafter-function-for-the-dom/\">this script</a></p>\n\n<pre><code>//create function, it expects 2 values.\nfunction insertAfter(newElement,targetElement) {\n    //target is what you want it to go after. Look for this elements parent.\n    var parent = targetElement.parentNode;\n\n    //if the parents lastchild is the targetElement...\n    if(parent.lastchild == targetElement) {\n        //add the newElement after the target element.\n        parent.appendChild(newElement);\n        } else {\n        // else the target has siblings, insert the new element between the target and it's next sibling.\n        parent.insertBefore(newElement, targetElement.nextSibling);\n        }\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 15
                },
                {
                    "body": "<p><code>insertAdjacentHTML</code> + <code>outerHTML</code> may be an option:</p>\n\n<pre><code>elementBefore.insertAdjacentHTML('afterEnd', elementAfter.outerHTML)\n</code></pre>\n\n<p>Upsides:</p>\n\n<ul>\n<li>DRYer: you don't have to store the before node in a variable and use it twice. If you rename the variable, on less occurrence to modify. </li>\n<li>golfs better than the <code>insertBefore</code> (break even if the existing node variable name is 3 chars long)</li>\n</ul>\n\n<p>Downsides:</p>\n\n<ul>\n<li>lower browser support</li>\n<li>will lose properties of the element such as events because <code>outerHTML</code> converts the element to a string. We need it because <code>insertAdjacentHTML</code> adds content from strings rather than elements.</li>\n</ul>\n",
                    "is_accepted": false,
                    "score": 5
                }
            ],
            "body": "<p>There's <code>insertBefore()</code> in JavaScript, but how to do insert after a element without using jQuery or other library?</p>\n",
            "last_activity_date": 1424768858,
            "question_id": 4793604,
            "score": 173,
            "tags": [
                "javascript"
            ],
            "title": "How to do insert After() in JavaScript without using a library?"
        },
        {
            "answer_count": 8,
            "answers": [
                {
                    "body": "<p>Yes.</p>\n\n<pre><code>var data = {\n    'PropertyA': 1,\n    'PropertyB': 2,\n    'PropertyC': 3\n};\n\ndata[\"PropertyD\"] = 4;\n\n// dialog box with 4 in it\nalert(data.PropertyD);\nalert(data[\"PropertyD\"]);\n</code></pre>\n",
                    "is_accepted": true,
                    "score": 350
                },
                {
                    "body": "<p>Yes it is possible. Assuming:</p>\n\n<pre><code>var data = {\n    'PropertyA': 1,\n    'PropertyB': 2,\n    'PropertyC': 3\n};\nvar propertyName = \"someProperty\";\nvar propertyValue = \"someValue\";\n</code></pre>\n\n<p>Either:</p>\n\n<pre><code>data[propertyName] = propertyValue;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>eval(\"data.\" + propertyName + \" = '\" + propertyValue + \"'\");\n</code></pre>\n\n<p>The first method is preferred. eval() has the obvious security concerns if you're using values supplied by the user so don't use it if you can avoid it but it's worth knowing it exists and what it can do.</p>\n\n<p>You can reference this with:</p>\n\n<pre><code>alert(data.someProperty);\n</code></pre>\n\n<p>or</p>\n\n<pre><code>data(data[\"someProperty\"]);\n</code></pre>\n\n<p>or</p>\n\n<pre><code>alert(data[propertyName]);\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 34
                },
                {
                    "body": "<p>You can add as many more properties as you like simply by using the dot notation:</p>\n\n<pre><code>var data = {\n    var1:'somevalue'\n}\ndata.newAttribute = 'newvalue'\n</code></pre>\n\n<p><strong>or</strong>:</p>\n\n<pre><code>data[newattribute] = somevalue\n</code></pre>\n\n<p>for dynamic keys.</p>\n",
                    "is_accepted": false,
                    "score": 5
                },
                {
                    "body": "<p>Definitely.  Think of it as a dictionary or associative array.  You can add to it at any point.</p>\n",
                    "is_accepted": false,
                    "score": -3
                },
                {
                    "body": "<p>Here, using your notation:</p>\n\n<pre><code>var data = {\n    'PropertyA': 1,\n    'PropertyB': 2,\n    'PropertyC': 3\n};\nvar propName = 'Property' + someUserInput\n//imagine someUserInput was 'Z', how can I now add a 'PropertyZ' property to \n//my object?\ndata[propName] = 'Some New Property value'\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 10
                },
                {
                    "body": "<p>I know that the question is answered perfectly, but I also found another way to add new properties and wanted to share it with you:</p>\n\n<p>You can use the function <code>Object.defineProperty()</code> </p>\n\n<p>Found on <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty\">Mozilla Developer Network</a></p>\n\n<p>Example:</p>\n\n<pre><code>var o = {}; // Creates a new object\n\n// Example of an object property added with defineProperty with a data property descriptor\nObject.defineProperty(o, \"a\", {value : 37,\n                               writable : true,\n                               enumerable : true,\n                               configurable : true});\n// 'a' property exists in the o object and its value is 37\n\n// Example of an object property added with defineProperty with an accessor property descriptor\nvar bValue;\nObject.defineProperty(o, \"b\", {get : function(){ return bValue; },\n                               set : function(newValue){ bValue = newValue; },\n                               enumerable : true,\n                               configurable : true});\no.b = 38;\n// 'b' property exists in the o object and its value is 38\n// The value of o.b is now always identical to bValue, unless o.b is redefined\n\n// You cannot try to mix both :\nObject.defineProperty(o, \"conflict\", { value: 0x9f91102, \n                                       get: function() { return 0xdeadbeef; } });\n// throws a TypeError: value appears only in data descriptors, get appears only in accessor descriptors\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 16
                },
                {
                    "body": "<p>in addition to all the previous answers, and in case you're wondering how we're going to write dynamic property names in the <strong>Future</strong> using Computed Property Names ( ECMAScript 6 ), here's how:</p>\n\n<pre><code>var person = \"John Doe\";\nvar personId = \"person_\" + new Date().getTime();\nvar personIndex = {\n    [ personId ]: person\n//  ^ computed property name\n};\n\npersonIndex[ personId ]; // \"John Doe\"\n</code></pre>\n\n<hr>\n\n<p>reference: <a href=\"https://github.com/nzakas/understandinges6/blob/master/manuscript/03-Objects.md#computed-property-names\" rel=\"nofollow\">Understanding ECMAScript 6 - Nickolas Zakas</a></p>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>Just an addition to abeing's answer above. You can define a function to encapsulate the complexity of defineProperty as mentioned below.</p>\n\n<pre><code>var defineProp = function ( obj, key, value ){\n  var config = {\n    value: value,\n    writable: true,\n    enumerable: true,\n    configurable: true\n  };\n  Object.defineProperty( obj, key, config );\n};\n\n//Call the method to add properties to any object\ndefineProp( data, \"PropertyA\",  1 );\ndefineProp( data, \"PropertyB\",  2 );\ndefineProp( data, \"PropertyC\",  3 );\n</code></pre>\n\n<p>reference: <a href=\"http://addyosmani.com/resources/essentialjsdesignpatterns/book/#constructorpatternjavascript\" rel=\"nofollow\">http://addyosmani.com/resources/essentialjsdesignpatterns/book/#constructorpatternjavascript</a></p>\n",
                    "is_accepted": false,
                    "score": 4
                }
            ],
            "body": "<p>In JavaScript, I've created an object like so:</p>\n\n<pre><code>var data = {\n    'PropertyA': 1,\n    'PropertyB': 2,\n    'PropertyC': 3\n};\n</code></pre>\n\n<p>Is it possible to add further properties to this object after it's initial creation if the properties name is not determined until run time? i.e.</p>\n\n<pre><code>var propName = 'Property' + someUserInput\n//imagine someUserInput was 'Z', how can I now add a 'PropertyZ' property to \n//my object?\n</code></pre>\n\n<p>Thanks</p>\n",
            "last_activity_date": 1396934678,
            "question_id": 1184123,
            "score": 211,
            "tags": [
                "javascript"
            ],
            "title": "Is it possible to add dynamically named properties to JavaScript object?"
        },
        {
            "answer_count": 5,
            "answers": [
                {
                    "body": "<p>To pass an array of values to <em>any</em> function that normally expects them to be separate parameters, use <code>Function.apply</code>, so in this case you need:</p>\n\n<pre><code>$.when.apply($, my_array);\n</code></pre>\n\n<p>See <a href=\"http://jsfiddle.net/YNGcm/21/\">http://jsfiddle.net/YNGcm/21/</a></p>\n",
                    "is_accepted": true,
                    "score": 305
                },
                {
                    "body": "<p>You can apply the <code>when</code> method to your array:</p>\n\n<pre><code>var arr = [ /* Deferred objects */ ];\n\n$.when.apply($, arr);\n</code></pre>\n\n<p><a href=\"http://stackoverflow.com/questions/4878887/how-do-you-work-with-an-array-of-jquery-deferreds\">How do you work with an array of jQuery Deferreds?</a></p>\n",
                    "is_accepted": false,
                    "score": 19
                },
                {
                    "body": "<p>The workarounds above (thanks!) don't properly address the problem of getting back the objects provided to the deferred's <code>resolve()</code> method because jQuery calls the <code>done()</code> and <code>fail()</code> callbacks with individual parameters, not an array. That means we have to use the <code>arguments</code> pseudo-array to get all the resolved/rejected objects returned by the array of deferreds, which is ugly:</p>\n\n<pre><code>$.when.apply($,deferreds).then(function() {\n     var objects=arguments; // The array of resolved objects as a pseudo-array\n     ...\n};\n</code></pre>\n\n<p>Since we passed in an array of deferreds, it would be nice to get back an array of results. It would also be nice to get back an actual array instead of a pseudo-array so we can use methods like <code>Array.sort()</code>.</p>\n\n<p>Here is a solution inspired by <strong>when.js</strong>'s <code>when.all()</code> method that addresses these problems:</p>\n\n<pre><code>// Put somewhere in your scripting environment\nif (jQuery.when.all===undefined) {\n    jQuery.when.all = function(deferreds) {\n        var deferred = new jQuery.Deferred();\n        $.when.apply(jQuery, deferreds).then(\n            function() {\n                deferred.resolve(Array.prototype.slice.call(arguments));\n            },\n            function() {\n                deferred.fail(Array.prototype.slice.call(arguments));\n            });\n\n        return deferred;\n    }\n}\n</code></pre>\n\n<p>Now you can simply pass in an array of deferreds/promises and get back an array of resolved/rejected objects in your callback, like so:</p>\n\n<pre><code>$.when.all(deferreds).then(function(objects) {\n    console.log(\"Resolved objects:\", objects);\n});\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 36
                },
                {
                    "body": "<p>Also you can override <code>$.when</code> method to work with arrays alongside usual parameters</p>\n\n<pre><code>(function(when){\n    $.when = function() {\n        var deferredList=[];\n        for(var i=0;i&lt;arguments.length;i++){\n            deferredList=deferredList.concat(arguments[i]);\n        }\n        return when.apply($, deferredList);\n    }\n})($.when);\n</code></pre>\n\n<p>so you can do something like </p>\n\n<pre><code>$.when(def1,[def2,def3,def4],def5); \n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>If you're using angularJS or some variant of the Q promise library, then you have a <code>.all()</code> method that solves this exact problem.</p>\n\n<pre><code>var savePromises = [];\nangular.forEach(models, function(model){\n  savePromises.push(\n    model.saveToServer()\n  )\n});\n\n$q.all(savePromises).then(\n  function success(results){...},\n  function failed(results){...}\n);\n</code></pre>\n\n<p>see the full API:</p>\n\n<p><a href=\"https://github.com/kriskowal/q/wiki/API-Reference#promiseall\" rel=\"nofollow\">https://github.com/kriskowal/q/wiki/API-Reference#promiseall</a></p>\n\n<p><a href=\"https://docs.angularjs.org/api/ng/service/%24q\" rel=\"nofollow\">https://docs.angularjs.org/api/ng/service/$q</a></p>\n",
                    "is_accepted": false,
                    "score": 1
                }
            ],
            "body": "<p>Here's an contrived example of what's going on: <a href=\"http://jsfiddle.net/adamjford/YNGcm/20/\">http://jsfiddle.net/adamjford/YNGcm/20/</a></p>\n\n<p>HTML:</p>\n\n<pre><code>&lt;a href=\"#\"&gt;Click me!&lt;/a&gt;\n&lt;div&gt;&lt;/div&gt;\n</code></pre>\n\n<p>JavaScript:</p>\n\n<pre><code>function getSomeDeferredStuff() {\n    var deferreds = [];\n\n    var i = 1;\n    for (i = 1; i &lt;= 10; i++) {\n        var count = i;\n\n        deferreds.push(\n        $.post('/echo/html/', {\n            html: \"&lt;p&gt;Task #\" + count + \" complete.\",\n            delay: count\n        }).success(function(data) {\n            $(\"div\").append(data);\n        }));\n    }\n\n    return deferreds;\n}\n\n$(function() {\n    $(\"a\").click(function() {\n        var deferreds = getSomeDeferredStuff();\n\n        $.when(deferreds).done(function() {\n            $(\"div\").append(\"&lt;p&gt;All done!&lt;/p&gt;\");\n        });\n    });\n});\n</code></pre>\n\n<p>I want \"All done!\" to appear after all of the deferred tasks have completed, but <code>$.when()</code> doesn't appear to know how to handle an array of Deferred objects. \"All done!\" is happening first because the array is not a Deferred object, so jQuery goes ahead and assumes it's just done.</p>\n\n<p>I know one could pass the objects into the function like <code>$.when(deferred1, deferred2, ..., deferredX)</code> but it's unknown how many Deferred objects there will be at execution in the actual problem I'm trying to solve.</p>\n",
            "last_activity_date": 1409547075,
            "question_id": 5627284,
            "score": 180,
            "tags": [
                "javascript",
                "jquery",
                "jquery-deferred",
                "jquery-1.5"
            ],
            "title": "Pass in an array of Deferreds to $.when()"
        },
        {
            "answer_count": 21,
            "answers": [
                {
                    "body": "<p>You don't need to use a regular expression for this.</p>\n\n<pre><code>var video_id = window.location.search.split('v=')[1];\nvar ampersandPosition = video_id.indexOf('&amp;');\nif(ampersandPosition != -1) {\n  video_id = video_id.substring(0, ampersandPosition);\n}\n</code></pre>\n",
                    "is_accepted": true,
                    "score": 67
                },
                {
                    "body": "<p>Well, the way to do it with simple parsing would be: get everything starting after the first <strong>=</strong> sign to the first <strong>&amp;</strong> sign.</p>\n\n<p>I think they had a similiar answer here: </p>\n\n<p><a href=\"http://stackoverflow.com/questions/2916544/parsing-a-vimeo-id-using-javascript\">http://stackoverflow.com/questions/2916544/parsing-a-vimeo-id-using-javascript</a></p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>Given that YouTube has a variety of URL styles, I think Regex is a better solution. Here is my Regex:</p>\n\n<pre><code>^.*(youtu.be\\/|v\\/|embed\\/|watch\\?|youtube.com\\/user\\/[^#]*#([^\\/]*?\\/)*)\\??v?=?([^#\\&amp;\\?]*).*\n</code></pre>\n\n<p>Group 3 has your YouTube ID</p>\n\n<p>Sample YouTube URLs (currently, including \"legacy embed URL style\") - the above Regex works on all of them:  </p>\n\n<pre><code>http://www.youtube.com/v/0zM3nApSvMg?fs=1&amp;amp;hl=en_US&amp;amp;rel=0\nhttp://www.youtube.com/embed/0zM3nApSvMg?rel=0\nhttp://www.youtube.com/watch?v=0zM3nApSvMg&amp;feature=feedrec_grec_index\nhttp://www.youtube.com/watch?v=0zM3nApSvMg\nhttp://youtu.be/0zM3nApSvMg\nhttp://www.youtube.com/watch?v=0zM3nApSvMg#t=0m10s\nhttp://www.youtube.com/user/IngridMichaelsonVEVO#p/a/u/1/QdK8U-VIH_o\n</code></pre>\n\n<p>Hat tip to Lasnv</p>\n",
                    "is_accepted": false,
                    "score": 14
                },
                {
                    "body": "<p>Since YouTube video ids is set to be <a href=\"http://code.google.com/apis/youtube/js_api_reference.html#GettingStarted\" rel=\"nofollow\">11 characters</a>, we can simply just <code>substring</code> after we split the url with <code>v=</code>.\nThen we are not dependent on the ampersand at the end.</p>\n\n<pre><code>var sampleUrl = \"http://www.youtube.com/watch?v=JcjoGn6FLwI&amp;asdasd\";\n\nvar video_id = sampleUrl.split(\"v=\")[1].substring(0, 11)\n</code></pre>\n\n<p>Nice and simple :) </p>\n",
                    "is_accepted": false,
                    "score": 3
                },
                {
                    "body": "<p>I have summed up all the suggestions and here is the universal and short answer to this question:</p>\n\n<pre><code>if(url.match('http://(www.)?youtube|youtu\\.be')){\n    youtube_id=url.split(/v\\/|v=|youtu\\.be\\//)[1].split(/[?&amp;]/)[0];\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 2
                },
                {
                    "body": "<p>I created a function that tests a users input for Youtube, Soundcloud or Vimeo embed ID's, to be able to create a more continous design with embedded media. This function detects and returns an object withtwo properties: \"type\" and \"id\". Type can be either \"youtube\", \"vimeo\" or \"soundcloud\" and the \"id\" property is the unique media id.</p>\n\n<p>On the site I use a textarea dump, where the user can paste in any type of link or embed code, including the iFrame-embedding of both vimeo and youtube.</p>\n\n<pre><code>function testUrlForMedia(pastedData) {\nvar success = false;\nvar media   = {};\nif (pastedData.match('http://(www.)?youtube|youtu\\.be')) {\n    if (pastedData.match('embed')) { youtube_id = pastedData.split(/embed\\//)[1].split('\"')[0]; }\n    else { youtube_id = pastedData.split(/v\\/|v=|youtu\\.be\\//)[1].split(/[?&amp;]/)[0]; }\n    media.type  = \"youtube\";\n    media.id    = youtube_id;\n    success = true;\n}\nelse if (pastedData.match('http://(player.)?vimeo\\.com')) {\n    vimeo_id = pastedData.split(/video\\/|http:\\/\\/vimeo\\.com\\//)[1].split(/[?&amp;]/)[0];\n    media.type  = \"vimeo\";\n    media.id    = vimeo_id;\n    success = true;\n}\nelse if (pastedData.match('http://player\\.soundcloud\\.com')) {\n    soundcloud_url = unescape(pastedData.split(/value=\"/)[1].split(/[\"]/)[0]);\n    soundcloud_id = soundcloud_url.split(/tracks\\//)[1].split(/[&amp;\"]/)[0];\n    media.type  = \"soundcloud\";\n    media.id    = soundcloud_id;\n    success = true;\n}\nif (success) { return media; }\nelse { alert(\"No valid media id detected\"); }\nreturn false;\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 12
                },
                {
                    "body": "<p>I made an enhancement to Regex provided by \"jeffreypriebe\" because he needed a kind of YouTube URL is the URL of the videos when they are looking through a channel.</p>\n\n<p>Well no but this is the function that I have armed.</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\nfunction youtube_parser(url){\n    var regExp = /^.*((youtu.be\\/)|(v\\/)|(\\/u\\/\\w\\/)|(embed\\/)|(watch\\?))\\??v?=?([^#\\&amp;\\?]*).*/;\n    var match = url.match(regExp);\n    if (match&amp;&amp;match[7].length==11){\n        return match[7];\n    }else{\n        alert(\"Url incorrecta\");\n    }\n}\n&lt;/script&gt;\n</code></pre>\n\n<p><strong>These are the types of URLs supported</strong></p>\n\n<pre><code>http://www.youtube.com/watch?v=0zM3nApSvMg&amp;feature=feedrec_grec_index\nhttp://www.youtube.com/user/IngridMichaelsonVEVO#p/a/u/1/QdK8U-VIH_o\nhttp://www.youtube.com/v/0zM3nApSvMg?fs=1&amp;amp;hl=en_US&amp;amp;rel=0\nhttp://www.youtube.com/watch?v=0zM3nApSvMg#t=0m10s\nhttp://www.youtube.com/embed/0zM3nApSvMg?rel=0\nhttp://www.youtube.com/watch?v=0zM3nApSvMg\nhttp://youtu.be/0zM3nApSvMg\n</code></pre>\n\n<p>y \nCan be found in <a href=\"http://lasnv.net/foro/839/Javascript_parsear_URL_de_YouTube\">http://lasnv.net/foro/839/Javascript_parsear_URL_de_YouTube</a></p>\n",
                    "is_accepted": false,
                    "score": 151
                },
                {
                    "body": "<p>I simplified a bit Lasnv answer.</p>\n\n<p>It also fixes the bug that WebDeb describes.</p>\n\n<p>Here it is:</p>\n\n<pre><code>var regExp = /^.*(youtu.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=|\\&amp;v=)([^#\\&amp;\\?]*).*/;\nvar match = url.match(regExp);\nif (match &amp;&amp; match[2].length == 11) {\n  return match[2];\n} else {\n  //error\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 118
                },
                {
                    "body": "<p>A slightly changed version from the one mantish posted:</p>\n\n<pre><code>var regExp = /^.*(youtu.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=|\\&amp;v=)([^#\\&amp;\\?]{11,11}).*/;\nvar match = url.match(regExp);\nif (match) if (match.length &gt;= 2) return match[2];\n// error\n</code></pre>\n\n<p>This assumes the code is always 11 characters.\nI'm using this in ActionScript, not sure if {11,11} is supported in Javascript. Also added support for &amp;v=.... (just in case)</p>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>Java Code: (Works for all the URLs: </p>\n\n<ol>\n<li><a href=\"http://www.youtube.com/watch?v=0zM3nApSvMg&amp;feature=feedrec_grec_index\">http://www.youtube.com/watch?v=0zM3nApSvMg&amp;feature=feedrec_grec_index</a></li>\n<li><a href=\"http://www.youtube.com/user/IngridMichaelsonVEVO#p/a/u/1/QdK8U-VIH_o\">http://www.youtube.com/user/IngridMichaelsonVEVO#p/a/u/1/QdK8U-VIH_o</a> </li>\n<li><a href=\"http://youtube.googleapis.com/v/0zM3nApSvMg?fs=1&amp;hl=en_US&amp;rel=0\">http://youtube.googleapis.com/v/0zM3nApSvMg?fs=1&amp;hl=en_US&amp;rel=0</a></li>\n<li><a href=\"http://www.youtube.com/watch?v=0zM3nApSvMg#t=0m10s\">http://www.youtube.com/watch?v=0zM3nApSvMg#t=0m10s</a></li>\n<li><a href=\"http://www.youtube.com/embed/0zM3nApSvMg?rel=0\">http://www.youtube.com/embed/0zM3nApSvMg?rel=0</a>\"</li>\n<li><a href=\"http://www.youtube.com/watch?v=0zM3nApSvMg\">http://www.youtube.com/watch?v=0zM3nApSvMg</a></li>\n<li><a href=\"http://youtu.be/0zM3nApSvMg\">http://youtu.be/0zM3nApSvMg</a></li>\n<li><a href=\"http://www.youtube.com/watch?v=0zM3nApSvMg/\">http://www.youtube.com/watch?v=0zM3nApSvMg/</a></li>\n<li><a href=\"http://www.youtube.com/watch?feature=player_detailpage&amp;v=8UVNT4wvIGY\">http://www.youtube.com/watch?feature=player_detailpage&amp;v=8UVNT4wvIGY</a></li>\n</ol>\n\n<p>)</p>\n\n<pre><code>    String url = \"http://www.youtube.com/watch?v=0zM3nApSvMg&amp;feature=feedrec_grec_index\";\n\n    String regExp = \"/.*(?:youtu.be\\\\/|v\\\\/|u/\\\\w/|embed\\\\/|watch\\\\?.*&amp;?v=)\";\n    Pattern compiledPattern = Pattern.compile(regExp);\n    Matcher matcher = compiledPattern.matcher(url);\n    if(matcher.find()){\n        int start = matcher.end();\n        System.out.println(\"ID : \" + url.substring(start, start+11));\n\n    }\n</code></pre>\n\n<p>For DailyMotion:</p>\n\n<pre><code>String url = \"http://www.dailymotion.com/video/x4xvnz_the-funny-crash-compilation_fun\";\n\n    String regExp = \"/video/([^_]+)/?\";\n    Pattern compiledPattern = Pattern.compile(regExp);\n    Matcher matcher = compiledPattern.matcher(url);\n    if(matcher.find()){\n        String match = matcher.group();\n        System.out.println(\"ID : \" + match.substring(match.lastIndexOf(\"/\")+1));\n\n    }\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 6
                },
                {
                    "body": "<pre><code>/^.*(youtu.be\\/|v\\/|e\\/|u\\/\\w+\\/|embed\\/|v=)([^#\\&amp;\\?]*).*/\n</code></pre>\n\n<p>Tested on:</p>\n\n<ul>\n<li>_http://www.youtube.com/v/0zM3nApSvMg?fs=1&amp;hl=en_US&amp;rel=0</li>\n<li>_http://www.youtube.com/embed/0zM3nApSvMg?rel=0</li>\n<li>_http://www.youtube.com/watch?v=0zM3nApSvMg&amp;feature=feedrec_grec_index</li>\n<li>_http://www.youtube.com/watch?v=0zM3nApSvMg</li>\n<li>_http://youtu.be/0zM3nApSvMg</li>\n<li>_http://www.youtube.com/watch?v=0zM3nApSvMg#t=0m10s</li>\n<li>_http://www.youtube.com/user/IngridMichaelsonVEVO#p/a/u/1/KdwsulMb8EQ</li>\n<li>_http://youtu.be/dQw4w9WgXcQ </li>\n<li>_http://www.youtube.com/embed/dQw4w9WgXcQ</li>\n<li>_http://www.youtube.com/v/dQw4w9WgXcQ</li>\n<li>_http://www.youtube.com/e/dQw4w9WgXcQ</li>\n<li>_http://www.youtube.com/watch?v=dQw4w9WgXcQ</li>\n<li>_http://www.youtube.com/?v=dQw4w9WgXcQ</li>\n<li>_http://www.youtube.com/watch?feature=player_embedded&amp;v=dQw4w9WgXcQ</li>\n<li>_http://www.youtube.com/?feature=player_embedded&amp;v=dQw4w9WgXcQ</li>\n<li>_http://www.youtube.com/user/IngridMichaelsonVEVO#p/u/11/KdwsulMb8EQ</li>\n<li>_http://www.youtube-nocookie.com/v/6L3ZvIMwZFM?version=3&amp;hl=en_US&amp;rel=0</li>\n</ul>\n\n<p>Inspired of <a href=\"http://stackoverflow.com/questions/3452546/javascript-regex-how-to-get-youtube-video-id-from-url/4811367#4811367\">Javascript REGEX: How to get youtube video id from URL?</a></p>\n",
                    "is_accepted": false,
                    "score": 12
                },
                {
                    "body": "<p>I liked Surya's answer.. Just a case where it won't work...</p>\n\n<pre><code>String regExp = \"/.*(?:youtu.be\\\\/|v\\\\/|u/\\\\w/|embed\\\\/|watch\\\\?.*&amp;?v=)\";\n</code></pre>\n\n<p>doesn't work for</p>\n\n<pre><code>youtu.be/i4fjHzCXg6c  and  www.youtu.be/i4fjHzCXg6c\n</code></pre>\n\n<p><strong>updated version:</strong></p>\n\n<pre><code>String regExp = \"/?.*(?:youtu.be\\\\/|v\\\\/|u/\\\\w/|embed\\\\/|watch\\\\?.*&amp;?v=)\";\n</code></pre>\n\n<p>works for all.</p>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>Try this one - </p>\n\n<pre><code>function getYouTubeIdFromURL($url) \n{\n  $pattern = '/(?:youtube.com/(?:[^/]+/.+/|(?:v|e(?:mbed)?)/|.*[?&amp;]v=)|youtu.be/)([^\"&amp;?/ ]{11})/i';\n  preg_match($pattern, $url, $matches);\n\n  return isset($matches[1]) ? $matches[1] : false;\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<pre><code>videoId = videoUrl.split('v=')[1].substring(0,11);\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>We know these characters \"?v=\" can never appear more than ones but 'v' can appear somehow in the Id Itself so we use \"?v=\" as delimiter. See it <a href=\"http://jsfiddle.net/dego247/EtbVJ/1/\" rel=\"nofollow\">Working Here</a> </p>\n\n<pre><code>//Get YouTube video Id From Its Url\n\n     $('button').bind('click',function(){\nvar \nurl='http://www.youtube.com/watch?v=u8nQa1cJyX8',\nvideoId = url.split('?v='),//Split data to two\nYouTubeVideoId=videoId[1];\nalert(YouTubeVideoId);return false;\n\n});\n\n&lt;button&gt;Click ToGet VideoId&lt;/button&gt;\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>Depending on what you're doing, you could use the api Google provides: loadVideoByUrl to load the video.</p>\n\n<p><a href=\"https://developers.google.com/youtube/iframe_api_reference#loadVideoByUrl\" rel=\"nofollow\">https://developers.google.com/youtube/iframe_api_reference#loadVideoByUrl</a></p>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>Simple regex if you have the full URL, keep it simple.</p>\n\n<pre><code>results = url.match(\"v=([a-zA-Z0-9]+)&amp;?\")\nvideoId = results[1] // watch you need.\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>Chris Nolet cleaner example of Lasnv answer is very good, but I recently found out that if you trying to find your youtube link in text and put some random text after the youtube url, regexp matches way more than needed. Improved Chris Nolet answer:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>/^.*(?:youtu.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=)([^#\\&amp;\\?]{11,11}).*/</code></pre>\r\n</div>\r\n</div>\r\n</p>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<pre><code>var video_url = document.getElementById('youtubediv').value;\n        if(video_url!=\"\"){\n        ytid(video_url);\n        document.getElementById(\"youtube\").setAttribute(\"src\",\"http://www.youtube.com/embed/\"+ytid(video_url));\n        }\n        function ytid(video_url){\n            var video_id = video_url.split('v=')[1];\n            var ampersandPosition = video_id.indexOf('&amp;');\n            if(ampersandPosition != -1) {\n                video_id = video_id.substring(0, ampersandPosition);\n            }\n            return video_id;\n        }\n</code></pre>\n\n<p>i hope it can help</p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>None of these worked on the kitchen sink as of 1/1/2015, notably URLs without protocal http/s and with youtube-nocookie domain. So here's a modified version that works on all these various Youtube versions:</p>\n\n<pre><code>// Just the regex. Output is in [1].\n/^.*(?:(?:youtu\\.be\\/|v\\/|vi\\/|u\\/\\w\\/|embed\\/)|(?:(?:watch)?\\?v(?:i)?=|\\&amp;v(?:i)?=))([^#\\&amp;\\?]*).*/\n\n// For testing.\nvar urls = [\n    '//www.youtube-nocookie.com/embed/up_lNV-yoK4?rel=0',\n    'http://www.youtube.com/user/Scobleizer#p/u/1/1p3vcRhsYGo',\n    'http://www.youtube.com/watch?v=cKZDdG9FTKY&amp;feature=channel',\n    'http://www.youtube.com/watch?v=yZ-K7nCVnBI&amp;playnext_from=TL&amp;videos=osPknwzXEas&amp;feature=sub',\n    'http://www.youtube.com/ytscreeningroom?v=NRHVzbJVx8I',\n    'http://www.youtube.com/user/SilkRoadTheatre#p/a/u/2/6dwqZw0j_jY',\n    'http://youtu.be/6dwqZw0j_jY',\n    'http://www.youtube.com/watch?v=6dwqZw0j_jY&amp;feature=youtu.be',\n    'http://youtu.be/afa-5HQHiAs',\n    'http://www.youtube.com/user/Scobleizer#p/u/1/1p3vcRhsYGo?rel=0',\n    'http://www.youtube.com/watch?v=cKZDdG9FTKY&amp;feature=channel',\n    'http://www.youtube.com/watch?v=yZ-K7nCVnBI&amp;playnext_from=TL&amp;videos=osPknwzXEas&amp;feature=sub',\n    'http://www.youtube.com/ytscreeningroom?v=NRHVzbJVx8I',\n    'http://www.youtube.com/embed/nas1rJpm7wY?rel=0',\n    'http://www.youtube.com/watch?v=peFZbP64dsU',\n    'http://youtube.com/v/dQw4w9WgXcQ?feature=youtube_gdata_player',\n    'http://youtube.com/vi/dQw4w9WgXcQ?feature=youtube_gdata_player',\n    'http://youtube.com/?v=dQw4w9WgXcQ&amp;feature=youtube_gdata_player',\n    'http://www.youtube.com/watch?v=dQw4w9WgXcQ&amp;feature=youtube_gdata_player',\n    'http://youtube.com/?vi=dQw4w9WgXcQ&amp;feature=youtube_gdata_player',\n    'http://youtube.com/watch?v=dQw4w9WgXcQ&amp;feature=youtube_gdata_player',\n    'http://youtube.com/watch?vi=dQw4w9WgXcQ&amp;feature=youtube_gdata_player',\n    'http://youtu.be/dQw4w9WgXcQ?feature=youtube_gdata_player'\n];\n\nvar rx = /^.*(?:(?:youtu\\.be\\/|v\\/|vi\\/|u\\/\\w\\/|embed\\/)|(?:(?:watch)?\\?v(?:i)?=|\\&amp;v(?:i)?=))([^#\\&amp;\\?]*).*/;\n\nfor (i = 0; i &lt; urls.length; ++i) {\n    var r = urls[i].match(rx);\n    console.log(r[1]);\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 4
                },
                {
                    "body": "<pre><code>function youtube_parser(url){\n    var match = url.match(/^.*((youtu.be\\/)|(v\\/)|(\\/u\\/\\w\\/)|(embed\\/)|(watch\\?))\\??v?=?([^#\\&amp;\\?]*).*/);\n    return (match&amp;&amp;match[7].length==11)?match[7]:false;\n}\n</code></pre>\n\n<p>Shortest and Efficient </p>\n",
                    "is_accepted": false,
                    "score": 0
                }
            ],
            "body": "<p>I want to get the <code>v=id</code> from youtube's <code>URL</code> with javascript(no jquery, pure javascript);</p>\n\n<p><strong>Example Youtube URL formats:</strong></p>\n\n<hr>\n\n<p><code>http://www.youtube.com/watch?v=u8nQa1cJyX8&amp;a=GxdCwVVULXctT2lYDEPllDR0LRTutYfW</code></p>\n\n<p><code>http://www.youtube.com/watch?v=u8nQa1cJyX8</code></p>\n\n<p><em>or any other youtube format what contains a <code>video id</code> in the <code>url</code></em></p>\n\n<p><strong>Result from these formats</strong></p>\n\n<hr>\n\n<p><code>u8nQa1cJyX8</code></p>\n",
            "last_activity_date": 1426143643,
            "question_id": 3452546,
            "score": 101,
            "tags": [
                "javascript",
                "regex",
                "url",
                "hyperlink",
                "youtube"
            ],
            "title": "Javascript REGEX: How to get youtube video id from URL?"
        },
        {
            "answer_count": 16,
            "answers": [
                {
                    "body": "<p>The best way to do it would be to submit the contents of the div to the server and open a new window where the server could put those contents into the new window.</p>\n\n<p>If that's not an option you can try to use a client-side language like javascript to hide everything on the page except that div and then print the page...</p>\n",
                    "is_accepted": false,
                    "score": -3
                },
                {
                    "body": "<p>Create a separate print stylesheet that hides all other elements except the content you want to print. Flag it using <code>'media=\"print\"</code> when you load it:</p>\n\n<p><code>&lt;link rel=\"stylesheet\" type=\"text/css\" media=\"print\" href=\"print.css\" /&gt;</code></p>\n\n<p>This allows you to have a completely different stylesheet loaded for printouts.</p>\n\n<p>If you want to force the browser's print dialog to appear for the page, you can do it like this on load using JQuery:</p>\n\n<p><code>$(function() { window.print();  });</code></p>\n\n<p>or triggered off of any other event you want such as a user clicking a button.</p>\n",
                    "is_accepted": false,
                    "score": 4
                },
                {
                    "body": "<ul>\n<li>Open a new window</li>\n<li>Open the document object of the new window and write into it a simple document containing nothing but the div you've got and necessary html header etc - you may also want to have the document pull in a stylesheet, depending on your content is</li>\n<li>Put a script in the new page to call window.print()</li>\n<li>Trigger the script</li>\n</ul>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<pre><code>&lt;html&gt;\n&lt;head&gt;\n&lt;script type=\"text/javascript\" src=\"http://jqueryjs.googlecode.com/files/jquery-1.3.1.min.js\" &gt; &lt;/script&gt; \n&lt;script type=\"text/javascript\"&gt;\n\n    function PrintElem(elem)\n    {\n        Popup($(elem).html());\n    }\n\n    function Popup(data) \n    {\n        var mywindow = window.open('', 'my div', 'height=400,width=600');\n        mywindow.document.write('&lt;html&gt;&lt;head&gt;&lt;title&gt;my div&lt;/title&gt;');\n        /*optional stylesheet*/ //mywindow.document.write('&lt;link rel=\"stylesheet\" href=\"main.css\" type=\"text/css\" /&gt;');\n        mywindow.document.write('&lt;/head&gt;&lt;body &gt;');\n        mywindow.document.write(data);\n        mywindow.document.write('&lt;/body&gt;&lt;/html&gt;');\n\n        mywindow.document.close(); // necessary for IE &gt;= 10\n        mywindow.focus(); // necessary for IE &gt;= 10\n\n        mywindow.print();\n        mywindow.close();\n\n        return true;\n    }\n\n&lt;/script&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n&lt;div id=\"mydiv\"&gt;\n    This will be printed. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque a quam at nibh adipiscing interdum. Nulla vitae accumsan ante. \n&lt;/div&gt;\n\n&lt;div&gt;\n    This will not be printed.\n&lt;/div&gt;\n\n&lt;div id=\"anotherdiv\"&gt;\n    Nor will this.\n&lt;/div&gt;\n\n&lt;input type=\"button\" value=\"Print Div\" onclick=\"PrintElem('#mydiv')\" /&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n",
                    "is_accepted": true,
                    "score": 148
                },
                {
                    "body": "<p>Although this has been said by @gmcalab,\nIf you are using jQuery, you can use my printElement plugin.</p>\n\n<p>There's a sample <a href=\"http://projects.erikzaadi.com/jQueryPlugins/jQuery.printElement/Sample/\">here</a>, and more information about the plugin <a href=\"http://projects.erikzaadi.com/jQueryPlugins/jQuery.printElement/\">here</a>.</p>\n\n<p>The usage is rather strait forward, just grab an element with a jQuery selector and print it:</p>\n\n<pre><code>$(\"myDiv\").printElement();\n</code></pre>\n\n<p>Hope it helps!</p>\n",
                    "is_accepted": false,
                    "score": 24
                },
                {
                    "body": "<p>I think there is a better solution. Make your div to print cover the entire document, but only when it's printed:</p>\n\n<pre><code>@media print {\n    .myDivToPrint {\n        background-color: white;\n        height: 100%;\n        width: 100%;\n        position: fixed;\n        top: 0;\n        left: 0;\n        margin: 0;\n        padding: 15px;\n        font-size: 14px;\n        line-height: 18px;\n    }\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 58
                },
                {
                    "body": "<p>From here <a href=\"http://forums.asp.net/t/1261525.aspx\">http://forums.asp.net/t/1261525.aspx</a></p>\n\n<pre><code>&lt;html&gt;\n&lt;head&gt;\n&lt;script language=\"javascript\"&gt;\nfunction printdiv(printpage)\n{\nvar headstr = \"&lt;html&gt;&lt;head&gt;&lt;title&gt;&lt;/title&gt;&lt;/head&gt;&lt;body&gt;\";\nvar footstr = \"&lt;/body&gt;\";\nvar newstr = document.all.item(printpage).innerHTML;\nvar oldstr = document.body.innerHTML;\ndocument.body.innerHTML = headstr+newstr+footstr;\nwindow.print();\ndocument.body.innerHTML = oldstr;\nreturn false;\n}\n&lt;/script&gt;\n&lt;title&gt;div print&lt;/title&gt;\n&lt;/head&gt;\n\n\n&lt;body&gt;\n//HTML Page\n//Other content you wouldn't like to print\n&lt;input name=\"b_print\" type=\"button\" class=\"ipt\"   onClick=\"printdiv('div_print');\" value=\" Print \"&gt;\n\n\n&lt;div id=\"div_print\"&gt;\n\n\n&lt;h1 style=\"Color:Red\"&gt;The Div content which you want to print&lt;/h1&gt;\n\n\n&lt;/div&gt;\n//Other content you wouldn't like to print\n//Other content you wouldn't like to print\n&lt;/body&gt;\n\n\n&lt;/html&gt;\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 8
                },
                {
                    "body": "<p>Here is my jquery print plugin</p>\n\n<pre><code>(function ($) {\n\n$.fn.printme = function () {\n    return this.each(function () {\n        var container = $(this);\n\n        var hidden_IFrame = $('&lt;iframe&gt;&lt;/iframe&gt;').attr({\n            width: '1px',\n            height: '1px',\n            display: 'none'\n        }).appendTo(container);\n\n        var myIframe = hidden_IFrame.get(0);\n\n        var script_tag = myIframe.contentWindow.document.createElement(\"script\");\n        script_tag.type = \"text/javascript\";\n        script = myIframe.contentWindow.document.createTextNode('function Print(){ window.print(); }');\n        script_tag.appendChild(script);\n\n        myIframe.contentWindow.document.body.innerHTML = container.html();\n        myIframe.contentWindow.document.body.appendChild(script_tag);\n\n        myIframe.contentWindow.Print();\n        hidden_IFrame.remove();\n\n    });\n};\n})(jQuery);\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<pre><code>function printdiv(printdivname)\n{\nvar headstr = \"&lt;html&gt;&lt;head&gt;&lt;title&gt;Booking Details&lt;/title&gt;&lt;/head&gt;&lt;body&gt;\";\nvar footstr = \"&lt;/body&gt;\";\nvar newstr = document.getElementById(printdivname).innerHTML;\nvar oldstr = document.body.innerHTML;\ndocument.body.innerHTML = headstr+newstr+footstr;\nwindow.print();\ndocument.body.innerHTML = oldstr;\nreturn false;\n}\n</code></pre>\n\n<p>This will print the div area you want and set the content back to as it was. <code>printdivname</code> is the div to be printed.</p>\n",
                    "is_accepted": false,
                    "score": 3
                },
                {
                    "body": "<p>I know this is an old question, but I solved this problem w jQuery. </p>\n\n<pre><code>function printContents(id)\n{\n    var contents = $(\"#\"+id).html();\n\n    if ($(\"#printDiv\").length == 0)\n    {\n    var printDiv = null;\n    printDiv = document.createElement('div');\n    printDiv.setAttribute('id','printDiv');\n    printDiv.setAttribute('class','printable');\n    $(printDiv).appendTo('body');\n    }\n\n    $(\"#printDiv\").html(contents);\n\n    window.print();\n\n    $(\"#printDiv\").remove();\n\n\n}\n</code></pre>\n\n<p>CSS</p>\n\n<pre><code>  @media print {\n    .non-printable, .fancybox-outer { display: none; }\n    .printable, #printDiv { \n        display: block; \n        font-size: 26pt;\n    }\n  }\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>In Opera, try:</p>\n\n<pre><code>    print_win.document.write('&lt;/body&gt;&lt;/html&gt;');\n    print_win.document.close(); // This bit is important\n    print_win.print();\n    print_win.close();\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>I authored a plugin to address this scenario. I was unhappy with the plugins out there, and set out to make something more extensive/configurable.</p>\n\n<p><a href=\"https://github.com/jasonday/printThis\" rel=\"nofollow\">https://github.com/jasonday/printThis</a></p>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>Same as best answer, just in case you need to print image as i did:</p>\n\n<p>In case you want to print image:</p>\n\n<pre><code>function printElem(elem)\n    {\n        Popup(jQuery(elem).attr('src'));\n    }\n\n    function Popup(data) \n    {\n        var mywindow = window.open('', 'my div', 'height=400,width=600');\n        mywindow.document.write('&lt;html&gt;&lt;head&gt;&lt;title&gt;my div&lt;/title&gt;');\n        mywindow.document.write('&lt;/head&gt;&lt;body &gt;');\n        mywindow.document.write('&lt;img src=\"'+data+'\" /&gt;');\n        mywindow.document.write('&lt;/body&gt;&lt;/html&gt;');\n\n        mywindow.print();\n        mywindow.close();\n\n        return true;\n    }\n</code></pre>\n",
                    "is_accepted": false,
                    "score": -2
                },
                {
                    "body": "<p>Although @BC answer was the best to print a single page. </p>\n\n<p>But To print multiple pages of A4 size at same time with ctrl+P following solution may help.   </p>\n\n<pre><code>@media print{\nhtml *{\n    height:0px!important;\n    width:0px !important;\n    margin: 0px !important;\n    padding: 0px !important;\n    min-height: 0px !important;\n    line-height: 0px !important;\n    overflow: visible !important;\n    visibility: hidden ;\n\n\n}\n\n\n/*assing myPagesClass to every div you want to print on single separate A4 page*/\n\n body .myPagesClass {\n    z-index: 100 !important;\n    visibility: visible !important;\n    position: relative !important;\n    display: block !important;\n    background-color: lightgray !important;\n    height: 297mm !important;\n    width: 211mm !important;\n    position: relative !important;\n\n    padding: 0px;\n    top: 0 !important;\n    left: 0 !important;\n    margin: 0 !important;\n    orphans: 0!important;\n    widows: 0!important;\n    overflow: visible !important;\n    page-break-after: always;\n\n}\n@page{\n    size: A4;\n    margin: 0mm ;\n    orphans: 0!important;\n    widows: 0!important;\n}}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>Here is an IFrame solution that works for IE and Chrome:</p>\n\n<pre><code>function printHTML(htmlString) {\n    var newIframe = document.createElement('iframe');\n    newIframe.width = '1px';\n    newIframe.height = '1px';\n    newIframe.src = 'about:blank';\n\n    // for IE wait for the IFrame to load so we can access contentWindow.document.body\n    newIframe.onload = function() {\n        var script_tag = newIframe.contentWindow.document.createElement(\"script\");\n        script_tag.type = \"text/javascript\";\n        var script = newIframe.contentWindow.document.createTextNode('function Print(){ window.focus(); window.print(); }');\n        script_tag.appendChild(script);\n\n        newIframe.contentWindow.document.body.innerHTML = htmlString;\n        newIframe.contentWindow.document.body.appendChild(script_tag);\n\n        // for chrome, a timeout for loading large amounts of content\n        setTimeout(function() {\n            newIframe.contentWindow.Print();\n            newIframe.contentWindow.document.body.removeChild(script_tag);\n            newIframe.parentElement.removeChild(newIframe);\n        }, 200);\n    };\n    document.body.appendChild(newIframe);\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>Using Jquery, simply use this function:</p>\n\n<pre><code>&lt;script&gt;\nfunction printContent(el){\nvar restorepage = $('body').html();\nvar printcontent = $('#' + el).clone();\n$('body').empty().html(printcontent);\nwindow.print();\n$('body').html(restorepage);\n}\n&lt;/script&gt;\n</code></pre>\n\n<p>Your print button will look like this:</p>\n\n<pre><code>&lt;button id=\"print\" onclick=\"printContent('id name of your div');\" &gt;Print&lt;/button&gt;\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                }
            ],
            "body": "<p>Whats the best way to print the contents of a DIV?</p>\n",
            "last_activity_date": 1423636434,
            "question_id": 2255291,
            "score": 92,
            "tags": [
                "javascript",
                "jquery",
                "html",
                "printing"
            ],
            "title": "Print the contents of a DIV"
        },
        {
            "answer_count": 8,
            "answers": [
                {
                    "body": "<p>Sure, just use the <code>arguments</code> object.</p>\n\n<pre><code>function foo() {\n  for (var i = 0; i &lt; arguments.length; i++) {\n    alert(arguments[i]);\n  }\n}\n</code></pre>\n",
                    "is_accepted": true,
                    "score": 315
                },
                {
                    "body": "<p>Use the <code>arguments</code> object when inside the function to have access to all arguments passed in.</p>\n",
                    "is_accepted": false,
                    "score": 4
                },
                {
                    "body": "<p>Yes, just like this : </p>\n\n<pre><code>function load()\n{\n  var var0 = arguments[0];\n  var var1 = arguments[1];\n}\n\nload(1,2);\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 11
                },
                {
                    "body": "<p>Another option is to pass in your arguments in a context object.</p>\n\n<pre><code>function load(context)\n{\n    // do whatever with context.name, context.address, etc\n}\n</code></pre>\n\n<p>and use it like this</p>\n\n<pre><code>load({name:'Ken',address:'secret',unused:true})\n</code></pre>\n\n<p>This has the advantage that you can add as many named arguments as you want, and the function can use them (or not) as it sees fit.</p>\n",
                    "is_accepted": false,
                    "score": 56
                },
                {
                    "body": "<p>I agree with Ken's answer as being the most dynamic and I like to take it a step further.  If it's a function that you call multiple times with different arguments - I use Ken's design but then add default values:</p>\n\n<pre><code>function load(context) {\n\n    var defaults = {\n        parameter1: defaultValue1,\n        parameter2: defaultValue2,\n        ...\n    };\n\n    var context = extend(defaults, context);\n\n    // do stuff\n}\n</code></pre>\n\n<p>This way, if you have many parameters but don't necessarily need to set them with each call to the function, you can simply specify the non-defaults.  For the extend method, you can use jQuery's extend method (<code>$.extend()</code>), craft your own or use the following:</p>\n\n<pre><code>function extend() {\n    for (var i = 1; i &lt; arguments.length; i++)\n        for (var key in arguments[i])\n            if (arguments[i].hasOwnProperty(key))\n                arguments[0][key] = arguments[i][key];\n    return arguments[0];\n}\n</code></pre>\n\n<p>This will merge the context object with the defaults and fill in any undefined values in your object with the defaults.  </p>\n",
                    "is_accepted": false,
                    "score": 31
                },
                {
                    "body": "<p>Although I generally agree that the named arguments approach is useful and flexible (unless you care about the order, in which case arguments is easiest), I do have concerns about the cost of the mbeasley approach (using defaults and extends). This is an extreme amount of cost to take for pulling default values. First, the defaults are defined inside the function, so they are repopulated on every call. Second, you can easily read out the named values and set the defaults at the same time using ||. There is no need to create and merge yet another new object to get this information.</p>\n\n<pre><code>function load(context) {\n   var parameter1 = context.parameter1 || defaultValue1,\n       parameter2 = context.parameter2 || defaultValue2;\n\n   // do stuff\n}\n</code></pre>\n\n<p>This is roughly the same amount of code (maybe slightly more), but should be a fraction of the runtime cost.</p>\n",
                    "is_accepted": false,
                    "score": 7
                },
                {
                    "body": "<p>Be aware that passing an Object with named properties as Ken suggested adds the cost of allocating and releasing the temporary object to every call. Passing normal arguments by value or reference will generally be the most efficient. For many applications though the performance is not critical but for some it can be.</p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<pre><code>var funX= function (a, b, d, c, f, e, h) {\nreturn funX.length;\n};\n</code></pre>\n\n<p>This code will return no of parameters passed to a function</p>\n",
                    "is_accepted": false,
                    "score": 0
                }
            ],
            "body": "<p>Is there a way to allow \"unlimited\" vars for a function in JavaScript?</p>\n\n<p>Example:</p>\n\n<pre><code>load(var1, var2, var3, var4, var5, etc...)\nload(var1)\n</code></pre>\n",
            "last_activity_date": 1418634642,
            "question_id": 2141520,
            "score": 184,
            "tags": [
                "javascript",
                "function",
                "arguments",
                "argument-passing"
            ],
            "title": "JavaScript variable number of arguments to function"
        },
        {
            "answer_count": 2,
            "answers": [
                {
                    "body": "<p>Below the covers, javascript has an event queue.  Each time a javascript thread of execution finishes, it checks to see if there is another event in the queue to process.  If there is, it pulls it off the queue and triggers that event (like a mouse click, for example).</p>\n\n<p>The native code networking that lies under the ajax call will know when the ajax response is done and an event will get added to the javascript event queue.  How the native code knows when the ajax call is done depends upon the implementation.  It may be implemented with threads or it may also be event driven itself (it doesn't really matter).  The point of the implementation is that when the ajax response is done, some native code will know it's done and put an event into the JS queue.  </p>\n\n<p>If no Javascript is running at the time, the event will be immediately triggered which will run the ajax response handler.  If something is running at the time, then the event will get processed when the current javascript thread of execution finishes.  There doesn't need to be any polling by the javascript engine.</p>\n\n<p>Because all outside events go through the event queue and no event is ever triggered while javascript is actually running something else, it stays single threaded.</p>\n\n<p>Here are some articles on the details:</p>\n\n<ul>\n<li><a href=\"http://ejohn.org/blog/how-javascript-timers-work/\" rel=\"nofollow\">How Javascript Timers Work - written by John Resig</a> </li>\n<li><a href=\"http://javascript.info/tutorial/events-and-timing-depth\" rel=\"nofollow\">Events and Timing in Depth</a> </li>\n<li><a href=\"http://www.w3.org/TR/html5/webappapis.html#event-loops\" rel=\"nofollow\">W3 spec: HTML5 event loops</a></li>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/EventLoop\" rel=\"nofollow\">MDN article on Event Loop</a></li>\n<li><a href=\"http://thomashunter.name/blog/the-javascript-event-loop-presentation/\" rel=\"nofollow\">Presentation on JS event queue</a></li>\n<li><a href=\"http://blog.carbonfive.com/2013/10/27/the-javascript-event-loop-explained/\" rel=\"nofollow\">The JavaScript Event Loop: Explained</a></li>\n<li><a href=\"http://tech.pro/blog/1402/five-patterns-to-help-you-tame-asynchronous-javascript\" rel=\"nofollow\">Five Patterns to Help Tame Asynchronous Javascript</a></li>\n<li><a href=\"https://thomashunter.name/blog/the-javascript-event-loop-presentation/\" rel=\"nofollow\">Javascript Event Loop Presentation</a></li>\n</ul>\n",
                    "is_accepted": true,
                    "score": 113
                },
                {
                    "body": "<p>You can find <a href=\"http://dev.opera.com/articles/view/timing-and-synchronization-in-javascript/\"><strong>here</strong></a> a very complete documentation on events handling in javascript.<br>\nIt is written by a guy working on the javascript implementation in the Opera Browser.  </p>\n\n<p>More precisely, look at the titles: \"Event Flow\", \"Event Queuing\" and \"Non-user Events\": you'll learn that:</p>\n\n<ol>\n<li>Javascript runs in a single thread for each browser tab or window.</li>\n<li>Events are queued and executed sequentially.</li>\n<li>XMLHttpRequest are run by the implementation and callbacks are run using the event queue.</li>\n</ol>\n",
                    "is_accepted": false,
                    "score": 11
                }
            ],
            "body": "<p>Since JavaScript runs in a single thread, after an AJAX request is made, what actually happens in the background ? Is JavaScript somehow polling for an AJAX response ? And how does it do that if it's single threaded ? Does it switch back and forth ? I know that the <code>readyState</code>  changes, but i would like to get a deeper insight into this, can anyone shed some light ?    </p>\n",
            "last_activity_date": 1423128527,
            "question_id": 7575589,
            "score": 75,
            "tags": [
                "javascript",
                "xmlhttp"
            ],
            "title": "How does JavaScript handle AJAX responses in the background?"
        },
        {
            "answer_count": 9,
            "answers": [
                {
                    "body": "<p>It's not jQuery but, in Firefox, Opera and Safari you can use <code>window.getComputedStyle(element)</code> to get the computed styles for an element and in IE&lt;=8 you can use <code>element.currentStyle</code>. The returned objects are different in each case, and I'm not sure how well either work with elements and styles created using Javascript, but perhaps they'll be  useful.</p>\n\n<p>In Safari you can do the following which is kind of neat:</p>\n\n<pre><code>document.getElementById('b').style.cssText = window.getComputedStyle(document.getElementById('a')).cssText;\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 16
                },
                {
                    "body": "<p>Now that I've had some time to look into the problem and understand better how jQuery's internal css method works, what I've posted seems to work well enough for the use case that I mentioned. </p>\n\n<p>It's been proposed that you can solve this problem with CSS, but I think this is a more generalized solution that will work in any case without having to add an remove classes or update your css.</p>\n\n<p>I hope others find it useful. If you find a bug, please let me know.</p>\n",
                    "is_accepted": false,
                    "score": 4
                },
                {
                    "body": "<p>I dont know if you're happy with the answers you got so far but I wasn't and mine may not please you either, but it may help someone else. </p>\n\n<p>After pondering upon how to \"clone\" or \"copy\" elements' styles from one to another I have come to realize that it was not very optimal of an approach to loop through n and apply to n2, yet we're sorta stuck with this.</p>\n\n<p>When you find yourself facing these issues, you rarely ever need to copy ALL the styles from one element to another... you usually have a specific reason to want \"some\" styles to apply.</p>\n\n<p>Here's what I reverted to:</p>\n\n<pre><code>$.fn.copyCSS = function( style, toNode ){\n  var self = $(this);\n  if( !$.isArray( style ) ) style=style.split(' ');\n  $.each( style, function( i, name ){ toNode.css( name, self.css(name) ) } );\n  return self;\n}\n</code></pre>\n\n<p>You can pass it a space-separated list of css attributes as the first argument and the node you want to clone them to as the second argument, like so:</p>\n\n<pre><code>$('div#copyFrom').copyCSS('width height color',$('div#copyTo'));\n</code></pre>\n\n<p>Whatever else seems to \"misalign\" after that, I'll try to fix with stylesheets as to not clutter my Js with too many misfired ideas.</p>\n",
                    "is_accepted": false,
                    "score": 5
                },
                {
                    "body": "<p>I like your answer Quickredfox. I needed to copy some CSS but not immediately so I modified it to make the \"toNode\" optional.</p>\n\n<pre><code>$.fn.copyCSS = function( style, toNode ){\n  var self = $(this),\n   styleObj = {},\n   has_toNode = typeof toNode != 'undefined' ? true: false;\n if( !$.isArray( style ) ) {\n  style=style.split(' ');\n }\n  $.each( style, function( i, name ){ \n  if(has_toNode) {\n   toNode.css( name, self.css(name) );\n  } else {\n   styleObj[name] = self.css(name);\n  }  \n });\n  return ( has_toNode ? self : styleObj );\n}\n</code></pre>\n\n<p>If you call it like this:</p>\n\n<pre><code>$('div#copyFrom').copyCSS('width height color');\n</code></pre>\n\n<p>Then it will return an object with your CSS declarations for you to use later:</p>\n\n<pre><code>{\n 'width': '140px',\n 'height': '860px',\n 'color': 'rgb(238, 238, 238)'\n}\n</code></pre>\n\n<p>Thanks for the starting point.</p>\n",
                    "is_accepted": false,
                    "score": 2
                },
                {
                    "body": "<pre><code>$.fn.cssCopy=function(element,styles){\nvar self=$(this);\nif(element instanceof $){\n    if(styles instanceof Array){\n        $.each(styles,function(val){\n            self.css(val,element.css(val));\n        });\n    }else if(typeof styles===\u201dstring\u201d){\n        self.css(styles,element.css(styles));\n    }\n}\nreturn this;\n};\n</code></pre>\n\n<p>Use example</p>\n\n<pre><code>$(\"#element\").cssCopy($(\"#element2\"),['width','height','border'])\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>Two years late, but I have the solution you're looking for. Here's a plugin I wrote (by wrapping another guy's function in plugin format) which does exactly what you want, but gets <strong>all</strong> possible styles in all browsers, even IE.</p>\n\n<p><code>jquery.getStyleObject.js:</code></p>\n\n<pre><code>/*\n * getStyleObject Plugin for jQuery JavaScript Library\n * From: http://upshots.org/?p=112\n *\n * Copyright: Unknown, see source link\n * Plugin version by Dakota Schneider (http://hackthetruth.org)\n */\n\n(function($){\n    $.fn.getStyleObject = function(){\n        var dom = this.get(0);\n        var style;\n        var returns = {};\n        if(window.getComputedStyle){\n            var camelize = function(a,b){\n                return b.toUpperCase();\n            }\n            style = window.getComputedStyle(dom, null);\n            for(var i=0;i&lt;style.length;i++){\n                var prop = style[i];\n                var camel = prop.replace(/\\-([a-z])/g, camelize);\n                var val = style.getPropertyValue(prop);\n                returns[camel] = val;\n            }\n            return returns;\n        }\n        if(dom.currentStyle){\n            style = dom.currentStyle;\n            for(var prop in style){\n                returns[prop] = style[prop];\n            }\n            return returns;\n        }\n        return this.css();\n    }\n})(jQuery);\n</code></pre>\n\n<p>Basic usage is pretty simple:</p>\n\n<pre><code>var style = $(\"#original\").getStyleObject(); // copy all computed CSS properties\n$(\"#original\").clone() // clone the object\n    .parent() // select it's parent\n    .appendTo() // append the cloned object to the parent, after the original\n                // (though this could really be anywhere and ought to be somewhere\n                // else to show that the styles aren't just inherited again\n    .css(style); // apply cloned styles\n</code></pre>\n\n<p>Hope that helps.</p>\n",
                    "is_accepted": true,
                    "score": 50
                },
                {
                    "body": "<p>Great function provided by the OP. I slightly modified it so that you can choose which values you want returned.</p>\n\n<pre><code>(function ($) {\n    var jQuery_css = $.fn.css,\n        gAttr = ['font-family','font-size','font-weight','font-style','color','text-transform','text-decoration','letter-spacing','word-spacing','line-height','text-align','vertical-align','direction','background-color','background-image','background-repeat','background-position','background-attachment','opacity','width','height','top','right','bottom','left','margin-top','margin-right','margin-bottom','margin-left','padding-top','padding-right','padding-bottom','padding-left','border-top-width','border-right-width','border-bottom-width','border-left-width','border-top-color','border-right-color','border-bottom-color','border-left-color','border-top-style','border-right-style','border-bottom-style','border-left-style','position','display','visibility','z-index','overflow-x','overflow-y','white-space','clip','float','clear','cursor','list-style-image','list-style-position','list-style-type','marker-offset'];\n    $.fn.css = function() {\n        if (arguments.length &amp;&amp; !$.isArray(arguments[0])) return jQuery_css.apply(this, arguments);\n        var attr = arguments[0] || gAttr,\n            len = attr.length,\n            obj = {};\n        for (var i = 0; i &lt; len; i++) obj[attr[i]] = jQuery_css.call(this, attr[i]);\n        return obj;\n    }\n})(jQuery);\n</code></pre>\n\n<p>Choose which values you want by specifying your own array: <code>$().css(['width','height']);</code></p>\n",
                    "is_accepted": false,
                    "score": 2
                },
                {
                    "body": "<h1>Multipurpose <code>.css()</code></h1>\n\n<h3>Usage</h3>\n\n<pre><code>$('body').css();        // -&gt; { ... } - returns all styles\n$('body').css('*');     // -&gt; { ... } - the same (more verbose)\n$('body').css('color width height')  // -&gt; { color: .., width: .., height: .. } - returns requested styles\n$('div').css('width height', '100%')  // set width and color to 100%, returns self\n$('body').css('color')  // -&gt; '#000' - native behaviour\n</code></pre>\n\n<h3>Code</h3>\n\n<pre><code>(function($) {\n\n    // Monkey-patching original .css() method\n    var nativeCss = $.fn.css;\n\n    var camelCase = $.camelCase || function(str) {\n        return str.replace(/\\-([a-z])/g, function($0, $1) { return $1.toUpperCase(); });\n    };\n\n    $.fn.css = function(name, value) {\n        if (name == null || name === '*') {\n            var elem = this.get(0), css, returns = {};\n            if (window.getComputedStyle) {\n                css = window.getComputedStyle(elem, null);\n                for (var i = 0, l = css.length; i &lt; l; i++) {\n                    returns[camelCase(css[i])] = css.getPropertyValue(css[i]);\n                }\n                return returns;\n            } else if (elem.currentStyle) {\n                css = elem.currentStyle;\n                for (var prop in css) {\n                    returns[prop] = css[prop];\n                }\n            }\n            return returns;\n        } else if (~name.indexOf(' ')) {\n            var names = name.split(/ +/);\n            var css = {};\n            for (var i = 0, l = names.length; i &lt; l; i++) {\n                css[names[i]] = nativeCss.call(this, names[i], value);\n            }\n            return arguments.length &gt; 1 ? this : css;\n        } else {\n            return nativeCss.apply(this, arguments);\n        }\n    }\n\n})(jQuery);\n</code></pre>\n\n<p>Main idea is taken from <a href=\"http://stackoverflow.com/a/6416477/489553\">Dakota's</a> &amp; <a href=\"http://stackoverflow.com/a/3882043/241211\">HexInteractive's</a> answers.</p>\n",
                    "is_accepted": false,
                    "score": 3
                },
                {
                    "body": "<p>I just wanted to add an extension to the code submitted by Dakota.</p>\n\n<p>If you want to clone an element with all of the styles applied to it and all the children elements then you can use the following code:</p>\n\n<pre><code>/*\n * getStyleObject Plugin for jQuery JavaScript Library\n * From: http://upshots.org/?p=112\n *\n * Copyright: Unknown, see source link\n * Plugin version by Dakota Schneider (http://hackthetruth.org)\n */\n\n(function($){\n    $.fn.getStyleObject = function(){\n        var dom = this.get(0);\n        var style;\n        var returns = {};\n        if(window.getComputedStyle){\n            var camelize = function(a,b){\n                return b.toUpperCase();\n            }\n            style = window.getComputedStyle(dom, null);\n            for(var i=0;i&lt;style.length;i++){\n                var prop = style[i];\n                var camel = prop.replace(/\\-([a-z])/g, camelize);\n                var val = style.getPropertyValue(prop);\n                returns[camel] = val;\n            }\n            return returns;\n        }\n        if(dom.currentStyle){\n            style = dom.currentStyle;\n            for(var prop in style){\n                returns[prop] = style[prop];\n            }\n            return returns;\n        }\n        return this.css();\n    }\n\n\n    $.fn.cloneWithCSS = function() {\n        styles = {};\n\n        $this = $(this);\n        $clone = $this.clone();\n        $clone.css( $this.getStyleObject() );\n\n        children = $this.children().toArray();\n        var i = 0;\n        while( children.length ) {\n            $child = $( children.pop() );\n            styles[i++] = $child.getStyleObject();\n            $child.children().each(function(i, el) {\n                children.push(el);\n            })\n        }\n\n        cloneChildren = $clone.children().toArray()\n        var i = 0;\n        while( cloneChildren.length ) {\n            $child = $( cloneChildren.pop() );\n            $child.css( styles[i++] );\n            $child.children().each(function(i, el) {\n                cloneChildren.push(el);\n            })\n        }\n\n        return $clone\n    }\n\n})(jQuery);\n</code></pre>\n\n<p>Then you can just do: <code>$clone = $(\"#target\").cloneWithCSS()</code></p>\n",
                    "is_accepted": false,
                    "score": 0
                }
            ],
            "body": "<p>I'm looking for a way using jQuery to return an object of computed styles for the 1st matched element. I could then pass this object to another call of jQuery's css method.</p>\n\n<p>For example, with <a href=\"http://docs.jquery.com/CSS/width\">width</a>, I can do the following to make the 2 divs have the same width:</p>\n\n<pre><code>$('#div2').width($('#div1').width());\n</code></pre>\n\n<p>It would be nice if I could <strong>make a text input look like an existing span</strong>:</p>\n\n<pre><code>$('#input1').css($('#span1').css());\n</code></pre>\n\n<p>where .css() with no argument returns an object that can be passed to <a href=\"http://docs.jquery.com/CSS/css#properties\">.css(obj)</a>.</p>\n\n<p>(I can't find a jQuery plugin for this, but it seems like it should exist. If it doesn't exist, I'll turn mine below into a plugin and post it with all the properties that I use.) </p>\n\n<p>Basically, I want to pseudo clone certain elements <strong>but use a different tag</strong>. For example, I have an li element that I want to hide and put an input element over it that looks the same. When the user types, <strong>it looks like they are editing the element inline</strong>.</p>\n\n<p><strong>I'm also open to other approaches for this pseudo cloning problem for editing.</strong> Any suggestions?</p>\n\n<p>Here's what I currently have. The only problem is just getting all the possible styles. This could be a ridiculously long list.</p>\n\n<p><hr /></p>\n\n<pre><code>jQuery.fn.css2 = jQuery.fn.css;\njQuery.fn.css = function() {\n    if (arguments.length) return jQuery.fn.css2.apply(this, arguments);\n    var attr = ['font-family','font-size','font-weight','font-style','color',\n\t'text-transform','text-decoration','letter-spacing','word-spacing',\n\t'line-height','text-align','vertical-align','direction','background-color',\n\t'background-image','background-repeat','background-position',\n\t'background-attachment','opacity','width','height','top','right','bottom',\n\t'left','margin-top','margin-right','margin-bottom','margin-left',\n\t'padding-top','padding-right','padding-bottom','padding-left',\n\t'border-top-width','border-right-width','border-bottom-width',\n\t'border-left-width','border-top-color','border-right-color',\n\t'border-bottom-color','border-left-color','border-top-style',\n\t'border-right-style','border-bottom-style','border-left-style','position',\n\t'display','visibility','z-index','overflow-x','overflow-y','white-space',\n\t'clip','float','clear','cursor','list-style-image','list-style-position',\n\t'list-style-type','marker-offset'];\n    var len = attr.length, obj = {};\n    for (var i = 0; i &lt; len; i++) \n        obj[attr[i]] = jQuery.fn.css2.call(this, attr[i]);\n    return obj;\n}\n</code></pre>\n\n<p>Edit: I've now been using the code above for awhile. It works well and behaves exactly like the original css method with one exception: if 0 args are passed, it returns the computed style object. </p>\n\n<p>As you can see, it immediately calls the original css method if that's the case that applies. Otherwise, it gets the computed styles of all the listed properties (gathered from Firebug's computed style list). Although it's getting a long list of values, it's quite fast. Hope it's useful to others.</p>\n",
            "last_activity_date": 1403301334,
            "question_id": 1004475,
            "score": 62,
            "tags": [
                "javascript",
                "jquery",
                "css",
                "web-applications"
            ],
            "title": "jQuery CSS plugin that returns computed style of element to pseudo clone that element?"
        },
        {
            "answer_count": 4,
            "answers": [
                {
                    "body": "<p><a href=\"http://www.openjs.com/articles/ajax_xmlhttp_using_post.php\">This code</a> demonstrates on how to do this.</p>\n\n<hr>\n\n<p>Here is just the listing from that page, in case the above link goes down again:</p>\n\n<pre><code>var http = new XMLHttpRequest();\nvar url = \"get_data.php\";\nvar params = \"lorem=ipsum&amp;name=binny\";\nhttp.open(\"POST\", url, true);\n\n//Send the proper header information along with the request\nhttp.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\nhttp.setRequestHeader(\"Content-length\", params.length);\nhttp.setRequestHeader(\"Connection\", \"close\");\n\nhttp.onreadystatechange = function() {//Call a function when the state changes.\n    if(http.readyState == 4 &amp;&amp; http.status == 200) {\n        alert(http.responseText);\n    }\n}\nhttp.send(params);\n</code></pre>\n",
                    "is_accepted": true,
                    "score": 97
                },
                {
                    "body": "<pre><code>var xhr = new XMLHttpRequest();\nxhr.open('POST', 'somewhere', true);\nxhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');\nxhr.onload = function () {\n    // do something to response\n    console.log(this.responseText);\n};\nxhr.send('user=person&amp;pwd=password&amp;organization=place&amp;requiredkey=key');\n</code></pre>\n\n<p>Or if you can count on browser support you could use <a href=\"https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/FormData/Using_FormData_Objects\"><strong>FormData</strong></a>:</p>\n\n<pre><code>var data = new FormData();\ndata.append('user', 'person');\ndata.append('pwd', 'password');\ndata.append('organization', 'place');\ndata.append('requiredkey', 'key');\n\nvar xhr = new XMLHttpRequest();\nxhr.open('POST', 'somewhere', true);\nxhr.onload = function () {\n    // do something to response\n    console.log(this.responseText);\n};\nxhr.send(data);\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 73
                },
                {
                    "body": "<p>this isn't my code, but it helped me a lot\n<a href=\"https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest\" rel=\"nofollow\">https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest</a></p>\n",
                    "is_accepted": false,
                    "score": 2
                },
                {
                    "body": "<p><sup>The <a href=\"http://stackoverflow.com/a/15312976/938111\">uKolka's answer</a> is fine. Here, I provide another example to complete his answer.</sup></p>\n\n<p>I have implemented the below example based on the <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest\" rel=\"nofollow\">MDN link</a> provided in <a href=\"http://stackoverflow.com/a/16592946/938111\">Topas's answer</a>.</p>\n\n<p><strong>Minimal use of <code>FormData</code> to submit an AJAX request</strong></p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;meta http-equiv=\"X-UA-Compatible\" content=\"IE=Edge, chrome=1\"/&gt;\n&lt;script&gt;\n\"use strict\";\nfunction submitForm(oFormElement)\n{\n  var xhr = new XMLHttpRequest();\n  xhr.onload = function(){ alert (xhr.responseText); }\n  xhr.open (oFormElement.method, oFormElement.action, true);\n  xhr.send (new FormData (oFormElement));\n  return false;\n}\n&lt;/script&gt;\n&lt;/head&gt;\n\n&lt;body&gt;\n&lt;form method=\"post\" action=\"somewhere\" onsubmit=\"return submitForm(this);\"&gt;\n    &lt;input type=\"hidden\" value=\"person\"   name=\"user\" /&gt;\n    &lt;input type=\"hidden\" value=\"password\" name=\"pwd\" /&gt;\n    &lt;input type=\"hidden\" value=\"place\"    name=\"organization\" /&gt;\n    &lt;input type=\"hidden\" value=\"key\"      name=\"requiredkey\" /&gt;\n    &lt;input type=\"submit\" value=\"post request\"/&gt;\n&lt;/form&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>This does not fully answer the OP question because it requires the user to click in order to submit the request. But this example may be useful to people searching the web for this kind of solution.</p>\n\n<p>Caution, this example has been simplified and does not support the <code>GET</code> method. If you are interesting by  more sophisticated examples, please have a look at the excellent <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest#Using_FormData_objects\" rel=\"nofollow\">MDN documentation</a>. You may also be interested by the <a href=\"http://stackoverflow.com/a/18592868/938111\">ComFreek's answer</a>.</p>\n\n<p>As pointed out by <a href=\"http://stackoverflow.com/users/802500\">Justin Blank</a> and <a href=\"http://stackoverflow.com/users/1168754\">Thomas Munk</a> (sse comments), <code>FormData</code> is notsupported by IE9 and default android 2.3 browser. </p>\n",
                    "is_accepted": false,
                    "score": 10
                }
            ],
            "body": "<p>I'd like to send some data using XMLHttpRequest in JavaScript.</p>\n\n<p>Say I have the following form in HTML:</p>\n\n<pre><code>&lt;form name=\"inputform\" action=\"somewhere\" method=\"post\"&gt;\n    &lt;input type=\"hidden\" value=\"person\" name=\"user\" /&gt;\n    &lt;input type=\"hidden\" value=\"password\" name=\"pwd\" /&gt;\n    &lt;input type=\"hidden\" value=\"place\" name=\"organization\" /&gt;\n    &lt;input type=\"hidden\" value=\"key\" name=\"requiredkey\" /&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>How can I write the equivalent using an XMLHttpRequest in JavaScript?</p>\n",
            "last_activity_date": 1423491072,
            "question_id": 9713058,
            "score": 74,
            "tags": [
                "javascript",
                "html",
                "post",
                "xmlhttprequest"
            ],
            "title": "Sending POST data with a XMLHttpRequest"
        },
        {
            "answer_count": 2,
            "answers": [
                {
                    "body": "<p>You can use this equivalent syntax:</p>\n\n<pre><code>obj[name] = value;\n</code></pre>\n",
                    "is_accepted": true,
                    "score": 218
                },
                {
                    "body": "<p>You can even make List of objects like this </p>\n\n<pre><code>var feeTypeList = [];\n$('#feeTypeTable &gt; tbody &gt; tr').each(function (i, el) {\n    var feeType = {};\n\n    var $ID = $(this).find(\"input[id^=txtFeeType]\").attr('id');\n\n    feeType[\"feeTypeID\"] = $('#ddlTerm').val();\n    feeType[\"feeTypeName\"] = $('#ddlProgram').val();\n    feeType[\"feeTypeDescription\"] = $('#ddlBatch').val();\n\n    feeTypeList.push(feeType);\n});\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 5
                }
            ],
            "body": "<p>I'm pulling items out of the DOM with JQuery and want to set a property on an object using the id of the DOM element. For example:</p>\n\n<pre><code>obj = {};\njQuery(itemsFromDom).each(function() {\n  element = jQuery(this);\n  name = element.attr(\"id\");\n  value = element.attr(\"value\");\n\n  //Here's the problem\n  obj.name = value;\n});\n</code></pre>\n\n<p>If \"itemsFromDom\" includes an element with an id of \"myId\", I want \"obj\" to have a property named \"myId\". The above gives me \"name\".</p>\n\n<p>How, in javascript, do I name a property of an object using a variable?</p>\n",
            "last_activity_date": 1392360955,
            "question_id": 695050,
            "score": 97,
            "tags": [
                "javascript",
                "jquery",
                "json"
            ],
            "title": "How do I add a property to a Javascript Object using a variable as the name?"
        },
        {
            "answer_count": 7,
            "answers": [
                {
                    "body": "<p>If you just want the DOM attributes, it's probably simpler to use the <code>attributes</code> node list on the element itself:</p>\n\n<pre><code>var el = document.getElementById(\"someId\");\nfor (var i = 0, atts = el.attributes, n = atts.length, arr = []; i &lt; n; i++){\n    arr.push(atts[i].nodeName);\n}\n</code></pre>\n\n<p>Note that this fills the array only with attribute names. If you need the attribute value, you can use the <code>nodeValue</code> property:</p>\n\n<pre><code>var nodes=[], values=[];\nfor (var att, i = 0, atts = el.attributes, n = atts.length; i &lt; n; i++){\n    att = atts[i];\n    nodes.push(att.nodeName);\n    values.push(att.nodeValue);\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 121
                },
                {
                    "body": "<p>In javascript:</p>\n\n<pre><code>var attributes;\nvar spans = document.getElementsByTagName(\"span\");\nfor(var s in spans){\n  if (spans[s].getAttribute('name') === 'test') {\n     attributes = spans[s].attributes;\n     break;\n  }\n}\n</code></pre>\n\n<p>To access the attributes names and values:</p>\n\n<pre><code>attributes[0].nodeName\nattributes[0].nodeValue\n</code></pre>\n",
                    "is_accepted": false,
                    "score": -7
                },
                {
                    "body": "<p>You can use this simple plugin as $('#some_id').getAttributes();</p>\n\n<pre><code>(function($) {\n    $.fn.getAttributes = function() {\n        var attributes = {}; \n\n        if( this.length ) {\n            $.each( this[0].attributes, function( index, attr ) {\n                attributes[ attr.name ] = attr.value;\n            } ); \n        }\n\n        return attributes;\n    };\n})(jQuery);\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 57
                },
                {
                    "body": "<p>Simple:</p>\n\n<pre><code>var element = $(\"span[name='test']\");\n$(element[0].attributes).each(function() {\nconsole.log(this.nodeName+':'+this.nodeValue);});\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 44
                },
                {
                    "body": "<p>Because in IE7 elem.attributes lists all possible attributes, not only the present ones, we have to test the attribute value.\nThis plugin works in all major browsers:</p>\n\n<pre><code>(function($) {\n    $.fn.getAttributes = function () {\n        var elem = this, \n            attr = {};\n\n        if(elem &amp;&amp; elem.length) $.each(elem.get(0).attributes, function(v,n) { \n            n = n.nodeName||n.name;\n            v = elem.attr(n); // relay on $.fn.attr, it makes some filtering and checks\n            if(v != undefined &amp;&amp; v !== false) attr[n] = v\n        })\n\n        return attr\n    }\n})(jQuery);\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>var attribs = $('#some_id').getAttributes();\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 14
                },
                {
                    "body": "<p>Setter and Getter!</p>\n\n<pre><code>(function($) {\n    // Attrs\n    $.fn.attrs = function(attrs) {\n        var t = $(this);\n        if (attrs) {\n            // Set attributes\n            t.each(function(i, e) {\n                var j = $(e);\n                for (var attr in attrs) {\n                    j.attr(attr, attrs[attr]);\n                };\n            });\n            return t;\n        } else {\n            // Get attributes\n            var a = {},\n                r = t.get(0);\n            if (r) {\n                r = r.attributes;\n                for (var i in r) {\n                    var p = r[i];\n                    if (typeof p.nodeValue !== 'undefined') a[p.nodeName] = p.nodeValue;\n                }\n            }\n            return a;\n        }\n    };\n})(jQuery);\n</code></pre>\n\n<p>Use:</p>\n\n<pre><code>// Setter\n$('#element').attrs({\n    'name' : 'newName',\n    'id' : 'newId',\n    'readonly': true\n});\n\n// Getter\nvar attrs = $('#element').attrs();\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 9
                },
                {
                    "body": "<p><a href=\"http://stackoverflow.com/users/235058/roland-bouman\">Roland Bouman</a>'s <a href=\"http://stackoverflow.com/questions/2048720/get-all-attributes-from-a-html-element-with-javascript-jquery/27865269#answer-2048786\">answer</a> is the best, simple Vanilla way. I noticed some attempts at jQ plugs, but they just didn't seem \"full\" enough to me, so I made my own. The only setback so far has been inability to access dynamically added attrs without directly calling <code>elm.attr('dynamicAttr')</code>. However, this will return all natural attributes of a jQuery element object.</p>\n\n<p>Plugin uses simple jQuery style calling:</p>\n\n<pre><code>$(elm).getAttrs();\n// OR\n$.getAttrs(elm);\n</code></pre>\n\n<p>You can also add a second string param for getting just one specific attr. This isn't really needed for one element selection, as jQuery already provides <code>$(elm).attr('name')</code>, however, my version of a plugin allows for multiple returns. So, for instance, a call like</p>\n\n<pre><code>$.getAttrs('*', 'class');\n</code></pre>\n\n<p>Will result in an array <code>[]</code> return of objects <code>{}</code>. Each object will look like:</p>\n\n<pre><code>{ class: 'classes names', elm: $(elm), index: i } // index is $(elm).index()\n</code></pre>\n\n<h2>Plugin</h2>\n\n<pre><code>;;(function($) {\n    $.getAttrs || ($.extend({\n        getAttrs: function() {\n            var a = arguments,\n                d, b;\n            if (a.length)\n                for (x in a) switch (typeof a[x]) {\n                    case \"object\":\n                        a[x] instanceof jQuery &amp;&amp; (b = a[x]);\n                        break;\n                    case \"string\":\n                        b ? d || (d = a[x]) : b = $(a[x])\n                }\n            if (b instanceof jQuery) {\n                var e = [];\n                if (1 == b.length) {\n                    for (var f = 0, g = b[0].attributes, h = g.length; f &lt; h; f++) a = g[f], e[a.name] = a.value;\n                    b.data(\"attrList\", e);\n                    d &amp;&amp; \"all\" != d &amp;&amp; (e = b.attr(d))\n                } else d &amp;&amp; \"all\" != d ? b.each(function(a) {\n                    a = {\n                        elm: $(this),\n                        index: $(this).index()\n                    };\n                    a[d] = $(this).attr(d);\n                    e.push(a)\n                }) : b.each(function(a) {\n                    $elmRet = [];\n                    for (var b = 0, d = this.attributes, f = d.length; b &lt; f; b++) a = d[b], $elmRet[a.name] = a.value;\n                    e.push({\n                        elm: $(this),\n                        index: $(this).index(),\n                        attrs: $elmRet\n                    });\n                    $(this).data(\"attrList\", e)\n                });\n                return e\n            }\n            return \"Error: Cannot find Selector\"\n        }\n    }), $.fn.extend({\n        getAttrs: function() {\n            var a = [$(this)];\n            if (arguments.length)\n                for (x in arguments) a.push(arguments[x]);\n            return $.getAttrs.apply($, a)\n        }\n    }))\n})(jQuery);\n</code></pre>\n\n<h2>Complied</h2>\n\n<pre><code>;;(function(c){c.getAttrs||(c.extend({getAttrs:function(){var a=arguments,d,b;if(a.length)for(x in a)switch(typeof a[x]){case \"object\":a[x]instanceof jQuery&amp;&amp;(b=a[x]);break;case \"string\":b?d||(d=a[x]):b=c(a[x])}if(b instanceof jQuery){if(1==b.length){for(var e=[],f=0,g=b[0].attributes,h=g.length;f&lt;h;f++)a=g[f],e[a.name]=a.value;b.data(\"attrList\",e);d&amp;&amp;\"all\"!=d&amp;&amp;(e=b.attr(d));for(x in e)e.length++}else e=[],d&amp;&amp;\"all\"!=d?b.each(function(a){a={elm:c(this),index:c(this).index()};a[d]=c(this).attr(d);e.push(a)}):b.each(function(a){$elmRet=[];for(var b=0,d=this.attributes,f=d.length;b&lt;f;b++)a=d[b],$elmRet[a.name]=a.value;e.push({elm:c(this),index:c(this).index(),attrs:$elmRet});c(this).data(\"attrList\",e);for(x in $elmRet)$elmRet.length++});return e}return\"Error: Cannot find Selector\"}}),c.fn.extend({getAttrs:function(){var a=[c(this)];if(arguments.length)for(x in arguments)a.push(arguments[x]);return c.getAttrs.apply(c,a)}}))})(jQuery);\n</code></pre>\n\n<p><a href=\"http://jsfiddle.net/SpYk3/ygxxLx27/\" rel=\"nofollow\"><h2>jsFiddle</h2></a></p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"true\">\r\n<div class=\"snippet-code snippet-currently-hidden\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>/*  BEGIN PLUGIN  */\r\n;;(function($) {\r\n\t$.getAttrs || ($.extend({\r\n\t\tgetAttrs: function() {\r\n\t\t\tvar a = arguments,\r\n\t\t\t\tc, b;\r\n\t\t\tif (a.length)\r\n\t\t\t\tfor (x in a) switch (typeof a[x]) {\r\n\t\t\t\t\tcase \"object\":\r\n\t\t\t\t\t\ta[x] instanceof f &amp;&amp; (b = a[x]);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"string\":\r\n\t\t\t\t\t\tb ? c || (c = a[x]) : b = $(a[x])\r\n\t\t\t\t}\r\n\t\t\tif (b instanceof f) {\r\n\t\t\t\tif (1 == b.length) {\r\n\t\t\t\t\tfor (var d = [], e = 0, g = b[0].attributes, h = g.length; e &lt; h; e++) a = g[e], d[a.name] = a.value;\r\n\t\t\t\t\tb.data(\"attrList\", d);\r\n\t\t\t\t\tc &amp;&amp; \"all\" != c &amp;&amp; (d = b.attr(c));\r\n\t\t\t\t\tfor (x in d) d.length++\r\n\t\t\t\t} else d = [], c &amp;&amp; \"all\" != c ? b.each(function(a) {\r\n\t\t\t\t\ta = {\r\n\t\t\t\t\t\telm: $(this),\r\n\t\t\t\t\t\tindex: $(this).index()\r\n\t\t\t\t\t};\r\n\t\t\t\t\ta[c] = $(this).attr(c);\r\n\t\t\t\t\td.push(a)\r\n\t\t\t\t}) : b.each(function(a) {\r\n\t\t\t\t\t$elmRet = [];\r\n\t\t\t\t\tfor (var b = 0, c = this.attributes, e = c.length; b &lt; e; b++) a = c[b], $elmRet[a.name] = a.value;\r\n\t\t\t\t\td.push({\r\n\t\t\t\t\t\telm: $(this),\r\n\t\t\t\t\t\tindex: $(this).index(),\r\n\t\t\t\t\t\tattrs: $elmRet\r\n\t\t\t\t\t});\r\n\t\t\t\t\t$(this).data(\"attrList\", d);\r\n\t\t\t\t\tfor (x in $elmRet) $elmRet.length++\r\n\t\t\t\t});\r\n\t\t\t\treturn d\r\n\t\t\t}\r\n\t\t\treturn \"Error: Cannot find Selector\"\r\n\t\t}\r\n\t}), $.fn.extend({\r\n\t\tgetAttrs: function() {\r\n\t\t\tvar a = [$(this)];\r\n\t\t\tif (arguments.length)\r\n\t\t\t\tfor (x in arguments) a.push(arguments[x]);\r\n\t\t\treturn $.getAttrs.apply($, a)\r\n\t\t}\r\n\t}))\r\n})(jQuery);\r\n/*  END PLUGIN  */\r\n/*--------------------*/\r\n$('#bob').attr('bob', 'bill');\r\nconsole.log($('#bob'))\r\nconsole.log(new Array(50).join(' -'));\r\nconsole.log($('#bob').getAttrs('id'));\r\nconsole.log(new Array(50).join(' -'));\r\nconsole.log($.getAttrs('#bob'));\r\nconsole.log(new Array(50).join(' -'));\r\nconsole.log($.getAttrs('#bob', 'name'));\r\nconsole.log(new Array(50).join(' -'));\r\nconsole.log($.getAttrs('*', 'class'));\r\nconsole.log(new Array(50).join(' -'));\r\nconsole.log($.getAttrs('p'));\r\nconsole.log(new Array(50).join(' -'));\r\nconsole.log($('#bob').getAttrs('all'));\r\nconsole.log($('*').getAttrs('all'));</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js\"&gt;&lt;/script&gt;\r\nAll of below is just for stuff for plugin to test on. See developer console for more details.\r\n&lt;hr /&gt;\r\n&lt;div id=\"bob\" class=\"wmd-button-bar\"&gt;&lt;ul id=\"wmd-button-row-27865269\" class=\"wmd-button-row\" style=\"display:none;\"&gt;\r\n&lt;div class=\"post-text\" itemprop=\"text\"&gt;\r\n&lt;p&gt;Roland Bouman's answer is the best, simple Vanilla way. I noticed some attempts at jQ plugs, but they just didn't seem \"full\" enough to me, so I made my own. The only setback so far has been inability to access dynamically added attrs without directly calling &lt;code&gt;elm.attr('dynamicAttr')&lt;/code&gt;. However, this will return all natural attributes of a jQuery element object.&lt;/p&gt;\r\n\r\n&lt;p&gt;Plugin uses simple jQuery style calling:&lt;/p&gt;\r\n\r\n&lt;pre class=\"default prettyprint prettyprinted\"&gt;&lt;code&gt;&lt;span class=\"pln\"&gt;$&lt;/span&gt;&lt;span class=\"pun\"&gt;(&lt;/span&gt;&lt;span class=\"pln\"&gt;elm&lt;/span&gt;&lt;span class=\"pun\"&gt;).&lt;/span&gt;&lt;span class=\"pln\"&gt;getAttrs&lt;/span&gt;&lt;span class=\"pun\"&gt;();&lt;/span&gt;&lt;span class=\"pln\"&gt;\r\n&lt;/span&gt;&lt;span class=\"com\"&gt;// OR&lt;/span&gt;&lt;span class=\"pln\"&gt;\r\n$&lt;/span&gt;&lt;span class=\"pun\"&gt;.&lt;/span&gt;&lt;span class=\"pln\"&gt;getAttrs&lt;/span&gt;&lt;span class=\"pun\"&gt;(&lt;/span&gt;&lt;span class=\"pln\"&gt;elm&lt;/span&gt;&lt;span class=\"pun\"&gt;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\r\n\r\n&lt;p&gt;You can also add a second string param for getting just one specific attr. This isn't really needed for one element selection, as jQuery already provides &lt;code&gt;$(elm).attr('name')&lt;/code&gt;, however, my version of a plugin allows for multiple returns. So, for instance, a call like&lt;/p&gt;\r\n\r\n&lt;pre class=\"default prettyprint prettyprinted\"&gt;&lt;code&gt;&lt;span class=\"pln\"&gt;$&lt;/span&gt;&lt;span class=\"pun\"&gt;.&lt;/span&gt;&lt;span class=\"pln\"&gt;getAttrs&lt;/span&gt;&lt;span class=\"pun\"&gt;(&lt;/span&gt;&lt;span class=\"str\"&gt;'*'&lt;/span&gt;&lt;span class=\"pun\"&gt;,&lt;/span&gt;&lt;span class=\"pln\"&gt; &lt;/span&gt;&lt;span class=\"str\"&gt;'class'&lt;/span&gt;&lt;span class=\"pun\"&gt;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\r\n\r\n&lt;p&gt;Will result in an array &lt;code&gt;[]&lt;/code&gt; return of objects &lt;code&gt;{}&lt;/code&gt;. Each object will look like:&lt;/p&gt;\r\n\r\n&lt;pre class=\"default prettyprint prettyprinted\"&gt;&lt;code&gt;&lt;span class=\"pun\"&gt;{&lt;/span&gt;&lt;span class=\"pln\"&gt; &lt;/span&gt;&lt;span class=\"kwd\"&gt;class&lt;/span&gt;&lt;span class=\"pun\"&gt;:&lt;/span&gt;&lt;span class=\"pln\"&gt; &lt;/span&gt;&lt;span class=\"str\"&gt;'classes names'&lt;/span&gt;&lt;span class=\"pun\"&gt;,&lt;/span&gt;&lt;span class=\"pln\"&gt; elm&lt;/span&gt;&lt;span class=\"pun\"&gt;:&lt;/span&gt;&lt;span class=\"pln\"&gt; $&lt;/span&gt;&lt;span class=\"pun\"&gt;(&lt;/span&gt;&lt;span class=\"pln\"&gt;elm&lt;/span&gt;&lt;span class=\"pun\"&gt;),&lt;/span&gt;&lt;span class=\"pln\"&gt; index&lt;/span&gt;&lt;span class=\"pun\"&gt;:&lt;/span&gt;&lt;span class=\"pln\"&gt; i &lt;/span&gt;&lt;span class=\"pun\"&gt;}&lt;/span&gt;&lt;span class=\"pln\"&gt; &lt;/span&gt;&lt;span class=\"com\"&gt;// index is $(elm).index()&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\r\n    &lt;/div&gt;\r\n  &lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n",
                    "is_accepted": false,
                    "score": 0
                }
            ],
            "body": "<p>I want to put all attributes in a Html element into an array:\nlike i have a jQuery Object, whichs html looks like this:</p>\n\n<pre><code>&lt;span name=\"test\" message=\"test2\"&gt;&lt;/span&gt;\n</code></pre>\n\n<p>now one way is to use the xml parser described <a href=\"http://stackoverflow.com/questions/1705504/javascript-jquery-how-do-i-get-an-array-of-all-attributes-in-an-xml-element\">here</a>, but then i need to know how to get the html code of my object.</p>\n\n<p>the other way is to make it with jquery, but how?\nthe amount of attributes and the names are generic.</p>\n\n<p>Thanks</p>\n\n<p>Btw: I can't access the element with document.getelementbyid or something similar.</p>\n",
            "last_activity_date": 1421084486,
            "question_id": 2048720,
            "score": 80,
            "tags": [
                "javascript",
                "jquery",
                "attributes",
                "parsing"
            ],
            "title": "Get all Attributes from a HTML element with Javascript/jQuery"
        },
        {
            "answer_count": 3,
            "answers": [
                {
                    "body": "<pre><code>document.body.style.display = 'none';\ndocument.body.style.display = 'block';\n</code></pre>\n\n<p>This often solves those incomprehensible layout bugs.</p>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>Both articles are correct.\nOne can safely assume that whenever you're doing something that could reasonably require the dimensions of elements in the DOM be calculated that you will trigger reflow.</p>\n\n<p>In addition, as far as I can tell, both articles say the same thing.</p>\n\n<p>The first article says reflow happens when:</p>\n\n<blockquote>\n  <p>When you <strong>retrieve a measurement that must be calculated</strong>, such as accessing <strong>offsetWidth</strong>, <strong>clientHeight</strong>, or any computed CSS value (via <strong>getComputedStyle()</strong> in DOM-compliant browsers or currentStyle in IE), while DOM changes are queued up to be made.</p>\n</blockquote>\n\n<p>The second article states:</p>\n\n<blockquote>\n  <p>As stated earlier, the browser may cache several changes for you, and reflow only once when those changes have all been made. However, note that <strong>taking measurements of the element will force it to reflow</strong>, so that the measurements will be correct. The changes may or may not not be visibly repainted, but the reflow itself still has to happen behind the scenes.</p>\n  \n  <p>This effect is created when measurements are taken using properties like <strong>offsetWidth</strong>, or using methods like <strong>getComputedStyle</strong>. Even if the numbers are not used, simply using either of these while the browser is still caching changes, will be enough to trigger the hidden reflow. If these measurements are taken repeatedly, you should consider taking them just once, and storing the result, which can then be used later.</p>\n</blockquote>\n\n<p>I take this to mean the same thing they said earlier. Opera will try its hardest to cache values and avoid reflow for you, but you shouldn't rely on its ability to do so.</p>\n\n<p>For all intents and purposes just believe what they both say when they say that all three types of interactions can cause reflow.</p>\n\n<p>Cheers.</p>\n",
                    "is_accepted": true,
                    "score": 32
                },
                {
                    "body": "<p>Look at the \"Rendering triggered by Property Read Access\" section of <a href=\"http://blog.dynatrace.com/2009/12/12/understanding-internet-explorer-rendering-behaviour/\" rel=\"nofollow\">Understanding Internet Explorer Rendering Behaviour</a>, where the following code in IE will cause rendering activity.</p>\n\n<pre><code>function askforHeight () {\n  $(\"#lower\").height();  \n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 3
                }
            ],
            "body": "<p>What kinds of activities will trigger reflow of web page with DOM?</p>\n\n<p>It seems there are different points of view. According to <a href=\"http://www.nczonline.net/blog/2009/02/03/speed-up-your-javascript-part-4/\">http://www.nczonline.net/blog/2009/02/03/speed-up-your-javascript-part-4/</a>,  it happens</p>\n\n<ul>\n<li>When you add or remove a DOM node.</li>\n<li>When you apply a style dynamically (such as element.style.width=\"10px\").</li>\n<li>When you retrieve a measurement that must be calculated, such as accessing offsetWidth, clientHeight, or any computed CSS value (via getComputedStyle() in DOM-compliant browsers or currentStyle in IE).</li>\n</ul>\n\n<p>However, according to <a href=\"http://dev.opera.com/articles/view/efficient-javascript/?page=3\">http://dev.opera.com/articles/view/efficient-javascript/?page=3</a>, taking measurement triggers reflow only when there is already reflow action queued.</p>\n\n<p>Does anybody have any more ideas?</p>\n",
            "last_activity_date": 1285082452,
            "question_id": 510213,
            "score": 39,
            "tags": [
                "javascript",
                "performance",
                "dom",
                "reflow"
            ],
            "title": "When does reflow happen in a DOM environment?"
        },
        {
            "answer_count": 7,
            "answers": [
                {
                    "body": "<p>It's not a method of document:</p>\n\n<pre><code>function getElementsByClassName(node, classname) {\n    var a = [];\n    var re = new RegExp('(^| )'+classname+'( |$)');\n    var els = node.getElementsByTagName(\"*\");\n    for(var i=0,j=els.length; i&lt;j; i++)\n        if(re.test(els[i].className))a.push(els[i]);\n    return a;\n}\n\ntabs = getElementsByClassName(document.body,'tab');  // no document\n</code></pre>\n",
                    "is_accepted": true,
                    "score": 38
                },
                {
                    "body": "<p>IE8:</p>\n\n<pre><code>document.getElementsByClassName = function (className) {\n    return document.querySelectorAll('.' + className)\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 7
                },
                {
                    "body": "<p>You can't really replicate getElementsByClassName, because it returns a nodeList,\nand so its value is live, and updates with the document.</p>\n\n<p>You can return a static Array of elements who share the same classnames-\nbut it won't 'know'when the document changes.</p>\n\n<p>(It won't take too many of these kind of things to make a library look svelte...)</p>\n\n<pre><code>function getArrayByClassNames(classes, pa){\n    if(!pa) pa= document;\n    var C= [], G;\n    if(pa.getElementsByClassName){\n        G= pa.getElementsByClassName(classes);\n        for(var i= 0, L= G.length; i&lt;L; i++){\n            C[i]= G[i];\n        }\n    }\n    else{\n        classes= classes.split(/\\s+/);\n        var who, cL= classes.length,\n        cn, G= pa.getElementsByTagName('*'), L= G.length;\n        for(var i= 0; i&lt;cL; i++){\n            classes[i]= RegExp('\\\\b'+classes[i]+'\\\\b');\n        }\n        classnameLoop:\n        while(L){\n            who= G[--L];\n            cn= who.className;\n            if(cn){\n                for(var i= 0; i&lt;cL; i++){\n                    if(classes[i].test(cn)== false) {\n                        continue classnameLoop;\n                    }\n                }\n                C.push(who);\n            }\n        }\n    }\n    return C;\n}\n</code></pre>\n\n<p>//Example</p>\n\n<p><strong>var A= getArrayByClassNames('sideBar local')</strong></p>\n",
                    "is_accepted": false,
                    "score": 7
                },
                {
                    "body": "<pre><code>function getElementsByClassName(className) {\nif (document.getElementsByClassName) { \n  return document.getElementsByClassName(className); }\nelse { return document.querySelectorAll('.' + className); } }\n</code></pre>\n\n<p>Pretty sure this is the same as SomeGuy's function but this uses <code>document.getElementsByClassName</code> when it can. </p>\n",
                    "is_accepted": false,
                    "score": 11
                },
                {
                    "body": "<p>you may create the function for older browsers</p>\n\n<pre><code>if (typeof document.getElementsByClassName!='function') {\n    document.getElementsByClassName = function() {\n        var elms = document.getElementsByTagName('*');\n        var ei = new Array();\n        for (i=0;i&lt;elms.length;i++) {\n            if (elms[i].getAttribute('class')) {\n                ecl = elms[i].getAttribute('class').split(' ');\n                for (j=0;j&lt;ecl.length;j++) {\n                    if (ecl[j].toLowerCase() == arguments[0].toLowerCase()) {\n                        ei.push(elms[i]);\n                    }\n                }\n            } else if (elms[i].className) {\n                ecl = elms[i].className.split(' ');\n                for (j=0;j&lt;ecl.length;j++) {\n                    if (ecl[j].toLowerCase() == arguments[0].toLowerCase()) {\n                        ei.push(elms[i]);\n                    }\n                }\n            }\n        }\n        return ei;\n    }\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 15
                },
                {
                    "body": "<pre><code>function _getClass(whatEverClasNameYouWant){\nvar a=document.getElementsByTagName('*');\n   for(b in a){\n      if((' '+a[b].className+' ').indexOf(' '+whatEverClasNameYouWant+' ')&gt;-1){\n      return a[b];\n      }\n   }\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>I just want to improve <code>querySelectorAll</code> fallback for IE8.</p>\n\n<p>Like others answered, the simple way is adding the function to <code>Element.prototype</code> with</p>\n\n<pre><code>this.querySelectorAll('.' + className);\n</code></pre>\n\n<p>But there are some problems:</p>\n\n<ul>\n<li>It doesn't work with untrimmed strings (at the beginning).</li>\n<li>It doesn't work with multiple classes.</li>\n<li>It doesn't work with \"strange\" class characters (<code>/</code>, <code>$</code>, <code>*</code>, etc.)</li>\n<li>It doesn't work with classes which begin with a digit (invalid identifiers)</li>\n</ul>\n\n<p>That means there should be some \"fixing\", for example:</p>\n\n<pre><code>\"abcd\"     -&gt;  \".abcd\"\n\"a   b cd\" -&gt;  \".a.b.cd\"\n\"   a b  \" -&gt;  \".a.b  \"\n\"a/b$c d\"  -&gt;  \".a\\/b\\$c.d\"\n\"1234\"     -&gt;  \".\\000031234\"\n</code></pre>\n\n<h1>Code:</h1>\n\n<pre><code>this.querySelectorAll(className\n    .replace(/(?=[^ \\w])/g, '\\\\')   // Escape non-word characters\n    .replace(/\\b\\d/g, '\\\\00003$&amp;')  // Escape digits at the beginning\n    .replace(/(^| +)(?!$| )/g, '.') // Add \".\" before classes, removing spaces\n);\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                }
            ],
            "body": "<h3>What is the best method to retrieve an array of elements that have a certain class?</h3>\n\n<p>I would use document.getElementsByClassName but IE does not support it.</p>\n\n<p>So I tried a <a href=\"http://snook.ca/archives/javascript/your_favourite_1\">Jonathan Snook's solution</a>:</p>\n\n<pre><code>function getElementsByClassName(node, classname) {\n    var a = [];\n    var re = new RegExp('(^| )'+classname+'( |$)');\n    var els = node.getElementsByTagName(\"*\");\n    for(var i=0,j=els.length; i&lt;j; i++)\n        if(re.test(els[i].className))a.push(els[i]);\n    return a;\n}\nvar tabs = document.getElementsByClassName(document.body,'tab');\n</code></pre>\n\n<p>...but IE still says:</p>\n\n<blockquote>\n  <p>Object doesn't support this property or method</p>\n</blockquote>\n\n<p>Any ideas, better methods, bug fixes?</p>\n\n<p>Thanks in advance!</p>\n\n<p>I would prefer not to use any solutions involving jQuery or other \"bulky javascript\".</p>\n\n<p><br><br></p>\n\n<h1>Update:</h1>\n\n<p>I got it to work!</p>\n\n<p>As <a href=\"http://stackoverflow.com/a/7410966/552067\">@joe mentioned</a> the function is not a method of <code>document</code>.</p>\n\n<p>So the working code would look like this:</p>\n\n<pre><code>function getElementsByClassName(node, classname) {\n    var a = [];\n    var re = new RegExp('(^| )'+classname+'( |$)');\n    var els = node.getElementsByTagName(\"*\");\n    for(var i=0,j=els.length; i&lt;j; i++)\n        if(re.test(els[i].className))a.push(els[i]);\n    return a;\n}\nvar tabs = getElementsByClassName(document.body,'tab');\n</code></pre>\n\n<p><br><br>\n...Also <strong>if you only need IE8+ support</strong> then this will work:</p>\n\n<pre><code>if(!document.getElementsByClassName) {\n    document.getElementsByClassName = function(className) {\n        return this.querySelectorAll(\".\" + className);\n    };\n    Element.prototype.getElementsByClassName = document.getElementsByClassName;\n}\n</code></pre>\n\n<p>Which ends up being a lot smaller when minified:</p>\n\n<pre><code>(function(d,g){d[g]||(d[g]=function(g){return this.querySelectorAll(\".\"+g)},Element.prototype[g]=d[g])})(document,\"getElementsByClassName\");\n</code></pre>\n\n<p>And you use it just like normal:</p>\n\n<pre><code>var tabs = document.getElementsByClassName('.tab');\n</code></pre>\n\n<p>or</p>\n\n<pre><code>var tabs = document.getElementsByClassName('.tab');\n</code></pre>\n",
            "last_activity_date": 1391955140,
            "question_id": 7410949,
            "score": 57,
            "tags": [
                "javascript",
                "internet-explorer",
                "class",
                "internet-explorer-8",
                "classname"
            ],
            "title": "javascript document.getElementsByClassName compatibility with IE"
        },
        {
            "answer_count": 11,
            "answers": [
                {
                    "body": "<p>Some browsers such as Firefox, Chrome, Safari, Opera and IE10+ can handle Base64 natively. Take a look at this <a href=\"http://stackoverflow.com/questions/246801/how-can-you-encode-to-base64-using-javascript/247261#247261\">Stackoverflow question</a>. It's using <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Base64_encoding_and_decoding\"><code>btoa()</code> and <code>atob()</code> functions</a>.</p>\n\n<p>For server-side JavaScript, there's a <a href=\"https://npmjs.org/package/btoa\">btoa package for Node.JS</a>.</p>\n\n<p>If you are going for a cross-browser solution, there are existing libraries like <a href=\"https://code.google.com/p/crypto-js/#Encoders\">CryptoJS</a> or code like:</p>\n\n<p><a href=\"http://ntt.cc/2008/01/19/base64-encoder-decoder-with-javascript.html\">http://ntt.cc/2008/01/19/base64-encoder-decoder-with-javascript.html</a></p>\n\n<p>With the latter, you need to thoroughly test the function for cross browser compatibility. And error <a href=\"http://stackoverflow.com/a/14596140/1269037\">has already been reported</a>.</p>\n",
                    "is_accepted": true,
                    "score": 77
                },
                {
                    "body": "<p>The <a href=\"http://phpjs.org/\">php.js</a> project has JavaScript implementations of many of PHP's functions. <code>base64_encode</code> and <code>base64_decode</code> are included.</p>\n",
                    "is_accepted": false,
                    "score": 9
                },
                {
                    "body": "<p>Short and fast Base64 JavaScript Decode Function without Failsafe:</p>\n\n<pre><code>function decode_base64 (s)\n{\n    var e = {}, i, k, v = [], r = '', w = String.fromCharCode;\n    var n = [[65, 91], [97, 123], [48, 58], [43, 44], [47, 48]];\n\n    for (z in n)\n    {\n        for (i = n[z][0]; i &lt; n[z][1]; i++)\n        {\n            v.push(w(i));\n        }\n    }\n    for (i = 0; i &lt; 64; i++)\n    {\n        e[v[i]] = i;\n    }\n\n    for (i = 0; i &lt; s.length; i+=72)\n    {\n        var b = 0, c, x, l = 0, o = s.substring(i, i+72);\n        for (x = 0; x &lt; o.length; x++)\n        {\n            c = e[o.charAt(x)];\n            b = (b &lt;&lt; 6) + c;\n            l += 6;\n            while (l &gt;= 8)\n            {\n                r += w((b &gt;&gt;&gt; (l -= 8)) % 256);\n            }\n         }\n    }\n    return r;\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 17
                },
                {
                    "body": "<p>In Gecko/WebKit-based browsers (Firefox, Chrome and Safari) and Opera, you can use <a href=\"https://developer.mozilla.org/En/DOM/Window.btoa\">btoa()</a> and <a href=\"https://developer.mozilla.org/en/DOM/window.atob\">atob()</a>.</p>\n\n<p>Original answer: <a href=\"http://stackoverflow.com/questions/246801/how-can-you-encode-to-base64-using-javascript/247261#247261\">How can you encode to Base64 using Javascript?</a></p>\n",
                    "is_accepted": false,
                    "score": 52
                },
                {
                    "body": "<p>Here is best way to base64_encode and base64_decode using javascript. See below links.</p>\n\n<p><a href=\"http://phpjs.org/functions/base64_encode:358\">http://phpjs.org/functions/base64_encode:358</a></p>\n\n<p><a href=\"http://phpjs.org/functions/base64_decode:357\">http://phpjs.org/functions/base64_decode:357</a></p>\n",
                    "is_accepted": false,
                    "score": 9
                },
                {
                    "body": "<p>I have tried the Javascript routines at phpjs.org and they have worked well.</p>\n\n<p>I first tried the routines suggested in the chosen answer by Ranhiru Cooray -  <a href=\"http://ntt.cc/2008/01/19/base64-encoder-decoder-with-javascript.html\">http://ntt.cc/2008/01/19/base64-encoder-decoder-with-javascript.html</a></p>\n\n<p>I found that they did not work in all circumstances.   I wrote up a test case where these routines fail and posted them to GitHub at:</p>\n\n<p><a href=\"https://github.com/scottcarter/base64_javascript_test_data.git\">https://github.com/scottcarter/base64_javascript_test_data.git</a></p>\n\n<p>I also posted a comment to the blog post at ntt.cc to alert the author (awaiting moderation - the article is old so not sure if comment will get posted).</p>\n",
                    "is_accepted": false,
                    "score": 5
                },
                {
                    "body": "<p>Here is a tightened up version of Sniper's post. It presumes well formed base64 string with no carriage returns. This version eliminates a couple of loops, adds the <code>&amp;0xff</code> fix from Yaroslav, eliminates trailing nulls, plus a bit of code golf.</p>\n\n<pre><code>decodeBase64 = function(s) {\n    var e={},i,b=0,c,x,l=0,a,r='',w=String.fromCharCode,L=s.length;\n    var A=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n    for(i=0;i&lt;64;i++){e[A.charAt(i)]=i;}\n    for(x=0;x&lt;L;x++){\n        c=e[s.charAt(x)];b=(b&lt;&lt;6)+c;l+=6;\n        while(l&gt;=8){((a=(b&gt;&gt;&gt;(l-=8))&amp;0xff)||(x&lt;(L-2)))&amp;&amp;(r+=w(a));}\n    }\n    return r;\n};\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 20
                },
                {
                    "body": "<p>The problem with all of the previous answers here is they do not fully support UTF8 encoding.  I found this solution which worked great for my purposes:</p>\n\n<p><a href=\"http://jsbase64.codeplex.com\">http://jsbase64.codeplex.com</a></p>\n",
                    "is_accepted": false,
                    "score": 6
                },
                {
                    "body": "<p>I'd rather use the bas64 encode/decode methods from <a href=\"https://code.google.com/p/crypto-js/#Encoders\" rel=\"nofollow\">CryptoJS</a>, the most popular library for standard and secure cryptographic algorithms implemented in JavaScript using best practices and patterns.</p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>Did someone say code golf? =)</p>\n\n<p>The following is my attempt at improving my handicap while catching up with the times. Supplied for your convenience.</p>\n\n<pre><code>function decode_base64(s) {\n  var b=l=0, r='',\n  m='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'.split('');\n  s.split('').forEach(function (v) {\n    b=(b&lt;&lt;6)+m.indexOf(v); l+=6;\n    while (l&gt;=8) r+=String.fromCharCode((b&gt;&gt;&gt;(l-=8))&amp;0xff);\n  });\n  return r;\n}\n</code></pre>\n\n<p>What I was actually after was an asynchronous implementation and to my surprise it turns out <code>forEach</code> as opposed to JQuery's <code>$([]).each</code> method implementation is very much synchronous.</p>\n\n<p>If you also had such crazy notions in mind a 0 delay <code>window.setTimeout</code> will run the base64 decode asynchronously and execute the callback function with the result when done.</p>\n\n<pre><code>function decode_base64_async(s, cb) {\n  setTimeout(function () { cb(decode_base64(s)); }, 0);\n}\n</code></pre>\n\n<p><code>forEach</code> is ECMA-262 standard 5th edition and should you care about retarded browsers you may wish to <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach#Polyfill\" rel=\"nofollow\">poly-fill the functionality</a> to nudge them along or alternatively you could also emplore something like the <a href=\"https://github.com/monolithed/ECMAScript-6\" rel=\"nofollow\">ECMAScript 6 Harmony</a> project which will accomplish the full ES5 to ES6 transition for you.</p>\n\n<p>If however you were looking for something a little more traditional perhaps the following is more to your taste.</p>\n\n<pre><code>function decode_base64(s) {\n  var b=l=0, r='', s=s.split(''), i,\n  m='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'.split('');\n  for (i in s) {\n    b=(b&lt;&lt;6)+m.indexOf(s[i]); l+=6;\n    while (l&gt;=8) r+=String.fromCharCode((b&gt;&gt;&gt;(l-=8))&amp;0xff);\n  }\n  return r;\n}\n</code></pre>\n\n<p>I didn't have the trailing null issue so this was removed to remain under par but it should easily be resolved with a <code>trim()</code> or a <code>trimRight()</code> if you'd prefer, should this pose a problem for you.</p>\n\n<p>ie.</p>\n\n<pre><code>return r.trimRight();\n</code></pre>\n\n<p>nJoy!</p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<h2>Internet Explorer 10+</h2>\n\n<pre><code>// Define the string\nvar string = 'Hello World!';\n\n// Encode the String\nvar encodedString = btoa(string);\nconsole.log(encodedString); // Outputs: \"SGVsbG8gV29ybGQh\"\n\n// Decode the String\nvar decodedString = atob(encodedString);\nconsole.log(decodedString); // Outputs: \"Hello World!\"\n</code></pre>\n\n<hr>\n\n<h2>Cross-Browser</h2>\n\n<pre><code>// Create Base64 Object\nvar Base64={_keyStr:\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\",encode:function(e){var t=\"\";var n,r,i,s,o,u,a;var f=0;e=Base64._utf8_encode(e);while(f&lt;e.length){n=e.charCodeAt(f++);r=e.charCodeAt(f++);i=e.charCodeAt(f++);s=n&gt;&gt;2;o=(n&amp;3)&lt;&lt;4|r&gt;&gt;4;u=(r&amp;15)&lt;&lt;2|i&gt;&gt;6;a=i&amp;63;if(isNaN(r)){u=a=64}else if(isNaN(i)){a=64}t=t+this._keyStr.charAt(s)+this._keyStr.charAt(o)+this._keyStr.charAt(u)+this._keyStr.charAt(a)}return t},decode:function(e){var t=\"\";var n,r,i;var s,o,u,a;var f=0;e=e.replace(/[^A-Za-z0-9\\+\\/\\=]/g,\"\");while(f&lt;e.length){s=this._keyStr.indexOf(e.charAt(f++));o=this._keyStr.indexOf(e.charAt(f++));u=this._keyStr.indexOf(e.charAt(f++));a=this._keyStr.indexOf(e.charAt(f++));n=s&lt;&lt;2|o&gt;&gt;4;r=(o&amp;15)&lt;&lt;4|u&gt;&gt;2;i=(u&amp;3)&lt;&lt;6|a;t=t+String.fromCharCode(n);if(u!=64){t=t+String.fromCharCode(r)}if(a!=64){t=t+String.fromCharCode(i)}}t=Base64._utf8_decode(t);return t},_utf8_encode:function(e){e=e.replace(/\\r\\n/g,\"\\n\");var t=\"\";for(var n=0;n&lt;e.length;n++){var r=e.charCodeAt(n);if(r&lt;128){t+=String.fromCharCode(r)}else if(r&gt;127&amp;&amp;r&lt;2048){t+=String.fromCharCode(r&gt;&gt;6|192);t+=String.fromCharCode(r&amp;63|128)}else{t+=String.fromCharCode(r&gt;&gt;12|224);t+=String.fromCharCode(r&gt;&gt;6&amp;63|128);t+=String.fromCharCode(r&amp;63|128)}}return t},_utf8_decode:function(e){var t=\"\";var n=0;var r=c1=c2=0;while(n&lt;e.length){r=e.charCodeAt(n);if(r&lt;128){t+=String.fromCharCode(r);n++}else if(r&gt;191&amp;&amp;r&lt;224){c2=e.charCodeAt(n+1);t+=String.fromCharCode((r&amp;31)&lt;&lt;6|c2&amp;63);n+=2}else{c2=e.charCodeAt(n+1);c3=e.charCodeAt(n+2);t+=String.fromCharCode((r&amp;15)&lt;&lt;12|(c2&amp;63)&lt;&lt;6|c3&amp;63);n+=3}}return t}}\n\n// Define the string\nvar string = 'Hello World!';\n\n// Encode the String\nvar encodedString = Base64.encode(string);\nconsole.log(encodedString); // Outputs: \"SGVsbG8gV29ybGQh\"\n\n// Decode the String\nvar decodedString = Base64.decode(encodedString);\nconsole.log(decodedString); // Outputs: \"Hello World!\"\n</code></pre>\n\n<p><a href=\"http://jsfiddle.net/gabrieleromanato/qAGHT/\" rel=\"nofollow\">jsFiddle</a></p>\n\n<hr>\n\n<h2>with Node.js</h2>\n\n<p>Here is how you encode normal text to base64 in Node.js:</p>\n\n<pre><code>//Buffer() requires a number, array or string as the first parameter, and an optional encoding type as the second parameter. \n// Default is utf8, possible encoding types are ascii, utf8, ucs2, base64, binary, and hex\nvar b = new Buffer('JavaScript');\n// If we don't use toString(), JavaScript assumes we want to convert the object to utf8.\n// We can make it convert to other formats by passing the encoding type to toString().\nvar s = b.toString('base64');\n</code></pre>\n\n<p>And here is how you decode base64 encoded strings:</p>\n\n<pre><code>var b = new Buffer('SmF2YVNjcmlwdA==', 'base64')\nvar s = b.toString();\n</code></pre>\n\n<hr>\n\n<h2>with Dojo.js</h2>\n\n<p>To encode an array of bytes using dojox.encoding.base64:</p>\n\n<pre><code>var str = dojox.encoding.base64.encode(myByteArray);\n</code></pre>\n\n<p>To decode a base64-encoded string:</p>\n\n<pre><code>var bytes = dojox.encoding.base64.decode(str)\n</code></pre>\n\n<hr>\n\n<h2>bower install angular-base64</h2>\n\n<pre><code>&lt;script src=\"bower_components/angular-base64/angular-base64.js\"&gt;&lt;/script&gt;\n\nangular\n    .module('myApp', ['base64'])\n    .controller('myController', [\n\n    '$base64', '$scope', \n    function($base64, $scope) {\n\n        $scope.encoded = $base64.encode('a string');\n        $scope.decoded = $base64.decode('YSBzdHJpbmc=');\n}]);\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 4
                }
            ],
            "body": "<p>Are there any methods in JavaScript that could be used to encode and decode a string using base64 encoding?</p>\n",
            "last_activity_date": 1414001097,
            "question_id": 2820249,
            "score": 82,
            "tags": [
                "javascript",
                "base64"
            ],
            "title": "Base64 encoding and decoding in client-side Javascript"
        },
        {
            "answer_count": 13,
            "answers": [
                {
                    "body": "<p>You could try something like:</p>\n\n<pre><code>varTitle = $('&lt;textarea /&gt;').html(\"Chris&amp;apos; corner\").text();\n</code></pre>\n\n<p><a href=\"http://jsfiddle.net/cC8Ty/204/\">JS Fiddle</a>.</p>\n\n<p><hr />\nA more interactive version:</p>\n\n<pre><code>$('form').submit(\n    function(){\n        var theString = $('#string').val();\n        var varTitle = $('&lt;textarea /&gt;').html(theString).text();\n        $('#output').text(varTitle);\n        return false;\n    });\n</code></pre>\n\n<p>With the html:</p>\n\n<pre><code>&lt;form action=\"#\" method=\"post\"&gt;\n    &lt;fieldset&gt;\n        &lt;label for=\"string\"&gt;Enter a html-encoded string to decode&lt;/label&gt;\n        &lt;input type=\"text\" name=\"string\" id=\"string\" /&gt;\n    &lt;/fieldset&gt;\n    &lt;fieldset&gt;\n        &lt;input type=\"submit\" value=\"decode\" /&gt;\n    &lt;/fieldset&gt;\n&lt;/form&gt;\n\n&lt;div id=\"output\"&gt;&lt;/div&gt;\n</code></pre>\n\n<p><a href=\"http://jsfiddle.net/cC8Ty/205/\">JS Fiddle</a>.</p>\n",
                    "is_accepted": true,
                    "score": 69
                },
                {
                    "body": "<p>You also asked how to encode them - you can use server-side functionality, or you can create your own object to do the mapping, e.g. <a href=\"http://groups.google.com/group/comp.lang.javascript/msg/3405d277d37beac2\" rel=\"nofollow\">clj: A function to convert extended character ?</a></p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>Injecting untrusted HTML into the page is dangerous as explained in <a href=\"http://stackoverflow.com/questions/1147359/jquery-decode-html-entities#comments-2419664\">Jquery decode HTML entities</a>.</p>\n\n<p>One alternative is to use a JavaScript-only implementation of PHP's html_entity_decode (from <a href=\"http://phpjs.org/functions/html_entity_decode:424\">http://phpjs.org/functions/html_entity_decode:424</a>). The example would then be something like:</p>\n\n<pre><code>var varTitle = html_entity_decode(\"Chris&amp;apos; corner\");\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 7
                },
                {
                    "body": "<p>I recommend against using the jQuery code that was accepted as the answer. While it does not insert the string to decode into the page, it does cause things such as scripts and HTML elements to get created. This is way more code than we need. Instead, I suggest using a safer, more optimized function.</p>\n\n<pre><code>var decodeEntities = (function() {\n  // this prevents any overhead from creating the object each time\n  var element = document.createElement('div');\n\n  function decodeHTMLEntities (str) {\n    if(str &amp;&amp; typeof str === 'string') {\n      // strip script/html tags\n      str = str.replace(/&lt;script[^&gt;]*&gt;([\\S\\s]*?)&lt;\\/script&gt;/gmi, '');\n      str = str.replace(/&lt;\\/?\\w(?:[^\"'&gt;]|\"[^\"]*\"|'[^']*')*&gt;/gmi, '');\n      element.innerHTML = str;\n      str = element.textContent;\n      element.textContent = '';\n    }\n\n    return str;\n  }\n\n  return decodeHTMLEntities;\n})();\n</code></pre>\n\n<p><a href=\"http://jsfiddle.net/LYteC/4/\" rel=\"nofollow\">http://jsfiddle.net/LYteC/4/</a></p>\n\n<p>To use this function, just call <code>decodeEntities(\"&amp;amp;\")</code> and it will use the same underlying techniques as the jQuery version will\u2014but without jQuery's overhead, and after sanitizing the HTML tags in the input. See <a href=\"http://stackoverflow.com/questions/1147359/how-to-decode-html-entities-using-jquery#comment6018122_2419664\">Mike Samuel's comment</a> on the accepted answer for how to filter out HTML tags.</p>\n\n<p>This function can be easily used as a jQuery plugin by adding the following line in your project.</p>\n\n<pre><code>jQuery.decodeEntities = decodeEntities;\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 88
                },
                {
                    "body": "<p>I know I'm a bit late to the game, but I thought I might provide the following snippet as an example of how I decode HTML entities using jQuery:</p>\n\n<pre><code>var varTitleE = \"Chris&amp;apos; corner\";\nvar varTitleD = $(\"&lt;div/&gt;\").html(varTitleE).text();\n\nconsole.log(varTitleE + \" vs. \" + varTitleD);\u200b\u200b\u200b\u200b\u200b\u200b\u200b\u200b\u200b\u200b\u200b\n</code></pre>\n\n<p>Don't forget to fire-up your inspector/firebug to see the console results -- or simply replace console.log(...) w/alert(...)</p>\n\n<p>That said, here's what my console via the Google Chrome inspector read:</p>\n\n<pre><code>Chris&amp;apos; corner vs. Chris' corner\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>Like Robert K said, don't use jQuery.html().text() to decode html entities as it's unsafe because user input should never have access to the DOM. Read about <a href=\"https://en.wikipedia.org/wiki/Cross-site_scripting\" rel=\"nofollow\">XSS</a> for why this is unsafe.</p>\n\n<p>Instead try the <a href=\"http://underscorejs.org/\" rel=\"nofollow\">Underscore.js</a> utility-belt library which comes with <a href=\"http://underscorejs.org/#escape\" rel=\"nofollow\">escape</a> and <a href=\"http://underscorejs.org/#unescape\" rel=\"nofollow\">unescape</a> methods:</p>\n\n<p><a href=\"http://underscorejs.org/#escape\" rel=\"nofollow\"><strong>_.escape(string)</strong></a></p>\n\n<p>Escapes a string for insertion into HTML, replacing <code>&amp;</code>, <code>&lt;</code>, <code>&gt;</code>, <code>\"</code>, <code>`</code>, and <code>'</code> characters.</p>\n\n<pre><code>_.escape('Curly, Larry &amp; Moe');\n=&gt; \"Curly, Larry &amp;amp; Moe\"\n</code></pre>\n\n<p><a href=\"http://underscorejs.org/#unescape\" rel=\"nofollow\"><strong>_.unescape(string)</strong></a></p>\n\n<p>The opposite of escape, replaces <code>&amp;amp;</code>, <code>&amp;lt;</code>, <code>&amp;gt;</code>, <code>&amp;quot;</code>, <code>&amp;#96;</code> and <code>&amp;#x27;</code> with their unescaped counterparts.</p>\n\n<pre><code>_.unescape('Curly, Larry &amp;amp; Moe');\n=&gt; \"Curly, Larry &amp; Moe\"\n</code></pre>\n\n<p>To support decoding more characters, just copy the Underscore <a href=\"http://underscorejs.org/docs/underscore.html#section-137\" rel=\"nofollow\">unescape</a> method and add more characters to the map.</p>\n",
                    "is_accepted": false,
                    "score": 39
                },
                {
                    "body": "<p>Inspired by Robert K's solution, this version does not strip HTML tags, and is just as secure.</p>\n\n<pre><code>var decode_entities = (function() {\n    // Remove HTML Entities\n    var element = document.createElement('div');\n\n    function decode_HTML_entities (str) {\n\n        if(str &amp;&amp; typeof str === 'string') {\n\n            // Escape HTML before decoding for HTML Entities\n            str = escape(str).replace(/%26/g,'&amp;').replace(/%23/g,'#').replace(/%3B/g,';');\n\n            element.innerHTML = str;\n            if(element.innerText){\n                str = element.innerText;\n                element.innerText = '';\n            }else{\n                // Firefox support\n                str = element.textContent;\n                element.textContent = '';\n            }\n        }\n        return unescape(str);\n    }\n    return decode_HTML_entities;\n})();\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 12
                },
                {
                    "body": "<p>All the answers in this post are either unnecessarily slow or insecure with untrusted user inputs.</p>\n\n<pre><code>function decodeHTMLEntities(text) {\n    var entities = [\n        ['apos', '\\''],\n        ['amp', '&amp;'],\n        ['lt', '&lt;'],\n        ['gt', '&gt;']\n    ];\n\n    for (var i = 0, max = entities.length; i &lt; max; ++i) \n        text = text.replace(new RegExp('&amp;'+entities[i][0]+';', 'g'), entities[i][1]);\n\n    return text;\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 9
                },
                {
                    "body": "<p>I think that is the exact opposite of the solution chosen.</p>\n\n<pre><code>var decoded = $(\"&lt;div/&gt;\").text(encodedStr).html();\n</code></pre>\n\n<p>Try it :)</p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>To do it in pure javascript without jquery or predefining everything you can cycle the encoded html string through an elements innerHTML and innerText(/textContent) properties for every decode step that is required:</p>\n\n<pre><code>&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;For every decode step, cycle through innerHTML and innerText &lt;/title&gt;\n    &lt;script&gt;\nfunction decode(str) {\n  var d = document.createElement(\"div\");\n  d.innerHTML = str; \n  return typeof d.innerText !== 'undefined' ? d.innerText : d.textContent;\n}\n    &lt;/script&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;script&gt;\nvar encodedString = \"&amp;lt;p&amp;gt;name&amp;lt;/p&amp;gt;&amp;lt;p&amp;gt;&amp;lt;span style=\\\"font-size:xx-small;\\\"&amp;gt;ajde&amp;lt;/span&amp;gt;&amp;lt;/p&amp;gt;&amp;lt;p&amp;gt;&amp;lt;em&amp;gt;da&amp;lt;/em&amp;gt;&amp;lt;/p&amp;gt;\";\n    &lt;/script&gt;\n    &lt;input type=button onclick=\"document.body.innerHTML=decode(encodedString)\"/&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>Inspired by Robert K's solution, strips html tags and <strong>prevents executing scripts</strong> and eventhandlers like: <code>&lt;img src=fake onerror=\"prompt(1)\"&gt;</code>\nTested on latest Chrome, FF, IE (should work from IE9, but haven't tested).</p>\n\n<pre><code>var decodeEntities = (function () {\n        //create a new html document (doesn't execute script tags in child elements)\n        var doc = document.implementation.createHTMLDocument(\"\");\n        var element = doc.createElement('div');\n\n        function getText(str) {\n            element.innerHTML = str;\n            str = element.textContent;\n            element.textContent = '';\n            return str;\n        }\n\n        function decodeHTMLEntities(str) {\n            if (str &amp;&amp; typeof str === 'string') {\n                //called twice because initially text might be encoded like this: &amp;lt;img src=fake onerror=&amp;quot;prompt(1)&amp;quot;&amp;gt;\n                return getText(getText(str));\n            }\n        }\n        return decodeHTMLEntities;\n    })();\n</code></pre>\n\n<p>Simply call:</p>\n\n<pre><code>decodeEntities('&lt;img src=fake onerror=\"prompt(1)\"&gt;');\ndecodeEntities(\"&lt;script&gt;alert('aaa!')&lt;/script&gt;\");\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>jQuery provides a way to encode and decode html entities.</p>\n\n<p>If you use a \"&lt;div/&gt;\" tag, it will strip out all the html.</p>\n\n<pre><code>function htmlDecode(value) {\n    return $(\"&lt;div/&gt;\").html(value).text();\n}\n\nfunction htmlEncode(value) {\n    return $('&lt;div/&gt;').text(value).html();\n}\n</code></pre>\n\n<p>If you use a \"&lt;textarea/&gt;\" tag, it will preserve the html tags.</p>\n\n<pre><code>function htmlDecode(value) {\n    return $(\"&lt;textarea/&gt;\").html(value).text();\n}\n\nfunction htmlEncode(value) {\n    return $('&lt;textarea/&gt;').text(value).html();\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>To add yet another \"inspired by Robert K\" to the list, here is another <em>safe</em> version which <em>does not strip HTML tags</em>. Instead of running the whole string through the HTML parser, it pulls out only the entities and converts those.</p>\n\n<pre><code>var decodeEntities = (function() {\n    // this prevents any overhead from creating the object each time\n    var element = document.createElement('div');\n\n    // regular expression matching HTML entities\n    var entity = /&amp;(?:#x[a-f0-9]+|#[0-9]+|[a-z0-9]+);?/ig;\n\n    return function decodeHTMLEntities(str) {\n        // find and replace all the html entities\n        str = str.replace(entity, function(m) {\n            element.innerHTML = m;\n            return element.textContent;\n        });\n\n        // reset the value\n        element.textContent = '';\n\n        return str;\n    }\n})();\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                }
            ],
            "body": "<p>How do I encode and decode HTML entities using JavaScript or JQuery?</p>\n\n<pre><code>var varTitle = \"Chris&amp;apos; corner\";\n</code></pre>\n\n<p>I want it to be:</p>\n\n<pre><code>var varTitle = \"Chris' corner\";\n</code></pre>\n",
            "last_activity_date": 1425553820,
            "question_id": 5796718,
            "score": 55,
            "tags": [
                "javascript",
                "jquery",
                "html"
            ],
            "title": "HTML Entity Decode"
        },
        {
            "answer_count": 6,
            "answers": [
                {
                    "body": "<p>If there is no value in AEROTWIST or it is null or undefined the value assigned to the new AEROTWIST will be {} (a blank object)</p>\n",
                    "is_accepted": false,
                    "score": 3
                },
                {
                    "body": "<p>The <code>||</code> operator takes two values:</p>\n\n<pre><code>a || b\n</code></pre>\n\n<p>If a is <a href=\"http://www.sitepoint.com/javascript-truthy-falsy/\" rel=\"nofollow\">truthy</a>, it will return <code>a</code>. Otherwise, it will return <code>b</code>.</p>\n\n<p>The falsy values are <code>null</code>, <code>undefined</code>, <code>0</code>, <code>\"\"</code>, <code>NaN</code> and <code>false</code>. The truthy values are everything else.</p>\n\n<p>So if <code>a</code> has not been set (is it <code>undefined</code>) it will return <code>b</code>.</p>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<pre><code>var AEROTWIST = AEROTWIST || {};\n</code></pre>\n\n<p>Basically this line is saying set the <code>AEROTWIST</code> variable to the value of the <code>AEROTWIST</code> variable, or set it to an empty object.</p>\n\n<p>The double pipe <code>||</code> is an OR statement, and the second part of the OR is only executed if the first part returns false.</p>\n\n<p>Therefore, if <code>AEROTWIST</code> already has a value, it will be kept as that value, but if it hasn't been set before, then it will be set as an empty object.</p>\n\n<p>it's basically the same as saying this:</p>\n\n<pre><code>if(!AEROTWIST) {var AEROTWIST={};}\n</code></pre>\n\n<p>Hope that helps.</p>\n",
                    "is_accepted": false,
                    "score": 13
                },
                {
                    "body": "<p>Your guess as to the intent of <code>|| {}</code> is pretty close.</p>\n\n<p>This particular pattern when seen at the top of files is used to create a <em>namespace</em>, i.e. a named object under which functions and variables can be created without unduly polluting the global object.</p>\n\n<p>The reason <em>why</em> it's used is so that if you have two (or more) files:</p>\n\n<pre><code>var MY_NAMESPACE = MY_NAMESPACE || {};\nMY_NAMESPACE.func1 = {\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>var MY_NAMESPACE = MY_NAMESPACE || {};\nMY_NAMESPACE.func2 = {\n}\n</code></pre>\n\n<p>both of which share the same namespace it then doesn't matter in which order the two files are loaded, you still get <code>func1</code> and <code>func2</code> correctly defined within the <code>MY_NAMESPACE</code> object correctly.</p>\n\n<p>The first file loaded will <em>create</em> the initial <code>MY_NAMESPACE</code> object, and any subsequently loaded file will <em>augment</em> the object.</p>\n\n<p>Usefully, this also allows <em>asynchronous</em> loading of scripts that share the same namespace which can improve page loading times.  If the <code>&lt;script&gt;</code> tags have the <code>defer</code> attribute set you can't know in which order they'll be interpreted, so as described above this fixes that problem too.</p>\n",
                    "is_accepted": true,
                    "score": 97
                },
                {
                    "body": "<p>Another common use for || is to set a default value for an undefined function parameter also:</p>\n\n<pre><code>function display(a) {\n  a = a || 'default'; // here we set the default value of a to be 'default'\n  console.log(a);\n}\n\n// we call display without providing a parameter\ndisplay(); // this will log 'default'\ndisplay('test'); // this will log 'test' to the console\n</code></pre>\n\n<p>The equivalent in other programming usually is:</p>\n\n<pre><code>function display(a = 'default') {\n  // ...\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 2
                },
                {
                    "body": "<p>Notice that in some version of IE this code won't work as expected. Because the <code>var</code>, the variable is redefined <em>and</em> assigned so \u2013 if I recall correctly the issue \u2013 you'll end up to have always a new object. That should fix the issue:</p>\n\n<pre><code>var AEROTWIST;\nAEROTWIST = AEROTWIST || {};\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                }
            ],
            "body": "<p>Looking at an online source code I came across this at the top of several source files.</p>\n\n<pre><code>var FOO = FOO || {};\nFOO.Bar = \u2026;\n</code></pre>\n\n<p>But I have no idea what <code>|| {}</code> does.</p>\n\n<p>I know <code>{}</code> is equal to <code>new Object()</code> and I think the <code>||</code> is for something like \"if it already exists use its value else use the new object.</p>\n\n<p>Why would I see this at the top of a source file?</p>\n",
            "last_activity_date": 1417571361,
            "question_id": 6439579,
            "score": 52,
            "tags": [
                "javascript",
                "variable-declaration",
                "or-operator"
            ],
            "title": "What does &quot;var FOO = FOO || {}&quot; mean in Javascript?"
        },
        {
            "answer_count": 11,
            "answers": [
                {
                    "body": "<p>It's up to the user whether they want to use new tabs or new windows, it isn't the business of the developer to modify this behaviour. I do not think you can do it.</p>\n\n<p>Pet peeve of mine - I hate it when sites force me to open in a new window / tab - I am quite capable of making that decision for myself. Particularly when they do it in javascript - that is really unhelpful.</p>\n",
                    "is_accepted": false,
                    "score": 13
                },
                {
                    "body": "<p>You can, in Firefox it works, add the attribute target=\"_newtab\" to the anchor to force the opening of a new tab.</p>\n\n<pre><code>&lt;a href=\"some url\" target=\"_newtab\"&gt;content of the anchor&lt;/a&gt;\n</code></pre>\n\n<p>In javascript you can use</p>\n\n<pre><code>window.open('page.html','_newtab');\n</code></pre>\n\n<p>Said that, I partially agree with Sam. You shouldn't force user to open new pages or new tab without showing them a hint on what is going to happen <strong>before</strong> they click on the link.</p>\n\n<p>Let me know if it works on other browser too (I don't have a chance to try it on other browser than Firefox at the moment).</p>\n\n<p>Edit: added reference for ie7\nMaybe this link can be useful<br>\n<a href=\"http://social.msdn.microsoft.com/forums/en-US/ieextensiondevelopment/thread/951b04e4-db0d-4789-ac51-82599dc60405/\" rel=\"nofollow\">http://social.msdn.microsoft.com/forums/en-US/ieextensiondevelopment/thread/951b04e4-db0d-4789-ac51-82599dc60405/</a></p>\n",
                    "is_accepted": false,
                    "score": 91
                },
                {
                    "body": "<p>You can't directly control this, because it's an option controlled by Internet Explorer users.</p>\n\n<p>Opening pages using Window.open with a different window name will open in a new browser window like a popup, <em>OR</em> open in a new tab, if the user configured the browser to do so.</p>\n",
                    "is_accepted": true,
                    "score": 60
                },
                {
                    "body": "<p>I found out in Chrome,</p>\n\n<pre><code>window.open('page.html','_newtab')\n</code></pre>\n\n<p>will only work once.</p>\n\n<p>You can use:</p>\n\n<pre><code>window.open(ct.getNewHref(),'_newtab' + Math.floor(Math.random()*999999));\n</code></pre>\n\n<p>To open multiple new tabs.</p>\n",
                    "is_accepted": false,
                    "score": 2
                },
                {
                    "body": "<pre><code>&lt;a href=\"URL\" target=\"_newtab\"&gt;Link&lt;/a&gt;\n</code></pre>\n\n<p>This works on Firefox and Google Chrome.</p>\n",
                    "is_accepted": false,
                    "score": -2
                },
                {
                    "body": "<pre><code>&lt;a href=\"http://www.google.com/\" target=\"_self\"&gt;New Tab Example&lt;/a&gt;\n</code></pre>\n\n<p>Works in IE7.</p>\n\n<p>Regards,</p>\n\n<p>Glenn</p>\n",
                    "is_accepted": false,
                    "score": -8
                },
                {
                    "body": "<p>Have you already tried like</p>\n\n<pre><code>var open_link = window.open('','_blank');\nopen_link.location=\"somepage.html\";\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 6
                },
                {
                    "body": "<p>Those of you trying to use the following:</p>\n\n<pre><code>window.open('page.html', '_newtab');\n</code></pre>\n\n<p>should really look at the window.open method.</p>\n\n<p>All you are doing is telling the browser to open a new window NAMED \"_newtab\" and load page.html into it.  Every new page you load will load into that window. However, if a user has their browser set to open new pages in new tabs instead of new windows, it will open a tab.  Regardless, it's using the same name for the window or tab.</p>\n\n<p>If you want different pages to open in different windows or tabs you will have to change the NAME of the new window/tab to something different such as:</p>\n\n<pre><code>window.open('page2.html', '_newtab2');\n</code></pre>\n\n<p>Of course the name for the new window/tab could be any name like page1, page2, page3, etc. instead of _newtab2.</p>\n",
                    "is_accepted": false,
                    "score": 39
                },
                {
                    "body": "<p>The code I use with jQuery:</p>\n\n<pre><code>$(\"a.btn_external\").click(function() {\n    url_to_open = $(this).attr(\"href\");\n    window.open(url_to_open, '_blank');\n    return false;\n});\n</code></pre>\n\n<p>This is useful to distinguish between the click events of a parent in a child. By using this method, you do not trigger the parent's click event.</p>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>This may work if you can call a batch file (I use php with \nXP sp2 and IE8... you can try IE7, dunno). Use the following (or similar) in your .bat file to open Windows:\nStart \"\"C:\\Progra~1\\Intern~1\\iexplore \"http://www.site.com\". There is no space between the quotation mark and C:\\Progr... etc. At some point, this may begin to open new windows (i.e., target=\"_blank\") rather than new tabs, but works up to a point; not extensively tested. To use this in a regular batch file (CMD.exe), you probably need to have a window already open. Just sharing something I stumbled across. EDITED for clarification.</p>\n",
                    "is_accepted": false,
                    "score": -2
                },
                {
                    "body": "<p>If you wanted to you could use this method, which is a bit hacky, but would offer the desired functionality:</p>\n\n<pre><code>jQuery('&lt;a/&gt;', {\n    id: 'foo',\n    href: 'http://google.com',\n    title: 'Become a Googler',\n    rel: 'external',\n    text: 'Go to Google!',\n    target:'_blank',\n    style:'display:none;'\n}).appendTo('#mySelector');\n\n$('#foo').click()\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                }
            ],
            "body": "<p>I'm trying to \"force\" Safari or IE7 to open a new page <em>using a new tab</em>.</p>\n\n<p>Programmatically I mean something like:</p>\n\n<pre><code>window.open('page.html','newtaborsomething');\n</code></pre>\n",
            "last_activity_date": 1381188269,
            "question_id": 427479,
            "score": 79,
            "tags": [
                "javascript",
                "internet-explorer-7",
                "safari",
                "tabs"
            ],
            "title": "Programmatically open new pages on Tabs"
        },
        {
            "answer_count": 10,
            "answers": [
                {
                    "body": "<p>I'm going to assume that the two arrays you've given for PHP and JS are not related, and they're just examples of how arrays look in the two languages. Clearly you're not going to be able to convert those sequences of letters and numbers into those city names.</p>\n\n<p>PHP provides a function to convert PHP arrays into Javascript code: <a href=\"http://php.net/manual/en/function.json-encode.php\"><code>json_encode()</code></a>. (technically, it's JSON format; JSON stands for JavaScript Object Notation)</p>\n\n<p>Use it like this:</p>\n\n<pre><code>&lt;script type='text/javascript'&gt;\n&lt;?php\n$php_array = array('abc','def','ghi');\n$js_array = json_encode($php_array);\necho \"var javascript_array = \". $js_array . \";\\n\";\n?&gt;\n&lt;/script&gt;\n</code></pre>\n\n<p>See also the manual page I linked above for more information.</p>\n\n<p>Note that <code>json_encode()</code> is only available in PHP 5.2 and up, so if you're using an older version, you'll need to use <a href=\"http://pear.php.net/package/Services_JSON\">an existing one</a> -- the PHP manual page also includes comments with functions written by people who needed it. (but that said, if you're using anything older than PHP 5.2 you should upgrade ASAP; PHP is currently at v5.3, and even 5.2 is no longer supported)</p>\n",
                    "is_accepted": false,
                    "score": 180
                },
                {
                    "body": "<p>you can convert php arrays into javascript using php's <strong>json_encode()*</strong> function </p>\n\n<blockquote>\n<pre><code>&lt;?php $phpArray = array(\n          0 =&gt; 001-1234567, \n          1 =&gt; 1234567, \n          2 =&gt; 12345678, \n          3 =&gt; 12345678,\n          4 =&gt; 12345678,\n          5 =&gt; 'AP1W3242',\n          6 =&gt; 'AP7X1234',\n          7 =&gt; 'AS1234',\n          8 =&gt; 'MH9Z2324', \n          9 =&gt; 'MX1234', \n          10 =&gt; 'TN1A3242',\n          11 =&gt; 'ZZ1234'\n    )\n?&gt;\n</code></pre>\n</blockquote>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n\n    var jArray= &lt;?php echo json_encode($phpArray ); ?&gt;;\n\n    for(var i=0;i&lt;12;i++){\n        alert(jArray[i]);\n    }\n\n &lt;/script&gt;\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 12
                },
                {
                    "body": "<p><strong><a href=\"http://stackoverflow.com/a/5619038/367456\">Spudley's answer is fine</a>.</strong></p>\n\n<blockquote>\n  <p><strong>Security Notice:</strong> <em>The following should not be necessary any longer for you</em></p>\n</blockquote>\n\n<p>If you don't have PHP 5.2 you can use something like this:</p>\n\n<pre><code>function js_str($s)\n{\n    return '\"' . addcslashes($s, \"\\0..\\37\\\"\\\\\") . '\"';\n}\n\nfunction js_array($array)\n{\n    $temp = array_map('js_str', $array);\n    return '[' . implode(',', $temp) . ']';\n}\n\necho 'var cities = ', js_array($php_cities_array), ';';\n</code></pre>\n",
                    "is_accepted": true,
                    "score": 20
                },
                {
                    "body": "<p>For a <strong>multidimensional</strong> array in PHP4 you can use the following addition to the code posted by Udo G:</p>\n\n<pre><code>function js_str($s) {\n   return '\"'.addcslashes($s, \"\\0..\\37\\\"\\\\\").'\"';\n}\n\nfunction js_array($array, $keys_array) {\n  foreach ($array as $key =&gt; $value) {\n    $new_keys_array = $keys_array;\n    $new_keys_array[] = $key;\n    if(is_array($value)) {          \n      echo 'javascript_array';\n      foreach($new_keys_array as $key) {\n        echo '[\"'.$key.'\"]';\n      }\n      echo ' = new Array();';\n\n      js_array($value, $new_keys_array);\n    } else {\n      echo 'javascript_array';\n      foreach($new_keys_array as $key) {\n        echo '[\"'.$key.'\"]';\n      }\n      echo ' = '.js_str($value).\";\";                        \n    }\n  } \n}\n\necho 'var javascript_array = new Array();';\njs_array($php_array, array());\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>Dumb and simple :</p>\n\n<pre><code>var js_array = [&lt;?php echo '\"'.implode('\",\"', $php_array).'\"' ?&gt;];\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 14
                },
                {
                    "body": "<p>This is my function. JavaScript must be under PHP otherwise use SESSION.</p>\n\n<pre><code>&lt;?php\n $phpArray=array(1,2,3,4,5,6);\n?&gt;\n\n&lt;div id=\"arrayCon\" style=\"width:300px;\"&gt;&lt;/div&gt;\n\n&lt;script type=\"text/javascript\"&gt;\nvar jsArray = new Array();\n&lt;?php\n $numArray=count($phpArray);\n for($i=0;$i&lt;$numArray;$i++){\n  echo \"jsArray[$i] = \". $phpArray[$i] . \";\\n\";\n }\n?&gt;\n$(\"#arrayCon\").text(jsArray[1]);\n&lt;/script&gt;\n</code></pre>\n\n<p>Last row can be ....text(jsArray); and will be shown \"1,2,3,4,5,6\"</p>\n",
                    "is_accepted": false,
                    "score": 2
                },
                {
                    "body": "<p>You do not have to call parseJSON since the <strong>output of <code>json_decode</code> is a javascript literal.</strong> Just assign it to a js variable.</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n    //Assign php generated json to JavaScript variable\n    var tempArray = &lt;?php echo json_encode($php_array); ?&gt;;\n\n   //You will be able to access the properties as \n    alert(tempArray[0].Key);\n&lt;/script&gt;\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 7
                },
                {
                    "body": "<p>I had the same problem and this is how i done it. </p>\n\n<pre><code>/*PHP FILE*/\n\n&lt;?php\n\n$data = file_get_contents('http://yourrssdomain.com/rss');\n$data = simplexml_load_string($data);\n\n$articles = array();\n\nforeach($data-&gt;channel-&gt;item as $item){\n\n    $articles[] = array(\n\n        'title' =&gt; (string)$item-&gt;title,\n        'description' =&gt; (string)$item -&gt;description,\n        'link' =&gt; (string)$item -&gt;link, \n        'guid' =&gt; (string)$item -&gt;guid,\n        'pubdate' =&gt; (string)$item -&gt;pubDate,\n        'category' =&gt; (string)$item -&gt;category,\n\n    );  \n}\n\n// IF YOU PRINT_R THE ARTICLES ARRAY YOU WILL GET THE SAME KIND OF ARRAY THAT YOU ARE GETTING SO I CREATE AN OUTPUT STING AND WITH A FOR LOOP I ADD SOME CHARACTERS TO SPLIT LATER WITH JAVASCRIPT\n\n$output=\"\";\n\nfor($i = 0; $i &lt; sizeof($articles); $i++){\n\n    //# Items\n    //| Attributes \n\n    if($i != 0) $output.=\"#\"; /// IF NOT THE FIRST\n\n// IF NOT THE FIRST ITEM ADD '#' TO SEPARATE EACH ITEM AND THEN '|' TO SEPARATE EACH ATTRIBUTE OF THE ITEM \n\n    $output.=$articles[$i]['title'].\"|\";\n    $output.=$articles[$i]['description'].\"|\";\n    $output.=$articles[$i]['link'].\"|\";\n    $output.=$articles[$i]['guid'].\"|\";\n    $output.=$articles[$i]['pubdate'].\"|\";\n    $output.=$articles[$i]['category'];\n}\n\necho $output;\n\n?&gt;\n/* php file */\n\n\n/*AJAX COMUNICATION*/\n\n$(document).ready(function(e) {\n\n/*AJAX COMUNICATION*/\n\nvar prodlist= [];\nvar attrlist= [];\n\n  $.ajax({  \n      type: \"get\",  \n      url: \"php/fromupnorthrss.php\",  \n      data: {feeding: \"feedstest\"},\n      }).done(function(data) {\n\n        prodlist= data.split('#');\n\n        for(var i = 0; i &lt; prodlist.length; i++){\n\n            attrlist= prodlist[i].split('|');\n\n            alert(attrlist[0]); /// NOW I CAN REACH EACH ELEMENT HOW I WANT TO. \n        }\n   });\n});\n</code></pre>\n\n<p>I hope it helps. </p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>It can be done in a safer way, with only 1 line of code.</p>\n\n<p>If your PHP array contains special characters, you need to use rawurlencode() in PHP and then use decodeURIComponent() in JS to escape those. And parse the JSON to native js. Try this:</p>\n\n<pre><code>var data = JSON.parse(decodeURIComponent(\"&lt;?=rawurlencode(json_encode($data));?&gt;\"));\nconsole.log(data);\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>I find the quickest and easiest way to work with a PHP array in Javascript is to do this:</p>\n\n<p>PHP:</p>\n\n<pre><code>$php_arr = array('a','b','c','d');\n</code></pre>\n\n<p>Javascript:</p>\n\n<pre><code>//this gives me a JSON object\njs_arr = '&lt;?php echo JSON_encode($php_arr);?&gt;';\n\n\n//Depending on what I use it for I sometimes parse the json so I can work with a straight forward array:\njs_arr = JSON.parse('&lt;?php echo JSON_encode($php_arr);?&gt;');\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 2
                }
            ],
            "body": "<p>How can I convert a PHP array in a format like this</p>\n\n<pre><code>Array\n(\n    [0] =&gt; 001-1234567\n    [1] =&gt; 1234567\n    [2] =&gt; 12345678\n    [3] =&gt; 12345678\n    [4] =&gt; 12345678\n    [5] =&gt; AP1W3242\n    [6] =&gt; AP7X1234\n    [7] =&gt; AS1234\n    [8] =&gt; MH9Z2324\n    [9] =&gt; MX1234\n    [10] =&gt; TN1A3242\n    [11] =&gt; ZZ1234\n)\n</code></pre>\n\n<p>to a Javascript array in the format below?</p>\n\n<pre><code>var cities = [\n    \"Aberdeen\",\n    \"Ada\",\n    \"Adamsville\",\n    \"Addyston\",\n    \"Adelphi\",\n    \"Adena\",\n    \"Adrian\",\n    \"Akron\",\n    \"Albany\"\n];\n</code></pre>\n",
            "last_activity_date": 1410960850,
            "question_id": 5618925,
            "score": 45,
            "tags": [
                "php",
                "javascript",
                "arrays"
            ],
            "title": "Convert php array to Javascript"
        },
        {
            "answer_count": 5,
            "answers": [
                {
                    "body": "<p>You can, but it's rather cumbersome. The best reference on how to do it is the following article: <a href=\"http://www.hunlock.com/blogs/Totally_Pwn_CSS_with_Javascript\">Totally Pwn CSS with Javascript</a>.</p>\n\n<p>I managed to get it to work with Firefox and IE - <del>I couldn't in Chrome, though it appears that it supports the DOM methods.</del><a href=\"http://stackoverflow.com/users/695639/ricosrealm\">ricosrealm</a> reports that it works in Chrome, too.</p>\n",
                    "is_accepted": true,
                    "score": 25
                },
                {
                    "body": "<p>While <code>setAttribute</code> is nice, there is a standard way of doing this across most browsers:</p>\n\n<pre><code>htmlElement.className = 'someClass';\n</code></pre>\n\n<p>To do it over many elements, you will need a cross browser solution:</p>\n\n<pre><code>function getElementsByClassName( className, context, tagName ) {\n  context = context || document;\n  if ( typeof context.getElementsByClassName === 'function' )\n    return context.getElementsByClassName( className );\n\n  if ( typeof context.getElementsByTagName !== 'function' )\n    return [];\n\n  var elements = typeof tagName === 'string' ? context.getElementsByTagName( tagName ) :\n    context.getElementsByTagName('*'),\n  ret = [];\n  for ( var i = 0, il = elements.length; i &lt; il; i++ )\n    if ( elements[ i ].className.match( className ) )\n      ret.push( elements[ i ] );\n\n  return ret;\n}\n\nvar elements = getElementsByClassName('someClass');\n\nfor ( var i = 0, il = elements.length; i &lt; il; i++ )\n  elements[ i ].className = 'newClass';\n</code></pre>\n\n<p>You may want to replace the line:</p>\n\n<pre><code>if ( elements[ i ].className.match( className ) )\n</code></pre>\n\n<p>With some Regular Expression, but you will have to escape special characters in that case.</p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>Depending on what you're trying to achieve, a better solution might be to change/add a class to a containing element (body would do!), and define classes accordingly.</p>\n\n<pre class=\"lang-css prettyprint-override\"><code>.yourclass { color: black }\n#wrapper.foo .yourclass { color: red }\n#waraper.bar .yourclass { color: blue }\n</code></pre>\n\n<p>then you can just use</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>document.getElementById('wrapper').className='foo';\n</code></pre>\n\n<p>(or your chosen js framework's wrapper for the same) to change everything with class <code>yourclass</code> inside whatever your <code>wrapper</code> element is.</p>\n\n<p>((parenthetically) is there any way to stop the SO formatter from assuming stuff starting with a <code>#</code> is a comment?)</p>\n",
                    "is_accepted": false,
                    "score": 3
                },
                {
                    "body": "<p>The APIs for editing stylesheets with JS are, sadly, not consistent across browsers. The <a href=\"http://developer.yahoo.com/yui/stylesheet/\" rel=\"nofollow\">YUI Stylesheet Utility</a> attempts to smooth over these differences so you could just use that. You could also look at <a href=\"http://github.com/yui/yui2/blob/c162da710816a67bd7738fdcfecdc88ae2174d47/src/stylesheet/js/stylesheet.js\" rel=\"nofollow\">the source code</a> to figure out how it works if you don't want to use YUI itself.</p>\n",
                    "is_accepted": false,
                    "score": 4
                },
                {
                    "body": "<p>I tried the code via link from @alex-gyoshev comment, but it dosn't work</p>\n\n<ol>\n<li>it fails on the CSS rules with Google fonts in Chrome</li>\n<li>it fails on FireFox security checks</li>\n</ol>\n\n<p>So I changed it slightly, but deleted <code>delete</code> functionality since it wasn't needed for me. Checked in IE 11, FireFox 32, Chrome 37 and Opera 26.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>function getCSSRule(ruleName) {               // Return requested style obejct\nruleName = ruleName.toLowerCase();                       // Convert test string to lower case.\nvar styleSheet;          \nvar i, ii;                                        \nvar cssRule = false;                               // Initialize cssRule. \nvar cssRules;\nif (document.styleSheets) {                            // If browser can play with stylesheets\n    for (i = 0; i &lt; document.styleSheets.length; i++) { // For each stylesheet\n        styleSheet = document.styleSheets[i];\n        if (!styleSheet.href) {\n            if (styleSheet.cssRules) {                    // Browser uses cssRules?\n                cssRules = styleSheet.cssRules;         // Yes --Mozilla Style\n            } else {                                      // Browser usses rules?\n                cssRules = styleSheet.rules;            // Yes IE style. \n            }                                             // End IE check.\n            if (cssRules) {\n                for (ii = 0; ii &lt; cssRules.length; ii++) {\n                    cssRule = cssRules[ii];\n                    if (cssRule) {                               // If we found a rule...\n                        // console.log(cssRule);\n                        if (cssRule.selectorText) {\n                            console.log(cssRule.selectorText);\n                            if (cssRule.selectorText.toLowerCase() == ruleName) { //  match ruleName?\n                                return cssRule;                      // return the style object.\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n}\nreturn false;                                          // we found NOTHING!\n</code></pre>\n\n<p>}</p>\n",
                    "is_accepted": false,
                    "score": 1
                }
            ],
            "body": "<p>Is it possible to make changes to a CSS rule-set dynamically (i.e. some JS which would change a CSS rule-set when the user clicks a widget)</p>\n\n<p>This particular CSS rule-set is applied to lots of elements (via a class selector) on the page and I want to modify it when the user clicks the widget, so that all the elements having the class change.</p>\n",
            "last_activity_date": 1416586267,
            "question_id": 1409225,
            "score": 28,
            "tags": [
                "javascript",
                "css"
            ],
            "title": "Changing a CSS rule-set from Javascript"
        },
        {
            "answer_count": 4,
            "answers": [
                {
                    "body": "<p>In Javascript, only function calls establish a new <code>this</code> context. When you call <code>foo.bar()</code>, within the <code>bar</code> function, <code>this</code> will be bound to <code>foo</code>; when you call <code>foo()</code>, inside it <code>this</code> will be bound to <code>window</code>. An object literal constructor is not a method call, so it does not affect <code>this</code> in any way; it will still refer to whatever it was referring to outside of the object literal.</p>\n",
                    "is_accepted": false,
                    "score": 2
                },
                {
                    "body": "<p>I think you may be missing a key difference between functions and object literals:</p>\n\n<p>The body of a function is not evaluated until the function is called.</p>\n\n<p>The body of an object literal is evaluated right away.</p>\n\n<p>When you define a function, <code>this</code> isn't bound to anything related to the function you're defining. But by the time the function is <em>called</em>, it is bound to the object on which the function was called as a method.</p>\n",
                    "is_accepted": false,
                    "score": 2
                },
                {
                    "body": "<p><code>this.foo</code> is undefined because in all your examples, <code>this</code> is referring to the global <code>window</code> object. Also, even if you tried <code>obj1.foo</code>, it will <em>still</em> return undefined because the property hasn't been created until the entire expression is evaluated. Try this instead:</p>\n\n<pre><code>var obj1 = {\n    foo: new Date(),\n    bar: function() {\n        return new MyDate( this.foo ); // will work\n    }\n};\n</code></pre>\n\n<p>It works because by the time you call <code>obj1.bar()</code>, the object will have been created by then; and because you're in a function, the <code>this</code> object will reference the current object.</p>\n",
                    "is_accepted": false,
                    "score": 2
                },
                {
                    "body": "<p>Javascript is a late binding language. In fact, it is very late binding. Not only is <code>this</code> not bound during compile time, it is not even bound during runtime (as most other late binding languages do). In javascript, <code>this</code> is bound during call time.</p>\n\n<p>The binding rules are quite different from most other OO languages which is why it seems to confuse a lot of people not familiar with javascript.</p>\n\n<p>The rules are:</p>\n\n<p><strong>1</strong> - When a function is called as a constructor, a new object is created and <code>this</code> is bound to that object. For example:</p>\n\n<pre><code>function Foo () {\n    this.bar = 1; // when called with the new keyword\n                  // this refers to the object just created\n}\nnew Foo().bar;\n</code></pre>\n\n<p><strong>2</strong> - When called as an object method <code>this</code> refers to the object the method belongs to. Basically the name before the last dot. For example:</p>\n\n<pre><code>foo.bar = 1;\nfoo.baz = function () {\n    alert(this.bar); // this refers to foo when called as foo.baz()\n}\nfoo.baz();\n</code></pre>\n\n<p><strong>3</strong> - If used outside of any function or if a function is not called as a method <code>this</code> refers to the global object. The javascript spec doesn't give a name to the global object apart from saying that one exists but for browsers it is traditionally called <code>window</code>. For example:</p>\n\n<pre><code>bar = 1;\nalert(this.bar); // this refers to the global object\nfoo = {\n    bar: this.bar // also global object\n}\nfunction foofoo () {\n    alert(this.bar); // also refers to the global object\n}\nfoofoo();\n</code></pre>\n\n<p><strong>4</strong> - In an event handler (such as onclick etc.) <code>this</code> refers to the DOM element that triggered the event. Or for events not associated with the DOM like <code>setTimeout</code> or <code>XMLHTTPRequest</code>, <code>this</code> refers to the global object. For example:</p>\n\n<pre><code>foo.bar = 1;\nfoo.baz = function () {\n    alert(this.bar); // this would normally be foo but if this\n                     // function is assigned to an event it would\n                     // point to the element that triggered the event\n}\nsomediv.bar = 2;\nsomediv.onclick = foo.baz; // clicking on somedive alerts 2 instead of 1\n</code></pre>\n\n<p><strong>5</strong> - Finally, when a function is called using either the <code>call()</code> or <code>apply()</code> methods <code>this</code> can be reassigned to anything whatsoever (google \"mdn function.prototype.call\"). In this way, any object in javascript can borrow/steal another objects' methods. For example:</p>\n\n<pre><code>cat = {\n    type: \"cat\",\n    explain: function () {\n        return \"I am a \" + this.type;\n    }\n}\ndog = {\n    type: \"dog\"\n}\ncat.explain.call(dog); // returns \"I am a dog\"\n</code></pre>\n\n<hr>\n\n<p>Update:</p>\n\n<p>With <code>Function.bind()</code> in modern javascript implementations we now have another rule:</p>\n\n<p><strong>6</strong> - Functions can also explicitly bind <code>this</code> to an object using the <code>bind()</code> method. The <code>bind</code> method returns a new instance of the function where <code>this</code> is bound to the argument passed to <code>bind</code>. For example:</p>\n\n<pre><code>function explain () {\n    return \"I am a \" + this.type;\n}\ndog = {\n    type: \"dog\"\n}\nvar dog_explain = explain.bind(dog);\ndog_explain(); // returns \"I am a dog\"\n</code></pre>\n\n<hr>\n\n<p>More update:</p>\n\n<p>ECMAscript 5 introduced strict mode which changes the meaning of this in functions that isn't called as a method or called with call or apply so we have to add a new rule:</p>\n\n<p><strong>7</strong> - When in strict mode, <code>this</code> isn't allowed to refer to the global object (window in browsers). So when a function is not called as a method or <code>this</code> isn't bound to anything manually via <code>call</code> or <code>apply</code> or <code>bind</code> then <code>this</code> becomes <code>undefined</code>:</p>\n\n<pre><code>\"use strict\";\nfunction foo () {\n    return this;\n}\nfoo(); // returns undefined instead of the global object\n</code></pre>\n",
                    "is_accepted": true,
                    "score": 19
                }
            ],
            "body": "<p>I've seen <a href=\"http://stackoverflow.com/questions/133973/how-does-this-keyword-work-within-a-javascript-object-literal\">How does &quot;this&quot; keyword work within a JavaScript object literal?</a>, but I don't see that it answers the following.</p>\n\n<p>Given this code:</p>\n\n<pre><code>var MyDate = function(date) {\n    this.date = date;\n};\n\nvar obj1 = {\n    foo: new Date(),\n    bar: new MyDate(this.foo)  //  this.foo is undefined\n};\n\nvar obj2 = {};\nobj2.foo = new Date();\nobj2.bar = new MyDate(this.foo);  //  this.foo is undefined\n\nvar obj3 = {\n    foo: new Date(),\n    bar: new MyDate(obj3.foo)\n};\n\nvar obj4 = {};\nobj4.foo = new Date();\nobj4.bar = new MyDate(obj4.foo);\n</code></pre>\n\n<p>Why do the first two attempts fail, but the last two work?  If <code>this</code> isn't bound to the current object literal, what <em>is</em> it bound to?</p>\n",
            "last_activity_date": 1403237496,
            "question_id": 13441307,
            "score": 9,
            "tags": [
                "javascript"
            ],
            "title": "How does the &quot;this&quot; keyword in Javascript act within an object literal?"
        },
        {
            "answer_count": 2,
            "answers": [
                {
                    "body": "<p><a href=\"http://wiki.greasespot.net/@grant\">Greasemonkey 1.0, radically changed the way the sandbox works</a>, busting thousands of scripts. This is a huge problem, and I hope you will join me in voicing your opinion/experiences on <a href=\"https://github.com/greasemonkey/greasemonkey/issues/1614\">the principle bug report for this issue</a>.</p>\n\n<p><a href=\"http://www.greasespot.net/2012/08/greasemonkey-10-jquery-broken-with.html\">The Greasemonkey blog claims that you can workaround the issue with the following</a>:</p>\n\n<pre><code>this.$ = this.jQuery = jQuery.noConflict(true);\n</code></pre>\n\n<p>... Which I'm not sure will work in all cases. But I'm not going to test it, since it is the exact wrong approach from a side-effects-avoiding, <a href=\"http://c2.com/cgi/wiki?DontRepeatYourself\">DRY-principle</a>, atomic-coding philosophy. \u00a0 In my <em>opinion</em>, the best strategy is to restore the sandbox, this is what I have successfully done with 104 scripts so far.</p>\n\n<p>Reactivate the sandbox by specifying a <code>@grant</code> value (other than <code>none</code>). Edit your <strong><a href=\"http://wiki.greasespot.net/Metadata_Block\">Metadata Block</a> to end with the following lines</strong>:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>// @grant       GM_addStyle\n// ==/UserScript==\n/*- The @grant directive is needed to work around a design change introduced in GM 1.0,\n    It restores the sandbox.\n*/\n</code></pre>\n\n<p>The sandbox will be restored and all conflicts will be resolved.</p>\n\n<hr>\n\n<p>You might also consider switching to <a href=\"https://addons.mozilla.org/en-US/firefox/addon/scriptish/\">Scriptish</a>, which has offered superior features and performance in the past, and does not suffer from this new sandbox behavior.</p>\n",
                    "is_accepted": true,
                    "score": 7
                },
                {
                    "body": "<p>Had the same problem.</p>\n\n<p>Since GM version 1.0 , all my scripts that <code>@require</code> jQuery, running on sites that also uses jQuery stopped working.</p>\n\n<p>I know, I could try something like <code>$ = unsafeWindow.$</code> , but that is not the point.</p>\n\n<p>The point here is that they used to work, and now they wont.</p>\n\n<p>Adding <code>@grant GM_log</code> fixed them.</p>\n",
                    "is_accepted": false,
                    "score": 2
                }
            ],
            "body": "<p>Ever since the new Greasemonkey 1.0 was released a few days ago, every site that has jQuery and where I use jQuery in my Greasemonkey script do not run my script properly. The jQuery I have in my GS script (using the <code>@require</code> metadata) conflicts with the page's jQuery. This is due to the new <a href=\"http://wiki.greasespot.net/@grant\"><code>@grant</code></a> code.</p>\n\n<p>I've read the documentation but still don't know how to run GS scripts in a sandbox again; the only options seem to be to either grant access to a GS API or to grant it to none and run the script without any security limitations, which doesn't work at all for me when I've designed my dozens of GS scripts to run WITH security limitations and like it that way.</p>\n",
            "last_activity_date": 1367664440,
            "question_id": 12146445,
            "score": 10,
            "tags": [
                "javascript",
                "jquery",
                "firefox",
                "greasemonkey"
            ],
            "title": "jQuery in Greasemonkey 1.0 conflicts with websites using jQuery"
        },
        {
            "answer_count": 2,
            "answers": [
                {
                    "body": "<blockquote>\n  <p>I basically want to post data without having the page reloaded</p>\n</blockquote>\n\n<p>Use <a href=\"http://api.jquery.com/jQuery.post/\" rel=\"nofollow\">jQuery's <code>$.post(...)</code></a></p>\n\n<p>Cheers</p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>Are you familiar with AJAX?  Forgive me if you know this already, but in case you don't:</p>\n\n<p>Ajax posts data to an external php file, which processes the data it receives, and sends back an answer.  It looks like this:</p>\n\n<p>FILE #1:</p>\n\n<pre><code>&lt;html&gt;\n    &lt;head&gt;\n        &lt;script src=\"//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js\"&gt;&lt;/script&gt;\n        &lt;script type=\"text/javascript\"&gt;\n            $(document).ready(function() {\n                $('#Sel').change(function() {\n                    var opt = $(this).val();\n                    var someelse = 'Hello';\n                    var more_stuff = 'Goodbye';\n                    $.ajax({\n                        type: \"POST\",\n                        url: \"receiving_file.php\",\n                        data: 'selected_opt=' + opt + '&amp;something_else=' +someelse+'&amp;more_stuff='+more_stuff,\n                        success:function(data){\n                            alert('This was sent back: ' + data);\n                        }\n                    });\n                });\n            });\n        &lt;/script&gt;\n    &lt;/head&gt;\n&lt;body&gt;\n\n&lt;select id = \"Sel\"&gt;\n    &lt;option value =\"Song1\"&gt;default value&lt;/option&gt;\n    &lt;option value =\"Song2\"&gt;Break on through&lt;/option&gt;\n    &lt;option value =\"Song3\"&gt;Time&lt;/option&gt;\n    &lt;option value =\"Song4\"&gt;Money&lt;/option&gt;\n    &lt;option value=\"Song5\"&gt;Saucerful of Secrets&lt;/option&gt;\n&lt;/select&gt;\n</code></pre>\n\n<p>FILE #2: receiving_file.php</p>\n\n<pre><code>&lt;?php\n    $recd = $_POST['selected_opt'];\n    echo 'You chose: ' . $recd;\n</code></pre>\n",
                    "is_accepted": true,
                    "score": 3
                }
            ],
            "body": "<p>Well here's what I got, basically a button is clicked and the following code is executed:</p>\n\n<pre><code>    Readthis = \"MonsterRequest.php?id=&lt;?php echo $_REQUEST['id']; ?&gt;&amp;Mon=\";\n    TestVar = TestVar.replace(/\\s/g, \"\");\n    Readthis = Readthis + htmlencode(TestVar);\n    $('#CenterPiece').load(Readthis); \n</code></pre>\n\n<p>Everything seems to work as intended except for when passed to Monsterequest.php, the post isn't being passed onto it's self and the page basically reloads it's self as it was being passed onto the main parent...(I was unsure if it was but monsterrequest.php seems to work perfectly fine on it's own however when loaded it doesn't work as intended at all and I'm completely stumped. I basically want to post data without having the page reloaded.</p>\n\n<p>Monsterrequest.php:\n<a href=\"http://pastebin.com/fiFjjBZg\" rel=\"nofollow\">http://pastebin.com/fiFjjBZg</a></p>\n",
            "last_activity_date": 1370042435,
            "question_id": 13734395,
            "score": 1,
            "tags": [
                "php",
                "javascript",
                "jquery",
                "html",
                "post"
            ],
            "title": "Form inside of $.load not posting correctly"
        },
        {
            "answer_count": 11,
            "answers": [
                {
                    "body": "<p>Try this code:</p>\n\n<pre><code>$(this).children()[0]\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 12
                },
                {
                    "body": "<p>Without knowing the ID of the DIV I think you could select the IMG like this:</p>\n\n<pre><code>$(\"#\"+$(this).attr(\"id\")+\" img:first\")\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 18
                },
                {
                    "body": "<p>You could also use</p>\n\n<pre><code>$(this).find('img');\n</code></pre>\n\n<p>which would return all <code>img</code>s that are descendants of the <code>div</code></p>\n",
                    "is_accepted": false,
                    "score": 362
                },
                {
                    "body": "<p>The jQuery constructor accepts a 2nd parameter called <a href=\"http://api.jquery.com/jQuery/#jQuery-selector-context\"><code>context</code></a> which can be used to override the context of the selection. </p>\n\n<pre><code>jQuery(\"img\", this);\n</code></pre>\n\n<p>Which is the same as using <a href=\"http://api.jquery.com/find\"><code>.find()</code></a> like this:</p>\n\n<pre><code>jQuery(this).find(\"img\");\n</code></pre>\n\n<p>If the imgs you desire are <strong>only</strong> direct descendants of the clicked element, you can also use <a href=\"http://api.jquery.com/children\"><code>.children()</code></a>:</p>\n\n<pre><code>jQuery(this).children(\"img\");\n</code></pre>\n",
                    "is_accepted": true,
                    "score": 1978
                },
                {
                    "body": "<p>If your DIV tag is immediately followed by the IMG tag, you can also use:</p>\n\n<pre><code>$(this).next();\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 54
                },
                {
                    "body": "<p>If you need to get the first <code>img</code> that's down exactly one level, you can do </p>\n\n<pre><code>$(this).children(\"img:first\")\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 90
                },
                {
                    "body": "<p>The <em>direct</em> children is </p>\n\n<pre><code>$('&gt; .child', this)\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 35
                },
                {
                    "body": "<p>You can find all img element of parent div like below</p>\n\n<pre><code>$(this).find('img') or $(this).children('img')\n</code></pre>\n\n<p>If you want specific img element you can write like this</p>\n\n<pre><code>$(this).children('img:nth(n)')  \n// where n is the child place in parent list start from 0 onwards\n</code></pre>\n\n<p>Your div contain only one img element. So for this below is right</p>\n\n<pre><code> $(this).find(\"img\").attr(\"alt\")\n                  OR\n  $(this).children(\"img\").attr(\"alt\")\n</code></pre>\n\n<p>But if your div contain more img element like below </p>\n\n<pre><code>&lt;div class=\"mydiv\"&gt;\n    &lt;img src=\"test.png\" alt=\"3\"&gt;\n    &lt;img src=\"test.png\" alt=\"4\"&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>then you can't use upper code to find alt value of second img element. So you can try this:</p>\n\n<pre><code> $(this).find(\"img:last-child\").attr(\"alt\")\n                   OR\n $(this).children(\"img:last-child\").attr(\"alt\")\n</code></pre>\n\n<p>This example shows a general idea that how you can find actual object within parent object.\nYou can use classes to differentiate your child object. That is easy and fun. i.e.</p>\n\n<pre><code>&lt;div class=\"mydiv\"&gt;\n    &lt;img class='first' src=\"test.png\" alt=\"3\"&gt;\n    &lt;img class='second' src=\"test.png\" alt=\"4\"&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>You can do this as below :</p>\n\n<pre><code> $(this).find(\".first\").attr(\"alt\")\n</code></pre>\n\n<p>and more specific as:</p>\n\n<pre><code> $(this).find(\"img.first\").attr(\"alt\")\n</code></pre>\n\n<p>You can use find or children as above code. For more visit Children <a href=\"http://api.jquery.com/children/\">http://api.jquery.com/children/</a> and Find <a href=\"http://api.jquery.com/find/\">http://api.jquery.com/find/</a>. \nSee example <a href=\"http://jsfiddle.net/lalitjs/Nx8a6/\">http://jsfiddle.net/lalitjs/Nx8a6/</a></p>\n",
                    "is_accepted": false,
                    "score": 18
                },
                {
                    "body": "<p>jQuery's <code>each</code> is one option:</p>\n\n<pre><code>&lt;div id=\"test\"&gt;\n    &lt;img src=\"testing.png\"/&gt;\n    &lt;img src=\"testing1.png\"/&gt;\n&lt;/div&gt;\n\n$('#test img').each(function(){\n    console.log($(this).attr('src'));\n});\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 4
                },
                {
                    "body": "<p>You can use <a href=\"http://api.jquery.com/child-selector/\" rel=\"nofollow\">Child Selecor</a> to reference the child elements available within the parent.</p>\n\n<pre><code>$(' &gt; img', this).attr(\"src\");\n</code></pre>\n\n<p>And the below is if you don't have reference to <code>$(this)</code> and you want to reference <code>img</code> available within a <code>div</code> from other function.</p>\n\n<pre><code> $('#divid &gt; img').attr(\"src\");\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>Ways to refer to a child in jQuery. I summarized it in the following jQuery: </p>\n\n<pre><code>$(this).find(\"img\"); // any img tag child or grandchild etc...   \n$(this).children(\"img\"); //any img tag child that is direct descendant \n$(this).find(\"img:first\") //any img tag first child or first grandchild etc...\n$(this).children(\"img:first\") //the first img tag  child that is direct descendant \n$(this).children(\"img:nth-child(1)\") //the img is first direct descendant child\n$(this).next(); //the img is first direct descendant child\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                }
            ],
            "body": "<p>I have a layout similar to this</p>\n\n<pre><code>&lt;div id=\"...\"&gt;&lt;img src=\"...\"&gt;&lt;/div&gt;\n</code></pre>\n\n<p>I would like to use a jQuery selector to select the child <code>img</code> inside of the <code>div</code> on click</p>\n\n<p>To get the <code>div</code>, I've got this selector:</p>\n\n<pre><code>$(this)\n</code></pre>\n\n<p>How do I get the <code>img</code> with a selector?</p>\n",
            "last_activity_date": 1422192303,
            "question_id": 306583,
            "score": 1326,
            "tags": [
                "javascript",
                "jquery",
                "jquery-selectors",
                "this"
            ],
            "title": "$(this) selector and children?"
        },
        {
            "answer_count": 10,
            "answers": [
                {
                    "body": "<p>You could always listen to the window resize event. If, on that event, the window went from being taller than it is wide to wider than it is tall (or vice versa), you can be pretty sure the phone orientation was just changed.</p>\n",
                    "is_accepted": false,
                    "score": 12
                },
                {
                    "body": "<p>To detect an orientation change on an Android browser, attach a listener to the <code>orientationchange</code> or <code>resize</code> event on <code>window</code>:</p>\n\n<pre><code>// Detect whether device supports orientationchange event, otherwise fall back to\n// the resize event.\nvar supportsOrientationChange = \"onorientationchange\" in window,\n    orientationEvent = supportsOrientationChange ? \"orientationchange\" : \"resize\";\n\nwindow.addEventListener(orientationEvent, function() {\n    alert('HOLY ROTATING SCREENS BATMAN:' + window.orientation + \" \" + screen.width);\n}, false);\n</code></pre>\n\n<p>Check the <code>window.orientation</code> property to figure out which way the device is oriented. With Android phones, <code>screen.width</code> or <code>screen.height</code> also updates as the device is rotated. (this is not the case with the iPhone).</p>\n",
                    "is_accepted": true,
                    "score": 165
                },
                {
                    "body": "<p>The actual <strong>behavior across different devices is inconsistent</strong>. The resize and orientationChange events can fire in a different sequence with varying frequency. Also, some values (e.g. screen.width and window.orientation) don't always change when you expect. <strong>Avoid screen.width</strong> -- it doesn't change when rotating in iOS.</p>\n\n<p><strong>The reliable approach is to listen to both resize and orientationChange events</strong> (with some polling as a safety catch), and you'll eventually get a valid value for the orientation. In my testing, Android devices occasionally fail to fire events when rotating a full 180 degrees, so I've also included a setInterval to poll the orientation.</p>\n\n<pre><code>var previousOrientation = window.orientation;\nvar checkOrientation = function(){\n    if(window.orientation !== previousOrientation){\n        previousOrientation = window.orientation;\n        // orientation changed, do your magic here\n    }\n};\n\nwindow.addEventListener(\"resize\", checkOrientation, false);\nwindow.addEventListener(\"orientationchange\", checkOrientation, false);\n\n// (optional) Android doesn't always fire orientationChange on 180 degree turns\nsetInterval(checkOrientation, 2000);\n</code></pre>\n\n<p>Here are the results from the four devices that I've tested (sorry for the ASCII table, but it seemed like the easiest way to present the results). Aside from the consistency between the iOS devices, there is a lot of variety across devices. NOTE: The events are listed in the order that they fired.</p>\n\n<pre>\n|==============================================================================|\n|     Device     | Events Fired      | orientation | innerWidth | screen.width |\n|==============================================================================|\n| iPad 2         | resize            | 0           | 1024       | 768          |\n| (to landscape) | orientationchange | 90          | 1024       | 768          |\n|----------------+-------------------+-------------+------------+--------------|\n| iPad 2         | resize            | 90          | 768        | 768          |\n| (to portrait)  | orientationchange | 0           | 768        | 768          |\n|----------------+-------------------+-------------+------------+--------------|\n| iPhone 4       | resize            | 0           | 480        | 320          |\n| (to landscape) | orientationchange | 90          | 480        | 320          |\n|----------------+-------------------+-------------+------------+--------------|\n| iPhone 4       | resize            | 90          | 320        | 320          |\n| (to portrait)  | orientationchange | 0           | 320        | 320          |\n|----------------+-------------------+-------------+------------+--------------|\n| Droid phone    | orientationchange | 90          | 320        | 320          |\n| (to landscape) | resize            | 90          | 569        | 569          |\n|----------------+-------------------+-------------+------------+--------------|\n| Droid phone    | orientationchange | 0           | 569        | 569          |\n| (to portrait)  | resize            | 0           | 320        | 320          |\n|----------------+-------------------+-------------+------------+--------------|\n| Samsung Galaxy | orientationchange | 0           | 400        | 400          |\n| Tablet         | orientationchange | 90          | 400        | 400          |\n| (to landscape) | orientationchange | 90          | 400        | 400          |\n|                | resize            | 90          | 683        | 683          |\n|                | orientationchange | 90          | 683        | 683          |\n|----------------+-------------------+-------------+------------+--------------|\n| Samsung Galaxy | orientationchange | 90          | 683        | 683          |\n| Tablet         | orientationchange | 0           | 683        | 683          |\n| (to portrait)  | orientationchange | 0           | 683        | 683          |\n|                | resize            | 0           | 400        | 400          |\n|                | orientationchange | 0           | 400        | 400          |\n|----------------+-------------------+-------------+------------+--------------|\n</pre>\n",
                    "is_accepted": false,
                    "score": 168
                },
                {
                    "body": "<p>It is possible in HTML5.<br>\nYou can read more (and try a live demo) here: <a href=\"http://slides.html5rocks.com/#slide-orientation\" rel=\"nofollow\">http://slides.html5rocks.com/#slide-orientation</a>.</p>\n\n<pre><code>window.addEventListener('deviceorientation', function(event) {\n    var a = event.alpha;\n    var b = event.beta;\n    var g = event.gamma;\n}, false);\n</code></pre>\n\n<p>It also supports deskop browsers but it will always return the same value.</p>\n",
                    "is_accepted": false,
                    "score": 3
                },
                {
                    "body": "<p>A little contribution to the two-bit-fool's answer:</p>\n\n<p>As described on the table on droid phones \"orientationchange\" event gets fired earlier than \"resize\" event thus blocking the next resize call (because of the if statement). Width property is still not set.</p>\n\n<p>A workaround though maybe not a perfect one could be to not fire the \"orientationchange\" event. That can be archived by wrapping \"orientationchange\" event binding in \"if\" statement:</p>\n\n<pre><code>if (!navigator.userAgent.match(/android/i))\n{\n    window.addEventListener(\"orientationchange\", checkOrientation, false);\n}\n</code></pre>\n\n<p>Hope it helps</p>\n\n<p>(tests were done on Nexus S)</p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>Worth noting that on my Epic 4G Touch I had to set up the webview to use WebChromeClient before any of the javascript android calls worked.</p>\n\n<pre><code>webView.setWebChromeClient(new WebChromeClient());\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>Another gotcha - some Android tablets (the Motorola Xoom I believe and a low-end Elonex one I'm doing some testing on, probably others too) have their accelerometers set up so that window.orientation == 0 in LANDSCAPE mode, not portrait! </p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>two-bit-fool's excellent answer provides all the background, but let me attempt a <strong>concise, pragmatic summary of how to handle orientation changes across iOS and Android</strong>:</p>\n\n<ul>\n<li><strong>If you only care about <em>window dimensions</em> (the typical scenario)</strong> - and not about the specific orientation:\n<ul>\n<li>Handle the <code>resize</code> event only.</li>\n<li>In your handler, act on <code>window.innerWidth</code> and <code>window.InnerHeight</code> only.</li>\n<li>Do NOT use <code>window.orientation</code> - it won't be current on iOS.  </li>\n</ul></li>\n</ul>\n\n\n\n<ul>\n<li><strong>If you DO care about the <em>specific orientation</em></strong>:\n<ul>\n<li>Handle <em>only</em> the <code>resize</code> event on Android, and <em>only</em> the <code>orientationchange</code> event on iOS.</li>\n<li>In your handler, act on <code>window.orientation</code> (and <code>window.innerWidth</code> and <code>window.InnerHeight</code>)</li>\n</ul></li>\n</ul>\n\n<p>These approaches offer slight benefits over remembering the previous orientation and comparing:</p>\n\n<ul>\n<li>the dimensions-only approach also works while developing on desktop browsers that can otherwise simulate mobile devices, e.g., Chrome 23. (<code>window.orientation</code> is not available on desktop browsers).</li>\n<li>no need for a global/anonymous-file-level-function-wrapper-level variable.</li>\n</ul>\n",
                    "is_accepted": false,
                    "score": 24
                },
                {
                    "body": "<p>I had the same problem. I am using Phonegap and Jquery mobile, for Adroid devices.\nTo resize properly I had to set a timeout: </p>\n\n<pre><code>$(window).bind('orientationchange',function(e) {\n  fixOrientation();\n});\n\n$(window).bind('resize',function(e) {\n  fixOrientation();\n});\n\nfunction fixOrientation() {\n\n    setTimeout(function() {\n\n        var windowWidth = window.innerWidth;\n\n        $('div[data-role=\"page\"]').width(windowWidth);\n        $('div[data-role=\"header\"]').width(windowWidth);\n        $('div[data-role=\"content\"]').width(windowWidth-30);\n        $('div[data-role=\"footer\"]').width(windowWidth);\n\n    },500);\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>Here is the solution:</p>\n\n<pre><code>var isMobile = {\n    Android: function() {\n        return /Android/i.test(navigator.userAgent);\n    },\n    iOS: function() {\n        return /iPhone|iPad|iPod/i.test(navigator.userAgent);\n    }\n};\nif(isMobile.Android())\n    {\n        var previousWidth=$(window).width();\n        $(window).on({\n        resize: function(e) {\n        var YourFunction=(function(){\n\n            var screenWidth=$(window).width();\n            if(previousWidth!=screenWidth)\n            {\n                previousWidth=screenWidth;\n                alert(\"oreientation changed\");\n            }\n\n        })();\n\n        }\n    });\n\n    }\n    else//mainly for ios\n    {\n        $(window).on({\n            orientationchange: function(e) {\n               alert(\"orientation changed\");\n            }   \n        });\n    }\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                }
            ],
            "body": "<p>I know that in Safari on an iPhone you can detect the screen's orientation and change of orientation by listening for the <code>onorientationchange</code> event and querying <code>window.orientation</code> for the angle.</p>\n\n<p>Is this possible in the browser on Android phones?</p>\n\n<p>To be clear, I am asking whether the rotation of an Android device can be detected by <strong>JavaScript</strong> running on a standard web page. It is possible on an iPhone and I wondered whether it could be done for Android phones.</p>\n",
            "last_activity_date": 1423671530,
            "question_id": 1649086,
            "score": 132,
            "tags": [
                "javascript",
                "android",
                "webkit"
            ],
            "title": "Detect rotation of Android phone in the browser with javascript"
        },
        {
            "answer_count": 29,
            "answers": [
                {
                    "body": "<p>I think this will work for you:</p>\n\n<pre><code>function makeid()\n{\n    var text = \"\";\n    var possible = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n\n    for( var i=0; i &lt; 5; i++ )\n        text += possible.charAt(Math.floor(Math.random() * possible.length));\n\n    return text;\n}\n</code></pre>\n",
                    "is_accepted": true,
                    "score": 504
                },
                {
                    "body": "<p>Something like this should work</p>\n\n<pre><code>function randomString(len, charSet) {\n    charSet = charSet || 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n    var randomString = '';\n    for (var i = 0; i &lt; len; i++) {\n    \tvar randomPoz = Math.floor(Math.random() * charSet.length);\n    \trandomString += charSet.substring(randomPoz,randomPoz+1);\n    }\n    return randomString;\n}\n</code></pre>\n\n<p>Call with default charset [a-zA-Z0-9] or send in your own:</p>\n\n<pre><code>var randomValue = randomString(5);\n\nvar randomValue = randomString(5, 'PICKCHARSFROMTHISSET');\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 34
                },
                {
                    "body": "<pre><code>function randomstring(L){\n    var s= '';\n    var randomchar=function(){\n    \tvar n= Math.floor(Math.random()*62);\n    \tif(n&lt;10) return n; //1-10\n    \tif(n&lt;36) return String.fromCharCode(n+55); //A-Z\n    \treturn String.fromCharCode(n+61); //a-z\n    }\n    while(s.length&lt; L) s+= randomchar();\n    return s;\n}\n</code></pre>\n\n<p><strong>alert(randomstring(5))</strong></p>\n",
                    "is_accepted": false,
                    "score": 32
                },
                {
                    "body": "<p>This works for sure</p>\n\n<pre><code>&lt;script language=\"javascript\" type=\"text/javascript\"&gt;\nfunction randomString() {\n var chars = \"0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz\";\n var string_length = 8;\n var randomstring = '';\n for (var i=0; i&lt;string_length; i++) {\n  var rnum = Math.floor(Math.random() * chars.length);\n  randomstring += chars.substring(rnum,rnum+1);\n }\n document.randform.randomfield.value = randomstring;\n}\n&lt;/script&gt;\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>I know everyone has got it right already, but i felt like having a go at this one in the most lightweight way possible(light on code, not CPU):</p>\n\n<pre><code>function rand(length,current){\n current = current ? current : '';\n return length ? rand( --length , \"0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz\".charAt( Math.floor( Math.random() * 60 ) ) + current ) : current;\n}\n\nalert(rand(5));\n</code></pre>\n\n<p>It takes a bit of time to wrap your head around, but I think it really shows how awesome javascript's syntax is.</p>\n",
                    "is_accepted": false,
                    "score": 9
                },
                {
                    "body": "<pre><code>Math.random().toString(36).substring(7);\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 640
                },
                {
                    "body": "<p>You can loop through an array of items and recursively add them to a string variable, for instance if you wanted a random DNA sequence:</p>\n\n<pre><code>function randomDNA(len) {\n  len = len || 100\n  var nuc = new Array(\"A\", \"T\", \"C\", \"G\")\n  var i = 0\n  var n = 0\n  s = ''\n  while (i&lt;=len-1)\n  {\n      n = Math.floor(Math.random()*4)\n      s+= nuc[n]\n      i++\n  }\nreturn s\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 4
                },
                {
                    "body": "<pre><code>function randomString (strLength, charSet) {\n    var result = [];\n\n    strLength = strLength || 5;\n    charSet = charSet || 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n\n    while (--strLength) {\n        result.push(charSet.charAt(Math.floor(Math.random() * charSet.length)));\n    }\n\n    return result.join('');\n}\n</code></pre>\n\n<p>This is as clean as it will get. It is fast too, <a href=\"http://jsperf.com/ay-random-string\" rel=\"nofollow\">http://jsperf.com/ay-random-string</a>.</p>\n",
                    "is_accepted": false,
                    "score": 2
                },
                {
                    "body": "<p>Generate 10 characters long string. Length is set by parameter (default 10).</p>\n\n<pre><code>function random_string_generator(len) {\nvar len = len || 10;\nvar str = '';\nvar i = 0;\n\nfor(i=0; i&lt;len; i++) {\n    switch(Math.floor(Math.random()*3+1)) {\n        case 1: // digit\n            str += (Math.floor(Math.random()*9)).toString();\n        break;\n\n        case 2: // small letter\n            str += String.fromCharCode(Math.floor(Math.random()*26) + 97); //'a'.charCodeAt(0));\n        break;\n\n        case 3: // big letter\n            str += String.fromCharCode(Math.floor(Math.random()*26) + 65); //'A'.charCodeAt(0));\n        break;\n\n        default:\n        break;\n    }\n}\nreturn str;\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 2
                },
                {
                    "body": "<p>In case anyone is interested in a one-liner (although not formatted as such for your convenience) that allocates the memory at once (but note that for small strings it really does not matter) here is how to do it:</p>\n\n<pre><code>Array.apply(0, Array(5)).map(function() {\n    return (function(charset){\n        return charset.charAt(Math.floor(Math.random() * charset.length))\n    }('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789'));\n}).join('')\n</code></pre>\n\n<p>You can replace <code>5</code> by the length of the string you want. Thanks to @AriyaHidayat in <a href=\"http://stackoverflow.com/questions/3751520/how-to-generate-sequence-of-numbers-chars-in-javascript\">this post</a> for the solution to the <code>map</code> function not working on the sparse array created by <code>Array(5)</code>.</p>\n",
                    "is_accepted": false,
                    "score": 5
                },
                {
                    "body": "<p>Expanding on Doubletap's elegant example by answering the issues Gertas and Dragon brought up. Simply add in a while loop to test for those rare null circumstances, and limit the characters to five.  </p>\n\n<pre><code>function rndStr() {\n    x=Math.random().toString(36).substring(7).substr(0,5);\n    while (x.length!=5){\n        x=Math.random().toString(36).substring(7).substr(0,5);\n    }\n    return x;\n}\n</code></pre>\n\n<p>Here's a jsfiddle alerting you with a result: \n<a href=\"http://jsfiddle.net/pLJJ7/\" rel=\"nofollow\">http://jsfiddle.net/pLJJ7/</a></p>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<pre><code>\"12345\".split('').map(function(){return 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789'.charAt(Math.floor(62*Math.random()));}).join('');\n\n//or\n\nString.prototype.rand = function() {return this.split('').map(function(){return 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789'.charAt(Math.floor(62*Math.random()));}).join('');};\n</code></pre>\n\n<p>will generate a random alpha-numeric string with the length of the first/calling string</p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>Also based upon doubletap's answer, this one handles any length of random required characters (lower only), and keeps generating random numbers until enough characters have been collected.</p>\n\n<pre><code>function randomChars(len) {\n    var chars = '';\n\n    while (chars.length &lt; len) {\n        chars += Math.random().toString(36).substring(2);\n    }\n\n    // Remove unnecessary additional characters.\n    return chars.substring(0, len);\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>How about this compact little trick?</p>\n\n<pre><code>var possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\nvar stringLength = 5;\n\nvar randomString = Array.apply(null, new Array(stringLength)).map(function () {\n    return possible[Math.floor(Math.random() * possible.length)];\n}).join('');\n</code></pre>\n\n<p>You need the <code>Array.apply</code> there to trick the empty array into being an array of undefineds.</p>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>Here's the method I created.<br />\nIt will create a string containing both uppercase and lowercase characters.<br />\nIn addition I've included the function that will created an alphanumeric string too.</p>\n\n<p><strong>Working examples:</strong><br />\n<a href=\"http://jsfiddle.net/greatbigmassive/vhsxs/\">http://jsfiddle.net/greatbigmassive/vhsxs/</a>  (alpha only)<br />\n<a href=\"http://jsfiddle.net/greatbigmassive/PJwg8/\">http://jsfiddle.net/greatbigmassive/PJwg8/</a> (alphanumeric)</p>\n\n<pre><code>function randString(x){\n    var s = \"\";\n    while(s.length&lt;x&amp;&amp;x&gt;0){\n        var r = Math.random();\n        s+= String.fromCharCode(Math.floor(r*26) + (r&gt;0.5?97:65));\n    }\n    return s;\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 8
                },
                {
                    "body": "<pre><code>\",,,,,\".replace(/,/g,function (){return \"AzByC0xDwEv9FuGt8HsIrJ7qKpLo6MnNmO5lPkQj4RiShT3gUfVe2WdXcY1bZa\".charAt(Math.floor(Math.random()*62))});\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>This is what I used. A combination of a couple here. I use it in a loop, and each ID it produces is unique. It might not be 5 characters, but it's guaranteed unique.</p>\n\n<pre><code>var newId =\n    \"randomid_\" +\n    (Math.random() / +new Date()).toString(36).replace(/[^a-z]+/g, '');\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>Another nice way to randomize a string from the characters <code>A-Za-z0-9</code>:</p>\n\n<pre><code>function randomString(length) {\n    if ( length &lt;= 0 ) return \"\";\n    var getChunk = function(){\n        var i, //index iterator\n            rand = Math.random()*10e16, //execute random once\n            bin = rand.toString(2).substr(2,10), //random binary sequence\n            lcase = (rand.toString(36)+\"0000000000\").substr(0,10), //lower case random string\n            ucase = lcase.toUpperCase(), //upper case random string\n            a = [lcase,ucase], //position them in an array in index 0 and 1\n            str = \"\"; //the chunk string\n        b = rand.toString(2).substr(2,10);\n        for ( i=0; i&lt;10; i++ )\n            str += a[bin[i]][i]; //gets the next character, depends on the bit in the same position as the character - that way it will decide what case to put next\n        return str;\n    },\n    str = \"\"; //the result string\n    while ( str.length &lt; length  )\n        str += getChunk();\n    str = str.substr(0,length);\n    return str;\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>Here's an improvement on <a href=\"http://stackoverflow.com/a/8084248/1985033\">doubletap's excellent answer</a>. The original has two drawbacks which are addressed here:</p>\n\n<p>First, as others have mentioned, it has a small probability of producing short strings or even an empty string (if the random number is 0), which may break your application. Here is a solution:</p>\n\n<pre><code>(Math.random().toString(36)+'00000000000000000').slice(2, N+2)\n</code></pre>\n\n<p>Second, both the original and the solution above limit the string size N to 16 characters. The following will return a string of size N for any N (but note that using N > 16 will not increase the randomness or decrease the probability of collisions):</p>\n\n<pre><code>new Array(N+1).join((Math.random().toString(36)+'00000000000000000').slice(2, 18)).slice(0, N)\n</code></pre>\n\n<p>Explanation:</p>\n\n<ol>\n<li>Pick a random number in the range [0,1), i.e. between 0 (inclusive) and 1 (exclusive).</li>\n<li>Convert the number to a base-36 string, i.e. using characters 0-9 and a-z.</li>\n<li>Pad with zeros (solves the first issue).</li>\n<li>Slice off the leading '0.' prefix and extra padding zeros.</li>\n<li>Repeat the string enough times to have at least N characters in it (by Joining empty strings with the shorter random string used as the delimiter).</li>\n<li>Slice exactly N characters from the string.</li>\n</ol>\n\n<p>Further thoughts:</p>\n\n<ul>\n<li>This solution does not use uppercase letters, but in almost all cases (no pun intended) it does not matter.</li>\n<li>All returned strings have an equal probability of being returned, at least as far as the results returned by Math.random() are evenly distributed (this is not cryptographic-strength randomness, in any case).</li>\n<li>Not all possible strings of size N may be returned. In the second solution this is obvious (since the smaller string is simply being duplicated), but also in the original answer this is true since in the conversion to base-36 the last few bits may not be part of the original random bits. Specifically, if you look at the result of Math.random().toString(36), you'll notice the last character is not evenly distributed. Again, in almost all cases it does not matter, but we slice the final string from the beginning rather than the end of the random string so that short strings (e.g. N=1) aren't affected.</li>\n</ul>\n",
                    "is_accepted": false,
                    "score": 31
                },
                {
                    "body": "<p>If a library is a possibility, Chance.js might be of help: <a href=\"http://chancejs.com/#string\" rel=\"nofollow\">http://chancejs.com/#string</a></p>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>This stores 5 alphanumeric characters in variable c.</p>\n\n<pre><code>for(var c = ''; c.length &lt; 5;) c += Math.random().toString(36).substr(2, 1)\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>Here are some one liners for making random strings of any length. The length is determined by <code>new Array(5)</code> can be changed to any number.</p>\n\n<h3>Including <code>0-9a-z</code></h3>\n\n<pre><code>var str = new Array(5).join().replace(/(.|$)/g, function(){return ((Math.random()*36)|0).toString(36);})\n</code></pre>\n\n<h3>Including <code>0-9a-zA-Z</code></h3>\n\n<pre><code>var str = new Array(5).join().replace(/(.|$)/g, function(){return ((Math.random()*36)|0).toString(36)[Math.random()&lt;.5?\"toString\":\"toUpperCase\"]();});\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 6
                },
                {
                    "body": "<p>Here is a test script for the #1 answer (thank you @csharptest.net)</p>\n\n<p>the script runs <code>makeid()</code> <code>1 million</code> times and as you can see 5 isnt a very unique. running it with a char length of 10 is quite reliable. I've ran it about 50 times and haven't seen a duplicate yet <code>:-)</code> </p>\n\n<p>note: node stack size limit exceeds around 4 million so you cant run this 5 million times it wont ever finish.</p>\n\n<pre><code>function makeid()\n{\n    var text = \"\";\n    var possible = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n\n    for( var i=0; i &lt; 5; i++ )\n        text += possible.charAt(Math.floor(Math.random() * possible.length));\n\n    return text;\n}\n\nids ={}\ncount = 0\nfor (var i = 0; i &lt; 1000000; i++) {\n    tempId = makeid();\n    if (typeof ids[tempId] !== 'undefined') {\n        ids[tempId]++;\n        if (ids[tempId] === 2) {\n            count ++;\n        }\n        count++;\n    }else{\n        ids[tempId] = 1;\n    }\n}\nconsole.log(\"there are \"+count+ ' duplicate ids');\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 2
                },
                {
                    "body": "<p>Here is an example in CoffeeScript:</p>\n\n<pre><code>String::add_Random_Letters   = (size )-&gt;\n                                         charSet = 'abcdefghijklmnopqrstuvwxyz'\n                                         @ + (charSet[Math.floor(Math.random() * charSet.length)]  for i in [1..size]).join('')\n</code></pre>\n\n<p>which can be used</p>\n\n<pre><code>value = \"abc_\"\nvalue_with_exta_5_random_letters = value.add_Random_Letters(5)\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>I loved the brievety of doubletap's Math.random().toString(36).substring(7) answer, but not that it had so many collisions as hacklikecrack correctly pointed out.  It generated 11-chacter strings but has a duplicate rate of 11% in a sample size of 1 million.</p>\n\n<p>Here's a longer (but still short) and slower alternative that had only 133 duplicates in a sample space of 1 million.  In rare cases the string will still be shorter than 11 chars:</p>\n\n<pre><code>Math.abs(Math.random().toString().split('')\n    .reduce(function(p,c){return (p&lt;&lt;5)-p+c})).toString(36).substr(0,11);\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 3
                },
                {
                    "body": "<p><a href=\"http://stackoverflow.com/a/14869745/633183\"><strong>Math.random</strong> is bad for this kind of thing</a></p>\n\n<p><strong>Option 1</strong></p>\n\n<p>If you're able to do this <em>server</em>-side, just use the <a href=\"http://nodejs.org/api/crypto.html\" rel=\"nofollow\">crypto</a> module</p>\n\n<pre><code>var crypto = require(\"crypto\");\nvar id = crypto.randomBytes(20).toString('hex');\n\n// \"bb5dc8842ca31d4603d6aa11448d1654\"\n</code></pre>\n\n<p>The resulting string will be twice as long as the random bytes you generate; each byte encoded to hex is 2 characters. 20 bytes will be 40 characters of hex.</p>\n\n<hr>\n\n<p><strong>Option 2</strong></p>\n\n<p>If you have to do this <em>client</em>-side, perhaps try the uuid module</p>\n\n<pre><code>var uuid = require(\"uuid\");\nvar id = uuid.v4();\n\n// \"110ec58a-a0f2-4ac4-8393-c866d813b8d1\"\n</code></pre>\n\n<hr>\n\n<p><strong>Option 3</strong></p>\n\n<p>If you have to do this <em>client</em>-side and you don't have to support old browsers, you can do it without dependencies</p>\n\n<pre><code>// str generateId(int len);\n//   len - must be an even number (default: 40)\nfunction generateId(len) {\n  var arr = new Uint8Array((len || 40) / 2);\n  window.crypto.getRandomValues(arr);\n  return [].map.call(arr, function(n) { return n.toString(16); }).join(\"\");\n}\n</code></pre>\n\n<p>Ok, let's check it out !</p>\n\n<pre><code>generateId();\n// \"82defcf324571e70b0521d79cce2bf3fffccd69\"\n\ngenerateId(20);\n// \"c1a050a4cd1556948d41\"\n</code></pre>\n\n<p>Browser requirements</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Browser    Minimum Version\n--------------------------\nChrome     11.0\nFirefox    21.0\nIE         11.0\nOpera      15.0\nSafari     5.1\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 3
                },
                {
                    "body": "<p><strong>This is for firefox chrome code (addons and the like)</strong></p>\n\n<p>It can save you a few hours of research.</p>\n\n<pre><code>function randomBytes( amount )\n{\n    let bytes = Cc[ '@mozilla.org/security/random-generator;1' ]\n\n        .getService         ( Ci.nsIRandomGenerator )\n        .generateRandomBytes( amount, ''            )\n\n    return bytes.reduce( bytes2Number )\n\n\n    function bytes2Number( previousValue, currentValue, index, array )\n    {\n      return Math.pow( 256, index ) * currentValue + previousValue\n    }\n}\n</code></pre>\n\n<p>Use it as:</p>\n\n<pre><code>let   strlen   = 5\n    , radix    = 36\n    , filename = randomBytes( strlen ).toString( radix ).splice( - strlen )\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>(Late Answer) but here's my <em>2\u00a2</em>:</p>\n\n<h1>Random String Generator (Alpha-Numeric | Alpha | Numeric)</h1>\n\n\n\n<pre><code>/**\n * RANDOM STRING GENERATOR\n *\n * Info:      http://stackoverflow.com/a/27872144/383904\n * Use:       randomString(length [,\"A\"] [,\"N\"] );\n * Default:   return a random alpha-numeric string\n * Arguments: If you use the optional \"A\", \"N\" flags:\n *            \"A\" (Alpha flag)   return random a-Z string\n *            \"N\" (Numeric flag) return random 0-9 string\n */\nfunction randomString(len, an){\n    an = an&amp;&amp;an.toLowerCase();\n    var str=\"\", i=0, min=an==\"a\"?10:0, max=an==\"n\"?10:62;\n    for(;i++&lt;len;){\n      var r = Math.random()*(max-min)+min &lt;&lt;0;\n      str += String.fromCharCode(r+=r&gt;9?r&lt;36?55:61:48);\n    }\n    return str;\n}\n</code></pre>\n\n\n\n<pre><code>randomString(10);        // \"4Z8iNQag9v\"\nrandomString(10, \"A\");   // \"aUkZuHNcWw\"\nrandomString(10, \"N\");   // \"9055739230\"\n</code></pre>\n\n<p>Have fun. <strong><em><a href=\"http://jsbin.com/vomafi/3/edit?js,console,output\" rel=\"nofollow\">jsBin demo</a></em></strong></p>\n\n<hr>\n\n<p>While the above code uses additional checks for the desired output (A/N, A, N)...<br>\n<strong>let's break it down the to the essentials (Alpha-Numeric only) for a better understanding:</strong></p>\n\n<ul>\n<li>Create a function that accepts an argument (desired length of the random String result)</li>\n<li>Create an empty string like <code>var str = \"\";</code> to concatenate random characters</li>\n<li>Inside a loop <strong>create a <code>rand</code> index number</strong> from <strong>0 to 61</strong> (0..9+A..Z+a..z = 62)</li>\n<li>Create a <strong>conditional logic</strong> to <strong>Adjust/fix <code>rand</code></strong> (since it's 0..61) incrementing it by some number (see examples below)  to get back the right <code>CharCode</code> number and the related Character.</li>\n<li>Inside the loop concatenate to <code>str</code> a <code>String.fromCharCode( incremented rand )</code></li>\n</ul>\n\n<p>Let's picture the <strong>Character table</strong> and their <strong>codes range</strong>:</p>\n\n<pre><code>_____0....9______A..........Z______a..........z___________  Character\n     | 10 |      |    26    |      |    26    |             Tot = 62 characters\n    48....57    65..........90    97..........122           CharCode ranges\n</code></pre>\n\n<p><code>Math.floor( Math.random * 62 )</code> gives a range from <code>0..61</code> (what we need).<br>\n<strong>How to fix (increment) the random</strong> to get the correct <strong>charCode ranges</strong>?</p>\n\n<pre><code>      |   rand   | charCode |  (0..61)rand += fix            = charCode ranges |\n------+----------+----------+--------------------------------+-----------------+\n0..9  |   0..9   |  48..57  |  rand += 48                    =     48..57      |\nA..Z  |  10..35  |  65..90  |  rand += 55 /*  90-35 = 55 */  =     65..90      |\na..z  |  36..61  |  97..122 |  rand += 61 /* 122-61 = 61 */  =     97..122     |\n</code></pre>\n\n<p><strong>The <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Conditional_Operator\" rel=\"nofollow\">conditional operation</a> logic</strong> from the table above:</p>\n\n<pre><code>   rand += rand&gt;9 ? ( rand&lt;36 ? 55 : 61 ) : 48 ;\n// rand +=  true  ? (  true   ? 55 else 61 ) else 48 ;\n</code></pre>\n\n<p>If you followed the above explanation you should be able to create this <strong>alpha-numeric snippet</strong>:  </p>\n\n<p><strong><em><a href=\"http://jsbin.com/xilawe/1/edit?js,console,output\" rel=\"nofollow\">jsBin demo</a></em></strong></p>\n\n<pre><code>function randomString( len ) {\n  var str = \"\";                                         // String result\n  for(var i=0; i&lt;len; i++){                             // Loop `len` times\n    var rand = Math.floor( Math.random() * 62 );        // random: 0..61\n    var charCode = rand+= rand&gt;9? (rand&lt;36?55:61) : 48; // Get correct charCode\n    str += String.fromCharCode( charCode );             // add Character to str\n  }\n  return str;       // After all loops are done, return the concatenated string\n}\n\nconsole.log( randomString(10) ); // \"7GL9F0ne6t\"\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 4
                },
                {
                    "body": "<p>The simplest way is: </p>\n\n<pre><code>(new Date%9e6).toString(36)\n</code></pre>\n\n<p>This generate random strings of 5 characters based on the current time. Example output is <code>4mtxj</code> or <code>4mv90</code> or <code>4mwp1</code></p>\n\n<p>The problem with this is that if you call it two times on the same second, it will generate the same string. </p>\n\n<p>The safer way is: </p>\n\n<pre><code>(0|Math.random()*9e6).toString(36)\n</code></pre>\n\n<p>This will generate a random string of 4 or 5 characters, always diferent. Example output is like <code>30jzm</code> or <code>1r591</code> or <code>4su1a</code></p>\n\n<p>In both ways the first part generate a random number. The <code>.toString(36)</code> part cast the number to a base36 (alphadecimal) representation of it. </p>\n",
                    "is_accepted": false,
                    "score": 0
                }
            ],
            "body": "<p>I want a 5 character string composed of characters picked randomly from the set <code>[a-zA-Z0-9]</code>.</p>\n\n<p>What's the best way to do this with JavaScript?</p>\n",
            "last_activity_date": 1426112383,
            "question_id": 1349404,
            "score": 298,
            "tags": [
                "javascript",
                "random"
            ],
            "title": "Generate a string of 5 random characters in JavaScript"
        },
        {
            "answer_count": 6,
            "answers": [
                {
                    "body": "<p>That's called a closure. It basically seals the code inside the function so that other libraries don't interfere with it. It's similar to creating a namespace in compiled languages.</p>\n\n<p>Example. Suppose I write:</p>\n\n<pre><code>(function() {\n\n    var x = 2;\n\n    // do stuff with x\n\n})();\n</code></pre>\n\n<p>Now other libraries cannot access the variable <code>x</code> I created to use in my library.</p>\n",
                    "is_accepted": false,
                    "score": 7
                },
                {
                    "body": "<p>Javascript in a browser only really has a couple of effective scopes: function scope and global scope.</p>\n\n<p>If a variable isn't in function scope, it's in global scope. And global variables are generally bad, so this is a construct to keep a library's variables to itself.</p>\n",
                    "is_accepted": false,
                    "score": 13
                },
                {
                    "body": "<p>It's usually to namespace (see later) and control the visibility of member functions and/or variables. Think of it like an object definition. jQuery plugins are usually written like this.</p>\n\n<p>In Javascript, you can nest functions. So, the following is legal:</p>\n\n<pre><code>function outerFunction() {\n   function innerFunction() {\n      // code\n   }\n}\n</code></pre>\n\n<p>Now you can call <code>outerFunction()</code>, but the visiblity of <code>innerFunction()</code> is limited to the scope of <code>outerFunction()</code>, meaning it is private to <code>outerFunction()</code>. It basically follows the same principle as variables in Javascript:</p>\n\n<pre><code>var globalVariable;\n\nfunction someFunction() {\n   var localVariable;\n}\n</code></pre>\n\n<p>Correspondingly:</p>\n\n<pre><code>function globalFunction() {\n\n   var localFunction1 = function() {\n       //I'm anonymous! But localFunction1 is a reference to me!\n   };\n\n   function localFunction2() {\n      //I'm named!\n   }\n}\n</code></pre>\n\n<p>In the above scenario, you can call <code>globalFunction()</code> from anywhere, but you cannot call <code>localFunction1</code> or <code>localFunction2</code>.</p>\n\n<p>What you're doing when you write <code>(function() { ... code ... })()</code>, is you're making the code inside a function literal (meaning the whole \"object\" is actually a function). After that, you're self-invoking the function (the final <code>()</code>). So the major advantage of this as I mentioned before, is that you can have private methods/functions and properties:</p>\n\n<pre><code>(function() {\n   var private_var;\n\n   function private_function() {\n     //code\n   }\n})()\n</code></pre>\n\n<p>The neat thing is that you can also define things inside and expose it to the outside world so (an example of namespacing so you can basically create your own library/plugin):</p>\n\n<pre><code>var myPlugin = (function() {\n var private_var;\n\n function private_function() {\n }\n\n return {\n    public_function1: function() {\n    },\n    public_function2: function() {\n    }\n }\n})()\n</code></pre>\n\n<p>Now you can call <code>myPlugin.public_function1()</code>, but you cannot access <code>private_function()</code>! So pretty similar to a class definition. To understand this better, I recommend the following links for some further reading:</p>\n\n<ul>\n<li><a href=\"http://www.dustindiaz.com/namespace-your-javascript/\">Namespacing your Javascript</a></li>\n<li><a href=\"http://www.crockford.com/javascript/private.html\">Private members in Javascript (by Douglas Crockford)</a></li>\n</ul>\n\n<p><strong>EDIT</strong></p>\n\n<p>I forgot to mention. In that final <code>()</code>, you can pass anything you want inside. For example, when you create jQuery plugins, you pass in <code>jQuery</code> or <code>$</code> like so: </p>\n\n<pre><code>(function(jQ) { ... code ... })(jQuery) \n</code></pre>\n\n<p>So what you're doing here is defining a function that takes in one parameter (called <code>jQ</code>, a local variable, and known <em>only</em> to that function). Then you're self-invoking the function and passing in a parameter (also called <code>jQuery</code>, but <em>this</em> one is from the outside world and a reference to the actual jQuery itself).  There is no pressing need to do this, but there are some advantages:</p>\n\n<ul>\n<li>You can redefine a global parameter and give it a name that makes sense in the local scope.</li>\n<li>There is a slight performance advantage since it is faster to look things up in the local scope instead of having to walk up the scope chain into the global scope.</li>\n<li>There are benefits for compression (minification).</li>\n</ul>\n",
                    "is_accepted": true,
                    "score": 292
                },
                {
                    "body": "<p>In addition to keeping the variables local, one very handy use is when writing a library using a global variable, you can give it a shorter variable name to use within the library. It's often used in writing jQuery plugins, since jQuery allows you to disable the $ variable pointing to jQuery, using jQuery.noConflict(). In case it is disabled, your code can still use $ and not break if you just do:</p>\n\n<pre><code>(function($) { ...code...})(jQuery);\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 5
                },
                {
                    "body": "<p>You can use function closures as <strong>data</strong> in larger expressions as well, as in this method of determining browser support for some of the html5 objects.</p>\n\n<pre><code>   navigator.html5={\n     canvas: (function(){\n      var dc= document.createElement('canvas');\n      if(!dc.getContext) return 0;\n      var c= dc.getContext('2d');\n      return typeof c.fillText== 'function'? 2: 1;\n     })(),\n     localStorage: (function(){\n      return !!window.localStorage;\n     })(),\n     webworkers: (function(){\n      return !!window.Worker;\n     })(),\n     offline: (function(){\n      return !!window.applicationCache;\n     })()\n    }\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 3
                },
                {
                    "body": "<h1>In short</h1>\n\n<h2>Summary</h2>\n\n<p>In its simplest form, this technic's aim is to wrap code inside a <strong>function scope</strong>.</p>\n\n<p>It helps decreases chances of:</p>\n\n<ul>\n<li>clashing with other applications/libraries</li>\n<li>polluting superior (global most likely) scope</li>\n</ul>\n\n<p>It <strong>does not</strong> detect when the document is ready - it is not some kind of <code>document.onload</code> nor <code>window.onload</code></p>\n\n<p>It is commonly known as an <code>Immediately Invoked Function Expression (IIFE)</code> or <code>Self Executing Anonymous Function</code>.</p>\n\n<h2>Code Explained</h2>\n\n<pre><code>var someFunction = function(){ console.log('wagwan!'); };\n\n(function() {                   /* function scope starts here */\n  console.log('start of IIFE');\n\n  var myNumber = 4;             /* number variable declaration */\n  var myFunction = function(){  /* function variable declaration */\n    console.log('formidable!'); \n  };\n  var myObject = {              /* object variable declaration */\n    anotherNumber : 1001, \n    anotherFunc : function(){ console.log('formidable!'); }\n  };\n  console.log('end of IIFE');\n})();                           /* function scope ends */\n\nsomeFunction();            // reachable, hence works: see in the console\nmyFunction();              // unreachable, will throw an error, see in the console\nmyObject.anotherFunc();    // unreachable, will throw an error, see in the console\n</code></pre>\n\n<p>In the example above, any variable defined in the function (i.e. declared using <code>var</code>) will be \"private\" and accessible within the function scope ONLY (as Vivin Paliath puts it). In other words, these variables are not visible/reachable outside the function. <a href=\"http://jsbin.com/yadagusato/1/edit?js,console\" rel=\"nofollow\">See live demo</a>.</p>\n\n<p>Javascript has function scoping. \"Parameters and variables defined in a function are not visible outside of the function, and that a variable defined anywhere within a function is visible everywhere within the function.\" (from \"Javascript: The Good Parts\").</p>\n\n<hr>\n\n<h1>More details</h1>\n\n<h2>Alternative Code</h2>\n\n<p>In the end, the code posted before could also be done as follows:</p>\n\n<pre><code>var someFunction = function(){ console.log('wagwan!'); };\n\nvar myMainFunction = function() {\n  console.log('start of IIFE');\n\n  var myNumber = 4;\n  var myFunction = function(){ console.log('formidable!'); };\n  var myObject = { \n    anotherNumber : 1001, \n    anotherFunc : function(){ console.log('formidable!'); }\n  };\n  console.log('end of IIFE');\n};\n\nmyMainFunction();          // I CALL \"myMainFunction\" FUNCTION HERE\nsomeFunction();            // reachable, hence works: see in the console\nmyFunction();              // unreachable, will throw an error, see in the console\nmyObject.anotherFunc();    // unreachable, will throw an error, see in the console\n</code></pre>\n\n<p><a href=\"http://jsbin.com/yetebenula/1/edit?js,console\" rel=\"nofollow\">See live demo</a>.</p>\n\n<hr>\n\n<h2>The Roots</h2>\n\n<h3>Iteration 1</h3>\n\n<p>One day, someone probably thought \"there must be a way to avoid naming 'myMainFunction', since all we want is to execute it immediately.\"</p>\n\n<p>If you go back to the basics, you find out that:</p>\n\n<ul>\n<li><code>expression</code>: something evaluating to a value. i.e. <code>3+11/x</code></li>\n<li><code>statement</code>: line(s) of code doing something BUT it does <strong>not</strong> evaluate to a value. i.e. <code>if(){}</code></li>\n</ul>\n\n<p>Similarly, function expressions evaluate to a value. And one consequence (I assume?) is that they can be immediately invoked:</p>\n\n<pre><code> var italianSayinSomething = function(){ console.log('mamamia!'); }();\n</code></pre>\n\n<p>So our more complex example becomes:</p>\n\n<pre><code>var someFunction = function(){ console.log('wagwan!'); };\n\nvar myMainFunction = function() {\n  console.log('start of IIFE');\n\n  var myNumber = 4;\n  var myFunction = function(){ console.log('formidable!'); };\n  var myObject = { \n    anotherNumber : 1001, \n    anotherFunc : function(){ console.log('formidable!'); }\n  };\n  console.log('end of IIFE');\n}();\n\nsomeFunction();            // reachable, hence works: see in the console\nmyFunction();              // unreachable, will throw an error, see in the console\nmyObject.anotherFunc();    // unreachable, will throw an error, see in the console\n</code></pre>\n\n<p><a href=\"http://jsbin.com/virozipike/1/edit?js,console\" rel=\"nofollow\">See live demo</a>.</p>\n\n<h3>Iteration 2</h3>\n\n<p>The next step is the thought \"why have <code>var myMainFunction =</code> if we don't even use it!?\".</p>\n\n<p>The answer is simple: try removing this, such as below:</p>\n\n<pre><code> function(){ console.log('mamamia!'); }();\n</code></pre>\n\n<p><a href=\"http://jsbin.com/kefesopixi/1/edit?js,console\" rel=\"nofollow\">See live demo</a>.</p>\n\n<p>It won't work because <strong>\"function declarations are not invokable\"</strong>.</p>\n\n<p>The trick is that by removing <code>var myMainFunction =</code> we transformed the <strong>function expression</strong> into a <strong>function declaration</strong>. See the links in \"Resources\" for more details on this.</p>\n\n<p>The next question is \"why can't I keep it as a function expression with something other than <code>var myMainFunction =</code>?</p>\n\n<p>The answer is \"you can\", and there are actually many ways you could do this: adding a <code>+</code>, a <code>!</code>, a <code>-</code>, or maybe wrapping in a pair of parenthesis (as it's now done by convention), and more I believe.  As example:</p>\n\n<pre><code> (function(){ console.log('mamamia!'); })(); // live demo: jsbin.com/zokuwodoco/1/edit?js,console.\n</code></pre>\n\n<p>or</p>\n\n<pre><code> +function(){ console.log('mamamia!'); }(); // live demo: jsbin.com/wuwipiyazi/1/edit?js,console\n</code></pre>\n\n<p>or</p>\n\n<pre><code> -function(){ console.log('mamamia!'); }(); // live demo: jsbin.com/wejupaheva/1/edit?js,console\n</code></pre>\n\n<ul>\n<li><a href=\"http://stackoverflow.com/questions/3755606/what-does-the-exclamation-mark-do-before-the-function\">What does the exclamation mark do before the function?</a></li>\n<li><a href=\"http://stackoverflow.com/questions/13341698/javascript-plus-sign-in-front-of-function-name\">JavaScript plus sign in front of function name</a></li>\n</ul>\n\n<p>So once the relevant modification is added to what was once our \"Alternative Code\", we return to the exact same code as the one used in the \"Code Explained\" example</p>\n\n<pre><code>var someFunction = function(){ console.log('wagwan!'); };\n\n(function() {\n  console.log('start of IIFE');\n\n  var myNumber = 4;\n  var myFunction = function(){ console.log('formidable!'); };\n  var myObject = { \n    anotherNumber : 1001, \n    anotherFunc : function(){ console.log('formidable!'); }\n  };\n  console.log('end of IIFE');\n})();\n\nsomeFunction();            // reachable, hence works: see in the console\nmyFunction();              // unreachable, will throw an error, see in the console\nmyObject.anotherFunc();    // unreachable, will throw an error, see in the console\n</code></pre>\n\n<p>Read more about <code>Expressions vs Statements</code>:</p>\n\n<ul>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Expressions_and_Operators\" rel=\"nofollow\">developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Expressions_and_Operators</a></li>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions#Function_constructor_vs._function_declaration_vs._function_expression\" rel=\"nofollow\">developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions#Function_constructor_vs._function_declaration_vs._function_expression</a></li>\n<li><a href=\"http://stackoverflow.com/questions/12703214/in-javascript-what-is-the-difference-between-a-statement-and-an-expression\">Javascript: difference between a statement and an expression?</a></li>\n<li><a href=\"http://stackoverflow.com/questions/19132/expression-versus-statement\">Expression Versus Statement</a></li>\n</ul>\n\n<hr>\n\n<h2>Demystifying Scopes</h2>\n\n<p>One thing one might wonder is \"what happens when you do NOT define the variable 'properly' inside the function -- i.e. do a simple assignment instead?\"</p>\n\n<pre><code>(function() {\n  var myNumber = 4;             /* number variable declaration */\n  var myFunction = function(){  /* function variable declaration */\n    console.log('formidable!'); \n  };\n  var myObject = {              /* object variable declaration */\n    anotherNumber : 1001, \n    anotherFunc : function(){ console.log('formidable!'); }\n  };\n  myOtherFunction = function(){  /* oops, an assignment instead of a declaration */\n    console.log('haha. got ya!');\n  };\n})();\nmyOtherFunction();         // reachable, hence works: see in the console\nwindow.myOtherFunction();  // works in the browser, myOtherFunction is then in the global scope\nmyFunction();              // unreachable, will throw an error, see in the console\n</code></pre>\n\n<p><a href=\"http://jsbin.com/pahetitafa/1/edit?js,console\" rel=\"nofollow\">See live demo</a>.</p>\n\n<p>Basically, if a variable that was not declared in its current scope is assigned a value, then \"a look up the scope chain occurs until it finds the variable or hits the global scope (at which point it will create it)\".</p>\n\n<p>When in a browser environment (vs a server environment like nodejs) the global scope is defined by the <code>window</code> object. Hence we can do <code>window.myOtherFunction()</code>.</p>\n\n<p>My \"Good practices\" tip on this topic is to <strong>always use <code>var</code> when defining anything</strong>: whether it's a number, object or function, &amp; even when in the global scope. This makes the code much simpler.</p>\n\n<p>Note:</p>\n\n<ul>\n<li>javascript does <strong>not</strong> have <code>block scope</code></li>\n<li>javascript has only <code>function scope</code> &amp; <code>global scope</code> (<code>window</code> scope in a browser environment)</li>\n</ul>\n\n<p>Read more about <code>Javascript Scopes</code>:</p>\n\n<ul>\n<li><a href=\"http://stackoverflow.com/questions/1470488/what-is-the-function-of-the-var-keyword-and-when-to-use-it-or-omit-it\">What is the function of the var keyword and when to use it (or omit it)?</a></li>\n<li><a href=\"http://stackoverflow.com/questions/500431/what-is-the-scope-of-variables-in-javascript\">What is the scope of variables in JavaScript?</a></li>\n</ul>\n\n<hr>\n\n<h1>Resources</h1>\n\n<ul>\n<li><a href=\"http://youtu.be/i_qE1iAmjFg?t=2m15s\" rel=\"nofollow\">youtu.be/i_qE1iAmjFg?t=2m15s</a> - Paul Irish presents the IIFE at min 2:15, do watch this!</li>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions\" rel=\"nofollow\">developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions</a></li>\n<li><a href=\"http://www.google.com/search?q=javascript%20the%20good%20parts\" rel=\"nofollow\">Book: Javascript, the good parts</a> - highly recommended</li>\n<li><a href=\"http://youtu.be/i_qE1iAmjFg?t=4m36s\" rel=\"nofollow\">youtu.be/i_qE1iAmjFg?t=4m36s</a> - Paul Irish presents the module pattern at 4:36</li>\n</ul>\n\n<hr>\n\n<h1>Next Steps</h1>\n\n<p>Once you get this <code>IIFE</code> concept, it leads to the <code>module pattern</code>, which is commonly done by leveraging this IIFE pattern. Have fun :)</p>\n",
                    "is_accepted": false,
                    "score": 4
                }
            ],
            "body": "<p>I have been reading a lot of Javascript lately and I have been noticing that the whole file is wrapped like the following in the .js files to be imported.</p>\n\n<pre><code>(function() {\n    ... \n    code\n    ...\n})();\n</code></pre>\n\n<p>What is the reason for doing this rather than a simple set of constructor functions?</p>\n",
            "last_activity_date": 1418704694,
            "question_id": 2421911,
            "score": 174,
            "tags": [
                "javascript",
                "coding-style"
            ],
            "title": "What is the purpose of wrapping whole Javascript files in anonymous functions like \u201c(function(){ \u2026 })()\u201d?"
        },
        {
            "answer_count": 23,
            "answers": [
                {
                    "body": "<p>You could also use:</p>\n\n<pre><code>if (value instanceof Array) {\nalert('value is Array!');\n} else {\nalert('Not an array');\n}\n</code></pre>\n\n<p>This seems to me a pretty elegant solution, but to each his own.</p>\n",
                    "is_accepted": false,
                    "score": 781
                },
                {
                    "body": "<p>Via <a href=\"http://javascript.crockford.com/remedial.html\">Crockford</a>:</p>\n\n<pre><code>function typeOf(value) {\n    var s = typeof value;\n    if (s === 'object') {\n        if (value) {\n            if (value instanceof Array) {\n                s = 'array';\n            }\n        } else {\n            s = 'null';\n        }\n    }\n    return s;\n}\n</code></pre>\n\n<p>The main failing Crockford mentions is an inability to correctly determine arrays that were created in a different context, e.g., <code>window</code>.\nThat page has a much more sophisticated version if this is insufficient.</p>\n",
                    "is_accepted": false,
                    "score": 40
                },
                {
                    "body": "<p>There are multiple solutions with all their on quirks. <a href=\"http://perfectionkills.com/instanceof-considered-harmful-or-how-to-write-a-robust-isarray/\">This page</a> gives a good overview. One possible solution is:</p>\n\n<pre><code>function isArray(o) {\n  return Object.prototype.toString.call(o) === '[object Array]'; \n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 51
                },
                {
                    "body": "<p>I noticed someone mentioned jQuery, but I didn't know there was an <a href=\"http://api.jquery.com/jQuery.isArray/\"><code>isArray()</code></a> function. It turns out it was added in version 1.3.</p>\n\n<p>jQuery implements it as Peter suggests:</p>\n\n<pre><code>isArray: function( obj ) {\n    return toString.call(obj) === \"[object Array]\";\n},\n</code></pre>\n\n<p>Having put a lot of faith in jQuery already (especially their techniques for cross-browser compatibility) I will either upgrade to version 1.3 and use their function (providing that upgrading doesn\u2019t cause too many problems) or use this suggested method directly in my code.</p>\n\n<p>Many thanks for the suggestions.</p>\n",
                    "is_accepted": false,
                    "score": 61
                },
                {
                    "body": "<p>code referred from <a href=\"https://github.com/miksago/Evan.js/blob/master/src/evan.js\" rel=\"nofollow\">https://github.com/miksago/Evan.js/blob/master/src/evan.js</a></p>\n\n<pre><code>  var isArray = Array.isArray || function(obj) {\n    return !!(obj &amp;&amp; obj.concat &amp;&amp; obj.unshift &amp;&amp; !obj.callee);};\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 2
                },
                {
                    "body": "<p>When I posted this question the version of JQuery that I was using didn't include an <code>isArray</code> function. If it had have I would have probably just used it trusting that implementation to be the best browser independant way to perform this particular type check.</p>\n\n<p>Since JQuery now does offer this function, I would always use it...</p>\n\n<pre><code>$.isArray(obj);\n</code></pre>\n\n<p>(as of version 1.6.2) It is still implemented using comparisons on strings in the form </p>\n\n<pre><code>toString.call(obj) === \"[object Array]\"\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 15
                },
                {
                    "body": "<p>This is an old question but having the same problem i found a very elegant solution that i want to share.</p>\n\n<p>Adding a prototype to Array makes it very simple</p>\n\n<pre><code>Array.prototype.isArray = true;\n</code></pre>\n\n<p>Now once if you have an object you want to test to see if its an array all you need is to check for the new property</p>\n\n<pre><code>var box = doSomething();\n\nif (box.isArray) {\n    // do something\n}\n</code></pre>\n\n<p>isArray is only available if its an array</p>\n",
                    "is_accepted": false,
                    "score": 43
                },
                {
                    "body": "<p>I personally like Peter's suggestion: <a href=\"http://stackoverflow.com/a/767499/414784\">http://stackoverflow.com/a/767499/414784</a> (for ECMAScript 3. For ECMAScript 5, use <code>Array.isArray()</code>)</p>\n\n<p>Comments on the post indicate, however, that if <code>toString()</code> is changed at all, that way of checking an array will fail. If you really want to be specific and make sure <code>toString()</code> has not been changed, and there are no problems with the objects class attribute (<code>[object Array]</code> is the class attribute of an object that is an array), then I recommend doing something like this:</p>\n\n<pre><code>//see if toString returns proper class attributes of objects that are arrays\n//returns -1 if it fails test\n//returns true if it passes test and it's an array\n//returns false if it passes test and it's not an array\nfunction is_array(o)\n{\n    // make sure an array has a class attribute of [object Array]\n    var check_class = Object.prototype.toString.call([]);\n    if(check_class === '[object Array]')\n    {\n        // test passed, now check\n        return Object.prototype.toString.call(o) === '[object Array]';\n    }\n    else\n    {\n        // may want to change return value to something more desirable\n        return -1; \n    }\n}\n</code></pre>\n\n<p>Note that in JavaScript The Definitive Guide 6th edition, 7.10, it says <code>Array.isArray()</code> is implemented using <code>Object.prototype.toString.call()</code> in ECMAScript 5. Also note that if you're going to worry about <code>toString()</code>'s implementation changing, you should also worry about every other built in method changing too. Why use <code>push()</code>? Someone can change it! Such an approach is silly. The above check is an offered solution to those worried about <code>toString()</code> changing, but I believe the check is unnecessary.</p>\n",
                    "is_accepted": false,
                    "score": 24
                },
                {
                    "body": "<p>Thought I would add another option for those who might already be using the Underscore.js library in their script.  Underscore.js has an isArray() function (see <a href=\"http://documentcloud.github.com/underscore/#isArray\" rel=\"nofollow\">http://documentcloud.github.com/underscore/#isArray</a>).</p>\n\n<pre><code>_.isArray(object) \n</code></pre>\n\n<blockquote>\n  <p>Returns true if object is an Array.</p>\n</blockquote>\n",
                    "is_accepted": false,
                    "score": 4
                },
                {
                    "body": "<p>I was using this line of code:</p>\n\n<pre><code>if (variable.push) {\n   // variable is array, since AMAIK only arrays have push() method.\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 5
                },
                {
                    "body": "<pre><code>function isArray(x){\n    return ((x != null) &amp;&amp; (typeof x.push != \"undefined\"));\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>I liked the Brian answer:</p>\n\n<pre><code>function is_array(o){\n    // make sure an array has a class attribute of [object Array]\n    var check_class = Object.prototype.toString.call([]);\n    if(check_class === '[object Array]')    {\n        // test passed, now check\n        return Object.prototype.toString.call(o) === '[object Array]';\n    } else{\n        // may want to change return value to something more desirable\n        return -1; \n    }\n}\n</code></pre>\n\n<p>but you could just do like this:</p>\n\n<pre><code>return Object.prototype.toString.call(o) === Object.prototype.toString.call([]);\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>If you're only dealing with EcmaScript 5 and above then you can use the built in <code>Array.isArray</code> function</p>\n\n<p>e.g.,</p>\n\n<pre><code>Array.isArray([])    // true\nArray.isArray(\"foo\") // false\nArray.isArray({})    // false\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 8
                },
                {
                    "body": "<p>For those who code-golf, an unreliable test with fewest characters:</p>\n\n<pre><code>function isArray(a) {\n  return a.map;\n}\n</code></pre>\n\n<p>This is commonly used when traversing/flattening a hierarchy:</p>\n\n<pre><code>function golf(a) {\n  return a.map?[].concat.apply([],a.map(golf)):a;\n}\n\ninput: [1,2,[3,4,[5],6],[7,[8,[9]]]]\noutput: [1, 2, 3, 4, 5, 6, 7, 8, 9]\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>In Crockford's <a href=\"http://shop.oreilly.com/product/9780596517748.do\">JavaScript The Good Parts</a>, there is a function to check if the given argument is an array:</p>\n\n<pre><code>var is_array = function (value) {\n    return value &amp;&amp;\n        typeof value === 'object' &amp;&amp;\n        typeof value.length === 'number' &amp;&amp;\n        typeof value.splice === 'function' &amp;&amp;\n        !(value.propertyIsEnumerable('length'));\n};\n</code></pre>\n\n<p>He explains:</p>\n\n<blockquote>\n  <p>First, we ask if the value is truthy. We do this to reject null and other falsy values. Second, we ask if the typeof value is 'object'. This will be true for objects, arrays, and (weirdly) null. Third, we ask if the value has a length property that is a number. This will always be true for arrays, but usually not for objects. Fourth, we ask if the value contains a splice method. This again will be true for all arrays. Finally, we ask if the length property is enumerable (will length be produced by a for in loop?). That will be false for all arrays. This is the most reliable test for arrayness that I have found. It is unfortunate that it is so complicated.</p>\n</blockquote>\n",
                    "is_accepted": false,
                    "score": 6
                },
                {
                    "body": "<p>In modern browsers you can do</p>\n\n<pre><code>Array.isArray(obj)\n</code></pre>\n\n<p>(<a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/isArray\">Supported by</a> Chrome 5, Firefox 4.0, IE 9, Opera 10.5 and Safari 5)</p>\n\n<p>For backward compatibility you can add the following</p>\n\n<pre><code># only implement if no native implementation is available\nif (typeof Array.isArray === 'undefined') {\n  Array.isArray = function(obj) {\n    return Object.prototype.toString.call(obj) === '[object Array]';\n  }\n};\n</code></pre>\n\n<p>If you use jQuery you can use <code>jQuery.isArray(obj)</code> or <code>$.isArray(obj)</code>. If you use underscore you can use <code>_.isArray(obj)</code></p>\n\n<p>If you don't need to detect arrays created in different frames you can also just use <code>instanceof</code></p>\n\n<pre><code>obj instanceof Array\n</code></pre>\n\n<hr>\n\n<p><strong>Note</strong>: the <code>arguments</code> keyword that can be used to access the argument of a function isn't an Array, even though it (usually) behaves like one:</p>\n\n<pre><code>var func = function() {\n  console.log(arguments)        // [1, 2, 3]\n  console.log(arguments.length) // 3\n  console.log(Array.isArray(arguments)) // false !!!\n  console.log(arguments.slice)  // undefined (Array.prototype methods not available)\n  console.log([3,4,5].slice)    // function slice() { [native code] } \n}\nfunc(1, 2, 3)\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 19
                },
                {
                    "body": "<p>Since the .length property is special for arrays in javascript you can simply say</p>\n\n<pre><code>obj.length === +obj.length // true if obj is an array\n</code></pre>\n\n<p>Underscorejs and several other libraries use this short and simple trick.</p>\n",
                    "is_accepted": false,
                    "score": -1
                },
                {
                    "body": "<p>If you are using Angular, you can use the angular.isArray() function</p>\n\n<pre><code>var myArray = [];\nangular.isArray(myArray); // returns true\n\nvar myObj = {};\nangular.isArray(myObj); //returns false\n</code></pre>\n\n<p><a href=\"http://docs.angularjs.org/api/ng/function/angular.isArray\">http://docs.angularjs.org/api/ng/function/angular.isArray</a></p>\n",
                    "is_accepted": false,
                    "score": 5
                },
                {
                    "body": "<p>I have created this little bit of code, which can return true types.</p>\n\n<p>I am not sure about performance yet, but it's an attempt to properly identify the typeof.</p>\n\n<p><a href=\"https://github.com/valtido/better-typeOf\" rel=\"nofollow\">https://github.com/valtido/better-typeOf</a> also blogged a little about it here <a href=\"http://www.jqui.net/jquery/better-typeof-than-the-javascript-native-typeof/\" rel=\"nofollow\">http://www.jqui.net/jquery/better-typeof-than-the-javascript-native-typeof/</a></p>\n\n<p>it works, similar to the current typeof.</p>\n\n<pre><code>var user = [1,2,3]\ntypeOf(user); //[object Array]\n</code></pre>\n\n<p>It think it may need a bit of fine tuning, and take into account things, I have not come across or test it properly. so further improvements are welcomed, whether it's performance wise, or incorrectly re-porting of typeOf.</p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>I think using myObj.constructor==Object and myArray.constructor==Array is the best way.  Its almost 20x faster than using toString().  If you extend objects with your own constructors and want those creations to be considered \"objects\" as well than this doesn't work, but otherwise its way faster.  typeof is just as fast as the constructor method but typeof []=='object' returns true which will often be undesirable.  <a href=\"http://jsperf.com/constructor-vs-tostring\" rel=\"nofollow\">http://jsperf.com/constructor-vs-tostring</a></p>\n\n<p>one thing to note is that null.constructor will throw an error so if you might be checking for null values you will have to first do if(testThing!==null){}</p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>There are several ways of checking if an variable is an array or not. The best solution is the one you have chosen.</p>\n\n<pre><code>variable.constructor === Array\n</code></pre>\n\n<p>This is the fastest method on Chrome, and most likely all other browsers. All arrays are objects, so checking the constructor property is a fast process for javascript engines.</p>\n\n<p>If you are having issues with finding out if an objects property is an array, you must first check if the property is there.</p>\n\n<pre><code>variable.prop &amp;&amp; variable.prop.constructor === Array\n</code></pre>\n\n<p>Some other ways are:</p>\n\n<pre><code>variable instanceof Array\n</code></pre>\n\n<p>This method runs about a 1/3rd the speed as the first example. Still pretty solid, looks cleaner, if you're all about pretty code and not so much on performance.</p>\n\n<pre><code>Array.isArray(variable)\n</code></pre>\n\n<p>This last one is, in my opinion the ugliest, and it is the slowest. Running about 1/5th the speed as the first example. Array.prototype, is actually an array. you can read more about it here <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/isArray\">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/isArray</a></p>\n\n<p>Also, I ran some test upon jsperf.com <a href=\"http://jsperf.com/instanceof-array-vs-array-isarray\">http://jsperf.com/instanceof-array-vs-array-isarray</a> so have some fun and check it out.</p>\n",
                    "is_accepted": true,
                    "score": 113
                },
                {
                    "body": "<p>The universal solution is below:</p>\n\n<pre><code>Object.prototype.toString.call(obj)=='[object Array]'\n</code></pre>\n\n<p>Starting from ECMAScript 5, a formal solution is :</p>\n\n<pre><code>Array.isArray(arr)\n</code></pre>\n\n<p>Also, for old JavaScript libs, you can find below solution although it's not accurate enough:</p>\n\n<pre><code>var is_array = function (value) {\n    return value &amp;&amp;\n    typeof value === 'object' &amp;&amp;\n    typeof value.length === 'number' &amp;&amp;\n    typeof value.splice === 'function' &amp;&amp;\n    !(value.propertyIsEnumerable('length'));\n};\n</code></pre>\n\n<p>The solutions are from <a href=\"http://www.pixelstech.net/topic/85-How-to-check-whether-an-object-is-an-array-or-not-in-JavaScript\" rel=\"nofollow\">http://www.pixelstech.net/topic/85-How-to-check-whether-an-object-is-an-array-or-not-in-JavaScript</a></p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>Something I just came up with:</p>\n\n<p><code>if (item.length)\n    //This is an array\n else\n    //not an array</code></p>\n",
                    "is_accepted": false,
                    "score": -2
                }
            ],
            "body": "<p>I would like to check whether a variable is either an array or a single value in JavaScript.</p>\n\n<p>I have found a possible solution...</p>\n\n<pre><code>if (variable.constructor == Array)...\n</code></pre>\n\n<p>Is this the best way this can be done?</p>\n",
            "last_activity_date": 1423782073,
            "question_id": 767486,
            "score": 553,
            "tags": [
                "javascript",
                "arrays",
                "variables"
            ],
            "title": "How do you check if a variable is an array in JavaScript?"
        },
        {
            "answer_count": 12,
            "answers": [
                {
                    "body": "<p>If you instead use the 3rd party plugin, it has a highlight option:\n<a href=\"http://docs.jquery.com/Plugins/Autocomplete/autocomplete#url_or_dataoptions\" rel=\"nofollow\">http://docs.jquery.com/Plugins/Autocomplete/autocomplete#url_or_dataoptions</a></p>\n\n<p>(see the Options tab)</p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>Yes, you can if you monkey-patch autocomplete.</p>\n\n<p>In the autocomplete widget included in v1.8rc3 of jQuery UI, the popup of suggestions is created in the _renderMenu function of the autocomplete widget.  This function is defined like this: </p>\n\n<pre><code>_renderMenu: function( ul, items ) {\n    var self = this;\n    $.each( items, function( index, item ) {\n        self._renderItem( ul, item );\n    });\n},\n</code></pre>\n\n<p>The _renderItem function is defined like this: </p>\n\n<pre><code>_renderItem: function( ul, item) {\n    return $( \"&lt;li&gt;&lt;/li&gt;\" )\n        .data( \"item.autocomplete\", item )\n        .append( \"&lt;a&gt;\" + item.label + \"&lt;/a&gt;\" )\n        .appendTo( ul );\n},\n</code></pre>\n\n<p>So what you need to do is replace that _renderItem fn with your own creation that produces the desired effect.  This technique, redefining an internal function in a library, I have come to learn is called <a href=\"http://en.wikipedia.org/wiki/Monkey_patch\"><em>monkey-patching</em></a>.  Here's how I did it: </p>\n\n<pre><code>  function monkeyPatchAutocomplete() {\n\n      // don't really need this, but in case I did, I could store it and chain\n      var oldFn = $.ui.autocomplete.prototype._renderItem;\n\n      $.ui.autocomplete.prototype._renderItem = function( ul, item) {\n          var re = new RegExp(\"^\" + this.term) ;\n          var t = item.label.replace(re,\"&lt;span style='font-weight:bold;color:Blue;'&gt;\" + \n                  this.term + \n                  \"&lt;/span&gt;\");\n          return $( \"&lt;li&gt;&lt;/li&gt;\" )\n              .data( \"item.autocomplete\", item )\n              .append( \"&lt;a&gt;\" + t + \"&lt;/a&gt;\" )\n              .appendTo( ul );\n      };\n  }\n</code></pre>\n\n<p>Now, this is a hack, because</p>\n\n<ul>\n<li><p>there's a regexp obj created for every item rendered in the list.  That regexp obj ought to be re-used for all items. </p></li>\n<li><p>there's no css class used for the formatting of the completed part.  It's an inline style.<br>\nThis means if you had multiple autocompletes on the same page, they'd all get the same treatment. A css style would solve that.</p></li>\n</ul>\n\n<p>...but it illustrates the main technique, and it works for your basic requirements. </p>\n\n<p><img src=\"http://i40.tinypic.com/102wcd0.jpg\" alt=\"alt text\"></p>\n\n<p>working example: <a href=\"http://jsbin.com/ezifi/4\">http://jsbin.com/ezifi/4</a></p>\n\n<hr>\n\n<p>To preserve the case of the match strings, as opposed to using the case of the typed characters, use this line: </p>\n\n<pre><code>var t = item.label.replace(re,\"&lt;span style='font-weight:bold;color:Blue;'&gt;\" + \n          \"$&amp;\" + \n          \"&lt;/span&gt;\");\n</code></pre>\n\n<p>In other words, starting from the original code above, you just need to replace <code>this.term</code> with <code>\"$&amp;\"</code>.</p>\n\n<hr>\n\n<p><strong>EDIT</strong><br>\nThe above changes <em>every</em> autocomplete widget on the page. If you want to change only one, see this question:<br>\n<a href=\"http://stackoverflow.com/questions/6163152/how-to-patch-just-one-instance-of-autocomplete-on-a-page/6164621#6164621\">How to patch *just one* instance of Autocomplete on a page?</a></p>\n",
                    "is_accepted": true,
                    "score": 195
                },
                {
                    "body": "<p>Take a look at the combobox demo, it includes result highlighting: <a href=\"http://jqueryui.com/demos/autocomplete/#combobox\" rel=\"nofollow\">http://jqueryui.com/demos/autocomplete/#combobox</a></p>\n\n<p>The regex in use there also deals with html results.</p>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>this also works:</p>\n\n<pre><code>       $.ui.autocomplete.prototype._renderItem = function (ul, item) {\n            item.label = item.label.replace(new RegExp(\"(?![^&amp;;]+;)(?!&lt;[^&lt;&gt;]*)(\" + $.ui.autocomplete.escapeRegex(this.term) + \")(?![^&lt;&gt;]*&gt;)(?![^&amp;;]+;)\", \"gi\"), \"&lt;strong&gt;$1&lt;/strong&gt;\");\n            return $(\"&lt;li&gt;&lt;/li&gt;\")\n                    .data(\"item.autocomplete\", item)\n                    .append(\"&lt;a&gt;\" + item.label + \"&lt;/a&gt;\")\n                    .appendTo(ul);\n        };\n</code></pre>\n\n<p>a combination of @J\u00f6rn Zaefferer and @Cheeso's  responses.</p>\n",
                    "is_accepted": false,
                    "score": 51
                },
                {
                    "body": "<p>for an even easier way, try this: </p>\n\n<pre><code>$('ul: li: a[class=ui-corner-all]').each (function (){      \n //grab each text value \n var text1 = $(this).text();     \n //grab user input from the search box\n var val = $('#s').val()\n     //convert \n re = new RegExp(val, \"ig\") \n //match with the converted value\n matchNew = text1.match(re);\n //Find the reg expression, replace it with blue coloring/\n text = text1.replace(matchNew, (\"&lt;span style='font-weight:bold;color:green;'&gt;\")  + matchNew +    (\"&lt;/span&gt;\"));\n\n    $(this).html(text)\n});\n  }\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 3
                },
                {
                    "body": "<p>Super helpful. Thank you. +1.</p>\n\n<p>Here is a light version that sorts on \"String must begin with the term\":</p>\n\n<pre><code>function hackAutocomplete(){\n\n    $.extend($.ui.autocomplete, {\n        filter: function(array, term){\n            var matcher = new RegExp(\"^\" + term, \"i\");\n\n            return $.grep(array, function(value){\n                return matcher.test(value.label || value.value || value);\n            });\n        }\n    });\n}\n\nhackAutocomplete();\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 6
                },
                {
                    "body": "<p>Here is a version that does not require any regular expressions and matches multiple results in the label.</p>\n\n<pre><code>$.ui.autocomplete.prototype._renderItem = function (ul, item) {\n            var highlighted = item.label.split(this.term).join('&lt;strong&gt;' + this.term +  '&lt;/strong&gt;');\n            return $(\"&lt;li&gt;&lt;/li&gt;\")\n                .data(\"item.autocomplete\", item)\n                .append(\"&lt;a&gt;\" + highlighted + \"&lt;/a&gt;\")\n                .appendTo(ul);\n};\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 2
                },
                {
                    "body": "<p>Here's a rehash of Ted de Koning's solution. It includes :</p>\n\n<ul>\n<li>Case insensitive search</li>\n<li>Finding many occurrences of the searched string</li>\n</ul>\n\n<pre class=\"lang-js prettyprint-override\"><code>$.ui.autocomplete.prototype._renderItem = function (ul, item) {\n\n    var sNeedle     = item.label;\n    var iTermLength = this.term.length; \n    var tStrPos     = new Array();      //Positions of this.term in string\n    var iPointer    = 0;\n    var sOutput     = '';\n\n    //Change style here\n    var sPrefix     = '&lt;strong style=\"color:#3399FF\"&gt;';\n    var sSuffix     = '&lt;/strong&gt;';\n\n    //Find all occurences positions\n    tTemp = item.label.toLowerCase().split(this.term.toLowerCase());\n    var CharCount = 0;\n    tTemp[-1] = '';\n    for(i=0;i&lt;tTemp.length;i++){\n        CharCount += tTemp[i-1].length;\n        tStrPos[i] = CharCount + (i * iTermLength) + tTemp[i].length\n    }\n\n    //Apply style\n    i=0;\n    if(tStrPos.length &gt; 0){\n        while(iPointer &lt; sNeedle.length){\n            if(i&lt;=tStrPos.length){\n                //Needle\n                if(iPointer == tStrPos[i]){\n                    sOutput += sPrefix + sNeedle.substring(iPointer, iPointer + iTermLength) + sSuffix;\n                    iPointer += iTermLength;\n                    i++;\n                }\n                else{\n                    sOutput += sNeedle.substring(iPointer, tStrPos[i]);\n                    iPointer = tStrPos[i];\n                }\n            }\n        }\n    }\n\n\n    return $(\"&lt;li&gt;&lt;/li&gt;\")\n        .data(\"item.autocomplete\", item)\n        .append(\"&lt;a&gt;\" + sOutput + \"&lt;/a&gt;\")\n        .appendTo(ul);\n};\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 3
                },
                {
                    "body": "<p>jQueryUI 1.9.0 changes how _renderItem works.</p>\n\n<p>The code below takes this change into consideration and also shows how I was doing highlight matching using J\u00f6rn Zaefferer's jQuery Autocomplete plugin. It will highlight all individual terms in the overall search term.</p>\n\n<p>Since moving to using Knockout and jqAuto I found this a much easier way of styling the results.</p>\n\n<pre><code>function monkeyPatchAutocomplete() {\n   $.ui.autocomplete.prototype._renderItem = function (ul, item) {\n\n      // Escape any regex syntax inside this.term\n      var cleanTerm = this.term.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&amp;');\n\n      // Build pipe separated string of terms to highlight\n      var keywords = $.trim(cleanTerm).replace('  ', ' ').split(' ').join('|');\n\n      // Get the new label text to use with matched terms wrapped\n      // in a span tag with a class to do the highlighting\n      var re = new RegExp(\"(\" + keywords + \")\", \"gi\");\n      var output = item.label.replace(re,  \n         '&lt;span class=\"ui-menu-item-highlight\"&gt;$1&lt;/span&gt;');\n\n      return $(\"&lt;li&gt;\")\n         .append($(\"&lt;a&gt;\").html(output))\n         .appendTo(ul);\n   };\n};\n\n$(function () {\n   monkeyPatchAutocomplete();\n});\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 5
                },
                {
                    "body": "<p>Here it goes a functional full example.</p>\n\n<pre><code>&lt;!doctype html&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;meta charset=\"UTF-8\"&gt;\n&lt;title&gt;Autocomplete - jQuery&lt;/title&gt;\n&lt;link rel=\"stylesheet\" href=\"http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css\"&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;form id=\"form1\" name=\"form1\" method=\"post\" action=\"\"&gt;\n  &lt;label for=\"search\"&gt;&lt;/label&gt;\n  &lt;input type=\"text\" name=\"search\" id=\"search\" /&gt;\n&lt;/form&gt;\n\n&lt;script src=\"http://code.jquery.com/jquery-1.9.1.js\"&gt;&lt;/script&gt;\n&lt;script src=\"http://code.jquery.com/ui/1.10.2/jquery-ui.js\"&gt;&lt;/script&gt;\n&lt;script&gt;\n$(function(){\n\n$.ui.autocomplete.prototype._renderItem = function (ul, item) {\n    item.label = item.label.replace(new RegExp(\"(?![^&amp;;]+;)(?!&lt;[^&lt;&gt;]*)(\" + $.ui.autocomplete.escapeRegex(this.term) + \")(?![^&lt;&gt;]*&gt;)(?![^&amp;;]+;)\", \"gi\"), \"&lt;strong&gt;$1&lt;/strong&gt;\");\n    return $(\"&lt;li&gt;&lt;/li&gt;\")\n            .data(\"item.autocomplete\", item)\n            .append(\"&lt;a&gt;\" + item.label + \"&lt;/a&gt;\")\n            .appendTo(ul);\n};\n\n\nvar availableTags = [\n    \"JavaScript\",\n    \"ActionScript\",\n    \"C++\",\n    \"Delphi\",\n    \"Cobol\",\n    \"Java\",\n    \"Ruby\",\n    \"Pythin\",\n    \"Perl\",\n    \"Groove\",\n    \"Lisp\",\n    \"Pascal\",\n    \"Assembly\",\n    \"Cliper\",\n];\n\n$('#search').autocomplete({\n    source: availableTags,\n    minLength: 3\n});\n\n\n});\n&lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 3
                },
                {
                    "body": "<p>To support multiple values, just simply add following function:</p>\n\n<pre><code>function getLastTerm( term ) {\n  return split( term ).pop();\n}\n\nvar t = String(item.value).replace(new RegExp(getLastTerm(this.term), \"gi\"), \"&lt;span class='ui-state-highlight'&gt;$&amp;&lt;/span&gt;\");\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>Here is my version:</p>\n\n<ul>\n<li>Uses DOM functions instead of RegEx to break strings/inject span tags</li>\n<li>Only the specified autocomplete is affected, not all</li>\n<li>Works with UI version 1.9.x</li>\n</ul>\n\n<pre class=\"lang-js prettyprint-override\"><code>function highlightText(text, $node) {\n    var searchText = $.trim(text).toLowerCase(),\n        currentNode = $node.get(0).firstChild,\n        matchIndex,\n        newTextNode,\n        newSpanNode;\n    while ((matchIndex = currentNode.data.toLowerCase().indexOf(searchText)) &gt;= 0) {\n        newTextNode = currentNode.splitText(matchIndex);\n        currentNode = newTextNode.splitText(searchText.length);\n        newSpanNode = document.createElement(\"span\");\n        newSpanNode.className = \"highlight\";\n        currentNode.parentNode.insertBefore(newSpanNode, currentNode);\n        newSpanNode.appendChild(newTextNode);\n    }\n}\n$(\"#autocomplete\").autocomplete({\n    source: data\n}).data(\"ui-autocomplete\")._renderItem = function (ul, item) {\n    var $a = $(\"&lt;a&gt;&lt;/a&gt;\").text(item.label);\n    highlightText(this.term, $a);\n    return $(\"&lt;li&gt;&lt;/li&gt;\").append($a).appendTo(ul);\n};\n</code></pre>\n\n<p><a href=\"http://salman-w.blogspot.com/2013/12/jquery-ui-autocomplete-examples.html#example-4\" rel=\"nofollow\"><strong>Highlight matched text example</strong></a></p>\n",
                    "is_accepted": false,
                    "score": 0
                }
            ],
            "body": "<p>I'm using <a href=\"http://jqueryui.com/demos/autocomplete/\">jQuery UI Autocomplete plug-in</a>.  Is there a way to highlight search character sequence in drop-down results? </p>\n\n<p>For example, if I have data: \"foo bar\" it and I search for \"foo\" I get \"<strong>foo</strong> bar\" in drop down. </p>\n",
            "last_activity_date": 1416849046,
            "question_id": 2435964,
            "score": 136,
            "tags": [
                "javascript",
                "jquery",
                "jquery-ui",
                "jquery-autocomplete",
                "jquery-ui-autocomplete"
            ],
            "title": "jQueryUI: how can I custom-format the Autocomplete plug-in results?"
        },
        {
            "answer_count": 27,
            "answers": [
                {
                    "body": "<p>Use <code>Math.round(num * 100) / 100</code></p>\n",
                    "is_accepted": true,
                    "score": 538
                },
                {
                    "body": "<pre><code>Math.round(yourValue * 100) / 100\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 8
                },
                {
                    "body": "<p>This may help you:</p>\n\n<pre><code>var result = (Math.round(input*100)/100);\n</code></pre>\n\n<p>for more information, you can have a look at this link</p>\n\n<p><a href=\"http://stackoverflow.com/questions/566564/javascript-functions-math-roundnum-vs-num-tofixed0-and-browser-inconsistenci\">Javascript functions Math.round(num) vs num.toFixed(0) and browser inconsistencies</a></p>\n",
                    "is_accepted": false,
                    "score": 4
                },
                {
                    "body": "<p>Consider <code>.toFixed()</code> and <code>.toPrecision()</code>:</p>\n\n<p><a href=\"http://www.javascriptkit.com/javatutors/formatnumber.shtml\">http://www.javascriptkit.com/javatutors/formatnumber.shtml</a></p>\n",
                    "is_accepted": false,
                    "score": 20
                },
                {
                    "body": "<p>it may work for you,</p>\n\n<pre><code>Math.round(num * 100)/100;\n</code></pre>\n\n<p>to know the difference between toFixed and round, you can have a look at this link</p>\n\n<p><a href=\"http://stackoverflow.com/questions/566564/javascript-functions-math-roundnum-vs-num-tofixed0-and-browser-inconsistenci\">Javascript functions Math.round(num) vs num.toFixed(0) and browser inconsistencies</a></p>\n",
                    "is_accepted": false,
                    "score": 7
                },
                {
                    "body": "<p>Here is a simple way to do it:</p>\n\n<pre><code>Math.round(value * 100) / 100\n</code></pre>\n\n<p>You might want to go ahead and make a separate function to do it for you though:</p>\n\n<pre><code>function roundToTwo(value) {\n    return(Math.round(value * 100) / 100);\n}\n</code></pre>\n\n<p>Then you would simply pass in the value.</p>\n\n<p>You could enhance it to round to any arbitrary number of decimals by adding a second parameter.</p>\n\n<pre><code>function myRound(value, places) {\n    var multiplier = Math.pow(10, places);\n\n    return (Math.round(value * multiplier) / multiplier);\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 20
                },
                {
                    "body": "<p>If value is text type:</p>\n\n<pre><code>parseFloat(\"123.456\").toFixed(2);\n</code></pre>\n\n<p>If value is number:</p>\n\n<pre><code>var numb = 123.23454;\nnumb = numb.toFixed(2);\n</code></pre>\n\n<p>There is a downside that values like 1.5 will give \"1.50\" as the output. A fix suggested by @minitech:</p>\n\n<pre><code>var numb = 1.5;\nnumb = +numb.toFixed(2);\n// Note the plus sign that drops any \"extra\" zeroes at the end.\n// It changes the result (which is a string) into a number again (think \"0 + foo\"),\n// which means that it uses only as many digits as necessary.\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 691
                },
                {
                    "body": "<p><strong>None of the answers found here is correct</strong>. @stinkycheeseman asked to <strong>round up</strong>, you all rounded the number.</p>\n\n<p>To round up, use this:</p>\n\n<pre><code>Math.ceil(num * 100)/100;\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 38
                },
                {
                    "body": "<p>Here is function i came up to do \"round up\". I used double Math.round to compensate javascript inaccurate multiplying, so 1.005 will be correctly rounded as 1.01.</p>\n\n<pre><code>function myRound(number, decimalplaces ){\n    if(decimalplaces &gt; 0){\n        var multiply1 = Math.pow(10,(decimalplaces + 4));\n        var divide1 = Math.pow(10, decimalplaces);\n        return Math.round( Math.round(number * multiply1)/10000 )/divide1 ;\n    }\n    if(decimalplaces &lt; 0){\n        var divide2 = Math.pow(10, Math.abs(decimalplaces));\n        var multiply2 = Math.pow(10, Math.abs(decimalplaces));\n        return Math.round( Math.round(number / divide2) * multiply2 );\n    }\n    return Math.round(number);\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": -1
                },
                {
                    "body": "<p>I wrote for self this set of functions.\nMay be, it will help you too.</p>\n\n<pre><code>function float_exponent(number) {\n    exponent = 1;\n    while (number &lt; 1.0) {\n        exponent += 1\n        number *= 10\n    }\n    return exponent;\n}\nfunction format_float(number, extra_precision) {\n    precision = float_exponent(number) + (extra_precision || 0)\n    return number.toFixed(precision).split(/\\.?0+$/)[0]\n}\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>format_float(1.01); // 1\nformat_float(1.06); // 1.1\nformat_float(0.126); // 0.13\nformat_float(0.000189); // 0.00019\n</code></pre>\n\n<p>For you case:</p>\n\n<pre><code>format_float(10, 1); // 10\nformat_float(9.1, 1); // 9.1\nformat_float(1.77777, 1); // 1.78\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 2
                },
                {
                    "body": "<p>I still don't think anyone gave him the answer to how to only do the rounding if needed. The easiest way I see to do it is to check if there is even a decimal in the number, like so:</p>\n\n<pre><code>var num = 3.21;\nif ( (num+\"\").indexOf('.') &gt;= 0 ) { //at least assert to string first...\n    // whatever code you decide to use to round\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": -6
                },
                {
                    "body": "<p>Even though this topic is a little old.. here is a prototype method.</p>\n\n<pre><code>Number.prototype.round = function(places){\n    places = Math.pow(10, places); \n    return Math.round(this * places)/places;\n}\n\nvar yournum = 10.55555;\nyournum = yournum.round(2);\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 10
                },
                {
                    "body": "<p>You can use</p>\n\n<pre><code>function roundToTwo(num) {    \n    return +(Math.round(num + \"e+2\")  + \"e-2\");\n}\n</code></pre>\n\n<p>I found this over on <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/round\">MDN</a>. Their way avoids the problem with 1.005 that was <a href=\"http://stackoverflow.com/questions/11832914/round-up-to-2-decimal-places-in-javascript#comment24719818_11832950\">mentioned</a>.</p>\n\n<pre><code>roundToTwo(1.005)\n1.01\nroundToTwo(10)\n10\nroundToTwo(1.7777777)\n1.78\nroundToTwo(9.1)\n9.1\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 88
                },
                {
                    "body": "<p>To not deal with many 0s, use this variant:</p>\n\n<pre><code>Math.round(num * 1e2) / 1e2\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 5
                },
                {
                    "body": "<p>MarkG's answer is the correct one.  Here's a generic extension for any number of decimal places.</p>\n\n<pre><code>Number.prototype.round = function(places) {\n  return +(Math.round(this + \"e+\" + places)  + \"e-\" + places);\n}\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>var n = 1.7777;    \nn.round(2); // 1.78\n</code></pre>\n\n<p>Unit test:</p>\n\n<pre><code>it.only('should round floats to 2 places', function() {\n\n  var cases = [\n    { n: 10,      e: 10,    p:2 },\n    { n: 1.7777,  e: 1.78,  p:2 },\n    { n: 1.005,   e: 1.01,  p:2 },\n    { n: 1.005,   e: 1,     p:0 },\n    { n: 1.77777, e: 1.8,   p:1 }\n  ]\n\n  cases.forEach(function(testCase) {\n    var r = testCase.n.round(testCase.p);\n    assert.equal(r, testCase.e, 'didn\\'t get right number');\n  });\n})\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 38
                },
                {
                    "body": "<p>MarkG and Lavamantis offered a much better solution than the one that has been accepted. It's a shame they don't get more upvotes!</p>\n\n<p>Here is the function I use to solve the floating point decimals issues <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/round#Example%3a_Decimal_rounding\">also based on MDN</a>. It is even more generic (but less concise) than Lavamantis's solution:</p>\n\n<pre><code>function round(value, exp) {\n  if (typeof exp === 'undefined' || +exp === 0)\n    return Math.round(value);\n\n  value = +value;\n  exp  = +exp;\n\n  if (isNaN(value) || !(typeof exp === 'number' &amp;&amp; exp % 1 === 0))\n    return NaN;\n\n  // Shift\n  value = value.toString().split('e');\n  value = Math.round(+(value[0] + 'e' + (value[1] ? (+value[1] + exp) : exp)));\n\n  // Shift back\n  value = value.toString().split('e');\n  return +(value[0] + 'e' + (value[1] ? (+value[1] - exp) : -exp));\n}\n</code></pre>\n\n<p>Use it with:</p>\n\n<pre><code>round(10.8034, 2);      // Returns 10.8\nround(1.275, 2);        // Returns 1.28\nround(1.27499, 2);      // Returns 1.27\nround(1.2345678e+2, 2); // Returns 123.46\n</code></pre>\n\n<p>Compared to Lavamantis's solution, we can do...</p>\n\n<pre><code>round(1234.5678, -2); // Returns 1200\nround(\"123.45\");      // Returns 123\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 13
                },
                {
                    "body": "<p>If you happen to already be using the d3 library, they have a powerful number formatting library: <a href=\"https://github.com/mbostock/d3/wiki/Formatting\">https://github.com/mbostock/d3/wiki/Formatting</a></p>\n\n<p>Rounding specifically is here: <a href=\"https://github.com/mbostock/d3/wiki/Formatting#d3_round\">https://github.com/mbostock/d3/wiki/Formatting#d3_round</a></p>\n\n<p>In your case, the answer is:</p>\n\n<pre><code>&gt; d3.round(1.777777, 2)\n1.78\n&gt; d3.round(1.7, 2)\n1.7\n&gt; d3.round(1, 2)\n1\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 6
                },
                {
                    "body": "<pre><code>+(10).toFixed(2); // = 10\n+(10.12345).toFixed(2); // = 10.12\n\n(10).toFixed(2); // = 10.00\n(10.12345).toFixed(2); // = 10.12\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 21
                },
                {
                    "body": "<p>Try to use <a href=\"http://www.teamdf.com/web/jquery-number-format-redux/196\" rel=\"nofollow\">JQuery.number plug-in</a>.</p>\n\n<pre><code>var number = 19.8000000007;\nvar res = 1 * $.number(number, 2);\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 2
                },
                {
                    "body": "<p>A precise rounding method. Source : <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/round\" rel=\"nofollow\">Mozilla</a></p>\n\n<pre><code>(function(){\n\n    /**\n     * Decimal adjustment of a number.\n     *\n     * @param   {String}    type    The type of adjustment.\n     * @param   {Number}    value   The number.\n     * @param   {Integer}   exp     The exponent (the 10 logarithm of the adjustment base).\n     * @returns {Number}            The adjusted value.\n     */\n    function decimalAdjust(type, value, exp) {\n        // If the exp is undefined or zero...\n        if (typeof exp === 'undefined' || +exp === 0) {\n            return Math[type](value);\n        }\n        value = +value;\n        exp = +exp;\n        // If the value is not a number or the exp is not an integer...\n        if (isNaN(value) || !(typeof exp === 'number' &amp;&amp; exp % 1 === 0)) {\n            return NaN;\n        }\n        // Shift\n        value = value.toString().split('e');\n        value = Math[type](+(value[0] + 'e' + (value[1] ? (+value[1] - exp) : -exp)));\n        // Shift back\n        value = value.toString().split('e');\n        return +(value[0] + 'e' + (value[1] ? (+value[1] + exp) : exp));\n    }\n\n    // Decimal round\n    if (!Math.round10) {\n        Math.round10 = function(value, exp) {\n            return decimalAdjust('round', value, exp);\n        };\n    }\n    // Decimal floor\n    if (!Math.floor10) {\n        Math.floor10 = function(value, exp) {\n            return decimalAdjust('floor', value, exp);\n        };\n    }\n    // Decimal ceil\n    if (!Math.ceil10) {\n        Math.ceil10 = function(value, exp) {\n            return decimalAdjust('ceil', value, exp);\n        };\n    }\n\n})();\n</code></pre>\n\n<p>Examples:</p>\n\n<pre><code>// Round\nMath.round10(55.55, -1); // 55.6\nMath.round10(55.549, -1); // 55.5\nMath.round10(55, 1); // 60\nMath.round10(54.9, 1); // 50\nMath.round10(-55.55, -1); // -55.5\nMath.round10(-55.551, -1); // -55.6\nMath.round10(-55, 1); // -50\nMath.round10(-55.1, 1); // -60\nMath.round10(1.005, -2); // 1.01 -- compare this with Math.round(1.005*100)/100 above\n// Floor\nMath.floor10(55.59, -1); // 55.5\nMath.floor10(59, 1); // 50\nMath.floor10(-55.51, -1); // -55.6\nMath.floor10(-51, 1); // -60\n// Ceil\nMath.ceil10(55.51, -1); // 55.6\nMath.ceil10(51, 1); // 60\nMath.ceil10(-55.59, -1); // -55.5\nMath.ceil10(-59, 1); // -50\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 9
                },
                {
                    "body": "<p>My crack at a solution:</p>\n\n<pre><code>function roundNumber(s,n){\n    /* s should equal numeric string for absolute accuracy; function is not 100% accurate if s is a number of 17 digits or higher\n    (test example: roundNumber(1.0049999999999999,2) returns 1.01, NOT 1) */\n    s+=\"\";//change s to string in case s is passed as a number\n    if(s.indexOf(\".\")&gt;-1){\n            if(s.split(\".\")[1].length&gt;n){\n            var s2=s.split(\".\")[1].split(\"\");\n            if(s2[n]&gt;4){\n                var i=n-1;\n                for(;i&gt;-1;i--){\n                    if(s2[i]!=9){\n                        s2[i]=s2[i]*1+1+\"\";\n                        break;\n                    }else{\n                        s2[i]=\"0\";\n                    }\n                }\n                s2.length=n;\n                s2=s2.join(\"\");\n                if(i!=-1){\n                    s=s.split(\".\")[0]+\".\"+s2;\n                }else{\n                    s=s.split(\".\")[0];\n                    s[0]!=\"-\"?++s:--s;\n                    s+=\".\"+s2;\n                }\n            }else{\n                s=s.slice(0,s.indexOf(\".\")+n+1);\n            }\n        }\n    }\n    return s*1;\n}\n</code></pre>\n\n<p>where <strong>s</strong> is either a number, or a numeric string; and <strong>n</strong> is the number of digits after the decimal place to round the number to (can be 0).</p>\n\n<p>The function is not 100% accurate if the first argument is a number of 17 digits or higher. This is because  web browsers appear to be designed to automatically round the large number to something smaller, when passed to a function. Therefore, when working with such large numbers, s should be given a numeric string for absolute accuracy.</p>\n\n<p>Example:</p>\n\n<pre><code>roundNumber(1.0049999999999999,2) //returns 1.01, NOT 1\nroundNumber(\"1.0049999999999999\",2) //returns 1\n</code></pre>\n\n<p>This is perhaps not the fastest way of rounding numbers, but it meets the requirements of the question's author:</p>\n\n<pre><code>roundNumber(10,2) //returns 10\nroundNumber(1.7777777,2) //returns 1.78\nroundNumber(9.1,2) //returns 9.1\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>Just wanted to share my approach, based on previously mentioned answers:</p>\n\n<p>Lets create function, that rounds any given numeric value to given amount of decimal places:</p>\n\n<pre><code>function roundWDecimals(n, decimals) {\n    if (!isNaN(parseFloat(n)) &amp;&amp; isFinite(n)) {\n        if (typeof(decimals) == typeof(undefined)) {\n            decimals = 0;\n        }\n        var decimalPower = Math.pow(10, decimals);\n        return Math.round(parseFloat(n) * decimalPower) / decimalPower;\n    }\n    return NaN;\n}\n</code></pre>\n\n<p>And introduce new \"round\" method for numbers prototype</p>\n\n<pre><code>Object.defineProperty(Number.prototype, 'round', {\n    enumerable: false,\n    value: function(decimals) {\n        return roundWDecimals(this, decimals);\n    }\n});\n</code></pre>\n\n<p>And you can test it</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"true\">\r\n<div class=\"snippet-code snippet-currently-hidden\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>function roundWDecimals(n, decimals) {\r\n\tif (!isNaN(parseFloat(n)) &amp;&amp; isFinite(n)) {\r\n\t\tif (typeof(decimals) == typeof(undefined)) {\r\n\t\t\tdecimals = 0;\r\n\t\t}\r\n\t\tvar decimalPower = Math.pow(10, decimals);\r\n\t\treturn Math.round(parseFloat(n) * decimalPower) / decimalPower;\r\n\t}\r\n\treturn NaN;\r\n}\r\nObject.defineProperty(Number.prototype, 'round', {\r\n\tenumerable: false,\r\n\tvalue: function(decimals) {\r\n\t\treturn roundWDecimals(this, decimals);\r\n\t}\r\n});\r\n\r\nvar roundables = [\r\n    {num: 10, decimals: 2},\r\n    {num: 1.7777777, decimals: 2},\r\n    {num: 9.1, decimals: 2},\r\n    {num: 55.55, decimals: 1},\r\n    {num: 55.549, decimals: 1},\r\n    {num: 55, decimals: 0},\r\n    {num: 54.9, decimals: 0},\r\n    {num: -55.55, decimals: 1},\r\n    {num: -55.551, decimals: 1},\r\n    {num: -55, decimals: 0},\r\n    {num: 1.005, decimals: 2},\r\n    {num: 1.005, decimals: 2},\r\n    {num: 19.8000000007, decimals: 2},\r\n  ],\r\n  table = '&lt;table border=\"1\"&gt;&lt;tr&gt;&lt;th&gt;Num&lt;/th&gt;&lt;th&gt;Decimals&lt;/th&gt;&lt;th&gt;Result&lt;/th&gt;&lt;/tr&gt;';\r\n$.each(roundables, function() {\r\n  table += \r\n    '&lt;tr&gt;'+\r\n      '&lt;td&gt;'+this.num+'&lt;/td&gt;'+\r\n      '&lt;td&gt;'+this.decimals+'&lt;/td&gt;'+\r\n      '&lt;td&gt;'+this.num.round(this.decimals)+'&lt;/td&gt;'+\r\n    '&lt;/tr&gt;'\r\n  ;\r\n});\r\ntable += '&lt;/table&gt;';\r\n$('.results').append(table);</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js\"&gt;&lt;/script&gt;\r\n&lt;div class=\"results\"&gt;&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>Try this <strong>light weight</strong> solution:</p>\n\n<pre><code>function round(x, digits){\n  return parseFloat(x.toFixed(digits))\n}\n\n round(1.222,  2) ;\n // 1.22\n round(1.222, 10) ;\n // 1.222\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 8
                },
                {
                    "body": "<p>one can use '.toFixed(NumberOfDecimelPoint)'</p>\n\n<pre><code>var str = 10.234.toFixed(2); // '10.24'\nvar number = Number(str); //10.24\n</code></pre>\n\n<p>For ex: alert(str);</p>\n",
                    "is_accepted": false,
                    "score": 10
                },
                {
                    "body": "<h1>node.js</h1>\n\n<p>This did the trick for me on <strong>node.js</strong> in a matter of seconds:</p>\n\n<p><code>npm install math</code></p>\n\n<p><em>Source: <a href=\"http://mathjs.org/examples/basic_usage.js.html\" rel=\"nofollow\">http://mathjs.org/examples/basic_usage.js.html</a></em></p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>Use this function Number(x).toFixed(2);</p>\n",
                    "is_accepted": false,
                    "score": 3
                },
                {
                    "body": "<p>Easiest way:</p>\n\n<p><code>+num.toFixed(2)</code></p>\n\n<p>It converts it to a string, and then back into an integer / float.</p>\n",
                    "is_accepted": false,
                    "score": 1
                }
            ],
            "body": "<p>I'd like to round up to 2 decimal places, but <em>only if necessary</em>.</p>\n\n<p>Input:</p>\n\n<pre><code>10\n1.7777777\n9.1\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>10\n1.78\n9.1\n</code></pre>\n\n<p>How can I do this in JavaScript? </p>\n",
            "last_activity_date": 1424894970,
            "question_id": 11832914,
            "score": 440,
            "tags": [
                "javascript",
                "rounding"
            ],
            "title": "Round to at most 2 decimal places in JavaScript"
        },
        {
            "answer_count": 6,
            "answers": [
                {
                    "body": "<p>I found two people which claim to have solved this problem:</p>\n\n<p><a href=\"http://webreflection.blogspot.com/2009/01/internet-explorer-object-watch.html\" rel=\"nofollow\">Crossbrowser Object watch</a> (claims support for IE, Opera, Safari)</p>\n\n<p><a href=\"http://forwarddevelopment.blogspot.com/2006/12/wactch-one-of-many-missing-js-function.html\" rel=\"nofollow\">watch() Missing JS Function in IE</a> with use of prototype.js for IE (? Opera, Safari ?)</p>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>That plugin simply uses a timer/interval to repeatedly check for changes on an object. Maybe good enough but personally I would like more immediacy as an observer.</p>\n\n<p>Here's an attempt at bringing <code>watch</code>/<code>unwatch</code> to IE: <a href=\"http://webreflection.blogspot.com/2009/01/internet-explorer-object-watch.html\">http://webreflection.blogspot.com/2009/01/internet-explorer-object-watch.html</a>.</p>\n\n<p>It does change the syntax from the Firefox way of adding observers. Instead of :</p>\n\n<pre><code>var obj = {foo:'bar'};\nobj.watch('foo', fooChanged);\n</code></pre>\n\n<p>You do:</p>\n\n<pre><code>var obj = {foo:'bar'};\nvar watcher = createWatcher(obj);\nwatcher.watch('foo', fooChanged);\n</code></pre>\n\n<p>Not as sweet, but as an observer you are notified immediately.</p>\n",
                    "is_accepted": false,
                    "score": 15
                },
                {
                    "body": "<p>(Sorry for the cross-posting, but this answer I gave to a similar question works fine here)</p>\n\n<p>I have created a small <a href=\"http://gist.github.com/384583\">object.watch shim</a> for this a while ago. It works in IE8, Safari, Chrome, Firefox, Opera, etc.</p>\n",
                    "is_accepted": true,
                    "score": 81
                },
                {
                    "body": "<p><strong>Update for 2015</strong></p>\n\n<p>Use <a href=\"http://arv.github.io/ecmascript-object-observe/\" rel=\"nofollow\">Object.observe() from ES7</a>. </p>\n\n<p><a href=\"https://github.com/MaxArt2501/object-observe\" rel=\"nofollow\">Here's a polyfill.</a></p>\n",
                    "is_accepted": false,
                    "score": 7
                },
                {
                    "body": "<p>I also think that right now the best solution is to use Watch.JS, find a nice tutorial here: <a href=\"http://hippieitgeek.blogspot.se/2013/07/listenwatch-for-object-or-array-changes.html\" rel=\"nofollow\">Listen/Watch for object or array changes in Javascript (Property changed event on Javascript objects)</a></p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>Note that in Chrome 36 and higher you can use <a href=\"http://www.html5rocks.com/en/tutorials/es7/observe/\"><code>Object.observe</code></a> as well. This is actually a part of a future ECMAScript standard, and not a browser-specific feature like Mozilla's <code>Object.watch</code>. </p>\n\n<p><code>Object.observe</code> only works on object properties, but is a lot more performant than <code>Object.watch</code> (which is meant for debugging purposes, not production use).</p>\n\n<pre><code>var options = {};\n\nObject.observe(options, function(changes) {\n    console.log(changes);\n});\n\noptions.foo = 'bar';\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 5
                }
            ],
            "body": "<p>Hey all, I was looking for an easy way to monitor an object or variable for changes, and I found Object.Watch that's supported in Mozilla browsers, but not IE. So I started searching around to see if anyone had written some sort of equivalent. </p>\n\n<p>About the only thing I've found has been a jQuery plugin (<a href=\"http://plugins.jquery.com/files/jquery-watch.js.txt\">http://plugins.jquery.com/files/jquery-watch.js.txt</a>), but I'm not sure if that's the best way to go. I certainly use jQuery in most of my projects, so I'm not worried about the jQuery aspect...</p>\n\n<p>Anyway, the question: can someone show me a working example of that jQuery plugin? I'm having problems making it work... </p>\n\n<p>Or, does anyone know of any better alternatives that would work cross browser? Thanks!</p>\n\n<p><strong>Update after answers</strong>:</p>\n\n<p>Thanks everyone for the responses! I tried out the code posted here:\n<a href=\"http://webreflection.blogspot.com/2009/01/internet-explorer-object-watch.html\">http://webreflection.blogspot.com/2009/01/internet-explorer-object-watch.html</a></p>\n\n<p>But I couldn't seem to make it work with IE. The code below works fine in FireFox, but does nothing in IE. In Firefox, each time watcher.status is changed, the document.write in watcher.watch is called and you can see the output on the page. In IE, that doesn't happen, but I can see that watcher.status is updating the value, because the last document.write shows the correct value (in both IE and FF). But, if the callback function isn't called, then that's kind of pointless...  :)</p>\n\n<p>Am I missing something?</p>\n\n<pre><code>var options = {'status': 'no status'},\nwatcher = createWatcher(options);\n\nwatcher.watch(\"status\", function(prop, oldValue, newValue) {\n    document.write(\"old: \" + oldValue + \", new: \" + newValue + \"&lt;br&gt;\");\n    return newValue;\n});\n\nwatcher.status = 'asdf';\nwatcher.status = '1234';\n\ndocument.write(watcher.status + \"&lt;br&gt;\");\n</code></pre>\n",
            "last_activity_date": 1426169014,
            "question_id": 1029241,
            "score": 60,
            "tags": [
                "javascript",
                "jquery",
                "javascript-events"
            ],
            "title": "Javascript Object.Watch for all browsers?"
        },
        {
            "answer_count": 12,
            "answers": [
                {
                    "body": "<p>It's never been my favourite way of shuffling, partly because it <em>is</em> implementation-specific as you say. In particular, I seem to remember that the standard library sorting from either Java or .NET (not sure which) can often detect if you end up with an inconsistent comparison between some elements (e.g. you first claim <code>A &lt; B</code> and <code>B &lt; C</code>, but then <code>C &lt; A</code>).</p>\n\n<p>It also ends up as a more complex (in terms of execution time) shuffle than you really need.</p>\n\n<p>I prefer the shuffle algorithm which effectively partitions the collection into \"shuffled\" (at the start of the collection, initially empty) and \"unshuffled\" (the rest of the collection). At each step of the algorithm, pick a random unshuffled element (which could be the first one) and swap it with the first unshuffled element - then treat it as shuffled (i.e. mentally move the partition to include it).</p>\n\n<p>This is O(n) and only requires n-1 calls to the random number generator, which is nice. It also produces a genuine shuffle - any element has a 1/n chance of ending up in each space, regardless of its original position (assuming a reasonable RNG). The sorted version <em>approximates</em> to an even distribution (assuming that the random number generator doesn't pick the same value twice, which is highly unlikely if it's returning random doubles) but I find it easier to reason about the shuffle version :)</p>\n\n<p>This approach is called a <a href=\"http://en.wikipedia.org/wiki/Fisher%2dYates%5Fshuffle\">Fisher-Yates shuffle</a>.</p>\n\n<p>I would regard it as best practice to code up this shuffle once and reuse it everywhere you need to shuffle items. Then you don't need to worry about sort implementations in terms of reliability or complexity. It's only a few lines of code (which I won't attempt in JavaScript!)</p>\n\n<p>The <a href=\"http://en.wikipedia.org/wiki/Shuffling#Shuffling%5Falgorithms\">Wikipedia article on shuffling</a> (and in particular the shuffle algorithms section) talks about sorting a random projection - it's worth reading the section on poor implementations of shuffling in general, so you know what to avoid.</p>\n",
                    "is_accepted": true,
                    "score": 87
                },
                {
                    "body": "<p>It is a hack, certainly. In practice, an infinitely looping algorithm is not likely.\nIf you're sorting objects, you could loop through the coords array and do something like:</p>\n\n<pre><code>for (var i = 0; i &lt; coords.length; i++)\n    coords[i].sortValue = Math.random();\n\ncoords.sort(useSortValue)\n\nfunction useSortValue(a, b)\n{\n  return a.sortValue - b.sortValue;\n}\n</code></pre>\n\n<p>(and then loop through them again to remove the sortValue)</p>\n\n<p>Still a hack though. If you want to do it nicely, you have to do it the hard way :)</p>\n",
                    "is_accepted": false,
                    "score": 2
                },
                {
                    "body": "<p>There is nothing wrong with it.</p>\n\n<p>The function you pass to .sort() <em>usually</em> looks something like</p>\n\n<pre>\nfunction sortingFunc( first, second )\n{\n  // example:\n  return first - second ;\n}\n</pre>\n\n<p>Your job in sortingFunc is to return:</p>\n\n<ul>\n<li>a negative number if first goes before second</li>\n<li>a positive number if first should go after second</li>\n<li>and 0 if they are completely equal</li>\n</ul>\n\n<p>The above sorting function puts things in order.</p>\n\n<p>If you return -'s and +'s randomly as what you have, you get a random ordering.</p>\n\n<p>Like in MySQL:</p>\n\n<pre>\nSELECT * from table ORDER BY rand()\n</pre>\n",
                    "is_accepted": false,
                    "score": -2
                },
                {
                    "body": "<p>After Jon has already <a href=\"http://stackoverflow.com/questions/962802/is-it-correct-to-use-javascript-array-sort-method-for-shuffling/962829#962829\">covered the theory</a>, here's an implementation:</p>\n\n<pre><code>function shuffle(array) {\n    var tmp, current, top = array.length;\n\n    if(top) while(--top) {\n    \tcurrent = Math.floor(Math.random() * (top + 1));\n    \ttmp = array[current];\n    \tarray[current] = array[top];\n    \tarray[top] = tmp;\n    }\n\n    return array;\n}\n</code></pre>\n\n<p>The algorithm is <code>O(n)</code>, whereas sorting should be <code>O(n log n)</code>. Depending on the overhead of executing JS code compared to the native <code>sort()</code> function, this might lead to a <a href=\"http://stackoverflow.com/questions/962802/is-it-correct-to-use-javascript-array-sort-method-for-shuffling/963872#963872\">noticable difference in performance</a> which should increase with array sizes.</p>\n\n<p><hr /></p>\n\n<p>In the comments to <a href=\"http://stackoverflow.com/questions/962802/is-it-correct-to-use-javascript-array-sort-method-for-shuffling/962886#962886\">bobobobo's answer</a>, I stated that the algorithm in question might not produce evenly distributed probabilities (depending on the implementation of <code>sort()</code>).</p>\n\n<p>My argument goes along these lines: A sorting algorithm requires a certain number <code>c</code> of comparisons, eg <code>c = n(n-1)/2</code> for Bubblesort. Our random comparison function makes the outcome of each comparison equally likely, ie there are <code>2^c</code> <em>equally probable</em> results. Now, each result has to correspond to one of the <code>n!</code> permutations of the array's entries, which makes an even distribution impossible in the general case. (This is a simplification, as the actual number of comparisons neeeded depends on the input array, but the assertion should still hold.)</p>\n\n<p>As Jon pointed out, this alone is no reason to prefer Fisher-Yates over using <code>sort()</code>, as the random number generator will also map a finite number of pseudo-random values to the <code>n!</code> permutations. But the results of Fisher-Yates should still be better:</p>\n\n<p><code>Math.random()</code> produces a pseudo-random number in the range <code>[0;1[</code>. As JS uses double-precision floating point values, this corresponds to <code>2^x</code> possible values where <code>52 \u2264 x \u2264 63</code> (I'm too lazy to find the actual number). A probability distribution generated using <code>Math.random()</code> will stop behaving well if the number of atomic events is of the same order of magnitude.</p>\n\n<p>When using Fisher-Yates, the relevant parameter is the size of the array, which should never approach <code>2^52</code> due to practical limitations.</p>\n\n<p>When sorting with a random comparision function, the function basically only cares if the return value is positive or negative, so this will never be a problem. But there is a similar one: Because the comparison function is well-behaved, the <code>2^c</code> possible results are, as stated, equally probable. If <code>c ~ n log n</code> then <code>2^c ~ n^(a\u00b7n)</code> where <code>a = const</code>, which makes it at least possible that <code>2^c</code> is of same magnitude as (or even less than) <code>n!</code> and thus leading to an uneven distribution, even if the sorting algorithm where to map onto the permutaions evenly. If this has any practical impact is beyond me.</p>\n\n<p>The real problem is that the sorting algorithms are not guaranteed to map onto the permutations evenly. It's easy to see that Mergesort does as it's symmetric, but reasoning about something like Bubblesort or, more importantly, Quicksort or Heapsort, is not.</p>\n\n<p><hr /></p>\n\n<p>The bottom line: As long as <code>sort()</code> uses Mergesort, you <em>should</em> be reasonably safe except in corner cases (at least I'm hoping that <code>2^c \u2264 n!</code> is a corner case), if not, all bets are off.",
                    "is_accepted": false,
                    "score": 95
                },
                {
                    "body": "<p>I think it's fine for cases where you're not picky about distribution and you want the source code to be small.</p>\n\n<p>In JavaScript (where the source is transmitted constantly), small makes a difference in bandwidth costs.</p>\n",
                    "is_accepted": false,
                    "score": 4
                },
                {
                    "body": "<p>I did some measurements of how random the results of this random sort are...</p>\n\n<p>My technique was to take a small array [1,2,3,4] and create all (4! = 24) permutations of it. Then I would apply the shuffling function to the array a large number of times and count how many times each permutation is generated. A good shuffling algoritm would distribute the results quite evenly over all the permutations, while a bad one would not create that uniform result.</p>\n\n<p>Using the code below I tested in Firefox, Opera, Chrome, IE6/7/8.</p>\n\n<p><s>Surprisingly for me, the random sort and the real shuffle both created equally uniform distributions. So it seems that (as many have suggested) the main browsers are using merge sort. This of course doesn't mean, that there can't be a browser out there, that does differently, but I would say it means, that this random-sort-method is reliable enough to use in practice.</s></p>\n\n<p><strong>EDIT:</strong> This test didn't really measured correctly the randomness or lack thereof. See the other answer I posted.</p>\n\n<p><strong>But on the performance side the shuffle function given by Cristoph was a clear winner.</strong> Even for small four-element arrays the real shuffle performed about twice as fast as random-sort!</p>\n\n<pre>\n// The shuffle function posted by Cristoph.\nvar shuffle = function(array) {\n    var tmp, current, top = array.length;\n\n    if(top) while(--top) {\n        current = Math.floor(Math.random() * (top + 1));\n        tmp = array[current];\n        array[current] = array[top];\n        array[top] = tmp;\n    }\n\n    return array;\n};\n\n// the random sort function\nvar rnd = function() {\n  return Math.round(Math.random())-0.5;\n};\nvar randSort = function(A) {\n  return A.sort(rnd);\n};\n\nvar permutations = function(A) {\n  if (A.length == 1) {\n    return [A];\n  }\n  else {\n    var perms = [];\n    for (var i=0; i&lt;A.length; i++) {\n      var x = A.slice(i, i+1);\n      var xs = A.slice(0, i).concat(A.slice(i+1));\n      var subperms = permutations(xs);\n      for (var j=0; j&lt;subperms.length; j++) {\n        perms.push(x.concat(subperms[j]));\n      }\n    }\n    return perms;\n  }\n};\n\nvar test = function(A, iterations, func) {\n  // init permutations\n  var stats = {};\n  var perms = permutations(A);\n  for (var i in perms){\n    stats[\"\"+perms[i]] = 0;\n  }\n\n  // shuffle many times and gather stats\n  var start=new Date();\n  for (var i=0; i&lt;iterations; i++) {\n    var shuffled = func(A);\n    stats[\"\"+shuffled]++;\n  }\n  var end=new Date();\n\n  // format result\n  var arr=[];\n  for (var i in stats) {\n    arr.push(i+\" \"+stats[i]);\n  }\n  return arr.join(\"\\n\")+\"\\n\\nTime taken: \" + ((end - start)/1000) + \" seconds.\";\n};\n\nalert(\"random sort: \" + test([1,2,3,4], 100000, randSort));\nalert(\"shuffle: \" + test([1,2,3,4], 100000, shuffle));\n</pre>\n",
                    "is_accepted": false,
                    "score": 15
                },
                {
                    "body": "<p>Interestingly, <strong>Microsoft used the same technique</strong> in their pick-random-browser-page.</p>\n\n<p>They used a slightly different comparison function:</p>\n\n<pre><code>function RandomSort(a,b) {\n    return (0.5 - Math.random());\n}\n</code></pre>\n\n<p>Looks almost the same to me, but <strong><a href=\"http://www.robweir.com/blog/2010/02/microsoft-random-browser-ballot.html\">it turned out to be not so random...</a></strong></p>\n\n<p>So I made some testruns again with the same methodology used in the linked article, and indeed - turned out that the random-sorting-method produced flawed results. New test code here:</p>\n\n<pre><code>function shuffle(arr) {\n  arr.sort(function(a,b) {\n    return (0.5 - Math.random());\n  });\n}\n\nfunction shuffle2(arr) {\n  arr.sort(function(a,b) {\n    return (Math.round(Math.random())-0.5);\n  });\n}\n\nfunction shuffle3(array) {\n  var tmp, current, top = array.length;\n\n  if(top) while(--top) {\n    current = Math.floor(Math.random() * (top + 1));\n    tmp = array[current];\n    array[current] = array[top];\n    array[top] = tmp;\n  }\n\n  return array;\n}\n\nvar counts = [\n  [0,0,0,0,0],\n  [0,0,0,0,0],\n  [0,0,0,0,0],\n  [0,0,0,0,0],\n  [0,0,0,0,0]\n];\n\nvar arr;\nfor (var i=0; i&lt;100000; i++) {\n  arr = [0,1,2,3,4];\n  shuffle3(arr);\n  arr.forEach(function(x, i){ counts[x][i]++;});\n}\n\nalert(counts.map(function(a){return a.join(\", \");}).join(\"\\n\"));\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 9
                },
                {
                    "body": "<p>I have placed <a href=\"http://phrogz.net/JS/JavaScript_Random_Array_Sort.html\" rel=\"nofollow\">a simple test page</a> on my website showing the bias of your current browser versus other popular browsers using different methods to shuffle. It shows the terrible bias of just using <code>Math.random()-0.5</code>, another 'random' shuffle that isn't biased, and the Fisher-Yates method mentioned above.</p>\n\n<p>You can see that on some browsers there is as high as a 50% chance that certain elements will not change place at all during the 'shuffle'!</p>\n\n<p>Note: you can make the implementation of the Fisher-Yates shuffle by @Christoph slightly faster for Safari by changing the code to:</p>\n\n<pre><code>function shuffle(array) {\n  for (var tmp, cur, top=array.length; top--;){\n    cur = (Math.random() * (top + 1)) &lt;&lt; 0;\n    tmp = array[cur]; array[cur] = array[top]; array[top] = tmp;\n  }\n  return array;\n}\n</code></pre>\n\n<h3>Test results: <a href=\"http://jsperf.com/optimized-fisher-yates\" rel=\"nofollow\">http://jsperf.com/optimized-fisher-yates</a></h3>\n",
                    "is_accepted": false,
                    "score": 7
                },
                {
                    "body": "<p>Can you use the Array.sort() function to shuffle an array -- yes.</p>\n\n<p>Are the results random enough -- probably not. I used this JavaScript for testing:</p>\n\n<pre><code>var array = [\"a\", \"b\", \"c\", \"d\", \"e\"];\nvar stats = {};\nfor (var i = 0; i &lt; array.length; i++) {\n    stats[array[i]] = [];\n    for (var j = 0; j &lt; array.length; j++) {\n        stats[array[i]][j] = 0;\n    }\n}\n//stats = {\n//    a: [0, 0, 0, ...]\n//    b: [0, 0, 0, ...]\n//    c: [0, 0, 0, ...]\n//    ...\n//    ...\n//}\nfor (var i = 0; i &lt; 100; i++) {\n    var clone = array.slice(0);\n    clone.sort(function() {\n        return Math.random() - 0.5;\n    });\n    for (var j = 0; j &lt; clone.length; j++) {\n        stats[clone[j]][j]++;\n    }\n}\nfor (var i in stats) {\n    console.log(i, stats[i]);\n}\n</code></pre>\n\n<p>Sample output:</p>\n\n<pre><code>a [29, 38, 20,  6,  7]\nb [29, 33, 22, 11,  5]\nc [17, 14, 32, 17, 20]\nd [16,  9, 17, 35, 23]\ne [ 9,  6,  9, 31, 45]\n</code></pre>\n\n<p>Ideally, the counts should be evenly distributed (for the above example, all counts should be around 20). But they are not. Apparently, the distribution depends on what sorting algorithm is implemented by the browser and how it iterates the array items for sorting. More insight is provided in this article:</p>\n\n<p><a href=\"http://sroucheray.org/blog/2009/11/array-sort-should-not-be-used-to-shuffle-an-array/\" rel=\"nofollow\">Array.sort() should not be used to shuffle an array</a></p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>If you're using D3 there is a built-in shuffle function (using Fisher-Yates):</p>\n\n<pre><code>var days = ['Lundi','Mardi','Mercredi','Jeudi','Vendredi','Samedi','Dimanche'];\nd3.shuffle(days);\n</code></pre>\n\n<p>And here is Mike going into details about it:</p>\n\n<p><a href=\"http://bost.ocks.org/mike/shuffle/\" rel=\"nofollow\">http://bost.ocks.org/mike/shuffle/</a></p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>It's been four years, but I'd like to point out that this probably won't work no matter what sorting algorithm you use.</p>\n\n<p>Proof: There are n! permutations of n elements. Every time you make a comparison, you are choosing between two subsets of the set of permutations. So the probabilities of each permutation will be fractions with denominator 2^k for some k.</p>\n\n<p>For n = 3, there are six equally-likely permutations. The chance of each permutation, then, is 1/6. 1/6 can't be expressed as a fraction with a power of 2 as its denominator. Try drawing out the decision tree with different sorts.</p>\n\n<p>The only sizes that could possibly be correctly distributed are n=0,1,2.</p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>Here's an approach that uses a single array:</p>\n\n<p>The basic logic is:</p>\n\n<p>\n<li>Starting with an array of n elements</li>\n<li>Remove a random element from the array and push it onto the array</li>\n<li>Remove a random element from the first n - 1 elements of the array and push it onto the array</li>\n<li>Remove a random element from the first n - 2 elements of the array and push it onto the array</li>\n<li> ...</li>\n<li>Remove the first element of the array and push it onto the array</li>\n</p>\n\n<p>Code:</p>\n\n<pre><code>for(i=a.length;i--;) a.push(a.splice(Math.floor(Math.random() * (i + 1)),1)[0]);\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                }
            ],
            "body": "<p>I was helping somebody out with his JavaScript code and my eyes were caught by a section that looked like that:</p>\n\n<pre><code>function randOrd(){\n  return (Math.round(Math.random())-0.5);\n}\ncoords.sort(randOrd);\nalert(coords);\n</code></pre>\n\n<p>My first though was: <strong>hey, this can't possibly work!</strong> But then I did some experimenting and found that it indeed at least seems to provide nicely randomized results.</p>\n\n<p>Then I did some web search and almost at the top found an <a href=\"http://javascript.about.com/library/blsort2.htm\">article</a> from which this code was most ceartanly copied. Looked like a pretty respectable site and author...</p>\n\n<p>But my gut feeling tells me, that this must be wrong. Especially as the sorting algorithm is not specified by ECMA standard. I think different sorting algoritms will result in different non-uniform shuffles. Some sorting algorithms may probably even loop infinitely...</p>\n\n<p>But what do you think?</p>\n\n<p>And as another question... how would I now go and measure how random the results of this shuffling technique are?</p>\n\n<p><strong>update:</strong> I did some measurements and posted the results below as one of the answers.</p>\n",
            "last_activity_date": 1385313286,
            "question_id": 962802,
            "score": 96,
            "tags": [
                "javascript",
                "random",
                "sorting",
                "shuffle"
            ],
            "title": "Is it correct to use JavaScript Array.sort() method for shuffling?"
        },
        {
            "answer_count": 2,
            "answers": [
                {
                    "body": "<pre><code>var iframe = document.getElementById('iframeId');\nvar innerDoc = (iframe.contentDocument) ? iframe.contentDocument : iframe.contentWindow.document;\n</code></pre>\n\n<p>You could more simply write:</p>\n\n<pre><code>var iframe = document.getElementById('iframeId');\nvar innerDoc = iframe.contentDocument || iframe.contentWindow.document;\n</code></pre>\n\n<p>and the first valid inner doc will be returned.</p>\n\n<p>Once you get the inner doc, you can just access its internals the same way as you would access any element on your current page. (<code>innerDoc.getElementById</code>...etc.)</p>\n\n<p><strong>IMPORTANT:</strong> Make sure that the iframe is on the same domain, otherwise you can't get access to its internals. That would be cross-site scripting.</p>\n",
                    "is_accepted": true,
                    "score": 128
                },
                {
                    "body": "<p>I hope bellow some code is helpfull</p>\n\n<pre class=\"lang-script prettyprint-override\"><code>window.parent.document.getElementById(\"framekit\").contentWindow.CallYourFunction('pass your value')\n</code></pre>\n\n<p>CallYourFunction() is  function inside page and that function action on it</p>\n",
                    "is_accepted": false,
                    "score": 1
                }
            ],
            "body": "<p>I am trying to get a div from within an iframe and print it on my page. Any Ideas ?</p>\n",
            "last_activity_date": 1424713379,
            "question_id": 1088544,
            "score": 76,
            "tags": [
                "javascript",
                "iframe",
                "html"
            ],
            "title": "Javascript - Get element from within an iFrame"
        },
        {
            "answer_count": 6,
            "answers": [
                {
                    "body": "<p>You need to create a separate scope that saves the variable in its current state by passing it as a function parameter: </p>\n\n<pre><code>for (var i = 0; i &lt; results.length; i++) {\n  (function (i) {\n    marker = results[i];\n    google.maps.event.addListener(marker, 'click', function() { \n      change_selection(i);\n    }); \n  })(i);\n}\n</code></pre>\n\n<p>By creating an anonymous function and calling it with the variable as the first argument, you're passing-by-value to the function and creating a closure.</p>\n",
                    "is_accepted": true,
                    "score": 115
                },
                {
                    "body": "<p>You're winding up with a closure. <strike><a href=\"http://blog.morrisjohns.com/javascript_closures_for_dummies.html\" rel=\"nofollow\">Here's an article on closures</a> and how to work with them. Check out Example 5 on the page; that's the scenario you're dealing with.</strike></p>\n\n<p>EDIT: Four years later, that link is dead. The root of the issue above is that the <code>for</code> loop forms closures (specifically on <code>marker = results[i]</code>). As <code>marker</code> is passed into <code>addEventListener</code>, you see the side effect of the closure: the shared \"environment\" is updated with each iteration of the loop, before it's finally \"saved\" via the closure after the final iteration. <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Closures#Creating_closures_in_loops.3A_A_common_mistake\" rel=\"nofollow\">MDN explains this very well.</a></p>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>closures:</p>\n\n<pre><code>for (var i = 0, l= results.length; i &lt; l; i++) {\n    marker = results[i];\n    (function(index){\n        google.maps.event.addListener(marker, 'click', function() { \n            change_selection(index);\n        }); \n    })(i);\n}\n</code></pre>\n\n<p><strong>EDIT, 2013:</strong>\nThese are now commonly referred to as an <a href=\"http://benalman.com/news/2010/11/immediately-invoked-function-expression/\" rel=\"nofollow\">IIFE</a></p>\n",
                    "is_accepted": false,
                    "score": 11
                },
                {
                    "body": "<p>As well as the closures, you can use <code>function.bind</code>:</p>\n\n<pre><code>google.maps.event.addListener(marker, 'click', change_selection.bind(null, i));\n</code></pre>\n\n<p>passes the value of <code>i</code> in as an argument to the function when called. (<code>null</code> is for binding <code>this</code>, which you don't need in this case.)</p>\n\n<p><code>function.bind</code> was introduced by the Prototype framework and has been standardised in ECMAScript Fifth Edition. Until browsers all support it natively, you can add your own <code>function.bind</code> support using closures:</p>\n\n<pre><code>if (!('bind' in Function.prototype)) {\n    Function.prototype.bind= function(owner) {\n        var that= this;\n        var args= Array.prototype.slice.call(arguments, 1);\n        return function() {\n            return that.apply(owner,\n                args.length===0? arguments : arguments.length===0? args :\n                args.concat(Array.prototype.slice.call(arguments, 0))\n            );\n        };\n    };\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 27
                },
                {
                    "body": "<p>I think we can define a temporary variable to store the value of i.</p>\n\n<pre><code>for (var i = 0; i &lt; results.length; i++) {\n var marker = results[i];\n var j = i;\n google.maps.event.addListener(marker, 'click', function() { \n   change_selection(j);\n }); \n}\n</code></pre>\n\n<p>I haven't tested it though.</p>\n",
                    "is_accepted": false,
                    "score": -2
                },
                {
                    "body": "<pre><code>for (var i = 0; i &lt; results.length; i++) {\n    marker = results[i];\n    google.maps.event.addListener(marker, 'click', (function(i) {\n        return function(){\n            change_selection(i);\n        }\n    })(i)); \n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": -1
                }
            ],
            "body": "<p>Here is a simplified version of something I'm trying to run:</p>\n\n<pre><code>for (var i = 0; i &lt; results.length; i++) {\n    marker = results[i];\n    google.maps.event.addListener(marker, 'click', function() { \n        change_selection(i);\n    }); \n}\n</code></pre>\n\n<p>but I'm finding that every listener uses the value of results.length (the value when the for loop terminates). How can I add listeners such that each uses the value of i at the time I add it, rather than the reference to i? </p>\n",
            "last_activity_date": 1419282765,
            "question_id": 2568966,
            "score": 68,
            "tags": [
                "javascript",
                "closures",
                "pass-by-reference",
                "listener",
                "pass-by-value"
            ],
            "title": "How do I pass the value (not the reference) of a JS variable to a function?"
        },
        {
            "answer_count": 7,
            "answers": [
                {
                    "body": "<p>Yes closures are working here.  Each time you loop the function you are creating grabs the <code>i</code>.  Each function you create shares the same <code>i</code>.  The problem you are seeing is that since they all share the same <code>i</code> they also share the final value of <code>i</code> since it is the same captured variable.</p>\n\n<p><strong>Edit:</strong> <a href=\"http://csharpindepth.com/Articles/Chapter5/Closures.aspx\" rel=\"nofollow\">This article</a> by Mr. Skeet explains closures in some depth and addresses this issue in particular in a way that is much more informative then I have here.  <strong><em>However be careful as the way that Javascript and C# handle closures have some subtle differences.</em></strong>  Skip to the section called \"Comparing capture strategies: complexity vs power\" for his explanation on this issue.</p>\n",
                    "is_accepted": false,
                    "score": 6
                },
                {
                    "body": "<p>I think this might be what you want:</p>\n\n<pre><code>var closures = [];\n\nfunction createClosure(i) {\n    closures[i] = function() {\n        alert(\"i = \" + i);\n    };\n}\n\nfunction create() {\n    for (var i = 0; i &lt; 5; i++) {\n        createClosure(i);\n    }\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 9
                },
                {
                    "body": "<p>Here is what you should do to achieve your result:</p>\n\n<pre><code>&lt;script&gt;\nvar closures = [];\nfunction create() {  \n    for (var i = 0; i &lt; 5; i++) {   \n\t    closures[i] = function(number) {      \n\t    alert(\"i = \" + number);   \n\t    };  \n    }\n}\nfunction run() {  \n    for (var i = 0; i &lt; 5; i++) {   \n    \tclosures[i](i); \n    }\n}\ncreate();\nrun();\n&lt;/script&gt;\n</code></pre>\n",
                    "is_accepted": false,
                    "score": -1
                },
                {
                    "body": "<p>The solution is to have a self-executing lambda wrapping your array push. You also pass i as an argument to that lambda. The value of i inside the self-executing lambda will shadow the value of the original i and everything will work as intended:</p>\n\n<pre><code>function create() {\n    for (var i = 0; i &lt; 5; i++) (function(i) {\n        closures[i] = function() {\n            alert(\"i = \" + i);\n        };\n    })(i);\n}\n</code></pre>\n\n<p>Another solution would be to create yet another closure which captures the correct value of i and assigns it to another variable which would \"get caught\" in the final lambda:</p>\n\n<pre><code>function create() {\n    for (var i = 0; i &lt; 5; i++) (function() {\n        var x = i;\n\n        closures.push(function() {\n            alert(\"i = \" + x);\n        });\n    })();\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 6
                },
                {
                    "body": "<p>Fixed Jon's answer by adding an additional anonymous function:</p>\n\n<pre><code>function create() {\n  for (var i = 0; i &lt; 5; i++) {\n    closures[i] = (function(tmp) {\n        return function() {\n          alert(\"i = \" + tmp);\n        };\n    })(i);\n  }\n}\n</code></pre>\n\n<p>The explanation is that JavaScript's scopes are function-level, not block-level, and creating a closure just means that the enclosing scope gets added to the lexical environment of the enclosed function.</p>\n\n<p>After the loop terminates, the function-level variable <code>i</code> has the value <code>5</code>, and that's what the inner function 'sees'.</p>\n\n<p><hr /></p>\n\n<p>As a side note: you should beware of unnecessary function object creation, espacially in loops; it's inefficient, and if DOM objects are involved, it's easy to create circular references and therefore introduce memory leaks in Internet Explorer.</p>\n",
                    "is_accepted": true,
                    "score": 43
                },
                {
                    "body": "<p>John Resig's <a href=\"http://ejohn.org/apps/learn/\" rel=\"nofollow\">Learning Advanced JavaScript</a> explains this and more. It's an interactive presentation that explains a lot about JavaScript, and the examples are fun to read and execute.</p>\n\n<p>It has a chapter about closures, and <a href=\"http://ejohn.org/apps/learn/#62\" rel=\"nofollow\">this example</a> looks a lot like yours.</p>\n\n<p>Here's the broken example:</p>\n\n<pre><code>var count = 0; \nfor ( var i = 0; i &lt; 4; i++ ) { \n  setTimeout(function(){ \n    assert( i == count++, \"Check the value of i.\" ); \n  }, i * 200); \n}\n</code></pre>\n\n<p>And the fix:</p>\n\n<pre><code>var count = 0; \nfor ( var i = 0; i &lt; 4; i++ ) (function(i){ \n  setTimeout(function(){ \n    assert( i == count++, \"Check the value of i.\" ); \n  }, i * 200); \n})(i);\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 3
                },
                {
                    "body": "<p>Just defining an inner function, or assigning it to some variable:</p>\n\n<pre><code>closures[i] = function() {...\n</code></pre>\n\n<p>does not create a private copy of the whole execution context. The context isn't copied until the nearest outer function is <strong>exiting</strong> (at which point those external variables could be garbage collected, so we'd better grab a copy).</p>\n\n<p>This is why wrapping another function around your inner function works - the middle guy actually executes and exits, cuing the innermost function to save his own copy of the stack.</p>\n",
                    "is_accepted": false,
                    "score": 1
                }
            ],
            "body": "<p>I am very puzzled about this code:</p>\n\n<pre><code>var closures = [];\nfunction create() {\n  for (var i = 0; i &lt; 5; i++) {\n    closures[i] = function() {\n      alert(\"i = \" + i);\n    };\n  }\n}\n\nfunction run() {\n  for (var i = 0; i &lt; 5; i++) {\n    closures[i]();\n  }\n}\n\ncreate();\nrun();\n</code></pre>\n\n<p>From my understanding it should print 0,1,2,3,4 (isn't this the concept of closures?).</p>\n\n<p>Instead it prints 5,5,5,5,5.</p>\n\n<p>I tried Rhino and Firefox.</p>\n\n<p>Could someone explain this behavior to me?\nThx in advance.</p>\n",
            "last_activity_date": 1288221519,
            "question_id": 643542,
            "score": 36,
            "tags": [
                "javascript",
                "loops",
                "closures"
            ],
            "title": "Doesn&#39;t JavaScript support closures with local variables?"
        },
        {
            "answer_count": 5,
            "answers": [
                {
                    "body": "<p>Script for backward-compatibility: \n<a href=\"https://github.com/douglascrockford/JSON-js/blob/master/json2.js\">https://github.com/douglascrockford/JSON-js/blob/master/json2.js</a></p>\n\n<p>And call:</p>\n\n<pre><code>var myJsonString = JSON.stringify(yourArray);\n</code></pre>\n\n<p><strong>Note:</strong> <em>The JSON object is now part of most modern web browsers (IE 8 &amp; above). See <a href=\"http://caniuse.com/json\">caniuse</a> for full listing. Credit goes to: @Spudley for his comment below</em></p>\n",
                    "is_accepted": true,
                    "score": 207
                },
                {
                    "body": "<p>There's a jQuery plugin for that here:</p>\n\n<p><a href=\"http://code.google.com/p/jquery-json/\">http://code.google.com/p/jquery-json/</a></p>\n",
                    "is_accepted": false,
                    "score": 8
                },
                {
                    "body": "<p>I decided to use the json2 library and I got an error about \u201ccyclic data structures\u201d.</p>\n\n<p>I got it solved by telling json2 how to convert my complex object. Not only it works now but also I have included only the fields I need. Here is how I did it:</p>\n\n<pre><code>OBJ.prototype.toJSON = function (key) {\n       var returnObj = new Object();\n       returnObj.devid = this.devid;\n       returnObj.name = this.name;\n       returnObj.speed = this.speed;\n       returnObj.status = this.status;\n       return returnObj;\n   }\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 6
                },
                {
                    "body": "<p>I made it that way:</p>\n\n<p>if I have:</p>\n\n<pre><code>var jsonArg1 = new Object();\n    jsonArg1.name = 'calc this';\n    jsonArg1.value = 3.1415;\nvar jsonArg2 = new Object();\n    jsonArg2.name = 'calc this again';\n    jsonArg2.value = 2.73;\n\nvar pluginArrayArg = new Array();\n    pluginArrayArg.push(jsonArg1);\n    pluginArrayArg.push(jsonArg2);\n</code></pre>\n\n<p>to convert pluginArrayArg (which is pure javascript array) into JSON array:</p>\n\n<pre><code>var jsonArray = JSON.parse(JSON.stringify(pluginArrayArg))\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 17
                },
                {
                    "body": "<p>Or try defining the array as an object. (var cars = {};) Then there is no need to convert to json. This might not be practical in your example but worked well for me.</p>\n",
                    "is_accepted": false,
                    "score": 4
                }
            ],
            "body": "<p>I have an Array (<code>var cars = []</code>) which holds a few integers.\nI've added a few values to the array, but I now need to send this array to a page via jQuery's <code>.get</code> method. How can I convert it to a JSON object for sending?</p>\n",
            "last_activity_date": 1409775815,
            "question_id": 2295496,
            "score": 121,
            "tags": [
                "javascript",
                "jquery",
                "json",
                "arrays"
            ],
            "title": "Convert array to JSON"
        },
        {
            "answer_count": 10,
            "answers": [
                {
                    "body": "<p>jQuery doesn't use <code>window.onload</code>.</p>\n\n<p><code>$(document).ready()</code> waits until the DOM has loaded and can be traversed (the rest of the content may or may not be loaded by that point).</p>\n\n<p>If you pull up the source for jQuery and sort through the mess, you'll find the work is done by the <code>bindReady()</code> method which has several different implementations for different browsers and only when all of those implementations fail does it fall back on listening for the load event for the window.</p>\n",
                    "is_accepted": false,
                    "score": 6
                },
                {
                    "body": "<p>This is actually one of the biggest reasons most people use frameworks like jQuery because the solution to this is not consistent across browsers.</p>\n",
                    "is_accepted": false,
                    "score": 2
                },
                {
                    "body": "<p>While I usually advocate avoiding using frameworks unless necessary, I'd say using one in this case is perfectly fine. Here's jQuery:</p>\n\n<pre><code>$(function () {\n    // do stuff after DOM has loaded\n});\n</code></pre>\n\n<p>Note that it is NOT the same as an <code>window.onload</code> event, since <code>onload</code> executes first after other resources have been loaded (images etc.) The code I used in my example will execute when the DOM has finished loading, i.e., when the full HTML structure is available (not necessarily when images, CSS, etc. is available.)</p>\n\n<p>If you want a checkable variable, you can set one in the ready-function:</p>\n\n<pre><code>var documentIsReady = false;\n$(function () { documentIsReady = true; });\n</code></pre>\n\n<p>Of course you can find even more light-weight libraries than jQuery if all you want to do is to check for DOM-ready. But use a library in cases where different browsers behave very differently (this is one such case.)</p>\n\n<p>Using some code from the <a href=\"http://code.google.com/p/domassistant/source/browse/trunk/modules/DOMAssistantLoad.js\">DOMAssistant library</a>, making your own \"DOM is ready\" function shouldn't be too hard:</p>\n\n<pre><code>var domLoaded = function (callback) {\n    /* Internet Explorer */\n    /*@cc_on\n    @if (@_win32 || @_win64)\n        document.write('&lt;script id=\"ieScriptLoad\" defer src=\"//:\"&gt;&lt;\\/script&gt;');\n        document.getElementById('ieScriptLoad').onreadystatechange = function() {\n            if (this.readyState == 'complete') {\n                callback();\n            }\n        };\n    @end @*/\n    /* Mozilla, Chrome, Opera */\n    if (document.addEventListener) {\n        document.addEventListener('DOMContentLoaded', callback, false);\n    }\n    /* Safari, iCab, Konqueror */\n    if (/KHTML|WebKit|iCab/i.test(navigator.userAgent)) {\n        var DOMLoadTimer = setInterval(function () {\n            if (/loaded|complete/i.test(document.readyState)) {\n                callback();\n                clearInterval(DOMLoadTimer);\n            }\n        }, 10);\n    }\n    /* Other web browsers */\n    window.onload = callback;\n};\n</code></pre>\n\n<p>Not tested, but it should work. I simplified it from DOMAssistant, because DOMAssistant allows multiple callbacks and has checking to make sure you can't add the same function twice etc.</p>\n",
                    "is_accepted": false,
                    "score": 29
                },
                {
                    "body": "<p>jQuery has an undocumented property called isReady which is used internally to determine whether the DOM ready event has fired:</p>\n\n<pre><code>if($.isReady) {\n    // DOM is ready\n} else {\n    // DOM is not yet ready\n}\n</code></pre>\n\n<p>I started at 1.5.2 went back as far as 1.3.2 and the property is there.  While undocumented, I would say that you can rely on this property in future versions of jQuery.</p>\n\n<p><strong>Edit:</strong> And a year later - v1.7.2, they still use <code>$.isReady</code> - still undocumented, so please use at your own risk.  Be careful when upgrading.</p>\n\n<p><strong>Edit:</strong> v1.9, they still use <code>$.isReady</code> - still undocumented</p>\n\n<p><strong>Edit:</strong> v2.0, with all of it's \"major\" changes, still uses <code>$.isReady</code> - still undocumented</p>\n\n<p><strong>Update:</strong> As several people have pointed out, the above does not really answer the question.  So I have just created a <a href=\"https://github.com/DesignByOnyx/mini-domready\">mini DOM ready snippet</a> which was inspired by Dustin Diaz's <a href=\"http://www.dustindiaz.com/smallest-domready-ever\">even smaller DOM ready snippet</a>.  Dustin created a neat way to check the document readyState with something similar to this:</p>\n\n<pre><code>if( !/in/.test(document.readyState) ) {\n    // document is ready\n} else {\n    // document is NOT ready\n}\n</code></pre>\n\n<p>The reason this works is because the browser has 3 loading states: \"loading\", \"interactive\", and \"complete\" <em>(older WebKit also used \"loaded\", but you don't have to worry about that any more)</em>.  You will notice that both \"loading\" and \"interactive\" contain the text \"in\"... so if the string \"in\" is found inside of <code>document.readyState</code>, then we know we are not ready yet.  You could also try this, which reads much easier but not near as cool <em>(and <strong>won't</strong> work in older WebKit)</em>:</p>\n\n<pre><code>if( document.readyState === \"complete\" ) {\n    // document is ready\n} else {\n    // document is NOT ready\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 29
                },
                {
                    "body": "<p>Check out this demo from microsoft. -> <a href=\"http://ie.microsoft.com/testdrive/HTML5/DOMContentLoaded/Default.html\">http://ie.microsoft.com/testdrive/HTML5/DOMContentLoaded/Default.html</a> \nAnd here is the gist of the code that allows you to run JS on DOM ready...</p>\n\n<pre><code>(function () {\n    function load2(){\n        // put whatever you need to load on DOM ready in here\n        document.getElementById(\"but3\").addEventListener(\"click\", doMore, false);\n    }\n    if (window.addEventListener) {\n        window.addEventListener('DOMContentLoaded', load2, false);\n    } else {\n        window.attachEvent('onload', load2);\n    }\n} ());\n</code></pre>\n\n<p>Here is the some of the javascript source for the demo..\n<a href=\"http://ie.microsoft.com/testdrive/Includes/Script/ReturnAndShareControls.js\">http://ie.microsoft.com/testdrive/Includes/Script/ReturnAndShareControls.js</a></p>\n\n<p>It works well. Nice!!.. on google Chrome and IE 9.</p>\n",
                    "is_accepted": false,
                    "score": 9
                },
                {
                    "body": "<p>Try this:\n<br>\nLink: <a href=\"https://github.com/dsrdakota/onDomReady\" rel=\"nofollow\" title=\"Yes, this is mine...\">onDomReady at GitHub</a>\nor the source below:</p>\n\n<pre><code>if(document.ondomready == undefined) {\n    document.ondomready = {};\n    document.ondomready = null;\n} else {\n    document.ondomready=document.ondomready;\n}\nvar oldonload=document.onload;\nvar isLaunched = 0;\ndocument.onload = function() {  \n    if(oldonload !== null) {\n        oldonload.call();\n    }\n};\ndocument.addEventListener(\"DOMContentLoaded\", function onDom(evt) {\n    var olddomready = document.ondomready;\n    if(olddomready !== null) {\n        if(isLaunched == 0) {\n            olddomready.call(evt);\n            isLaunched == 1;\n            //We now launched the mapped DOMContentLoaded Event\n        } else {\n            //We already launched DOMContentLoaded Event\n        }\n    }\n}, false);\n</code></pre>\n\n<p>I've already tested this on Opera 11.x/12.x. Not yet tested on others. Let me know if they do.</p>\n\n<p><b>Note: </b>I haven't yet uploaded the repository, but I will soon in my spare time.</p>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>i've updated the code of <a href=\"http://code.google.com/p/domassistant/source/browse/trunk/modules/DOMAssistantLoad.js\" rel=\"nofollow\"> DOMAssistant library</a> it works fine with me </p>\n\n<pre><code>var domReady = (function (){\n  var arrDomReadyCallBacks = [] ;\n  function excuteDomReadyCallBacks(){\n       for (var i=0; i &lt; arrDomReadyCallBacks.length; i++) {\n         arrDomReadyCallBacks[i]();\n       }\n       arrDomReadyCallBacks = [] ;\n  }\n\n  return function (callback){\n    arrDomReadyCallBacks.push(callback);\n     /* Mozilla, Chrome, Opera */\n      if (document.addEventListener ) {\n          document.addEventListener('DOMContentLoaded', excuteDomReadyCallBacks, false);\n      }\n    /* Safari, iCab, Konqueror */\n    if (/KHTML|WebKit|iCab/i.test(navigator.userAgent)) {\n        browserTypeSet = true ;\n        var DOMLoadTimer = setInterval(function () {\n            if (/loaded|complete/i.test(document.readyState)) {\n                //callback();\n                excuteDomReadyCallBacks();\n                clearInterval(DOMLoadTimer);\n            }\n        }, 10);\n    }\n    /* Other web browsers */\n\n    window.onload = excuteDomReadyCallBacks;\n}\n})()\n</code></pre>\n",
                    "is_accepted": true,
                    "score": 0
                },
                {
                    "body": "<pre><code>document.addEventListener(\"DOMContentLoaded\", function(e){\n    console.log(\"dom ready\");//output to web browser console\n});\n</code></pre>\n\n<p>no JQuery needed for this. There is no need to pass the 3rd parameter on a DOMContentLoaded as this event has no parent to traverse the event. Also no need to get all fancy with what everyone else is saying. This will tell you when the DOM is fully loaded and ready to use. I LOLed when i noticed the DOM assistant lib. That lib is absolutely useless. </p>\n\n<p>The DOMContentLoaded event is fired when the document has been completely loaded and parsed, without waiting for stylesheets, images, and subframes to finish loading</p>\n\n<p><code>addEventListener()</code> is a great function for checking any event including DOM ready status. When using \"DOMContentLoaded\" the 3rd parameter in <code>addEventListener()</code> is not needed as this trigger has no parent item to pass the event too. In my above example you will notice the 2nd parameter is an anonymous function. You can also pass the name of a function into the 2nd parameter. </p>\n\n<pre><code>document.addEventListener([(string)event trigger], [function],[(boolean)traverse DOM tree]);\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>If you want smaller libs which does only particular things,  you could use libs in <a href=\"http://microjs.com/#\" rel=\"nofollow\">microjs</a>. For the question at hand DOMStatic libs ready method can be used. </p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>In the 5 years that have passed since this question was asked DOMContentLoaded has become a universally supported event, and you can just use that.</p>\n\n<pre><code>document.addEventListener('DOMContentLoaded', function() {\n    //.. do stuff ..\n}, false);\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 2
                }
            ],
            "body": "<p>I know I can use different frameworks like prototype or jquery to attach a function to the window.onload, but's not what I'm looking for.</p>\n\n<p>I need something like .readyState so that I can do something like this:</p>\n\n<pre><code>if(document.isReady){\n  var id = document.getElem ...\n}\n</code></pre>\n\n<p>is there any other way than using what the frameworks do?</p>\n",
            "last_activity_date": 1423026770,
            "question_id": 1206937,
            "score": 36,
            "tags": [
                "javascript",
                "javascript-events"
            ],
            "title": "javascript domready?"
        },
        {
            "answer_count": 5,
            "answers": [
                {
                    "body": "<p>It's a common mistake to create <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Closures#Creating_closures_in_loops.3A_A_common_mistake\"><strong>closures in loops</strong></a> in Javascript. You need to have some sort of callback function like this:</p>\n\n<pre><code>function createCallback( i ){\n  return function(){\n    alert('you clicked' + i);\n  }\n}\n\n$(document).ready(function(){\n  for(var i = 0; i &lt; 20; i++) {\n    $('#question' + i).click( createCallback( i ) );\n  }\n});\n</code></pre>\n",
                    "is_accepted": true,
                    "score": 38
                },
                {
                    "body": "<p>To clarify, i is equal to 20 because the click event won't have fired until after the loop has finished.</p>\n",
                    "is_accepted": false,
                    "score": 7
                },
                {
                    "body": "<p>Generally, if you are looking to assign click handles to a large number of items, you want to have a container (higher level div) that interprets the clicks for you, as the click bubbles up from the dom.</p>\n\n<pre><code>&lt;div id=\"bucket\"&gt;\n    &lt;span class=\"decorator-class\" value=\"3\"&gt;\n    ...\n&lt;/div&gt;\n\n&lt;script&gt;\n   $(document).ready(function(e){\n      $(\"#bucket\").live('click', function(){\n         if(e.target).is('span'){\n            alert(\"elementid: \" + $(e.target).val());\n         }\n      }\n   }\n&lt;script&gt;\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>You can get by with assigning the click handler once (or at least not making many unnecessary closures). Put all the divs in one class <code>mydivs</code>, then:</p>\n\n<pre><code>$(document).ready(function(){\n    $('.mydivs').click(function(){\n        // Get the number starting from the ID's 6th character\n        // This assumes that the common prefix is \"mydiv\"\n        var i = Number(this.id.slice(5));\n\n        alert('you clicked ' + i);\n    });\n});\n</code></pre>\n\n<p>This looks at the element's ID to get its number, using the <a href=\"https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/slice\" rel=\"nofollow\"><code>slice</code> string method</a> to strip the initial letters off.</p>\n\n<p><strong>Note:</strong> It may be better to use</p>\n\n<pre><code>$('#divcontainer').on('click', '.mydivs', function(){\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>$('.mydivs').click(function(){\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 3
                },
                {
                    "body": "<pre><code>$(document).ready(function(){\n  for(var i = 0; i &lt; 5; i++) {\n   var $li= $('&lt;li&gt;' + i +'&lt;/li&gt;');\n      (function(i) {\n           $li.click( function(){\n           alert('you clicked ' + i);\n         });\n      }(i));\n      $('#ul').append($li);\n  }\n});\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                }
            ],
            "body": "<p>I'm having several div's <code>#mydiv1</code>, <code>#mydiv2</code>, <code>#mydiv3</code>, ... and want to assign click handlers to them:</p>\n\n<pre><code>$(document).ready(function(){\n  for(var i = 0; i &lt; 20; i++) {\n    $('#question' + i).click( function(){\n      alert('you clicked ' + i);\n    });\n  }\n});\n</code></pre>\n\n<p>But instead of showing <code>'you clicked 3'</code> when click on <code>#mydiv3</code> (as for every other click) I get <code>'you clicked 20'</code>. What am I doing wrong?</p>\n",
            "last_activity_date": 1392846429,
            "question_id": 4091765,
            "score": 28,
            "tags": [
                "javascript",
                "jquery",
                "jquery-selectors",
                "closures"
            ],
            "title": "Assign click handlers in for loop"
        },
        {
            "answer_count": 6,
            "answers": [
                {
                    "body": "<p>What you have to remember is that it parses the whole function and resolves all the variables declarations before executing it.  So....</p>\n\n<pre><code>function a() {} \n</code></pre>\n\n<p>really becomes </p>\n\n<pre><code>var a = function () {}\n</code></pre>\n\n<p><code>var a</code> forces it into a local scope, and variable scope is through the entire function, so the global a variable is still 1 because you have declared a into a local scope by making it a function. </p>\n",
                    "is_accepted": false,
                    "score": 4
                },
                {
                    "body": "<p><code>function a() { }</code> is a function statement, which creates an <code>a</code> variable local to the <code>b</code> function.<br>\nVariables are created when a function is parsed, regardless of whether the <code>var</code> or function statement gets executed.</p>\n\n<p><code>a = 10</code> sets this local variable.</p>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>The function <code>a</code> is hoisted inside function <code>b</code>:</p>\n\n<pre><code>var a = 1; \nfunction b() { \n   function a() {} \n   a = 10; \n   return;\n} \nb(); \nalert(a);\n</code></pre>\n\n<p>which is almost like using <code>var</code>:</p>\n\n<pre><code>var a = 1; \nfunction b() { \n   var a = function () {};\n   a = 10; \n   return;\n} \nb(); \nalert(a);\n</code></pre>\n\n<p>The function is declared locally, and setting <code>a</code> only happens in the local scope, not the global var.</p>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>Function hoisting means that functions are moved to the top of their scope. That is,</p>\n\n<pre><code>function b() {  \n   a = 10;  \n   return;  \n   function a() {} \n} \n</code></pre>\n\n<p>will be rewritten by the interpeter to this</p>\n\n<pre><code>function b() {\n  function a() {}\n  a = 10;\n  return;\n}\n</code></pre>\n\n<p>Weird, eh?</p>\n\n<p>Also, in this instance,</p>\n\n<pre><code>function a() {}\n</code></pre>\n\n<p>behaved the same as</p>\n\n<pre><code>var a = function () {};\n</code></pre>\n\n<hr>\n\n<p>So, in essence, this is what the code is doing:</p>\n\n<pre><code>var a = 1;                 //defines \"a\" in global scope\nfunction b() {  \n   var a = function () {}; //defines \"a\" in local scope \n   a = 10;                 //overwrites local variable \"a\"\n   return;      \n}       \nb();       \nalert(a);                 //alerts global variable \"a\"\n</code></pre>\n",
                    "is_accepted": true,
                    "score": 37
                },
                {
                    "body": "<ol>\n<li>function declaration <code>function a(){}</code> is hoisted first and it behaves like <code>var a = function () {};</code>, hence in local scope <code>a</code> is created. </li>\n<li>If you have two variable with same name (one in global another in local), local variable always get precedence over global variable. </li>\n<li>When you set <code>a=10</code>, you are setting the local variable <code>a</code> , not the global one.</li>\n</ol>\n\n<p>Hence, the value of global variable remain same and you get, alerted 1</p>\n",
                    "is_accepted": false,
                    "score": 2
                },
                {
                    "body": "<p>It is happening because of the Variable name is same as the function name means \"a\".\nThus due to Javascript hoisting it try to solve the naming conflict and it will return a = 1.</p>\n\n<p>I was also confused about this until i read this post on \"JavaScript Hoisting\" <a href=\"http://www.ufthelp.com/2014/11/JavaScript-Hoisting.html\" rel=\"nofollow\">http://www.ufthelp.com/2014/11/JavaScript-Hoisting.html</a></p>\n\n<p>Hope it helps.</p>\n",
                    "is_accepted": false,
                    "score": 0
                }
            ],
            "body": "<p>I just read a great article about <a href=\"http://www.adequatelygood.com/2010/2/JavaScript-Scoping-and-Hoisting\">JavaScript Scoping and Hoisting by Ben Cherry</a> in which he gives the following example: </p>\n\n<pre><code>    var a = 1; \n    function b() { \n       a = 10; \n       return; \n       function a() {} \n    } \n   b(); \n   alert(a);\n</code></pre>\n\n<p>Using the code above, the browser will alert \"1\". </p>\n\n<p>I'm still unsure why it returns \"1\". Some of the things he says come to mind like: \n   All the function declarations are hoisted to the top. You can scope a variable using function.  Still doesn't click for me. </p>\n",
            "last_activity_date": 1416142554,
            "question_id": 7506844,
            "score": 28,
            "tags": [
                "javascript",
                "scope",
                "scoping",
                "hoisting"
            ],
            "title": "Javascript function scoping and hoisting"
        },
        {
            "answer_count": 8,
            "answers": [
                {
                    "body": "<p>In IE you have to use <a href=\"http://msdn.microsoft.com/en-us/library/ms536343%28VS.85%29.aspx\"><code>attachEvent</code></a> rather than the standard <a href=\"https://developer.mozilla.org/en/DOM/element.addEventListener\"><code>addEventListener</code></a>.</p>\n\n<p>A common practice is to check if the <code>addEventListener</code> method is available and use it, otherwise use <code>attachEvent</code>:</p>\n\n<pre><code>if (el.addEventListener){\n  el.addEventListener('click', modifyText, false); \n} else if (el.attachEvent){\n  el.attachEvent('onclick', modifyText);\n}\n</code></pre>\n\n<p>You can make a function to do it:</p>\n\n<pre><code>function bindEvent(el, eventName, eventHandler) {\n  if (el.addEventListener){\n    el.addEventListener(eventName, eventHandler, false); \n  } else if (el.attachEvent){\n    el.attachEvent('on'+eventName, eventHandler);\n  }\n}\n// ...\nbindEvent(document.getElementById('myElement'), 'click', function () {\n  alert('element clicked');\n});\n</code></pre>\n\n<p>You can run an example of the above code <a href=\"http://jsbin.com/ifuqa\">here</a>.</p>\n\n<p>The third argument of <code>addEventListener</code> is <code>useCapture</code>; if true, it indicates that the user wishes to initiate <a href=\"http://www.quirksmode.org/js/events_order.html\">event capturing</a>.</p>\n",
                    "is_accepted": true,
                    "score": 127
                },
                {
                    "body": "<p>The problem is that IE does not have the standard addEventListener method. IE uses their own attachEvent which does pretty much the same.</p>\n\n<p>Good explanation of the differences, and also about the 3rd parameter can be found <a href=\"http://www.quirksmode.org/js/events%5Fadvanced.html\" rel=\"nofollow\">at quirksmode</a></p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>Internet Explorer (IE8 and lower) doesn't support <a href=\"https://developer.mozilla.org/en/DOM/element.addEventListener\" rel=\"nofollow\"><code>addEventListener(...)</code></a>. It has its own event model using the <a href=\"http://msdn.microsoft.com/en-us/library/ms536343%28VS.85%29.aspx\" rel=\"nofollow\"><code>attachEvent</code></a> method. You could use some code like this:</p>\n\n<pre><code>var element = document.getElementById('container');\nif (document.addEventListener){\n    element .addEventListener('copy', beforeCopy, false); \n} else if (el.attachEvent){\n    element .attachEvent('oncopy', beforeCopy);\n}\n</code></pre>\n\n<p>Though I recommend avoiding writing your own event handling wrapper and instead use a JavaScript framework (such as <a href=\"http://jquery.com/\" rel=\"nofollow\">jQuery</a>, <a href=\"http://www.dojotoolkit.org/\" rel=\"nofollow\">Dojo</a>, <a href=\"http://mootools.net/\" rel=\"nofollow\">MooTools</a>, <a href=\"http://developer.yahoo.com/yui/\" rel=\"nofollow\">YUI</a>, <a href=\"http://prototypejs.org/\" rel=\"nofollow\">Prototype</a>, etc) and avoid having to create the fix for this on your own.</p>\n\n<p>By the way, the third argument in the W3C model of events has to do with the <a href=\"http://www.quirksmode.org/js/events_order.html\" rel=\"nofollow\">difference between bubbling and capturing events</a>. In almost every situation you'll want to handle events as they bubble, not when they're captured. It is useful when using <a href=\"http://icant.co.uk/sandbox/eventdelegation/\" rel=\"nofollow\">event delegation</a> on things like \"focus\" events for text boxes, which don't bubble. </p>\n",
                    "is_accepted": false,
                    "score": 4
                },
                {
                    "body": "<p>As PPK points out <a href=\"http://www.quirksmode.org/js/events_order.html#link9\" rel=\"nofollow\">here</a>, in IE you can also use</p>\n\n<pre><code>e.cancelBubble = true;\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>Using &lt;meta http-equiv=\"X-UA-Compatible\" content=\"IE=9\"&gt;, IE9+ does support addEventListener by removing the \"on\" in the event name, like this:</p>\n\n<pre><code>   var btn1 = document.getElementById('btn1');\n   btn1.addEventListener('mousedown', function() {\n    console.log('mousedown');\n   });\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>As of IE11, you need to use addEventListener. \nattachEvent is deprecated and throws an error. </p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>try adding </p>\n\n<pre><code>&lt;meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"&gt; \n</code></pre>\n\n<p>right after the opening head tag</p>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>In case you are using JQuery 2.x then please add the following in the</p>\n\n<pre><code>&lt;html&gt;\n   &lt;head&gt;\n      &lt;meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge;\" /&gt;\n   &lt;/head&gt;\n   &lt;body&gt;\n    ...\n   &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>This worked for me.</p>\n",
                    "is_accepted": false,
                    "score": 2
                }
            ],
            "body": "<pre><code>document.getElementById('container').addEventListener('copy',beforecopy,false );\n</code></pre>\n\n<p>In Chrome / Safari, the above will run the \"beforecopy\" function when the content on the page is being copied. MSIE is supposed to support this functionality as well, but for some reason I'm getting this error:</p>\n\n<blockquote>\n  <p>\"Object doesn't support this property or method\"</p>\n</blockquote>\n\n<p>Now, it's my understanding that Internet Explorer won't play with the body node, but I would have thought providing a node by ID would work fine. Does anyone have any ideas about what I'm doing wrong? Thanks in advance.</p>\n\n<p>** Bonus points for anyone who can tell me what the 3rd parameter \"False\" is good for.</p>\n",
            "last_activity_date": 1422640512,
            "question_id": 1695376,
            "score": 51,
            "tags": [
                "javascript",
                "internet-explorer",
                "addeventlistener"
            ],
            "title": "MSIE and addEventListener Problem in Javascript?"
        },
        {
            "answer_count": 18,
            "answers": [
                {
                    "body": "<blockquote>\n  <p><a href=\"http://docs.angularjs.org/api/ng.directive:select\">http://docs.angularjs.org/api/ng.directive:select</a></p>\n  \n  <p><strong>ngOptions(optional)</strong> \u2013 {<code>comprehension_expression=</code>} \u2013 in one of the\n  following forms: </p>\n  \n  <p><em>for array data sources</em>:<br>\n  <code>label for value in array</code><br>\n  <code>select as label for value in array</code><br>\n  <code>label group by group for value in array</code><br>\n  <code>select as label group by group for value in array track by trackexpr</code><br>\n  <em>for object data sources:</em><br>\n  <code>label for (key , value) in object</code><br>\n  <code>select as label for (key , value) in object</code><br>\n  <code>label group by group for (key, value) in object</code><br>\n  <code>select as label group by group for (key, value) in object</code></p>\n</blockquote>\n\n<p>In your case, it should be</p>\n\n<pre><code>array = [{ \"value\": 1, \"text\": \"1st\" }, { \"value\": 2, \"text\": \"2nd\" }];\n\n&lt;select ng-options=\"obj.value as obj.text for obj in array\"&gt;&lt;/select&gt;\n</code></pre>\n\n<h2>Update</h2>\n\n<p>With the updates on Angular, it is now possible to set the actual value for the <code>value</code> attribute of <code>select</code> element with <code>track by</code> expression.</p>\n\n<pre><code>&lt;select ng-options=\"obj.text for obj in array track by obj.value\"&gt;\n&lt;/select&gt;\n</code></pre>\n\n<h2>How to remember this ugly stuff</h2>\n\n<p>To all the people who are having hard time to remember this syntax form: I agree this isn't the most easiest or beautiful syntax. This syntax is kind of an extended version of Python's list comprehensions and knowing that helps me to remember the syntax very easily. It's something like this:</p>\n\n<p>Python code:</p>\n\n<pre><code>my_list = [x**2 for x in [1, 2, 3, 4, 5]]\n&gt; [1, 4, 9, 16, 25]\n# let people to be a list of person instances\nmy_list2 = [person.name for person in people]\n&gt; my_list2 = ['Alice', 'Bob']\n</code></pre>\n\n<p>This is actually the same syntax as the first one listed above. However, in <code>&lt;select&gt;</code> we usually need to differentiate between the actual value in code and the text shown (the label) in a <code>&lt;select&gt;</code> element. Like, we need <code>person.id</code> in the code but we don't want to show the <code>id</code> to the user, we want to show its name. Likewise, we're not interested in the <code>person.name</code> in the code. There comes <code>as</code> keyword to label stuff. So it becomes like this:</p>\n\n<pre><code>person.id as person.name for person in people\n</code></pre>\n\n<p>Or, instead of <code>person.id</code> we could need the <code>person</code> instance/reference itself. See below:</p>\n\n<pre><code>person as person.name for person in people\n</code></pre>\n\n<p>For JS objects, the same method applies as well, just remember that the items in the object is deconstructed with <code>(key, value)</code> pairs.</p>\n",
                    "is_accepted": true,
                    "score": 322
                },
                {
                    "body": "<p>How the value attributes gets its value:</p>\n\n<ul>\n<li>when using array as datasource, it will be the index of array element in each iteration;</li>\n<li>when using object as datasource, it will be the property name in each iteration.</li>\n</ul>\n\n<p>So in your case it should be:</p>\n\n<pre><code>obj = { '1': '1st', '2': '2nd' };\n\n&lt;select ng-options=\"k as v for (k,v) in obj\"&gt;&lt;/select&gt;\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 95
                },
                {
                    "body": "<p>You can do this:</p>\n\n<pre><code>&lt;select ng-model=\"model\"&gt;\n    &lt;option value=\"\"&gt;Select&lt;/option&gt;\n    &lt;option ng-repeat=\"obj in array\" value=\"{{obj.id}}\"&gt;{{obj.name}}&lt;/option&gt;\n&lt;/select&gt;\n</code></pre>\n\n<p>-- UPDATE</p>\n\n<p>After some updates, the solution of frm.adiputra is much better: <a href=\"http://stackoverflow.com/questions/12139152/how-to-set-value-property-in-angularjs-ng-options/12384319#12384319\">How to set value property in angularjs ng-options?</a>\nCode: </p>\n\n<pre><code>obj = { '1': '1st', '2': '2nd' };\n&lt;select ng-options=\"k as v for (k,v) in obj\"&gt;&lt;/select&gt;\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 10
                },
                {
                    "body": "<p>If you want to change the value of your <code>option</code> elements because the form will eventually be submitted to the server, instead of doing this :</p>\n\n<pre><code>&lt;select name=\"text\" ng-model=\"text\" ng-options=\"select p.text for p in resultOptions\"&gt;&lt;/select&gt;\n</code></pre>\n\n<p>You can do this :</p>\n\n<pre><code>&lt;select ng-model=\"text\" ng-options=\"select p.text for p in resultOptions\"&gt;&lt;/select&gt;\n&lt;input type=\"hidden\" name=\"text\" value=\"{{ text }}\" /&gt;\n</code></pre>\n\n<p>The expected value will then be sent through the form under the correct name.</p>\n",
                    "is_accepted": false,
                    "score": 38
                },
                {
                    "body": "<p>The <code>ng-options</code> directive does not set the value attribute on the <code>&lt;options&gt;</code> elements for arrays:</p>\n\n<p>Using <code>limit.value as limit.text for limit in limits</code> means:</p>\n\n<blockquote>\n  <p>set the <code>&lt;option&gt;</code>'s label as <code>limit.text</code><br>\n  save the <code>limit.value</code> value into the select's <code>ng-model</code></p>\n</blockquote>\n\n<p><a href=\"http://stackoverflow.com/questions/14425686/angularjs-ng-options-not-rendering-values\">AngularJS ng-options not rendering values</a></p>\n",
                    "is_accepted": false,
                    "score": 3
                },
                {
                    "body": "<p>For an object:</p>\n\n<pre><code>&lt;select ng-model=\"mySelect\" ng-options=\"key as value for (key, value) in object\"&gt;&lt;/select&gt;\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>The correct answer to this question has been provided by frm.adiputra, as currently this seems to be the only way to explicitly control the value attribute of the option elements.</p>\n\n<p>However, I just wanted to emphasize that \"select\" is not a keyword in this context, but it is just a placeholder for an expression. Please refer to the following list, for the definition of the \"select\" expression as well as other expressions that can be used in ng-options directive.</p>\n\n<p>The use of select as it is depicted in the question:</p>\n\n<pre><code>ng-options='select p.text for p  in resultOptions'\n</code></pre>\n\n<p>is essentially wrong.</p>\n\n<p>Based on the list of expressions, it seems that <strong>trackexpr</strong> may be used to specify the value, when options are given in an array of objects, but it has been used with grouping only.  </p>\n\n<hr>\n\n<p>From AngularJS' documentation for ng-options:</p>\n\n<ul>\n<li><strong>array / object</strong>: an expression which evaluates to an array / object to\niterate over.</li>\n<li><strong>value</strong>: local variable which will refer to each item in\nthe array or each property value of object during iteration.</li>\n<li><strong>key</strong>: local variable which will refer to a property name in object during\niteration.</li>\n<li><strong>label</strong>: The result of this expression will be the label for\n element. The expression will most likely refer to the value\nvariable (e.g. value.propertyName).</li>\n<li><strong>select</strong>: The result of this expression will be bound to the model of the parent  element.\nIf not specified, select expression will default to value.</li>\n<li><strong>group</strong>: The result of this expression will be used to group options using the  DOM \nelement.</li>\n<li><strong>trackexpr</strong>: Used when working with an array of objects. The result of this expression will be used\nto identify the objects in the array. The trackexpr will most likely refer to the\nvalue variable (e.g. value.propertyName).</li>\n</ul>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p><strong>It appears that <code>ng-options</code> is complicated (possibly frustrating) to use but in reality what we have here is an architecture problem.</strong></p>\n\n<p>AngularJS serves as an MVC framework for a dynamic HTML+JS application. While its (V)iew component does offer HTML \"templating,\" its primary purpose is to connect user actions, via a controller, to changes in the model. Therefore <strong>the appropriate level of abstraction, from which to work in AngularJS, is that a select element sets a value in the model to a value from a query</strong>.</p>\n\n<ul>\n<li>How a query row is presented to the user is the (V)iew\u2019s concern and <code>ng-options</code> provides the <code>for</code> keyword to dictate what the contents of the option element should be <em>i.e.</em> <code>p.text for p in resultOptions</code>.</li>\n<li>How a selected row is presented to the server is the (M)odel\u2019s concern therefore <code>ng-options</code> provides the <code>as</code> keyword to specify what value is provided to the model as in <code>k as v for (k,v) in objects</code>.</li>\n</ul>\n\n<p><strong>The correct solution this is problem is then architectural in nature and involves refactoring your HTML so that the (M)odel performs server communication when required</strong> (instead of the user submitting a form).</p>\n\n<p><strong>If an MVC HTML page is unnecessary over-engineering for the problem at hand:</strong> then use only the HTML generation portion of AngularJS\u2019s (V)iew component. In this case, follow the same pattern that is used for generating elements such as <code>&lt;li /&gt;</code>'s under <code>&lt;ul /&gt;</code>'s  and place a ng-repeat on an option element:</p>\n\n<pre><code>&lt;select name=\u201cvalue\u201d&gt;\n    &lt;option ng-repeat=\u201cvalue in Model.Values\u201d value=\u201c{{value.value}}\u201d&gt;\n        {{value.text}}\n    &lt;/option&gt;\n&lt;/select&gt;\n</code></pre>\n\n<p>As a <a href=\"http://en.wikipedia.org/wiki/Kludge\">kludge</a>, one can always move the name attribute of the select element to a hidden input element:</p>\n\n<pre><code>&lt;select ng-model=\u201cselectedValue\u201d ng-options=\u201cvalue.text for value in Model.Values\u201d&gt;\n&lt;/select&gt;\n&lt;input type=\u201chidden\u201d name=\u201cvalue\u201d value=\u201c{{selectedValue}}\u201d /&gt;\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 12
                },
                {
                    "body": "<p>To send a custom value called <code>my_hero</code> to the server using a normal form submit:</p>\n\n<p>JSON:</p>\n\n<pre><code>\"heroes\": [\n  {\"id\":\"iron\", \"label\":\"Iron Man Rocks!\"},\n  {\"id\":\"super\", \"label\":\"Superman Rocks!\"}\n]\n</code></pre>\n\n<p>HTML:</p>\n\n<pre><code>&lt;select ng-model=\"hero\" ng-options=\"obj.id as obj.label for obj in heroes\"&gt;&lt;/select&gt;\n&lt;input type=\"hidden\" name=\"my_hero\" value=\"{{hero}}\" /&gt;\n</code></pre>\n\n<p>The server will receive either <code>iron</code> or <code>super</code> as the value of <code>my_hero</code>.</p>\n\n<p>Similar to the answer by @neemzy, but specifying separate data for the <code>value</code> attribute.</p>\n",
                    "is_accepted": false,
                    "score": 15
                },
                {
                    "body": "<pre><code>&lt;select ng-model=\"color\" ng-options=\"(c.name+' '+c.shade) for c in colors\"&gt;&lt;/select&gt;&lt;br&gt;\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 2
                },
                {
                    "body": "<p>Selecting an item in ng-options can be a bit tricky depending on how you set the data source. </p>\n\n<p>After struggling with them for a while I end up making a sample with most common data sources I use, you can find it here:</p>\n\n<p><a href=\"http://plnkr.co/edit/fGq2PM?p=preview\" rel=\"nofollow\">http://plnkr.co/edit/fGq2PM?p=preview</a></p>\n\n<p>Now to make ng-options work here are some things to consider:</p>\n\n<ol>\n<li>Normally you get the options from 1 source and the selected value from other.e.g.\n<ul>\n<li>states :: data for ng-options</li>\n<li>user.state :: Option to set as selected</li>\n</ul></li>\n<li>Based on 1, the easiest/logical thing to do is to fill the select with one source and then set the selected value trough code. Rarely would be better to get a mixed dataset.</li>\n<li>Angular allows select controls to hold more than <code>key | label</code>, many online examples put  objects as 'key'. If you need information from the object set it that way, otherwise use the specific property you need as key. (ID, CODE, etc.. As in the plckr sample)</li>\n<li><p>To way to set the value of the dropdown/select control depends on #3, </p>\n\n<ul>\n<li>If the dropdown key is a single propery (like in all examples in the plunkr), you just set it, e.g.:\n<code>$scope.dropdownmodel = $scope.user.state;</code></li>\n<li><p>If you set the object as key, you need to loop trough the options, even assigning the object will not set the item as selected as they will have different hashkeys, e.g.:</p>\n\n<p><code>for (var i = 0, len = $scope.options.length; i &lt; len; i++) {\n  if ($scope.options[i].id == savedValue) { // Your own property here: \n    console.log('Found target! ');\n    $scope.value = $scope.options[i];\n    break;\n  }\n}</code></p></li>\n</ul></li>\n</ol>\n\n<p>You can replace savedValue for the same property in the other object <code>$scope.myObject.myProperty</code></p>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>A year after the question, I had to find an answer for this question as non of these gave the actual answer, at least to me.</p>\n\n<p>You have asked how to select the option, but nobody has said that this two things are <strong>NOT</strong> the same:</p>\n\n<p>If we have an options like this:</p>\n\n<pre><code>$scope.options = [\n    { label: 'one', value: 1 },\n    { label: 'two', value: 2 }\n  ];\n</code></pre>\n\n<p>And we try to set a default option like this:</p>\n\n<pre><code>$scope.incorrectlySelected = { label: 'two', value: 2 };\n</code></pre>\n\n<p>It will <strong>NOT</strong> work, but if you try to select the option like this:</p>\n\n<pre><code>$scope.correctlySelected = $scope.options[1];\n</code></pre>\n\n<p>It will <strong>WORK</strong></p>\n\n<p>Even though these two objects have the same properties, Angular is considering them as a DIFFERENT because Angular compares by the <strong>reference</strong>. </p>\n\n<p>Take a look at this fiddle <a href=\"http://jsfiddle.net/qWzTb/\" rel=\"nofollow\">http://jsfiddle.net/qWzTb/</a></p>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>I had this issue too. I wasn't able to set my value in ng-options. Every option that is generate was set with 0, 1, ..., n.</p>\n\n<p>To make it right, i did in my ng-options something like...</p>\n\n<p>HTML:</p>\n\n<pre><code>&lt;select ng-options=\"room.name for room in Rooms track by room.price\"&gt;\n&lt;option value=\"\"&gt;--Rooms--&lt;/option&gt;\n&lt;/select&gt;\n</code></pre>\n\n<p>I use \"track by\" to set all my value with room.price</p>\n\n<p>(This example sucks: cause if there were more one price equal, the code will fail. so BE SURE have diferents values)</p>\n\n<p>JSON:</p>\n\n<pre><code>$scope.Rooms = [\n            { name: 'SALA01', price: 100 },\n            { name: 'SALA02', price: 200 },\n            { name: 'SALA03', price: 300 }\n        ];\n</code></pre>\n\n<p>I learn it here: <a href=\"http://gurustop.net/blog/2014/01/28/common-problems-and-solutions-when-using-select-elements-with-angular-js-ng-options-initial-selection/\" rel=\"nofollow\">http://gurustop.net/blog/2014/01/28/common-problems-and-solutions-when-using-select-elements-with-angular-js-ng-options-initial-selection/</a></p>\n\n<p>Wacth the video, its a nice class :)</p>\n",
                    "is_accepted": false,
                    "score": 66
                },
                {
                    "body": "<p>It is always painful for developers to with ng-options. For example:Getting empty/blank selected value in the select tag. Especially when dealing with JSON object in ng-options, it becomes more tedious.Here I have done some exercises on that.</p>\n\n<p>Objective: Iterate array of JSON objects through ng-option and set selected first element.</p>\n\n<p>Data:</p>\n\n<pre><code>someNames = [{\"id\":\"1\",\"someName\":\"xyz\"}, {\"id\":\"2\",\"someName\":\"abc\"}]\n</code></pre>\n\n<p>In select tag I had to show xyz and abc, where xyz must be selected without much efforts.</p>\n\n<p>HTML:</p>\n\n<pre><code>&lt;pre class=\"default prettyprint prettyprinted\" style=\"\"&gt;&lt;code&gt;\n    &amp;lt;select class=\"form-control\" name=\"test\" style=\"width:160px\" ng-options=\"name.someName for name in someNames\" ng-model=\"testModel.test\" ng-selected = \"testModel.test = testModel.test || someNames[0]\"&amp;gt;\n&amp;lt;/select&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n</code></pre>\n\n<p>By above code sample, you might get out of this exaggeration.</p>\n\n<p>Another <a href=\"https://github.com/angular/angular.js/issues/1302\" rel=\"nofollow\">reference</a>:</p>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>Instead of using the new 'track by' feature you can simply do this with an array if you want the values to be the same as the text:</p>\n\n<pre><code>&lt;select ng-options=\"v as v for (k,v) in Array/Obj\"&gt;&lt;/select&gt;\n</code></pre>\n\n<p>Note the difference between the standard syntax, which will make the values the keys of the Object/Array, and therefore 0,1,2 etc. for an array:</p>\n\n<pre><code>&lt;select ng-options\"k as v for (k,v) in Array/Obj\"&gt;&lt;/select&gt;\n</code></pre>\n\n<p><em>k as v</em> becomes <em>v as v</em>.</p>\n\n<p>I discovered this just based on common sense looking at the syntax.\n(k,v) is the actual statement that splits the array/object into key value pairs.</p>\n\n<p>In the 'k as v' statement, k will be the value, and v will be the text option displayed to the user. I think 'track by' is messy and overkill.</p>\n",
                    "is_accepted": false,
                    "score": 4
                },
                {
                    "body": "<p>The following tutorial help me solve the problem:\n<a href=\"http://www.grobmeier.de/angular-js-ng-select-and-ng-options-21112012.html#.VAOo58OwV2M\" rel=\"nofollow\">ANGULAR.JS: NG-SELECT AND NG-OPTIONS</a></p>\n\n<pre><code>&lt;select id=\"countryId\"\n  class=\"form-control\"\n  data-ng-model=\"entity.countryId\"\n  ng-options=\"value.dataValue as value.dataText group by value.group for value in countries\"&gt;&lt;/select&gt;\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>This is how I resolved this. Tracked the select by value and set the selected item property to the model in my javascript.\n<div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;select ng-model=\"vm.Enterprise.AdminCountry\" ng-options=\"country.CountryName for country in vm.Countries track by country.CountryId\"&gt;</code></pre>\r\n</div>\r\n</div>\r\n    enter code here\n</p>\n\n<p>Country = [{CountryId =1, Code = 'USA', CountryName='United States of America'},\n                  {CountryId =2, Code = 'CAN', CountryName='Canada'}]</p>\n\n<p>vm is my controller and the Country in the controller retrieved from the service is {CountryId =1, Code = 'USA', CountryName='United States of America'}</p>\n\n<p>When I selected another country from the select dropdown and posted my page with \"Save\", I get the correct country bound.</p>\n",
                    "is_accepted": false,
                    "score": 4
                },
                {
                    "body": "<p>For me the answer by <a href=\"http://stackoverflow.com/questions/12139152/how-to-set-value-property-in-angularjs-ng-options#22997081\">Bruno Gomes</a> is the best answer</p>\n\n<p>But actually, you need not worry about setting the value property of select options, angularJS will take care of that. Let me explain in detail.</p>\n\n<p><a href=\"http://jsfiddle.net/sanjaykhadka/raththbh/21/\" rel=\"nofollow\">Please consider this fiddle</a></p>\n\n<pre><code>angular.module('mySettings', []).controller('appSettingsCtrl', function ($scope) {\n\n    $scope.timeFormatTemplates = [{\n        label: \"Seconds\",\n        value: 'ss'\n    }, {\n        label: \"Minutes\",\n        value: 'mm'\n    }, {\n        label: \"Hours\",\n        value: 'hh'\n    }];\n\n\n    $scope.inactivity_settings = {\n        status: false,\n        inactive_time: 60 * 5 * 3, // 15 min (default value) ie 900 seconds\n        //time_format: 'ss', // second (default value)\n        time_format: $scope.timeFormatTemplates[0], // default seconds object\n    };\n\n    $scope.activity_settings = {\n        status: false,\n        active_time: 60 * 5 * 3, // 15 min (default value) ie 900 seconds\n        //time_format: 'ss', // second (default value)\n        time_format: $scope.timeFormatTemplates[0], // default seconds object\n    };\n\n    $scope.changedTimeFormat = function (time_format) {\n        'use strict';\n\n        console.log('time changed');\n        console.log(time_format);\n        var newValue = time_format.value;\n\n        // do your update settings stuffs\n    }\n});\n</code></pre>\n\n<p>As you can see in fiddle output, what ever you choose for select box options, it your custom value, or the 0, 1, 2 auto generated value by angularjs, it doesnot matter in your output unless you are using jquery or any other library to access value of that select combo box options and manipulate it accordingly.</p>\n",
                    "is_accepted": false,
                    "score": 0
                }
            ],
            "body": "<p>Here is what seems to be bothering a lot of people (including me).\nWhen using ng-options directive in angluarjs to fill Select-tag options I can not figure out how to set the value for an option. The documentation for this is really unclear  at least for a simpleton like me. </p>\n\n<p>I can set the text for an option easily like so: </p>\n\n<pre><code>ng-options='select p.text for p  in resultOptions'\n</code></pre>\n\n<p>when result options are for example: </p>\n\n<pre><code>[\n    {\n        \"value\": 1,\n        \"text\": \"1st\"\n    },\n    {\n        \"value\": 2,\n        \"text\": \"2nd\"\n    }\n]\n</code></pre>\n\n<p>Should be (and probably is) the most simple thing to set the option values but so far I just don't get it.</p>\n\n<p>Any help would be much appreciated.</p>\n",
            "last_activity_date": 1426155035,
            "question_id": 12139152,
            "score": 250,
            "tags": [
                "javascript",
                "angularjs"
            ],
            "title": "How to set value property in angularjs ng-options?"
        },
        {
            "answer_count": 14,
            "answers": [
                {
                    "body": "<p>Try this code it will solve the problem completely and it's simple:</p>\n\n<pre><code>&lt;script language=\"JavaScript\"&gt;\n&lt;!--\nfunction autoResize(id){\n    var newheight;\n    var newwidth;\n\n    if(document.getElementById){\n        newheight=document.getElementById(id).contentWindow.document .body.scrollHeight;\n        newwidth=document.getElementById(id).contentWindow.document .body.scrollWidth;\n    }\n\n    document.getElementById(id).height= (newheight) + \"px\";\n    document.getElementById(id).width= (newwidth) + \"px\";\n}\n//--&gt;\n&lt;/script&gt;\n\n&lt;IFRAME SRC=\"usagelogs/default.aspx\" width=\"100%\" height=\"200px\" id=\"iframe1\" marginheight=\"0\" frameborder=\"0\" onLoad=\"autoResize('iframe1');\"&gt;&lt;/iframe&gt;\n</code></pre>\n",
                    "is_accepted": true,
                    "score": 141
                },
                {
                    "body": "<p>Cross-browser <a href=\"https://github.com/house9/jquery-iframe-auto-height\">jQuery plug-in</a>.</p>\n\n<p>Cross-bowser, cross domain <strong><a href=\"https://github.com/davidjbradshaw/iframe-resizer\">library</a></strong> that uses <code>mutationObserver</code> to keep iFrame sized to the content and <code>postMessage</code> to communicate between iFrame and host page. Works with or without jQuery.</p>\n",
                    "is_accepted": false,
                    "score": 24
                },
                {
                    "body": "<p>Here is a cross-browser solution if you don't want to use jQuery:</p>\n\n<pre><code>/**\n * Resizes the given iFrame width so it fits its content\n * @param e The iframe to resize\n */\nfunction resizeIframeWidth(e){\n    // Set width of iframe according to its content\n    if (e.Document &amp;&amp; e.Document.body.scrollWidth) //ie5+ syntax\n        e.width = e.contentWindow.document.body.scrollWidth;\n    else if (e.contentDocument &amp;&amp; e.contentDocument.body.scrollWidth) //ns6+ &amp; opera syntax\n        e.width = e.contentDocument.body.scrollWidth + 35;\n    else (e.contentDocument &amp;&amp; e.contentDocument.body.offsetWidth) //standards compliant syntax \u2013 ie8\n        e.width = e.contentDocument.body.offsetWidth + 35;\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 11
                },
                {
                    "body": "<p>All solutions given thus far only account for a once off resize. You mention you want to be able to resize the iFrame after the contents are modified. In order to do this, you need to execute a function inside the iFrame (once the contents are changed, you need to fire an event to say that the contents have changed).</p>\n\n<p>I was stuck with this for a while, as code inside the iFrame seemed limited to the DOM inside the iFrame (and couldn't edit the iFrame), and code executed outside the iFrame was stuck with the DOM outside the iFrame (and couldn't pick up an event coming from inside the iFrame).</p>\n\n<p>The solution came from discovering (via assistance from a colleague) that jQuery can be told what DOM to use. In this case, the DOM of the parent window.</p>\n\n<p>As such, code such as this does what you need (when run inside the iFrame) :</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n    jQuery(document).ready(function () {\n        jQuery(\"#IDofControlFiringResizeEvent\").click(function () {\n            var frame = $('#IDofiframeInMainWindow', window.parent.document);\n            var height = jQuery(\"#IDofContainerInsideiFrame\").height();\n            frame.height(height + 15);\n        });\n    });\n&lt;/script&gt;\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 18
                },
                {
                    "body": "<p>I slightly modified Garnaph's great solution above.  It seemed like his solution modified the iframe size based upon the size right before the event.  For my situation (email submission via an iframe) I needed the iframe height to change right after submission.  For example show validation errors or \"thank you\" message after submission.  </p>\n\n<p>I just eliminated the nested click() function and put it into my iframe html:</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n    jQuery(document).ready(function () {\n        var frame = $('#IDofiframeInMainWindow', window.parent.document);\n        var height = jQuery(\"#IDofContainerInsideiFrame\").height();\n        frame.height(height + 15);\n    });\n&lt;/script&gt;\n</code></pre>\n\n<p>Worked for me, but not sure about cross browser functionality.</p>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>If the iframe content is from the same domain this should work great. It does require jQuery though.</p>\n\n<pre><code>$('#iframe_id').load(function () {\n    $(this).height($(this).contents().height());\n    $(this).width($(this).contents().width());\n});\n</code></pre>\n\n<p>To have it resize dynamically you could do this:</p>\n\n<pre><code>&lt;script language=\"javaScript\"&gt;\n&lt;!--\nfunction autoResize(){\n    $('#themeframe').height($('#themeframe').contents().height());\n}\n//--&gt;\n&lt;/script&gt;\n&lt;iframe id=\"themeframe\" onLoad=\"autoResize();\" marginheight=\"0\" frameborder=\"0\" src=\"URL\"&gt;&lt;/iframe&gt;\n</code></pre>\n\n<p>Then on the page that the iframe loads add this:</p>\n\n<pre><code>&lt;script language=\"javaScript\"&gt;\nfunction resize()\n{\n    window.parent.autoResize();\n}\n\n$(window).on('resize', resize);\n&lt;/script&gt;\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 4
                },
                {
                    "body": "<p>I am using this code to autoadjust height of all iframes (with class autoHeight) when they loads on page. Tested and it works in IE, FF, Chrome, Safari and Opera.</p>\n\n<pre><code>function doIframe() {\n    var $iframes = $(\"iframe.autoHeight\"); \n    $iframes.each(function() {\n        var iframe = this;\n        $(iframe).load(function() {\n            setHeight(iframe);\n        });\n    });\n}\n\nfunction setHeight(e) {\n  e.height = e.contentWindow.document.body.scrollHeight + 35;\n}\n\n$(window).load(function() {\n    doIframe();\n});\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 6
                },
                {
                    "body": "<p>It is possible to make a \"ghost-like\" IFrame that acts like it was not there.</p>\n\n<p>See <a href=\"http://codecopy.wordpress.com/2013/02/22/ghost-iframe-crossdomain-iframe-resize/\" rel=\"nofollow\">http://codecopy.wordpress.com/2013/02/22/ghost-iframe-crossdomain-iframe-resize/</a></p>\n\n<p>Basically you use the event system <code>parent.postMessage(..)</code> described in \n<a href=\"https://developer.mozilla.org/en-US/docs/DOM/window.postMessage\" rel=\"nofollow\">https://developer.mozilla.org/en-US/docs/DOM/window.postMessage</a></p>\n\n<p>This works an all modern browsers!</p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>This is how I would do it (tested in FF/Chrome):</p>\n\n<pre><code>&lt;script type=\"text/javascript\" src=\"http://code.jquery.com/jquery-1.9.1.min.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\"&gt;\nfunction autoResize(iframe) {\n    $(iframe).height($(iframe).contents().find('html').height());\n}\n&lt;/script&gt;\n\n&lt;iframe src=\"page.html\" width=\"100%\" height=\"100\" marginheight=\"0\" frameborder=\"0\" onload=\"autoResize(this);\"&gt;&lt;/iframe&gt;\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>Here are several methods:</p>\n\n<pre><code>&lt;body style=\"margin:0px;padding:0px;overflow:hidden\"&gt;\n    &lt;iframe src=\"http://www.example.com\" frameborder=\"0\" style=\"overflow:hidden;height:100%;width:100%\" height=\"100%\" width=\"100%\"&gt;&lt;/iframe&gt;\n&lt;/body&gt;\n</code></pre>\n\n<p>AND ANOTHER ALTERNATIVE</p>\n\n<pre><code>&lt;body style=\"margin:0px;padding:0px;overflow:hidden\"&gt;\n    &lt;iframe src=\"http://www.example.com\" frameborder=\"0\" style=\"overflow:hidden;overflow-x:hidden;overflow-y:hidden;height:100%;width:100%;position:absolute;top:0px;left:0px;right:0px;bottom:0px\" height=\"100%\" width=\"100%\"&gt;&lt;/iframe&gt;\n&lt;/body&gt;\n</code></pre>\n\n<p>TO HIDE SCROLLING WITH 2 ALTERNATIVES AS SHOWN ABOVE</p>\n\n<pre><code>&lt;body style=\"margin:0px;padding:0px;overflow:hidden\"&gt;\n    &lt;iframe src=\"http://www.example.com\" frameborder=\"0\" style=\"overflow:hidden;height:150%;width:150%\" height=\"150%\" width=\"150%\"&gt;&lt;/iframe&gt;\n&lt;/body&gt;\n</code></pre>\n\n<p>HACK WITH SECOND CODE</p>\n\n<pre><code>&lt;body style=\"margin:0px;padding:0px;overflow:hidden\"&gt;\n    &lt;iframe src=\"http://www.example.com\" frameborder=\"0\" style=\"overflow:hidden;overflow-x:hidden;overflow-y:hidden;height:150%;width:150%;position:absolute;top:0px;left:0px;right:0px;bottom:0px\" height=\"150%\" width=\"150%\"&gt;&lt;/iframe&gt;\n&lt;/body&gt;\n</code></pre>\n\n<p>To hide the scroll-bars of the iFrame, the parent is made \"overflow:hidden\" to hide scrollbars and the iFrame is made to go upto 150% width and height which forces the scroll-bars outside the page and since the body doesn't have scroll-bars one may not expect the iframe to be exceeding the bounds of the page. This hides the scrollbars of the iFrame with full width!</p>\n\n<p>source: set <a href=\"http://stackoverflow.com/questions/5867985/iframe-100-height\">iframe auto height</a></p>\n",
                    "is_accepted": false,
                    "score": 2
                },
                {
                    "body": "<p>This is a solid proof solution</p>\n\n<pre><code>function resizer(id)\n{\n\nvar doc=document.getElementById(id).contentWindow.document;\nvar body_ = doc.body, html_ = doc.documentElement;\n\nvar height = Math.max( body_.scrollHeight, body_.offsetHeight, html_.clientHeight, html_.scrollHeight, html_.offsetHeight );\nvar width  = Math.max( body_.scrollWidth, body_.offsetWidth, html_.clientWidth, html_.scrollWidth, html_.offsetWidth );\n\ndocument.getElementById(id).style.height=height;\ndocument.getElementById(id).style.width=width;\n\n}\n</code></pre>\n\n<p>the html</p>\n\n<pre><code>&lt;IFRAME SRC=\"blah.php\" id=\"iframe1\"  onLoad=\"resizer('iframe1');\"&gt;&lt;/iframe&gt;\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>all can not work using above methods.</p>\n\n<p>javascript:</p>\n\n<pre><code>function resizer(id) {\n        var doc = document.getElementById(id).contentWindow.document;\n        var body_ = doc.body, html_ = doc.documentElement;\n\n        var height = Math.max(body_.scrollHeight, body_.offsetHeight, html_.clientHeight, html_.scrollHeight, html_.offsetHeight);\n        var width = Math.max(body_.scrollWidth, body_.offsetWidth, html_.clientWidth, html_.scrollWidth, html_.offsetWidth);\n\n        document.getElementById(id).style.height = height;\n        document.getElementById(id).style.width = width;\n\n    }\n</code></pre>\n\n<p>html:</p>\n\n<pre><code>&lt;div style=\"background-color:#b6ff00;min-height:768px;line-height:inherit;height:inherit;margin:0px;padding:0px;overflow:visible\" id=\"mainDiv\"  &gt;\n         &lt;input id=\"txtHeight\"/&gt;height     &lt;input id=\"txtWidth\"/&gt;width     \n        &lt;iframe src=\"head.html\" name=\"topFrame\" scrolling=\"No\" noresize=\"noresize\" id=\"topFrame\" title=\"topFrame\" style=\"width:100%; height: 47px\" frameborder=\"0\"  &gt;&lt;/iframe&gt;\n        &lt;iframe src=\"left.aspx\" name=\"leftFrame\" scrolling=\"yes\"   id=\"Iframe1\" title=\"leftFrame\" onload=\"resizer('Iframe1');\" style=\"top:0px;left:0px;right:0px;bottom:0px;width: 30%; border:none;border-spacing:0px; justify-content:space-around;\" &gt;&lt;/iframe&gt;\n        &lt;iframe src=\"index.aspx\" name=\"mainFrame\" id=\"Iframe2\" title=\"mainFrame\" scrolling=\"yes\" marginheight=\"0\" frameborder=\"0\" style=\"width: 65%; height:100%; overflow:visible;overflow-x:visible;overflow-y:visible; \"  onload=\"resizer('Iframe2');\" &gt;&lt;/iframe&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Env: IE 10, Windows 7 x64</p>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>I found this resizer to work better:</p>\n\n<p>function resizer(id)\n{</p>\n\n<pre><code>var doc = document.getElementById(id).contentWindow.document;\nvar body_ = doc.body;\nvar html_ = doc.documentElement;\n\nvar height = Math.max( body_.scrollHeight, body_.offsetHeight, html_.clientHeight,     html_.scrollHeight, html_.offsetHeight );\nvar width  = Math.max( body_.scrollWidth, body_.offsetWidth, html_.clientWidth, html_.scrollWidth, html_.offsetWidth );\n\ndocument.getElementById(id).height = height;\ndocument.getElementById(id).width = width;\n</code></pre>\n\n<p>}</p>\n\n<p>Note the style object is removed.</p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>In case someone getting to here:\nI had a problem with the solutions when I removed divs from the iframe - the iframe didnt got shorter.</p>\n\n<p>There is an Jquery plugin that does the job:</p>\n\n<p><a href=\"http://www.jqueryscript.net/layout/jQuery-Plugin-For-Auto-Resizing-iFrame-iFrame-Resizer.html\" rel=\"nofollow\">http://www.jqueryscript.net/layout/jQuery-Plugin-For-Auto-Resizing-iFrame-iFrame-Resizer.html</a></p>\n",
                    "is_accepted": false,
                    "score": 0
                }
            ],
            "body": "<p>I need solution for auto adjust width height of iframe to fit with content in it, and the point is the content size (width, height) could be change after iframe loaded. I guess i need a event action when body size changed.</p>\n",
            "last_activity_date": 1421606271,
            "question_id": 819416,
            "score": 109,
            "tags": [
                "javascript",
                "html",
                "iframe",
                "adjustment"
            ],
            "title": "Adjust width height of iframe to fit with content in it"
        },
        {
            "answer_count": 6,
            "answers": [
                {
                    "body": "<pre><code>whatIWant === null\n</code></pre>\n",
                    "is_accepted": false,
                    "score": -1
                },
                {
                    "body": "<p>After reading your clarification, @Ates Goral's answer provides how to perform the same operation you're doing in C# in JavaScript.</p>\n\n<p>@Gumbo's answer provides the best way to check for null; however, it's important to note the difference in <code>==</code> versus <code>===</code> in JavaScript <em>especially</em> when it comes to issues of checking for <code>undefined</code> and/or <code>null</code>.</p>\n\n<p>There's a really good article about the difference in two terms <a href=\"http://saladwithsteve.com/2008/02/javascript-undefined-vs-null.html\" rel=\"nofollow\">here</a>. Basically, understand that if you use <code>==</code> instead of <code>===</code>, JavaScript will try to coalesce the values you're comparing and return what the result of the comparison <em>after</em> this coalescence. </p>\n",
                    "is_accepted": false,
                    "score": 3
                },
                {
                    "body": "<p>The JavaScript equivalent of the C# null coalescing operator (<code>??</code>) is using a logical OR (<code>||</code>):</p>\n\n<pre><code>var whatIWant = someString || \"Cookies!\";\n</code></pre>\n\n<p>There are cases (clarified below) that the behaviour won't match that of C#, but this is the general, terse way of assigning default/alternative values in JavaScript.</p>\n\n<p><hr /></p>\n\n<h2>Clarification</h2>\n\n<p>Regardless of the type of the first operand, if casting it to a Boolean results in <code>false</code>, the assignment will use the second operand. Beware of all the cases below:</p>\n\n<pre><code>alert(Boolean(null)); // false\nalert(Boolean(undefined)); // false\nalert(Boolean(0)); // false\nalert(Boolean(\"\")); // false\nalert(Boolean(\"false\")); // true -- gotcha! :)\n</code></pre>\n\n<p>This means:</p>\n\n<pre><code>var whatIWant = null || new ShinyObject(); // is a new shiny object\nvar whatIWant = undefined || \"well defined\"; // is \"well defined\"\nvar whatIWant = 0 || 42; // is 42\nvar whatIWant = \"\" || \"a million bucks\"; // is \"a million bucks\"\nvar whatIWant = \"false\" || \"no way\"; // is \"false\"\n</code></pre>\n",
                    "is_accepted": true,
                    "score": 694
                },
                {
                    "body": "<p>beware of the JavaScript specific definition of null. there are two definitions for \"no value\" in javascript.\n1. Null: when a variable is null, it means it contains no data in it, but the variable is already defined in the code. like this:</p>\n\n<pre><code>var myEmptyValue = 1;\nmyEmptyValue = null;\nif ( myEmptyValue === null ) { window.alert('it is null'); }\n// alerts\n</code></pre>\n\n<p>in such case, the type of your variable is actually Object. test it.</p>\n\n<pre><code>window.alert(typeof myEmptyValue); // prints Object\n</code></pre>\n\n<ol>\n<li><p>Undefined: when a variable has not been defined before in the code, and as expected, it does not contain any value. like this:</p>\n\n<pre><code>if ( myUndefinedValue === undefined ) { window.alert('it is undefined'); }\n// alerts\n</code></pre></li>\n</ol>\n\n<p>if such case, the type of your variable is 'undefined'.</p>\n\n<p>notice that if you use the type-converting comparison operator (==), JavaScript will act equally for both of these empty-values. to distinguish between them, always use the type-strict comparison operator (===).</p>\n",
                    "is_accepted": false,
                    "score": 2
                },
                {
                    "body": "<p>If <code>||</code> as a replacement of C#'s <code>??</code> isn't good enough in your case, because it swallows empty strings and zeros, you can always write your own function:</p>\n\n<pre><code> function $N(value, ifnull) {\n    if (value === null || value === undefined)\n      return ifnull;\n    return value;\n }\n\n var whatIWant = $N(someString, 'Cookies!');\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 20
                },
                {
                    "body": "<pre><code>function coalesce() {\n    for(var i in arguments) {\n        if (arguments[i] !== null &amp;&amp; arguments[i] !== undefined) {\n            return arguments[i];\n        }\n    }\n    return null;\n}\n\nvar xyz = {};\nxyz.val = coalesce(null, undefined, xyz.val, 5);\n\n// xyz.val now contains 5\n</code></pre>\n\n<p>this solution works like the SQL coalesce function, it accepts any number of arguments, and returns null if none of them have a value.  It behaves like the C# ?? operator in the sense that \"\", false, and 0 are considered NOT NULL and therefore count as actual values.  If you come from a .net background, this will be the most natural feeling solution.</p>\n",
                    "is_accepted": false,
                    "score": 10
                }
            ],
            "body": "<p>Is there a null coalescing operator in Javascript?</p>\n\n<p>For example, in C#, I can do this:</p>\n\n<pre><code>String someString = null;\nvar whatIWant = someString ?? \"Cookies!\";\n</code></pre>\n\n<p>The best approximation I can figure out for Javascript is using the conditional operator:</p>\n\n<pre><code>var someString = null;\nvar whatIWant = someString ? someString : 'Cookies!';\n</code></pre>\n\n<p>Which is sorta icky IMHO. Can I do better?</p>\n",
            "last_activity_date": 1396968796,
            "question_id": 476436,
            "score": 404,
            "tags": [
                "javascript",
                "operators",
                "null-coalescing-operator",
                "null-coalescing"
            ],
            "title": "Is there a &quot;null coalescing&quot; operator in JavaScript?"
        },
        {
            "answer_count": 13,
            "answers": [
                {
                    "body": "<pre><code>arrValues.indexOf('Sam') &gt; -1\n</code></pre>\n\n<p>IE 8 and below do not have the <code>Array.prototype.indexOf</code> method. For these versions of IE use:</p>\n\n<pre><code>if(!Array.prototype.indexOf) {\n    Array.prototype.indexOf = function(needle) {\n        for(var i = 0; i &lt; this.length; i++) {\n            if(this[i] === needle) {\n                return i;\n            }\n        }\n        return -1;\n    };\n}\n</code></pre>\n\n<p><strong>Edit after a long time:</strong> It's best not to patch the <code>prototype</code> of native primitives in JavaScript. A better way:</p>\n\n<pre><code>var indexOf = function(needle) {\n    if(typeof Array.prototype.indexOf === 'function') {\n        indexOf = Array.prototype.indexOf;\n    } else {\n        indexOf = function(needle) {\n            var i = -1, index = -1;\n\n            for(i = 0; i &lt; this.length; i++) {\n                if(this[i] === needle) {\n                    index = i;\n                    break;\n                }\n            }\n\n            return index;\n        };\n    }\n\n    return indexOf.call(this, needle);\n};\n</code></pre>\n\n<p>You can use it like this:</p>\n\n<pre><code>var myArray = [0,1,2],\n    needle = 1,\n    index = indexOf.call(myArray, needle); // 1\n</code></pre>\n\n<p>The function will detect the presence of a native <code>indexOf</code> method, once, then overwrite itself with either the native function or the shim.</p>\n",
                    "is_accepted": true,
                    "score": 516
                },
                {
                    "body": "<p>This is generally what the indexOf() method is for. You would say:</p>\n\n<pre><code>if (arrValues.indexOf('Sam') &gt; -1) {return true;}\nelse {return false;}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 17
                },
                {
                    "body": "<p>Given the implementation of indexOf for IE (as described by eyelidlessness):</p>\n\n<pre><code>Array.prototype.contains = function(obj) {\n    return this.indexOf(obj) &gt; -1;\n};\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 9
                },
                {
                    "body": "<p><a href=\"http://docs.jquery.com/Utilities/jQuery.inArray\">jQuery</a> has a utility function for this:</p>\n\n<pre><code>$.inArray(value, array)\n</code></pre>\n\n<p>Returns index of value in array. Returns -1 if array does not contain value.</p>\n\n<p>See also <a href=\"http://stackoverflow.com/questions/237104/array-containsobj-in-javascript\">array.contains(obj) in JavaScript</a></p>\n",
                    "is_accepted": false,
                    "score": 406
                },
                {
                    "body": "<p>The answer provided didn't work for me, but it gave me an idea:</p>\n\n<pre><code>Array.prototype.contains = function(obj)\n    {\n        return (this.join(',')).indexOf(obj) &gt; -1;\n    }\n</code></pre>\n\n<p>It isn't perfect because items that are the same beyond the groupings could end up matching.  Such as my example</p>\n\n<pre><code>var c=[];\nvar d=[];\nfunction a()\n{\n    var e = '1';\n    var f = '2';\n    c[0] = ['1','1'];\n    c[1] = ['2','2'];\n    c[2] = ['3','3'];\n    d[0] = [document.getElementById('g').value,document.getElementById('h').value];\n\n    document.getElementById('i').value = c.join(',');\n    document.getElementById('j').value = d.join(',');\n    document.getElementById('b').value = c.contains(d);\n}\n</code></pre>\n\n<p>When I call this function with the 'g' and 'h' fields containing 1 and 2 respectively, it still finds it because the resulting string from the join is:  1,1,2,2,3,3</p>\n\n<p>Since it is doubtful in my situation that I will come across this type of situation, I'm using this.  I thought I would share incase someone else couldn't make the chosen answer work either.</p>\n",
                    "is_accepted": false,
                    "score": 4
                },
                {
                    "body": "<p>An option that accounts for different types within the array (corrected to make p local to the for-loop):</p>\n\n<pre><code>Array.prototype.contains = function(k) {\n  for(var i=0; i &lt; this.length; i++){\n    if(this[i] === k){\n      return true;\n    }\n  }\n  return false;\n}\n</code></pre>\n\n<p>for example:</p>\n\n<pre><code>var list = [\"one\",2];\n\nlist.contains(\"one\") // returns true\nlist.contains(\"2\") // returns false\nlist.contains(2) // returns true\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 21
                },
                {
                    "body": "<p>If the list is fixed, you can use the native hasOwnProperty</p>\n\n<pre><code>var arrValues = {Alpha:0, Beta:0, Gamma:0};\nalert(arrValues.hasOwnProperty(\"Beta\"));\n</code></pre>\n",
                    "is_accepted": false,
                    "score": -2
                },
                {
                    "body": "<p>You can use <a href=\"http://underscorejs.org/#indexOf\">_.indexOf method</a> or if you don't want to include whole Underscore.js library in your app, you can have a look <a href=\"http://underscorejs.org/underscore.js\">how they did it</a> and extract necessary code.</p>\n\n<pre><code>    _.indexOf = function(array, item, isSorted) {\n    if (array == null) return -1;\n    var i = 0, l = array.length;\n    if (isSorted) {\n      if (typeof isSorted == 'number') {\n        i = (isSorted &lt; 0 ? Math.max(0, l + isSorted) : isSorted);\n      } else {\n        i = _.sortedIndex(array, item);\n        return array[i] === item ? i : -1;\n      }\n    }\n    if (nativeIndexOf &amp;&amp; array.indexOf === nativeIndexOf) return array.indexOf(item, isSorted);\n    for (; i &lt; l; i++) if (array[i] === item) return i;\n    return -1;\n  };\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 6
                },
                {
                    "body": "<p>My little contribution:</p>\n\n<pre><code>function isInArray(array, search)\n{\n    return (array.indexOf(search) &gt;= 0) ? true : false; \n}\n\n//usage\nif(isInArray(my_array, \"my_value\"))\n{\n    //...\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>It's almost always safe to use a library like <a href=\"http://underscorejs.org/\">underscore.js</a>, simply because of all the issues with cross-browser compatibilities and effieciency.</p>\n\n<p>Efficiency because you can be guaranteed that at any given time, a hugely popular library like underscore will have the most efficient method of accomplishing a utility function like this.</p>\n\n<pre><code>_.contains([1, 2, 3], 3); // returns true\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 6
                },
                {
                    "body": "<p>I prefer simplicity:</p>\n\n<pre><code>var days = [1, 2, 3, 4, 5];\nif ( 2 in days ) {console.log('weekday');}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": -1
                },
                {
                    "body": "<pre><code>function setFound(){   \n var l = arr.length, textBox1 = document.getElementById(\"text1\");\n    for(var i=0; i&lt;l;i++)\n    {\n     if(arr[i]==searchele){\n      textBox1 .value = \"Found\";\n      return;\n     }\n    }\n    textBox1 .value = \"Not Found\";\nreturn;\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>Another option would be to use <code>Array.some</code> (<a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/some#Browser_compatibility\" rel=\"nofollow\">if available</a>) in the following way:</p>\n\n<pre><code>Array.prototype.contains = function(obj) {\n  return this.some( function(e){ return e === obj } );\n}\n</code></pre>\n\n<p>The anonymous function passed to <code>Array.some</code> will return <code>true</code> if and only if there is an element in the array that is identical to <code>obj</code>. Absent such an element, the function will not return <code>true</code> for any of the elements of the array, so <code>Array.some</code> will return <code>false</code> as well.</p>\n",
                    "is_accepted": false,
                    "score": 0
                }
            ],
            "body": "<p>i need to determine if a value exists in an array using javascript.</p>\n\n<p>I am using the following function:</p>\n\n<pre><code>Array.prototype.contains = function(obj) {\n    var i = this.length;\n    while (i--) {\n        if (this[i] == obj) {\n            return true;\n        }\n    }\n    return false;\n}\n</code></pre>\n\n<p>The above function always returns false.</p>\n\n<p>The array values and the function call is as below</p>\n\n<pre><code>arrValues = [\"Sam\",\"Great\", \"Sample\", \"High\"]\nalert(arrValues.contains(\"Sam\"));\n</code></pre>\n\n<p>Please suggest what to do</p>\n",
            "last_activity_date": 1423356260,
            "question_id": 1181575,
            "score": 365,
            "tags": [
                "javascript",
                "arrays",
                "contains"
            ],
            "title": "Javascript: Determine whether an array contains a value"
        },
        {
            "answer_count": 20,
            "answers": [
                {
                    "body": "<pre><code>function repeat(s, n) { var r=\"\"; for (var a=0;a&lt;n;a++) r+=s; return r;}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 2
                },
                {
                    "body": "<p>I'd put this function onto the String object directly.  Instead of creating an array, filling it, and joining it with an empty char, just create an array of the proper length, and join it with your desired string.  Same result, less process!</p>\n\n<pre><code>String.prototype.repeat = function( num )\n{\n    return new Array( num + 1 ).join( this );\n}\n\nalert( \"string to repeat\\n\".repeat( 4 ) );\n</code></pre>\n",
                    "is_accepted": true,
                    "score": 309
                },
                {
                    "body": "<pre><code>/**  \n@desc: repeat string  \n@param: n - times  \n@param: d - delimiter  \n*/\n\nString.prototype.repeat = function (n, d) {\n    return --n ? this + (d || '') + this.repeat(n, d) : '' + this\n};\n</code></pre>\n\n<p>this is how to repeat string several times using delimeter.</p>\n",
                    "is_accepted": false,
                    "score": 5
                },
                {
                    "body": "<p>Expanding <a href=\"http://stackoverflow.com/questions/202605/repeat-string-javascript/202627#202627\">P.Bailey's solution</a>:</p>\n\n<pre><code>String.prototype.repeat = function(num) {\n    return new Array(isNaN(num)? 1 : ++num).join(this);\n    }\n</code></pre>\n\n<p>This way you should be safe from unexpected argument types:</p>\n\n<pre><code>var foo = 'bar';\nalert(foo.repeat(3));              // Will work, \"barbarbar\"\nalert(foo.repeat('3'));            // Same as above\nalert(foo.repeat(true));           // Same as foo.repeat(1)\n\nalert(foo.repeat(0));              // This and all the following return an empty\nalert(foo.repeat(false));          // string while not causing an exception\nalert(foo.repeat(null));\nalert(foo.repeat(undefined));\nalert(foo.repeat({}));             // Object\nalert(foo.repeat(function () {})); // Function\n</code></pre>\n\n<p><em>EDIT: Credits to <a href=\"http://stackoverflow.com/users/108448/jerone\">jerone</a> for his elegant <code>++num</code> idea!</em></p>\n",
                    "is_accepted": false,
                    "score": 16
                },
                {
                    "body": "<p>This one is pretty efficient</p>\n\n<pre><code>String.prototype.repeat = function(times){\n    var result=\"\";\n    var pattern=this;\n    while (times &gt; 0) {\n        if (times&amp;1)\n            result+=pattern;\n        times&gt;&gt;=1;\n        pattern+=pattern;\n    }\n    return result;\n};\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 30
                },
                {
                    "body": "<p>I've tested the performance of all the proposed approaches.</p>\n\n<p>Here is <strong>the fastest variant</strong> I've got.</p>\n\n<pre><code>String.prototype.repeat = function(count) {\n    if (count &lt; 1) return '';\n    var result = '', pattern = this.valueOf();\n    while (count &gt; 1) {\n        if (count &amp; 1) result += pattern;\n        count &gt;&gt;= 1, pattern += pattern;\n    }\n    return result + pattern;\n};\n</code></pre>\n\n<p>Or as <strong>stand-alone</strong> function:</p>\n\n<pre><code>function repeat(pattern, count) {\n    if (count &lt; 1) return '';\n    var result = '';\n    while (count &gt; 1) {\n        if (count &amp; 1) result += pattern;\n        count &gt;&gt;= 1, pattern += pattern;\n    }\n    return result + pattern;\n}\n</code></pre>\n\n<p>It is based on <a href=\"http://stackoverflow.com/users/345520/artistoex\">artistoex</a> algorithm.\nIt is really fast. And the bigger the <code>count</code>, the faster it goes compared with the traditional <code>new Array(count + 1).join(string)</code> approach.  </p>\n\n<p>I've only changed 2 things:</p>\n\n<ol>\n<li>replaced <code>pattern = this</code> with <code>pattern = this.valueOf()</code> (clears one obvious type conversion);</li>\n<li>added <code>if (count &lt; 1)</code> check from <a href=\"http://www.prototypejs.org/api/string/times\">prototypejs</a> to the top of function to exclude unnecessary actions in that case.</li>\n<li>applied optimisation from <a href=\"http://stackoverflow.com/users/1913959/dennis\">Dennis</a> <a href=\"http://stackoverflow.com/a/14026829/489553\">answer</a> (5-7% speed up)</li>\n</ol>\n\n<p><strong>UPD</strong></p>\n\n<p>Created a little performance-testing playground <a href=\"http://jsfiddle.net/disfated/GejWV/\">here</a> for those who interested.</p>\n\n<p><em>variable <code>count</code> ~ 0 .. 100:</em><br>\n<img src=\"http://tinyurl.com/kb3raxr\" alt=\"Testing performance of different variants of String.repeat()\"></p>\n\n<p><em>constant <code>count</code> = 1024:</em><br>\n<img src=\"http://tinyurl.com/k527auo\" alt=\"Testing performance of different variants of String.repeat()\"></p>\n\n<p>Use it and make it even faster if you can :)</p>\n",
                    "is_accepted": false,
                    "score": 130
                },
                {
                    "body": "<p>This may be the smallest recursive one:-</p>\n\n<pre><code>String.prototype.repeat = function(n,s) {\ns = s || \"\"\nif(n&gt;0) {\n   s += this\n   s = this.repeat(--n,s)\n}\nreturn s}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>Recursive solution using divide and conquer:</p>\n\n<pre><code>function repeat(n, s) {\n    if (n==0) return '';\n    if (n==1 || isNaN(n)) return s;\n    with(Math) { return repeat(floor(n/2), s)+repeat(ceil(n/2), s); }\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>Tests of the various methods:</p>\n\n<pre><code>var repeatMethods = {\n    control: function (n,s) {\n        /* all of these lines are common to all methods */\n        if (n==0) return '';\n        if (n==1 || isNaN(n)) return s;\n        return '';\n    },\n    divideAndConquer:   function (n, s) {\n        if (n==0) return '';\n        if (n==1 || isNaN(n)) return s;\n        with(Math) { return arguments.callee(floor(n/2), s)+arguments.callee(ceil(n/2), s); }\n    },\n    linearRecurse: function (n,s) {\n        if (n==0) return '';\n        if (n==1 || isNaN(n)) return s;\n        return s+arguments.callee(--n, s);\n    },\n    newArray: function (n, s) {\n        if (n==0) return '';\n        if (n==1 || isNaN(n)) return s;\n        return (new Array(isNaN(n) ? 1 : ++n)).join(s);\n    },\n    fillAndJoin: function (n, s) {\n        if (n==0) return '';\n        if (n==1 || isNaN(n)) return s;\n        var ret = [];\n        for (var i=0; i&lt;n; i++)\n            ret.push(s);\n        return ret.join('');\n    },\n    concat: function (n,s) {\n        if (n==0) return '';\n        if (n==1 || isNaN(n)) return s;\n        var ret = '';\n        for (var i=0; i&lt;n; i++)\n            ret+=s;\n        return ret;\n    },\n    artistoex: function (n,s) {\n        var result = '';\n        while (n&gt;0) {\n            if (n&amp;1) result+=s;\n            n&gt;&gt;=1, s+=s;\n        };\n        return result;\n    }\n};\nfunction testNum(len, dev) {\n    with(Math) { return round(len+1+dev*(random()-0.5)); }\n}\nfunction testString(len, dev) {\n    return (new Array(testNum(len, dev))).join(' ');\n}\nvar testTime = 1000,\n    tests = {\n        biggie: { str: { len: 25, dev: 12 }, rep: {len: 200, dev: 50 } },\n        smalls: { str: { len: 5, dev: 5}, rep: { len: 5, dev: 5 } }\n    };\nvar testCount = 0;\nvar winnar = null;\nvar inflight = 0;\nfor (var methodName in repeatMethods) {\n    var method = repeatMethods[methodName];\n    for (var testName in tests) {\n        testCount++;\n        var test = tests[testName];\n        var testId = methodName+':'+testName;\n        var result = {\n            id: testId,\n            testParams: test\n        }\n        result.count=0;\n\n        (function (result) {\n            inflight++;\n            setTimeout(function () {\n                result.start = +new Date();\n                while ((new Date() - result.start) &lt; testTime) {\n                    method(testNum(test.rep.len, test.rep.dev), testString(test.str.len, test.str.dev));\n                    result.count++;\n                }\n                result.end = +new Date();\n                result.rate = 1000*result.count/(result.end-result.start)\n                console.log(result);\n                if (winnar === null || winnar.rate &lt; result.rate) winnar = result;\n                inflight--;\n                if (inflight==0) {\n                    console.log('The winner: ');\n                    console.log(winnar);\n                }\n            }, (100+testTime)*testCount);\n        }(result));\n    }\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>Here's the JSLint safe version</p>\n\n<pre><code>String.prototype.repeat = function (num) {\n  var a = [];\n  a.length = num &lt;&lt; 0 + 1;\n  return a.join(this);\n};\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>Here's a 5-7% improvement on disfated's answer.</p>\n\n<p>Unroll the loop by stopping at <code>count &gt; 1</code> and perform an additional <code>result += pattnern</code> concat after the loop. This will avoid the loops final previously unused <code>pattern += pattern</code> without having to use an expensive if-check.\nThe final result would look like this:</p>\n\n<pre><code>String.prototype.repeat = function(count) {\n    if (count &lt; 1) return '';\n    var result = '', pattern = this.valueOf();\n    while (count &gt; 1) {\n        if (count &amp; 1) result += pattern;\n        count &gt;&gt;= 1, pattern += pattern;\n    }\n    result += pattern;\n    return result;\n};\n</code></pre>\n\n<p>And here's disfated's fiddle forked for the unrolled version: <a href=\"http://jsfiddle.net/wsdfg/\" rel=\"nofollow\">http://jsfiddle.net/wsdfg/</a></p>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>If you think all those prototype definitions, array creations, and join operations are overkill, just use a single line code where you need it. String S repeating N times:</p>\n\n<pre><code>for (var i = 0, result = ''; i &lt; N; i++) result += S;\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>I came here randomly and never had a reason to repeat a char in javascript before.</p>\n\n<p>I was impressed by artistoex's way of doing it and disfated's results. I noticed that the last string concat was unnecessary, as Dennis also pointed out.</p>\n\n<p>I noticed a few more things when playing with the sampling disfated put together.</p>\n\n<p>The results varied a fair amount often favoring the last run and similar algorithms would often jockey for position. One of the things I changed was instead of using the JSLitmus generated count as the seed for the calls; as count was generated different for the various methods, I put in an index. This made the thing much more reliable. I then looked at ensuring that varying sized strings were passed to the functions. This prevented some of the variations I saw, where some algorithms did better at the single chars or smaller strings. However the top 3 methods all did well regardless of the string size. </p>\n\n<p>Forked test set</p>\n\n<p><a href=\"http://jsfiddle.net/schmide/fCqp3/134/\" rel=\"nofollow\">http://jsfiddle.net/schmide/fCqp3/134/</a></p>\n\n<pre><code>// repeated string\nvar string = '0123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789';\n// count paremeter is changed on every test iteration, limit it's maximum value here\nvar maxCount = 200;\n\nvar n = 0;\n$.each(tests, function (name) {\n    var fn = tests[name];\n    JSLitmus.test(++n + '. ' + name, function (count) {\n        var index = 0;\n        while (count--) {\n            fn.call(string.slice(0, index % string.length), index % maxCount);\n            index++;\n        }\n    });\n    if (fn.call('&gt;', 10).length !== 10) $('body').prepend('&lt;h1&gt;Error in \"' + name + '\"&lt;/h1&gt;');\n});\n\nJSLitmus.runAll();\n</code></pre>\n\n<p>I then included Dennis' fix and decided to see if I could find a way to eek out a bit more.</p>\n\n<p>Since javascript can't really optimize things, the best way to improve performance is to manually avoid things. If I took the first 4 trivial results out of the loop, I could avoid 2-4 string stores and write the final store directly to the result.</p>\n\n<pre><code>// final: growing pattern + prototypejs check (count &lt; 1)\n'final avoid': function (count) {\n    if (!count) return '';\n    if (count == 1) return this.valueOf();\n    var pattern = this.valueOf();\n    if (count == 2) return pattern + pattern;\n    if (count == 3) return pattern + pattern + pattern;\n    var result;\n    if (count &amp; 1) result = pattern;\n    else result = '';\n    count &gt;&gt;= 1;\n    do {\n        pattern += pattern;\n        if (count &amp; 1) result += pattern;\n        count &gt;&gt;= 1;\n    } while (count &gt; 1);\n    return result + pattern + pattern;\n}\n</code></pre>\n\n<p>This resulted in a 1-2% improvement on average over Dennis' fix. However, different runs and different browsers would show a fair enough variance that this extra code probably isn't worth the effort over the 2 previous algorithms.</p>\n\n<p><a href=\"http://chart.apis.google.com/chart?chtt=String.repeat%28%29%20mesure%20-%20jsFiddle%20demo%20by%20schmide|Ops/sec%20%28Chrome%2025.0.1364.172%20on%20Windows%20NT%29&amp;chts=000000,10&amp;cht=bhg&amp;chd=t:43623,125090,796212,1650378,3130496,3242799,3402753&amp;chds=0,3402753&amp;chxt=x&amp;chxl=0%3a|0|3.4M&amp;chsp=0,1&amp;chm=t1.%20new%20Array.join%28%29%20%28prototypejs%29%2843.6K%29,000000,0,0,10|t2.%20array.push%28%29.join%28%29%28125.1K%29,000000,0,1,10|t3.%20%28result%20%2b%3D%20string%29%20x%20count%28796.2K%29,000000,0,2,10|t4.%20result%20%2b%3D%20growing%20pattern%281.7M%29,000000,0,3,10|t5.%20final%283.1M%29,000000,0,4,10|t6.%20final%20unrolled%283.2M%29,000000,0,5,10|t7.%20final%20avoid%283.4M%29,000000,0,6,10&amp;chbh=15,0,5&amp;chs=250x210\" rel=\"nofollow\">A chart</a></p>\n\n<p>Edit: I did this mostly under chrome. Firefox and IE will often favor Dennis by a couple %.</p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>Simple method:</p>\n\n<pre><code>String.prototype.repeat = function(num) {\n    num = parseInt(num);\n    if (num &lt; 0) return '';\n    return new Array(num + 1).join(this);\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>This problem is a well-known / \"classic\" optimization issue for JavaScript, caused by the fact that JavaScript strings are \"immutable\" and addition by concatenation of even a single character to a string requires creation of, including memory allocation for and copying to, an entire new string.</p>\n\n<p>Unfortunately, the accepted answer on this page is wrong, where \"wrong\" means by a performance factor of 3x for simple one-character strings, and 8x-97x for short strings repeated more times, to 300x for repeating sentences, and infinitely wrong when taking the limit of the ratios of complexity of the algorithms as <code>n</code> goes to infinity. Also, there is another answer on this page which is almost right (based on one of the many generations and variations of the correct solution circulating throughout the Internet in the past 13 years). However, this \"almost right\" solution misses a key point of the correct algorithm causing a 50% performance degradation.</p>\n\n<p><a href=\"http://jsperf.com/repeating-strings\">JS Performance Results for the accepted answer, the top-performing other answer (based on a degraded version of the original algorithm in this answer), and this answer using my algorithm created 13 years ago</a></p>\n\n<p>~ October 2000 I published an algorithm for this exact problem which was widely adapted, modified, then eventually poorly understood and forgotten. To remedy this issue, in August, 2008 I published an article <a href=\"http://www.webreference.com/programming/javascript/jkm3/3.html\">http://www.webreference.com/programming/javascript/jkm3/3.html</a> explaining the algorithm and using it as an example of simple of general-purpose JavaScript optimizations. By now, <em>Web Reference</em> has scrubbed my contact information and even my name from this article. And once again, the algorithm has been widely adapted, modified, then poorly understood and largely forgotten.</p>\n\n<blockquote>\n  <p>Original string repetition/multiplication JavaScript algorithm by\n  Joseph Myers, circa Y2K as a text multiplying function within Text.js;\n  published August, 2008 in this form by Web Reference:\n  <a href=\"http://www.webreference.com/programming/javascript/jkm3/3.html\">http://www.webreference.com/programming/javascript/jkm3/3.html</a> (The\n  article used the function as an example of JavaScript optimizations,\n  which is the only for the strange name \"stringFill3.\")</p>\n</blockquote>\n\n<pre><code>/*\n * Usage: stringFill3(\"abc\", 2) == \"abcabc\"\n */\n\nfunction stringFill3(x, n) {\n    var s = '';\n    for (;;) {\n        if (n &amp; 1) s += x;\n        n &gt;&gt;= 1;\n        if (n) x += x;\n        else break;\n    }\n    return s;\n}\n</code></pre>\n\n<p>Within two months after publication of that article, this same question was posted to Stack Overflow and flew under my radar until now, when apparently the original algorithm for this problem has once again been forgotten. The best solution available on this Stack Overflow page is a modified version of my solution, possibly separated by several generations. Unfortunately, the modifications ruined the solution's optimality. In fact, by changing the structure of the loop from my original, the modified solution performs a completely unneeded extra step of exponential duplicating (thus joining the largest string used in the proper answer with itself an extra time and then discarding it).</p>\n\n<p>Below ensues a discussion of some JavaScript optimizations related to all of the answers to this problem and for the benefit of all.</p>\n\n<h2>Technique: Avoid references to objects or object properties</h2>\n\n<p>To illustrate how this technique works, we use a real-life JavaScript function which creates strings of whatever length is needed. And as we'll see, more optimizations can be added!</p>\n\n<p>A function like the one used here is to create padding to align columns of text, for formatting money, or for filling block data up to the boundary. A text generation function also allows variable length input for testing any other function that operates on text. This function is one of the important components of the JavaScript text processing module.</p>\n\n<p>As we proceed, we will be covering two more of the most important optimization techniques while developing the original code into an optimized algorithm for creating strings. The final result is an industrial-strength, high-performance function that I've used everywhere--aligning item prices and totals in JavaScript order forms, data formatting and email / text message formatting and many other uses.</p>\n\n<p><strong>Original code for creating strings <code>stringFill1()</code></strong></p>\n\n<pre><code>function stringFill1(x, n) { \n    var s = ''; \n    while (s.length &lt; n) s += x; \n    return s; \n} \n/* Example of output: stringFill1('x', 3) == 'xxx' */ \n</code></pre>\n\n<p>The syntax is here is clear. As you can see, we've used local function variables already, before going on to more optimizations.</p>\n\n<p>Be aware that there's one innocent reference to an object property <code>s.length</code> in the code that hurts its performance. Even worse, the use of this object property reduces the simplicity of the program by making the assumption that the reader knows about the properties of JavaScript string objects.</p>\n\n<p>The use of this object property destroys the generality of the computer program. The program assumes that <code>x</code> must be a string of length one. This limits the application of the <code>stringFill1()</code> function to anything except repetition of single characters. Even single characters cannot be used if they contain multiple bytes like the HTML entity <code>&amp;nbsp;</code>.</p>\n\n<p>The worst problem caused by this unnecessary use of an object property is that the function creates an infinite loop if tested on an empty input string <code>x</code>. To check generality, apply a program to the smallest possible amount of input. A program which crashes when asked to exceed the amount of available memory has an excuse. A program like this one which crashes when asked to produce nothing is unacceptable. Sometimes pretty code is poisonous code.</p>\n\n<p>Simplicity may be an ambiguous goal of computer programming, but generally it's not. When a program lacks any reasonable level of generality, it's not valid to say, \"The program is good enough as far as it goes.\" As you can see, using the <code>string.length</code> property prevents this program from working in a general setting, and in fact, the incorrect program is ready to cause a browser or system crash.</p>\n\n<p>Is there a way to improve the performance of this JavaScript as well as take care of these two serious problems?</p>\n\n<p>Of course. Just use integers.</p>\n\n<p><strong>Optimized code for creating strings <code>stringFill2()</code></strong></p>\n\n<pre><code>function stringFill2(x, n) { \n    var s = ''; \n    while (n-- &gt; 0) s += x; \n    return s; \n} \n</code></pre>\n\n<p><strong>Timing code to compare <code>stringFill1()</code> and <code>stringFill2()</code></strong></p>\n\n<pre><code>function testFill(functionToBeTested, outputSize) { \n    var i = 0, t0 = new Date(); \n    do { \n        functionToBeTested('x', outputSize); \n        t = new Date() - t0; \n        i++; \n    } while (t &lt; 2000); \n    return t/i/1000; \n} \nseconds1 = testFill(stringFill1, 100); \nseconds2 = testFill(stringFill2, 100); \n</code></pre>\n\n<p><strong>The success so far of <code>stringFill2()</code></strong></p>\n\n<p><code>stringFill1()</code> takes 47.297 microseconds (millionths of a second) to fill a 100-byte string, and <code>stringFill2()</code> takes 27.68 microseconds to do the same thing. That's almost a doubling in performance by avoiding a reference to an object property.</p>\n\n<h2>Technique: Avoid adding short strings to long strings</h2>\n\n<p>Our previous result looked good--very good, in fact. The improved function <code>stringFill2()</code> is much faster due to the use of our first two optimizations. Would you believe it if I told you that it can be improved to be many times faster than it is now?</p>\n\n<p>Yes, we can accomplish that goal. Right now we need to explain how we avoid appending short strings to long strings.</p>\n\n<p>The short-term behavior appears to be quite good, in comparison to our original function. Computer scientists like to analyze the \"asymptotic behavior\" of a function or computer program algorithm, which means to study its long-term behavior by testing it with larger inputs. Sometimes without doing further tests, one never becomes aware of ways that a computer program could be improved. To see what will happen, we're going to create a 200-byte string.</p>\n\n<p><strong>The problem that shows up with <code>stringFill2()</code></strong></p>\n\n<p>Using our timing function, we find that the time increases to 62.54 microseconds for a 200-byte string, compared to 27.68 for a 100-byte string. It seems like the time should be doubled for doing twice as much work, but instead it's tripled or quadrupled. From programming experience, this result seems strange, because if anything, the function should be slightly faster since work is being done more efficiently (200 bytes per function call rather than 100 bytes per function call). This issue has to do with an insidious property of JavaScript strings: JavaScript strings are \"immutable.\"</p>\n\n<p>Immutable means that you cannot change a string once it's created. By adding on one byte at a time, we're not using up one more byte of effort. We're actually recreating the entire string plus one more byte.</p>\n\n<p>In effect, to add one more byte to a 100-byte string, it takes 101 bytes worth of work. Let's briefly analyze the computational cost for creating a string of <code>N</code> bytes. The cost of adding the first byte is 1 unit of computational effort. The cost of adding the second byte isn't one unit but 2 units (copying the first byte to a new string object as well as adding the second byte). The third byte requires a cost of 3 units, etc.</p>\n\n<p><code>C(N) = 1 + 2 + 3 + ... + N = N(N+1)/2 = O(N^2)</code>. The symbol <code>O(N^2)</code> is pronounced Big O of N squared, and it means that the computational cost in the long run is proportional to the square of the string length. To create 100 characters takes 10,000 units of work, and to create 200 characters takes 40,000 units of work.</p>\n\n<p>This is why it took more than twice as long to create 200 characters than 100 characters. In fact, it should have taken four times as long. Our programming experience was correct in that the work is being done slightly more efficiently for longer strings, and hence it took only about three times as long. Once the overhead of the function call becomes negligible as to how long of a string we're creating, it will actually take four times as much time to create a string twice as long.</p>\n\n<p>(Historical note: This analysis doesn't necessarily apply to strings in source code, such as <code>html = 'abcd\\n' + 'efgh\\n' + ... + 'xyz.\\n'</code>, since the JavaScript source code compiler can join the strings together before making them into a JavaScript string object. Just a few years ago, the KJS implementation of JavaScript would freeze or crash when loading long strings of source code joined by plus signs. Since the computational time was <code>O(N^2)</code> it wasn't difficult to make Web pages which overloaded the Konqueror Web browser or Safari, which used the KJS JavaScript engine core. I first came across this issue when I was developing a markup language and JavaScript markup language parser, and then I discovered what was causing the problem when I wrote my script for JavaScript Includes.)</p>\n\n<p>Clearly this rapid degradation of performance is a huge problem. How can we deal with it, given that we cannot change JavaScript's way of handling strings as immutable objects? The solution is to use an algorithm which recreates the string as few times as possible.</p>\n\n<p>To clarify, our goal is to avoid adding short strings to long strings, since in order to add the short string, the entire long string also must be duplicated.</p>\n\n<p>How the algorithm works to avoid adding short strings to long strings</p>\n\n<p>Here's a good way to reduce the number of times new string objects are created. Concatenate longer lengths of string together so that more than one byte at a time is added to the output.</p>\n\n<p>For instance, to make a string of length <code>N = 9</code>:</p>\n\n<pre><code>x = 'x'; \ns = ''; \ns += x; /* Now s = 'x' */ \nx += x; /* Now x = 'xx' */ \nx += x; /* Now x = 'xxxx' */ \nx += x; /* Now x = 'xxxxxxxx' */ \ns += x; /* Now s = 'xxxxxxxxx' as desired */\n</code></pre>\n\n<p>Doing this required creating a string of length 1, creating a string of length 2, creating a string of length 4, creating a string of length 8, and finally, creating a string of length 9. How much cost have we saved?</p>\n\n<p>Old cost <code>C(9) = 1 + 2 + 3 + 4 + 5 + 6 + 7 + 9 = 45</code>.</p>\n\n<p>New cost <code>C(9) = 1 + 2 + 4 + 8 + 9 = 24</code>.</p>\n\n<p>Note that we had to add a string of length 1 to a string of length 0, then a string of length 1 to a string of length 1, then a string of length 2 to a string of length 2, then a string of length 4 to a string of length 4, then a string of length 8 to a string of length 1, in order to obtain a string of length 9. What we're doing can be summarized as avoiding adding short strings to long strings, or in other words, trying to concatenate strings together that are of equal or nearly equal length.</p>\n\n<p>For the old computational cost we found a formula <code>N(N+1)/2</code>. Is there a formula for the new cost? Yes, but it's complicated. The important thing is that it is <code>O(N)</code>, and so doubling the string length will approximately double the amount of work rather than quadrupling it.</p>\n\n<p>The code that implements this new idea is nearly as complicated as the formula for the computational cost. When you read it, remember that <code>&gt;&gt;= 1</code> means to shift right by 1 byte. So if <code>n = 10011</code> is a binary number, then <code>n &gt;&gt;= 1</code> results in the value <code>n = 1001</code>.</p>\n\n<p>The other part of the code you might not recognize is the bitwise and operator, written <code>&amp;</code>. The expression <code>n &amp; 1</code> evaluates true if the last binary digit of <code>n</code> is 1, and false if the last binary digit of <code>n</code> is 0.</p>\n\n<p><strong>New highly-efficient <code>stringFill3()</code> function</strong></p>\n\n<pre><code>function stringFill3(x, n) { \n    var s = ''; \n    for (;;) { \n        if (n &amp; 1) s += x; \n        n &gt;&gt;= 1; \n        if (n) x += x; \n        else break; \n    } \n    return s; \n} \n</code></pre>\n\n<p>It looks ugly to the untrained eye, but it's performance is nothing less than lovely.</p>\n\n<p>Let's see just how well this function performs. After seeing the results, it's likely that you'll never forget the difference between an <code>O(N^2)</code> algorithm and an <code>O(N)</code> algorithm.</p>\n\n<p><code>stringFill1()</code> takes 88.7 microseconds (millionths of a second) to create a 200-byte string, <code>stringFill2()</code> takes 62.54, and <code>stringFill3()</code> takes only 4.608. What made this algorithm so much better? All of the functions took advantage of using local function variables, but taking advantage of the second and third optimization techniques added a twenty-fold improvement to performance of <code>stringFill3()</code>.</p>\n\n<p><strong>Deeper analysis</strong></p>\n\n<p>What makes this particular function blow the competition out of the water?</p>\n\n<p>As I've mentioned, the reason that both of these functions, <code>stringFill1()</code> and <code>stringFill2()</code>, run so slowly is that JavaScript strings are immutable. Memory cannot be reallocated to allow one more byte at a time to be appended to the string data stored by JavaScript. Every time one more byte is added to the end of the string, the entire string is regenerated from beginning to end.</p>\n\n<p>Thus, in order to improve the script's performance, one must precompute longer length strings by concatenating two strings together ahead of time, and then recursively building up the desired string length.</p>\n\n<p>For instance, to create a 16-letter byte string, first a two byte string would be precomputed. Then the two byte string would be reused to precompute a four-byte string. Then the four-byte string would be reused to precompute an eight byte string. Finally, two eight-byte strings would be reused to create the desired new string of 16 bytes. Altogether four new strings had to be created, one of length 2, one of length 4, one of length 8 and one of length 16. The total cost is 2 + 4 + 8 + 16 = 30.</p>\n\n<p>In the long run this efficiency can be computed by adding in reverse order and using a geometric series starting with a first term a1 = N and having a common ratio of r = 1/2. The sum of a geometric series is given by <code>a_1 / (1-r) = 2N</code>.</p>\n\n<p>This is more efficient than adding one character to create a new string of length 2, creating a new string of length 3, 4, 5, and so on, until 16. The previous algorithm used that process of adding a single byte at a time, and the total cost of it would be <code>n (n + 1) / 2 = 16 (17) / 2 = 8 (17) = 136</code>.</p>\n\n<p>Obviously, 136 is a much greater number than 30, and so the previous algorithm takes much, much more time to build up a string.</p>\n\n<p>To compare the two methods you can see how much faster the recursive algorithm (also called \"divide and conquer\") is on a string of length 123,457. On my FreeBSD computer this algorithm, implemented in the <code>stringFill3()</code> function, creates the string in 0.001058 seconds, while the original <code>stringFill1()</code> function creates the string in 0.0808 seconds. The new function is 76 times faster.</p>\n\n<p>The difference in performance grows as the length of the string becomes larger. In the limit as larger and larger strings are created, the original function behaves roughly like <code>C1</code> (constant) times <code>N^2</code>, and the new function behaves like <code>C2</code> (constant) times <code>N</code>.</p>\n\n<p>From our experiment we can determine the value of <code>C1</code> to be <code>C1 = 0.0808 / (123457)2 = .00000000000530126997</code>, and the value of <code>C2</code> to be <code>C2 = 0.001058 / 123457 = .00000000856978543136</code>. In 10 seconds, the new function could create a string containing 1,166,890,359 characters. In order to create this same string, the old function would need 7,218,384 seconds of time.</p>\n\n<p>This is almost three months compared to ten seconds!</p>\n\n<p>I'm only answering (several years late) because my original solution to this problem has been floating around the Internet for more than 10 years, and apparently is still poorly-understood by the few who do remember it. I thought that by writing an article about it here I would help:</p>\n\n<p><a href=\"http://www.webreference.com/programming/javascript/jkm3/3.html\">Performance Optimizations for High Speed JavaScript / Page 3</a></p>\n\n<p>Unfortunately, some of the other solutions presented here are still some of those that would take three months to produce the same amount of output that a proper solution creates in 10 seconds.</p>\n\n<p>I want to take the time to reproduce part of the article here as a canonical answer on Stack Overflow.</p>\n\n<p>Note that the best-performing algorithm here is clearly based on my algorithm and was probably inherited from someone else's 3rd or 4th generation adaptation. Unfortunately, the modifications resulted in reducing its performance. The variation of my solution presented here perhaps did not understand my confusing <code>for (;;)</code> expression which looks like the main infinite loop of a server written in C, and which was simply designed to allow a carefully-positioned break statement for loop control, the most compact way to avoid exponentially replicating the string one extra unnecessary time.</p>\n",
                    "is_accepted": false,
                    "score": 23
                },
                {
                    "body": "<p>Fiddle: <a href=\"http://jsfiddle.net/3Y9v2/\" rel=\"nofollow\">http://jsfiddle.net/3Y9v2/</a></p>\n\n<pre><code>function repeat(s, n){\n    return ((new Array(n+1)).join(s));\n}\nalert(repeat('R', 10));\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>People overcomplicate this to a ridiculous extent or waste performance. Arrays? Recursion? You've got to be kidding me.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>function repeat (string, times) {\n  var result = ''\n  while (times-- &gt; 0) result += string\n  return result\n}\n</code></pre>\n\n<p><strong>Edit.</strong> I ran some simple tests to compare with the bitwise version posted by artistoex / disfated and a bunch of other people. The latter was only marginally faster, but orders of magnitude more memory-efficient. For 1000000 repeats of the word 'blah', the Node process went up to 46 megabytes with the simple concatenation algorithm (above), but only 5.5 megabytes with the logarithmic algorithm. The latter is definitely the way to go. Reposting it for the sake of clarity:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>function repeat (string, times) {\n  var result = ''\n  while (times &gt; 0) {\n    if (times &amp; 1) result += string\n    times &gt;&gt;= 1\n    string += string\n  }\n  return result\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<h1>Simple recursive concatenation</h1>\n\n<p>I just wanted to give it a bash, and made this:</p>\n\n<pre><code>function ditto( s, r, c ) {\n    return c-- ? ditto( s, r += s, c ) : r;\n}\n\nditto( \"foo\", \"\", 128 );\n</code></pre>\n\n<p>I can't say I gave it much thought, and it probably shows :-)</p>\n\n<h2><em>This</em> is arguably better</h2>\n\n<pre><code>String.prototype.ditto = function( c ) {\n    return --c ? this + this.ditto( c ) : this;\n};\n\n\"foo\".ditto( 128 );\n</code></pre>\n\n<p>And it's a lot like an answer already posted - I know this.</p>\n\n<h2>But why be recursive at all?</h2>\n\n<p>And how about a little default behaviour too?</p>\n\n<pre><code>String.prototype.ditto = function() {\n    var c = Number( arguments[ 0 ] ) || 2,\n        r = this.valueOf();\n    while ( --c ) {\n        r += this;\n    }\n    return r;\n}\n\n\"foo\".ditto();\n</code></pre>\n\n<p><strong>Because</strong>, although the non recursive method will handle arbitrarily large repeats without hitting call stack limits, it's a lot slower.</p>\n\n<h2>Why did I bother adding more methods that aren't half as <em>clever</em> as those already posted?</h2>\n\n<p>Partly for my own amusement, and partly to point out in the simplest way I know that there are many ways to skin a cat, and depending on the situation, it's quite possible that the apparently <em>best</em> method isn't ideal.</p>\n\n<p>A relatively fast and sophisticated method may effectively crash and burn under certain circumstances, whilst a slower, simpler method may get the job done - eventually.</p>\n\n<p>Some methods may be little more than exploits, and as such prone to being <em>fixed</em> out of existence, and other methods may work beautifully in all conditions, but are so constructed that <em>one</em> simply has no idea how it works.</p>\n\n<p><em>\"So what if I dunno how it works?!\"</em></p>\n\n<p>Seriously?</p>\n\n<p>JavaScript suffers from one of its greatest strengths; it's highly tolerant of bad behaviour, and so flexible it'll bend over backwards to return results, when it might have been better for everyone if it'd snapped!</p>\n\n<p><em>\"With great power, comes great responsibility\"</em> ;-)</p>\n\n<p>But more seriously and importantly, although general questions like this do lead to awesomeness in the form of <em>clever</em> answers that if nothing else, expand one's knowledge and horizons, in the end, the task at hand - the practical script that uses the resulting method - may require a little less, or a little more <em>clever</em> than is suggested.</p>\n\n<p>These <em>\"perfect\"</em> algorithms are fun and all, but <em>\"one size fits all\"</em> will rarely if ever be better than tailor made.</p>\n\n<p>This sermon was brought to you courtesy of a lack of sleep and a passing interest.\nGo forth and code!</p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>Good news! <code>String.prototype.repeat</code> is <a href=\"https://people.mozilla.org/~jorendorff/es6-draft.html#sec-string.prototype.repeat\" rel=\"nofollow\">proposed for Harmony (ECMAScript 6)</a>, so the debate (in the comments above) over extending/not extending the <code>String</code> prototype with a <code>repeat</code> method might be over soon.</p>\n\n<p>The method has been available in Firefox since version 24, and will be available in Chrome 41.</p>\n\n<p>Meanwhile, <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/repeat\" rel=\"nofollow\">MDN proposes</a> the following polyfill:</p>\n\n<pre><code>if (!String.prototype.repeat) {\n  String.prototype.repeat = function(count) {\n    'use strict';\n    if (this == null) {\n      throw new TypeError('can\\'t convert ' + this + ' to object');\n    }\n    var str = '' + this;\n    count = +count;\n    if (count != count) {\n      count = 0;\n    }\n    if (count &lt; 0) {\n      throw new RangeError('repeat count must be non-negative');\n    }\n    if (count == Infinity) {\n      throw new RangeError('repeat count must be less than infinity');\n    }\n    count = Math.floor(count);\n    if (str.length == 0 || count == 0) {\n      return '';\n    }\n    // Ensuring count is a 31-bit integer allows us to heavily optimize the\n    // main part. But anyway, most current (august 2014) browsers can't handle\n    // strings 1 &lt;&lt; 28 chars or longer, so:\n    if (str.length * count &gt;= 1 &lt;&lt; 28) {\n      throw new RangeError('repeat count must not overflow maximum string size');\n    }\n    var rpt = '';\n    for (;;) {\n      if ((count &amp; 1) == 1) {\n        rpt += str;\n      }\n      count &gt;&gt;&gt;= 1;\n      if (count == 0) {\n        break;\n      }\n      str += str;\n    }\n    return rpt;\n  }\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 2
                },
                {
                    "body": "<p>Firstly, the OP's questions seems to be about conciseness - which I understand to mean \"simple and easy to read\", while most answers seem to be about efficiency - which is obviously not the same thing and also I think that unless you implement some very specific large data manipulating algorithms, shouldn't worry you when you come to implement basic data manipulation Javascript functions. Conciseness is much more important.</p>\n\n<p>Secondly, as Andr\u00e9 Laszlo noted, String.repeat is part of ECMAScript 6 and already available in several popular implementations - so the most concise implementation of <code>String.repeat</code> is not to implement it ;-)</p>\n\n<p>Lastly, if you need to support hosts that don't offer the ECMAScript 6 implementation, MDN's polyfill mentioned by Andr\u00e9 Laszlo is anything but concise. </p>\n\n<p>So, without further ado - here is my <strong>concise</strong> polyfill:</p>\n\n<pre><code>String.prototype.repeat = String.prototype.repeat || function(n){\n    return n&lt;=1 ? this : this.concat(this.repeat(n-1));\n}\n</code></pre>\n\n<p>Yes, this is a recursion. I like recursions - they are simple and if done correctly are easy to understand. Regarding efficiency, if the language supports it they can be very efficient if written correctly.</p>\n\n<p>From my tests, this method is ~60% faster than the <code>Array.join</code> approach. Although it obviously comes nowhere close disfated's implementation, it is much simpler than both. </p>\n\n<p>My test setup is node v0.10, using \"Strict mode\" (I think it enables some sort of <a href=\"https://code.google.com/p/v8/issues/detail?id=457\" rel=\"nofollow\">TCO</a>), calling <code>repeat(1000)</code> on a 10 character string a million times.</p>\n",
                    "is_accepted": false,
                    "score": 0
                }
            ],
            "body": "<p>What is the best or most concise method for returning a string repeated an arbitrary amount of times?</p>\n\n<p>The following is my best shot so far:</p>\n\n<pre><code>function repeat(s, n){\n    var a = [];\n    while(a.length &lt; n){\n        a.push(s);\n    }\n    return a.join('');\n}\n</code></pre>\n",
            "last_activity_date": 1422188038,
            "question_id": 202605,
            "score": 181,
            "tags": [
                "javascript",
                "string"
            ],
            "title": "Repeat String - Javascript"
        },
        {
            "answer_count": 21,
            "answers": [
                {
                    "body": "<p>See this thread:</p>\n\n<p><a href=\"http://forums.asp.net/p/1038457/1441866.aspx#1441866\" rel=\"nofollow\">http://forums.asp.net/p/1038457/1441866.aspx#1441866</a></p>\n\n<p>Basically, while the Date() format is valid javascript, it is NOT valid JSON (there is a difference).  If you want the old format, you will probably have to create a facade and transform the value yourself, or find a way to get at the serializer for your type in the JsonResult and have it use a custom format for dates.</p>\n",
                    "is_accepted": false,
                    "score": 3
                },
                {
                    "body": "<p>If you doing eval(\"(\" + jsonResult + \")\") on the result, it should work.  You may be best to, as mentioned, do a cusom serialization of the date/time to a client specific GMT/UTC string.  Dates aren't defined within the JSON specification, but using Date(TIME_T) will work unless you are doing client-side validation of JSON responses.</p>\n\n<p>Edit:example</p>\n\n<pre><code>\nvar o = eval(\"({ dtm: new Date('1990/01/05') })\");\nalert(o.dtm);\n\n//milliseconds from 1970-01-01 to 1990-01-05 aka TIME_T * 1000\no = eval(\"({ dtm: new Date(631522800000) })\");\nalert(o.dtm); \n</code></pre>\n\n<p>both work...</p>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>Just to expand on <a href=\"http://stackoverflow.com/questions/726334/asp-mvc-jsonresult-date-format/726417#726417\">casperOne's answer</a>.</p>\n\n<p>The <a href=\"http://www.json.org/\">JSON spec</a> does not account for Date values. MS had to make a call, and the path they chose was to exploit a little trick in the javascript representation of strings: the string literal \"/\" is the same as \"\\/\", and a string literal will <em>never</em> get serialized to \"\\/\" (even \"\\/\" must be mapped to \"\\\\/\").</p>\n\n<p>See <a href=\"http://msdn.microsoft.com/en-us/library/bb299886.aspx#intro_to_json_topic2\">http://msdn.microsoft.com/en-us/library/bb299886.aspx#intro_to_json_topic2</a> for a better explanation (scroll down to \"From JavaScript Literals to JSON\")</p>\n\n<blockquote>\n  <p>One of the sore points of JSON is the\n  lack of a date/time literal. Many\n  people are surprised and disappointed\n  to learn this when they first\n  encounter JSON. The simple explanation\n  (consoling or not) for the absence of\n  a date/time literal is that JavaScript\n  never had one either: The support for\n  date and time values in JavaScript is\n  entirely provided through the Date\n  object. Most applications using JSON\n  as a data format, therefore, generally\n  tend to use either a string or a\n  number to express date and time\n  values. If a string is used, you can\n  generally expect it to be in the ISO\n  8601 format. If a number is used,\n  instead, then the value is usually\n  taken to mean the number of\n  milliseconds in Universal Coordinated\n  Time (UTC) since epoch, where epoch is\n  defined as midnight January 1, 1970\n  (UTC). Again, this is a mere\n  convention and not part of the JSON\n  standard. If you are exchanging data\n  with another application, you will\n  need to check its documentation to see\n  how it encodes date and time values\n  within a JSON literal. For example,\n  Microsoft's ASP.NET AJAX uses neither\n  of the described conventions. Rather,\n  it encodes .NET DateTime values as a\n  JSON string, where the content of the\n  string is /Date(ticks)/ and where\n  ticks represents milliseconds since\n  epoch (UTC). So November 29, 1989,\n  4:55:30 AM, in UTC is encoded as\n  \"\\/Date(628318530718)\\/\".</p>\n</blockquote>\n\n<p>A solution would be to just parse it out:</p>\n\n<pre><code>value = new Date(parseInt(value.replace(\"/Date(\", \"\").replace(\")/\",\"\"), 10));\n</code></pre>\n\n<p>However I've heard that there is a setting somewhere to get the serializer to output <code>DateTime</code> objects with the <code>new Date(xxx)</code> syntax. I'll try to dig that out.</p>\n",
                    "is_accepted": true,
                    "score": 104
                },
                {
                    "body": "<p>Here's my solution in Javascript - very much like JPot's, but shorter (and possibly a tiny bit faster):</p>\n\n<pre><code>value = new Date(parseInt(value.substr(6)));\n</code></pre>\n\n<p>\"value.substr(6)\" takes out the \"/Date(\" part, and the parseInt function ignores the non-number characters that occur at the end.</p>\n",
                    "is_accepted": false,
                    "score": 57
                },
                {
                    "body": "<p>Not the most elegant way but this worked for me:</p>\n\n<pre><code>var ms = date.substring(6, date.length - 2);\nvar newDate = formatDate(ms);\n\n\nfunction formatDate(ms) {\n\n    var date = new Date(parseInt(ms));\n    var hour = date.getHours();\n    var mins = date.getMinutes() + '';\n    var time = \"AM\";\n\n    // find time \n    if (hour &gt;= 12) {\n        time = \"PM\";\n    }\n    // fix hours format\n    if (hour &gt; 12) {\n        hour -= 12;\n    }\n    else if (hour == 0) {\n        hour = 12;\n    }\n    // fix minutes format\n    if (mins.length == 1) {\n        mins = \"0\" + mins;\n    }\n    // return formatted date time string\n    return date.getMonth() + 1 + \"/\" + date.getDate() + \"/\" + date.getFullYear() + \" \" + hour + \":\" + mins + \" \" + time;\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>I had the same problem and instead of returning the actual date value I just used ToString(\"dd MMM yyyy\") on it. Then in my javascript I used new Date(datevalue), where datevalue may be \"01 Jan 2009\".</p>\n",
                    "is_accepted": false,
                    "score": 5
                },
                {
                    "body": "<p>I have been working on a solution to this issue as none of the above answers really helped me.  I am working with the jquery week calendar and needed my dates to have time zone information on the server and locally on the page.  After quite a bit of digging around, I figured out a solution that may help others.</p>\n\n<p>I am using asp.net 3.5, vs 2008, asp.net MVC 2, and jquery week calendar, </p>\n\n<p>First, I am using a library written by Steven Levithan that helps with dealing with dates on the client side, <a href=\"http://blog.stevenlevithan.com/archives/date-time-format\" rel=\"nofollow\">Steven Levithan's date library</a>.  The isoUtcDateTime format is perfect for what I needed.  In my jquery AJAX call I use the format function provided with the library with the isoUtcDateTime format and when the ajax call hits my action method, the datetime Kind is set to local and reflects the server time.</p>\n\n<p>When I send dates to my page via AJAX, I send them as text strings by formatting the dates using \"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'zzzz\".  This format is easily converted client side using</p>\n\n<pre><code>var myDate = new Date(myReceivedDate);\n</code></pre>\n\n<p>Here is my complete solution minus Steve Levithan's source, which you can download:</p>\n\n<p>Controller:</p>\n\n<pre><code>public class HomeController : Controller\n{\n    public const string DATE_FORMAT = \"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'zzzz\";\n\n    public ActionResult Index()\n    {\n        ViewData[\"Message\"] = \"Welcome to ASP.NET MVC!\";\n\n        return View();\n    }\n\n    public ActionResult About()\n    {\n        return View();\n    }\n\n\n    public JsonResult GetData()\n    {\n        DateTime myDate = DateTime.Now.ToLocalTime();\n\n        return new JsonResult { Data = new { myDate = myDate.ToString(DATE_FORMAT) } };\n    }\n\n    public JsonResult ReceiveData(DateTime myDate)\n    {\n        return new JsonResult { Data = new { myDate = myDate.ToString(DATE_FORMAT) } };\n    }\n}\n</code></pre>\n\n<p>Javascript:</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n\nfunction getData() {\n    $.ajax({\n        url: \"/Home/GetData\",\n        type: \"POST\",\n        cache: \"false\",\n        dataType: \"json\",\n        success: function(data) {\n            alert(data.myDate);\n            var newDate = cleanDate(data.myDate);\n            alert(newDate);\n            sendData(newDate);\n        }\n    });\n} \n\nfunction cleanDate(d) {\n    if (typeof d == 'string') {\n        return new Date(d) || Date.parse(d) || new Date(parseInt(d));\n    }\n    if (typeof d == 'number') {\n        return new Date(d);\n    }\n    return d;\n}\n\nfunction sendData(newDate) {\n    $.ajax({\n        url: \"/Home/ReceiveData\",\n        type: \"POST\",\n        cache: \"false\",\n        dataType: \"json\",\n        data:\n        {\n            myDate: newDate.format(\"isoUtcDateTime\")\n        },\n        success: function(data) {\n            alert(data.myDate);\n            var newDate = cleanDate(data.myDate);\n            alert(newDate);\n        }\n    });\n}\n\n// bind myButton click event to call getData\n$(document).ready(function() {\n    $('input#myButton').bind('click', getData);\n});\n&lt;/script&gt;\n</code></pre>\n\n<p>I hope this quick example helps out others in the same situation I was in.  At this time it seems to work very well with the Microsoft JSON Serialization and keeps my dates correct across timezones.</p>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<h2>Using jQuery to auto-convert dates with <code>$.parseJSON</code></h2>\n\n<blockquote>\n  <p><em><strong>Note</strong>: this answer provides a jQuery extension that adds automatic ISO and .net date format support.</em></p>\n</blockquote>\n\n<p>Since you're using Asp.net MVC I suspect you're using jQuery on the client side. I suggest you read <a href=\"http://erraticdev.blogspot.com/2010/12/converting-dates-in-json-strings-using.html\">this blog post</a> that has code how to use <code>$.parseJSON</code> to automatically convert dates for you.</p>\n\n<p>Code supports Asp.net formatted dates like the ones you mentioned as well as ISO formatted dates. All dates will be automatically formatted for you by using <code>$.parseJSON()</code>.</p>\n",
                    "is_accepted": false,
                    "score": 16
                },
                {
                    "body": "<p>Format the date within the query.  </p>\n\n<pre><code>var _myModel = from _m in model.ModelSearch(word)\n    select new { date = ((DateTime)_m.Date).ToShortDateString() };\n</code></pre>\n\n<p>The only problem with this solution is that you won't get any results if ANY of the date values are null.  To get around this you could either put conditional statements in your query BEFORE you select the date that ignores date nulls or you could set up a query to get all the results and then loop through all of that info using a foreach loop and assign a value to all dates that are null BEFORE you do your SELECT new.  </p>\n\n<p>Example of both:</p>\n\n<pre><code>var _test = from _t in adc.ItemSearchTest(word)\n                        where _t.Date != null\n                        select new { date = ((DateTime)_t.Date).ToShortDateString() };\n</code></pre>\n\n<p>The second option requires another query entirely so you can assign values to all nulls.  This and the foreach loop would have to be BEFORE your query that selects the values.</p>\n\n<pre><code>var _testA = from _t in adc.ItemSearchTest(word)\n                         select _i;\n\n            foreach (var detail in _testA)\n            {\n                if (detail.Date== null)\n                {\n                    detail.Date= Convert.ToDateTime(\"1/1/0001\");\n                }\n            }\n</code></pre>\n\n<p>Just an idea which I found easier than all of the javascript examples.</p>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>There are quite a bit of answers to handle it client side, but you can change the output server side if you desired.</p>\n\n<p>There are a few ways to approach this, I'll start with the basics. You'll have to subclass the JsonResult class and override the ExecuteResult method. From there you can take a few different approaches to change the serialization.</p>\n\n<p><strong>Approach 1:</strong>\nThe default implementation uses the <a href=\"http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx\">JsonScriptSerializer</a>. If you take a look at the documentation, you can use the RegisterConverters method to add custom <a href=\"http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptconverter.aspx\">JavaScriptConverters</a>. There are a few problems with this though: The JavaScriptConverter serializes to a dictionary, that is it takes an object and serializes to a Json dictionary. In order to make the object serialize to a string it requires a bit of hackery, see <a href=\"http://blog.calyptus.eu/seb/2011/12/custom-datetime-json-serialization/\">post</a>. This particular hack will also escape the string.</p>\n\n<pre><code>public class CustomJsonResult : JsonResult\n{\n    private const string _dateFormat = \"yyyy-MM-dd HH:mm:ss\";\n\n    public override void ExecuteResult(ControllerContext context)\n    {\n        if (context == null)\n        {\n            throw new ArgumentNullException(\"context\");\n        }\n\n        HttpResponseBase response = context.HttpContext.Response;\n\n        if (!String.IsNullOrEmpty(ContentType))\n        {\n            response.ContentType = ContentType;\n        }\n        else\n        {\n            response.ContentType = \"application/json\";\n        }\n        if (ContentEncoding != null)\n        {\n            response.ContentEncoding = ContentEncoding;\n        }\n        if (Data != null)\n        {\n            JavaScriptSerializer serializer = new JavaScriptSerializer();\n\n            // Use your custom JavaScriptConverter subclass here.\n            serializer.RegisterConverters(new JavascriptConverter[] { new CustomConverter });\n\n            response.Write(serializer.Serialize(Data));\n        }\n    }\n}\n</code></pre>\n\n<p><strong>Approach 2 (recommended):</strong>\nThe second approach is to start with the overridden JsonResult and go with another Json serializer, in my case the <a href=\"http://json.codeplex.com/\">Json.NET</a> serializer. This doesn't require the hackery of approach 1. Here is my implementation of the JsonResult subclass:</p>\n\n<pre><code>public class CustomJsonResult : JsonResult\n{\n    private const string _dateFormat = \"yyyy-MM-dd HH:mm:ss\";\n\n    public override void ExecuteResult(ControllerContext context)\n    {\n        if (context == null)\n        {\n            throw new ArgumentNullException(\"context\");\n        }\n\n        HttpResponseBase response = context.HttpContext.Response;\n\n        if (!String.IsNullOrEmpty(ContentType))\n        {\n            response.ContentType = ContentType;\n        }\n        else\n        {\n            response.ContentType = \"application/json\";\n        }\n        if (ContentEncoding != null)\n        {\n            response.ContentEncoding = ContentEncoding;\n        }\n        if (Data != null)\n        {\n            // Using Json.NET serializer\n            var isoConvert = new IsoDateTimeConverter();\n            isoConvert.DateTimeFormat = _dateFormat;\n            response.Write(JsonConvert.SerializeObject(Data, isoConvert));\n        }\n    }\n}\n</code></pre>\n\n<p><strong>Additional credits:</strong>\n<a href=\"http://james.newtonking.com/archive/2009/02/20/good-date-times-with-json-net.aspx\">James Newton-King</a></p>\n",
                    "is_accepted": false,
                    "score": 17
                },
                {
                    "body": "<p><strong>add jquery ui plugin in your page.</strong></p>\n\n<pre><code>function JsonDateFormate(dateFormate, jsonDateTime) {\n    return $.datepicker.formatDate(dateFormate, eval('new ' + jsonDateTime.slice(1, -1)));\n};\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>Moment.js is an extensive datetime library that also supports this. <a href=\"http://momentjs.com/docs/#/parsing/asp-net-json-dates/\">http://momentjs.com/docs/#/parsing/asp-net-json-dates/</a></p>\n\n<p>ex: moment(\"/Date(1198908717056-0700)/\")</p>\n",
                    "is_accepted": false,
                    "score": 9
                },
                {
                    "body": "<p>It returns Server Date Format. You need to define your own function.</p>\n\n<pre><code>function jsonDateFormat(jsonDate) {\n\n// Changed data format;\nreturn (new Date(parseInt(jsonDate.substr(6)))).format(\"mm-dd-yyyy / h:MM tt\");\n</code></pre>\n\n<p>};</p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>Look into this blog entry: <a href=\"http://yobriefca.se/blog/2010/11/20/better-json-serialisation-for-asp-net-mvc\" rel=\"nofollow\">http://yobriefca.se/blog/2010/11/20/better-json-serialisation-for-asp-net-mvc</a>. The author explains a solution to this date time issue in detail and uses Json.Net to write his own wrappers for a JsonResult, which uses custom date time converters.</p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>Here's some JavaScript code I wrote which sets an <code>&lt;input type=\"date\"&gt;</code> value from a date passed from ASP.NET MVC.</p>\n\n<pre><code>    var setDate = function (id, d) {\n    if (d !== undefined &amp;&amp; d !== null) {\n        var date = new Date(parseInt(d.replace(\"/Date(\", \"\").replace(\")/\", \"\"), 10));\n        var day = ('0' + date.getDate()).slice(-2);\n        var month = ('0' + (date.getMonth() + 1)).slice(-2);\n        var parsedDate = date.getFullYear() + \"-\" + (month) + \"-\" + (day);\n        $(id).val(parsedDate);\n    }\n};\n</code></pre>\n\n<p>You call this function like so:</p>\n\n<pre><code>setDate('#productCommissionStartDate', data.commissionStartDate);\n</code></pre>\n\n<p>Where commissionStartDate is the JSON date passed by MVC.</p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>You can use this method:</p>\n\n<pre><code>String.prototype.jsonToDate = function(){\n    try{\n        var date;\n        eval((\"date = new \" + this).replace(/\\//g,''));\n        return date;\n    } \n    catch(e){\n        return new Date(0);\n    }\n};\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>Not for nothing, but there is another way.  First, construct your LINQ query.  Then, construct a query of the Enumerated result and apply whatever type of formatting works for you.</p>\n\n<pre><code>var query = from t in db.Table select new { t.DateField };\nvar result = from c in query.AsEnumerable() select new { c.DateField.toString(\"dd MMM yyy\") };\n</code></pre>\n\n<p>I have to say, the extra step is annoying, but it works nicely.</p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>The better way to handle dates in knockoutjs is to use moment library and handle dates like boss. You can easily deal with dates like /Date(-62135578800000)/. No need to bother of how your serialize date in controller.</p>\n\n<pre><code>function jsonToDate(date,format) {\n   return moment(date).format(format);\n}\n</code></pre>\n\n<p>use it like</p>\n\n<pre><code>var formattedDate = jsonToDate(date,'MM/DD/YYYY')\n</code></pre>\n\n<p><a href=\"http://momentjs.com/\" rel=\"nofollow\">momentjs</a> supports lots of date time formats and utility functions on dates.</p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>Ajax communication between the client and the server often involves data in JSON format. While JSON works well for strings, numbers and Booleans it can pose some difficulties for dates due to the way ASP.NET serializes them. As it doesn't have any special representation for dates, they are serialized as plain strings. \nAs a solution the default serialization mechanism of ASP.NET Web Forms and MVC serializes dates in a special form - /Date(ticks)/- where ticks is the number of milliseconds since 1 January 1970.</p>\n\n<p>This problem can be solved in 2 ways:</p>\n\n<p><strong>client side</strong></p>\n\n<p>Convert the received date string into a number and create a date object using the constructor of the date class with the ticks as parameter.</p>\n\n<pre><code>function ToJavaScriptDate(value) {\n  var pattern = /Date\\(([^)]+)\\)/;\n  var results = pattern.exec(value);\n  var dt = new Date(parseFloat(results[1]));\n  return (dt.getMonth() + 1) + \"/\" + dt.getDate() + \"/\" + dt.getFullYear();\n</code></pre>\n\n<p>}</p>\n\n<p><strong>server side</strong></p>\n\n<p>The previous solution uses a client side script to convert the date to a JavaScript Date object. You can also use server side code that serializes .NET DateTime instances in the format of your choice.\nTo accomplish this task you need to create your own ActionResult and then serialize the data the way you want.</p>\n\n<p>reference : \n<a href=\"http://www.developer.com/net/dealing-with-json-dates-in-asp.net-mvc.html\" rel=\"nofollow\">http://www.developer.com/net/dealing-with-json-dates-in-asp.net-mvc.html</a></p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>What worked for me was to create a viewmodel that contained the date property as a string. Assigning the DateTime property from the domain model and calling the .ToString() on the date property while assigning the value to the viewmodel.</p>\n\n<p>A JSON result from an MVC action method will return the date in a format compatible with the view.</p>\n\n<h2>View Model</h2>\n\n<pre><code>public class TransactionsViewModel\n{\n    public string DateInitiated { get; set; }\n    public string DateCompleted { get; set; }\n}\n</code></pre>\n\n<h2>Domain Model</h2>\n\n<pre><code>public class Transaction{\n   public DateTime? DateInitiated {get; set;}\n   public DateTime? DateCompleted {get; set;}\n}\n</code></pre>\n\n<h2>Controller Action Method</h2>\n\n<pre><code>public JsonResult GetTransactions(){\n\nvar transactions = _transactionsRepository.All;\n        var model = new List&lt;TransactionsViewModel&gt;();\n\n        foreach (var transaction in transactions)\n        {\n            var item = new TransactionsViewModel\n            {\n                ...............\n                DateInitiated = transaction.DateInitiated.ToString(),\n                DateCompleted = transaction.DateCompleted.ToString(),\n            };\n\n            model.Add(item);\n        }\n        return Json(model, JsonRequestBehavior.AllowGet);\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>I found that creating a new <code>JsonResult</code> and returning that is unsatisfactory - having to replace all calls to <code>return Json(obj)</code> with <code>return new MyJsonResult { Data = obj }</code> is a pain.</p>\n\n<hr>\n\n<p>So I figured, why not just hijack the <code>JsonResult</code> using an <code>ActionFilter</code>:</p>\n\n<pre><code>public class JsonNetFilterAttribute : ActionFilterAttribute\n{\n    public override void OnActionExecuted(ActionExecutedContext filterContext)\n    {\n        if (filterContext.Result is JsonResult == false)\n            return;\n\n        filterContext.Result = new JsonNetResult((JsonResult)filterContext.Result);\n    }\n\n    private class JsonNetResult : JsonResult\n    {\n        public JsonNetResult(JsonResult jsonResult)\n        {\n            this.ContentEncoding = jsonResult.ContentEncoding;\n            this.ContentType = jsonResult.ContentType;\n            this.Data = jsonResult.Data;\n            this.JsonRequestBehavior = jsonResult.JsonRequestBehavior;\n            this.MaxJsonLength = jsonResult.MaxJsonLength;\n            this.RecursionLimit = jsonResult.RecursionLimit;\n        }\n\n        public override void ExecuteResult(ControllerContext context)\n        {\n            if (context == null)\n                throw new ArgumentNullException(\"context\");\n\n            if (this.JsonRequestBehavior == JsonRequestBehavior.DenyGet\n                &amp;&amp; String.Equals(context.HttpContext.Request.HttpMethod, \"GET\", StringComparison.OrdinalIgnoreCase))\n                throw new InvalidOperationException(\"GET not allowed! Change JsonRequestBehavior to AllowGet.\");\n\n            var response = context.HttpContext.Response;\n\n            response.ContentType = String.IsNullOrEmpty(this.ContentType) ? \"application/json\" : this.ContentType;\n\n            if (this.ContentEncoding != null)\n                response.ContentEncoding = this.ContentEncoding;\n\n            if (this.Data != null)\n                response.Write(JsonConvert.SerializeObject(this.Data));\n        }\n    }\n}\n</code></pre>\n\n<hr>\n\n<p>This can be applied to any method returning a <code>JsonResult</code> to use JSON.Net instead:</p>\n\n<pre><code>[JsonNetFilter]\npublic ActionResult GetJson()\n{\n    return Json(new { hello = new Date(2015, 03, 09) }, JsonRequestBehavior.AllowGet)\n}\n</code></pre>\n\n<p>which will respond with</p>\n\n<pre><code>{\"hello\":\"2015-03-09T00:00:00+00:00\"}\n</code></pre>\n\n<p>as desired!</p>\n\n<hr>\n\n<p>You can, if you don't mind calling the <code>is</code> comparison at every request, add this to your <code>FilterConfig</code>:</p>\n\n<pre><code>// ...\nfilters.Add(new JsonNetFilterAttribute());\n</code></pre>\n\n<p>and all of your JSON will now be serialized with JSON.Net instead of the built-in <code>JavaScriptSerializer</code>.</p>\n",
                    "is_accepted": false,
                    "score": 0
                }
            ],
            "body": "<p>I have a controller action that effectively simply returns a JsonResult of my model. So, in my method I have something like the following:</p>\n\n<pre><code>return new JsonResult(myModel);\n</code></pre>\n\n<p>This works well, except for one problem. There is a date property in the model and this appears to be returned in the Json result like so:</p>\n\n<pre><code>\"\\/Date(1239018869048)\\/\"\n</code></pre>\n\n<p>How should I be dealing with dates so they are returned in the format I require? Or how do I handle this format above in script?</p>\n",
            "last_activity_date": 1425894903,
            "question_id": 726334,
            "score": 116,
            "tags": [
                "javascript",
                "asp.net-mvc",
                "json"
            ],
            "title": "ASP.NET MVC JsonResult Date Format"
        },
        {
            "answer_count": 6,
            "answers": [
                {
                    "body": "<p><strong>Initial question:</strong></p>\n\n<pre><code>window.location.href.substr(0, window.location.href.indexOf('#'))\n</code></pre>\n\n<p>or</p>\n\n<pre><code>window.location.href.split('#')[0]\n</code></pre>\n\n<p>both will return the URL without the hash or anything after it.</p>\n\n<p><strong>With regards to your edit:</strong></p>\n\n<p>Any change to <code>window.location</code> will trigger a page refresh. You can change <code>window.location.hash</code> without triggering the refresh (though the window will jump if your hash matches an id on the page), but you can't get rid of the hash sign. Take your pick for which is worse...</p>\n",
                    "is_accepted": true,
                    "score": 73
                },
                {
                    "body": "<p>Solving this problem is much more within reach nowadays.  The <a href=\"http://www.w3.org/TR/html5/browsers.html#the-history-interface\">HTML5 History API</a> allows us to manipulate the location bar to display any URL within the current domain.</p>\n\n<pre><code>function removeHash () { \n    history.pushState(\"\", document.title, window.location.pathname\n                                                       + window.location.search);\n}\n</code></pre>\n\n<p><b>Working demo: <a href=\"http://jsfiddle.net/AndyE/ycmPt/show/\">http://jsfiddle.net/AndyE/ycmPt/show/</a></b></p>\n\n<p>This works in Chrome 9, Firefox 4, Safari 5, Opera 11.50 <em>and</em> in IE 10.  For unsupported browsers, you could always write a gracefully degrading script that makes use of it where available:</p>\n\n<pre><code>function removeHash () { \n    var scrollV, scrollH, loc = window.location;\n    if (\"pushState\" in history)\n        history.pushState(\"\", document.title, loc.pathname + loc.search);\n    else {\n        // Prevent scrolling by storing the page's current scroll offset\n        scrollV = document.body.scrollTop;\n        scrollH = document.body.scrollLeft;\n\n        loc.hash = \"\";\n\n        // Restore the scroll offset, should be flicker free\n        document.body.scrollTop = scrollV;\n        document.body.scrollLeft = scrollH;\n    }\n}\n</code></pre>\n\n<p>So you can get rid of the hash symbol, just not in all browsers &mdash; yet.  </p>\n\n<p><sub>Note: if you want to replace the current page in the browser history, use <code>replaceState()</code> instead of <code>pushState()</code>.</sub></p>\n",
                    "is_accepted": false,
                    "score": 225
                },
                {
                    "body": "<p>Have you tried the below?</p>\n\n<pre><code>window.history.back(1);\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>You can replace hash with null</p>\n\n<pre><code>var urlWithoutHash = document.location.href.replace(location.hash , \"\" );\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>Simple and elegant:</p>\n\n<pre><code>history.replaceState({}, document.title, \"/\");\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>How about the following? </p>\n\n<p><code>window.location.hash=' '</code></p>\n\n<p>Please note that am setting the hash to a single space and not an empty string. </p>\n\n<hr>\n\n<p>Setting the hash to an invalid anchor does not cause a refresh either. Such as, </p>\n\n<p><code>window.location.hash='invalidtag'</code></p>\n\n<p>But, I find above solution to be misleading. This seems to indicate that there is an anchor on the given position with the given name although there isn't one. At the same time, using an empty string causes page to move to the top which can be unacceptable at times. Using a space also ensures that whenever the URL is copied and bookmarked and visited again, the page will usually be at the top and the space will be ignored.</p>\n\n<p>And, hey, this is my first answer on StackOverflow. Hope someone finds it useful and it matches the community standards.</p>\n",
                    "is_accepted": false,
                    "score": 1
                }
            ],
            "body": "<p>So, if I have <code>http://example.com#something</code>, how do I remove <code>#something</code>, without causing the page to refresh?  </p>\n\n<p>I attempted the following solution:</p>\n\n<pre><code>window.location.hash = '';\n</code></pre>\n\n<p>However, this doesn't remove the hash symbol <code>#</code> from the URL.</p>\n",
            "last_activity_date": 1423332226,
            "question_id": 1397329,
            "score": 102,
            "tags": [
                "javascript",
                "fragment-identifier"
            ],
            "title": "How to remove the hash from window.location with JavaScript without page refresh?"
        },
        {
            "answer_count": 9,
            "answers": [
                {
                    "body": "<p>I believe that the simplest and most convenient way would be to play the sound using a small Flash clip. I appreciate it's not a JavaScript solution but it IS the easiest way to achieve your goal</p>\n\n<p>Some extra links from the previous <a href=\"http://stackoverflow.com/questions/82141/producing-2-or-more-short-sounds-when-a-web-page-loads#82181\">similar question</a>:</p>\n\n<ul>\n<li>Scriptaculous, a Javascript library: <a href=\"http://github.com/madrobby/scriptaculous/wikis/sound\" rel=\"nofollow\">http://github.com/madrobby/scriptaculous/wikis/sound</a></li>\n<li>an opensource Flash project: Easy Musicplayer For Flash <a href=\"http://emff.sourceforge.net/\" rel=\"nofollow\">http://emff.sourceforge.net/</a></li>\n</ul>\n",
                    "is_accepted": false,
                    "score": 8
                },
                {
                    "body": "<p>If you're using Prototype, the Scriptaculous library <a href=\"http://github.com/madrobby/scriptaculous/wikis/sound\" rel=\"nofollow\">has a sound API</a>. jQuery <a href=\"http://dev.jquery.com/browser/trunk/plugins/sound/jquery.sound.js?rev=5750\" rel=\"nofollow\">appears to have a plugin</a>, too.</p>\n",
                    "is_accepted": false,
                    "score": 10
                },
                {
                    "body": "<p>You will have to include a plug-in like Real Audio or QuickTime to handle the .wav file, but this should work...</p>\n\n<pre><code>//======================================================================\nvar soundEmbed = null;\n//======================================================================\nfunction soundPlay(which)\n    {\n    if (!soundEmbed)\n    \t{\n    \tsoundEmbed = document.createElement(\"embed\");\n    \tsoundEmbed.setAttribute(\"src\", \"/snd/\"+which+\".wav\");\n    \tsoundEmbed.setAttribute(\"hidden\", true);\n    \tsoundEmbed.setAttribute(\"autostart\", true);\n    \t}\n    else\n    \t{\n    \tdocument.body.removeChild(soundEmbed);\n    \tsoundEmbed.removed = true;\n    \tsoundEmbed = null;\n    \tsoundEmbed = document.createElement(\"embed\");\n    \tsoundEmbed.setAttribute(\"src\", \"/snd/\"+which+\".wav\");\n    \tsoundEmbed.setAttribute(\"hidden\", true);\n    \tsoundEmbed.setAttribute(\"autostart\", true);\n    \t}\n    soundEmbed.removed = false;\n    document.body.appendChild(soundEmbed);\n    }\n//======================================================================\n</code></pre>\n",
                    "is_accepted": true,
                    "score": 58
                },
                {
                    "body": "<p>If you are using Mootools, there is the <a href=\"http://msteigerwalt.com/widgets/sounds/\">MooSound plugin</a>.</p>\n",
                    "is_accepted": false,
                    "score": 5
                },
                {
                    "body": "<p>dacracots code is clean basic dom, but perhaps written without a second thought?\nOf course you check the existance of an earlier embed first, and save the duplicate\nembed creation lines. </p>\n\n<pre><code>var soundEmbed = null;\n//=====================================================================\n\nfunction soundPlay(which)\n{\n    if (soundEmbed)\n       document.body.removeChild(soundEmbed);\n    soundEmbed = document.createElement(\"embed\");\n    soundEmbed.setAttribute(\"src\", \"/snd/\"+which+\".wav\");\n    soundEmbed.setAttribute(\"hidden\", true);\n    soundEmbed.setAttribute(\"autostart\", true);\n    document.body.appendChild(soundEmbed);\n}\n</code></pre>\n\n<p>Came across the thoughts here while scanning for a solution for somewhat similar situation. Unfortunately my browser Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.0.15) Gecko/2009102814 Ubuntu/8.04 (hardy) Firefox/3.0.15 dies when trying this.</p>\n\n<p>After installing latest updates, firefox still crashes, opera keeps alive.</p>\n",
                    "is_accepted": false,
                    "score": 9
                },
                {
                    "body": "<p>You can use the HTML5 <code>&lt;audio&gt;</code> tag.</p>\n",
                    "is_accepted": false,
                    "score": 5
                },
                {
                    "body": "<p>I liked dacracot's answer... here is a similar solution in jQuery:</p>\n\n<pre><code>function Play(sound) {\n    $(\"#sound_\").remove()\n    $('body').append('&lt;embed id=\"sound_\" autostart=\"true\" hidden=\"true\" src=\"/static/sound/' + sound + '.wav\" /&gt;');\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 6
                },
                {
                    "body": "<pre><code>&lt;audio controls&gt;\n  &lt;source src=\"horse.ogg\" type=\"audio/ogg\"&gt;\n  &lt;source src=\"horse.mp3\" type=\"audio/mpeg\"&gt;\nYour browser does not support the audio element.\n&lt;/audio&gt;\n</code></pre>\n\n<p>See <a href=\"http://www.w3schools.com/html/html5_audio.asp\" rel=\"nofollow\">http://www.w3schools.com/html/html5_audio.asp</a> for more details.</p>\n",
                    "is_accepted": false,
                    "score": 3
                },
                {
                    "body": "<p>There is a far more simpler solution to this rather than having to resort to plug-ins. IE has it's own bgsound property and there is another way you can make it work for all other browsers. Check out my tutorial here = <a href=\"http://www.andy-howard.com/how-to-play-sounds-cross-browser-including-ie/index.html\" rel=\"nofollow\">http://www.andy-howard.com/how-to-play-sounds-cross-browser-including-ie/index.html</a></p>\n",
                    "is_accepted": false,
                    "score": 0
                }
            ],
            "body": "<p>I am writing a dhtml application that creates an interactive simulation of a system.  The data for the simulation is generated from another tool, and there is already a very large amount of legacy data.</p>\n\n<p>Some steps in the simulation require that we play \"voice-over\" clips of audio. I've been unable to find an easy way to accomplish this across multiple browsers. </p>\n\n<p><a href=\"http://www.schillmania.com/projects/soundmanager2/\">Soundmanager2</a> comes pretty close to what I need, but it will only play mp3 files, and the legacy data may contain some .wav files as well.  </p>\n\n<p>Does anyone have any other libraries that might help?</p>\n",
            "last_activity_date": 1399967761,
            "question_id": 187098,
            "score": 75,
            "tags": [
                "javascript",
                "audio",
                "cross-browser",
                "cross-platform",
                "dhtml"
            ],
            "title": "Cross-platform, cross-browser way to play sound from Javascript?"
        },
        {
            "answer_count": 17,
            "answers": [
                {
                    "body": "<p>another way is to provide no cache headers from serverside in the code that generates the response to ajax call:</p>\n\n<pre><code>response.setHeader( \"Pragma\", \"no-cache\" );\nresponse.setHeader( \"Cache-Control\", \"no-cache\" );\nresponse.setDateHeader( \"Expires\", 0 );\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 13
                },
                {
                    "body": "<p>Personally I feel that the query string method is more reliable than trying to set headers on the server - there's no guarantee that a proxy or browser won't just cache it anyway (some browsers are worse than others - naming no names).</p>\n\n<p>I usually use <code>Math.random()</code> but I don't see anything wrong with using the date (you shouldn't be doing AJAX requests fast enough to get the same value twice).</p>\n",
                    "is_accepted": false,
                    "score": 13
                },
                {
                    "body": "<p>Maybe you should look at $.ajax() instead (if you are using jQuery, which it looks like).\nTake a look at: <a href=\"http://docs.jquery.com/Ajax/jQuery.ajax#options\" rel=\"nofollow\">http://docs.jquery.com/Ajax/jQuery.ajax#options</a> and the option \"cache\".</p>\n\n<p>Another approach would be to look at how you cache things on the server side.</p>\n",
                    "is_accepted": false,
                    "score": 4
                },
                {
                    "body": "<p>I use <code>new Date().getTime()</code>, which will avoid collisions unless you have multiple requests happening within the same millisecond.</p>\n",
                    "is_accepted": true,
                    "score": 121
                },
                {
                    "body": "<p>A small addition to the excellent answers given: If you're running with a non-ajax backup solution for users without javascript, you will have to get those server-side headers correct anyway. This is not impossible, although I understand those that give it up ;)</p>\n\n<p>I'm sure there's another question on SO that will give you the full set of headers that are appropriate. I am not entirely conviced miceus reply covers all the bases 100%.</p>\n",
                    "is_accepted": false,
                    "score": 4
                },
                {
                    "body": "<p>Of course \"cache-breaking\" techniques will get the job done, but this would not happen in the first place if the server indicated to the client that the response should not be cached. In some cases it is beneficial to cache responses, some times not. Let the server decide the correct lifetime of the data. You may want to change it later. Much easier to do from the server than from many different places in your UI code.</p>\n\n<p>Of course this doesn't help if you have no control over the server.</p>\n",
                    "is_accepted": false,
                    "score": 4
                },
                {
                    "body": "<p>What about using a POST request instead of a GET...?\n(Which you should anyway...)</p>\n",
                    "is_accepted": false,
                    "score": 4
                },
                {
                    "body": "<p>JQuery's $.get() will cache the results. Instead of </p>\n\n<pre><code>$.get(\"myurl\", myCallback)\n</code></pre>\n\n<p>you should use $.ajax, which will allow you to turn caching off:</p>\n\n<pre><code>$.ajax({url: \"myurl\", success: myCallback, cache: false});\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 134
                },
                {
                    "body": "<p>The following will prevent all future AJAX requests from being cached, regardless of which jQuery method you use ($.get, $.ajax, etc.)</p>\n\n<pre><code>$.ajaxSetup({ cache: false });\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 335
                },
                {
                    "body": "<p>The real question is why you need this to not be cached. If it should not be cached because it changes all the time, the server should specify to not cache the resource. If it just changes sometimes (because one of the resources it depends on can change), and if the client code has a way of knowing about it, it can append a dummy parameter to the url that is computed from some hash or last modified date of those resources (that's what we do in Microsoft Ajax script resources so they can be cached forever but new versions can still be served as they appear). If the client can't know of changes, the correct way should be for the server to handle HEAD requests properly and tell the client whether to use the cached version or not.\nSeems to me like appending a random parameter or telling from the client to never cache is wrong because cacheability is a property of the server resource, and so should be decided server-side.\nAnother question to ask oneself is should this resource really be served through GET or should it go through POST? That is a question of semantics, but it also has security implications (there are attacks that work only if the server allows for GET). POST will not get cached.</p>\n",
                    "is_accepted": false,
                    "score": 6
                },
                {
                    "body": "<p>You can use the short notation <code>$.now()</code> instead of doing a (new Date().getTime()) each and everytime.</p>\n",
                    "is_accepted": false,
                    "score": 9
                },
                {
                    "body": "<p>If you are using IE 9, then you need to use the following in front of your controller class definition:</p>\n\n<p>[OutputCache(NoStore = true, Duration = 0, VaryByParam = \"*\")]</p>\n\n<p>public class TestController : Controller</p>\n\n<p>This will prevent the browser from caching.</p>\n\n<p>Details on this link:\n<a href=\"http://dougwilsonsa.wordpress.com/2011/04/29/disabling-ie9-ajax-response-caching-asp-net-mvc-3-jquery/\" rel=\"nofollow\">http://dougwilsonsa.wordpress.com/2011/04/29/disabling-ie9-ajax-response-caching-asp-net-mvc-3-jquery/</a></p>\n\n<p>Actually this solved my issue.</p>\n",
                    "is_accepted": false,
                    "score": 2
                },
                {
                    "body": "<p>For those of you using the <code>cache</code> option of <code>$.ajaxSetup()</code> on mobile Safari, it appears that you may have to use a timestamp for POSTs, since mobile Safari caches that too. According to the documentation on <code>$.ajax()</code> (which you are directed to from <code>$.ajaxSetup()</code>):</p>\n\n<blockquote>\n  <p>Setting cache to false will only work correctly with HEAD and GET requests. It works by appending \"_={timestamp}\" to the GET parameters. The parameter is not needed for other types of requests, except in IE8 when a POST is made to a URL that has already been requested by a GET.</p>\n</blockquote>\n\n<p>So setting that option alone won't help you in the case I mentioned above.</p>\n",
                    "is_accepted": false,
                    "score": 4
                },
                {
                    "body": "<p>As @Athasach said, according to the jQuery docs, <code>$.ajaxSetup({cache:false})</code> will not work for other than GET and HEAD requests.</p>\n\n<p>You are better off sending back a <code>Cache-Control: no-cache</code> header from your server anyway. It provides a cleaner separation of concerns. </p>\n\n<p>Of course, this would not work for service urls that you do not belong to your project. In that case, you might consider proxying the third party service from server code rather than calling it from client code. </p>\n",
                    "is_accepted": false,
                    "score": 2
                },
                {
                    "body": "<p>append Math.random()  to the request url</p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>Basically just add <code>cache:false;</code> in the ajax where you think the content will change as the progress go on. And the place where the content wont change there u can omit this. In this way u will get the new response every time</p>\n",
                    "is_accepted": false,
                    "score": 3
                },
                {
                    "body": "<p><a href=\"http://www.dashbay.com/2011/05/internet-explorer-caches-ajax/\" rel=\"nofollow\">Internet Explorer\u2019s Ajax Caching: What Are YOU Going To Do About It?</a> suggests three approaches:</p>\n\n<blockquote>\n  <ol>\n  <li>Add a cache busting token to the query string, like ?date=[timestamp].  In jQuery and YUI you can tell them to do this automatically.</li>\n  <li>Use POST instead of a GET</li>\n  <li>Send a HTTP response header that specifically forbids browsers to cache it</li>\n  </ol>\n</blockquote>\n",
                    "is_accepted": false,
                    "score": 1
                }
            ],
            "body": "<p>It looks like that if I load dynamic content using <code>$.get()</code>, the result is cached in browser.\nAdding some random string in QueryString seem to solve this issue (I use <code>new Date().toString()</code>), but this feels like a hack. </p>\n\n<p>Is there any other way to achieve this?\nOr, if unique string is the only way to achieve this, any suggestions other than <code>new Date()</code> ?</p>\n",
            "last_activity_date": 1407955366,
            "question_id": 367786,
            "score": 124,
            "tags": [
                "javascript",
                "jquery",
                "ajax",
                "browser-cache"
            ],
            "title": "Prevent caching of AJAX call"
        },
        {
            "answer_count": 16,
            "answers": [
                {
                    "body": "<pre><code>window.onload = function() { \n  var txts = document.getElementsByTagName('TEXTAREA') \n\n  for(var i = 0, l = txts.length; i &lt; l; i++) {\n    if(/^[0-9]+$/.test(txts[i].getAttribute(\"maxlength\"))) { \n      var func = function() { \n        var len = parseInt(this.getAttribute(\"maxlength\"), 10); \n\n        if(this.value.length &gt; len) { \n          alert('Maximum length exceeded: ' + len); \n          this.value = this.value.substr(0, len); \n          return false; \n        } \n      }\n\n      txts[i].onkeyup = func;\n      txts[i].onblur = func;\n    } \n  } \n}\n</code></pre>\n",
                    "is_accepted": true,
                    "score": 92
                },
                {
                    "body": "<p>Also add the following event to deal with pasting into the textarea:</p>\n\n<pre><code>...\n\ntxts[i].onkeyup = function() {\n  ...\n}\n\ntxts[i].paste = function() {\n  var len = parseInt(this.getAttribute(\"maxlength\"), 10);\n\n  if (this.value.length + window.clipboardData.getData(\"Text\").length &gt; len) {\n    alert('Maximum length exceeded: ' + len);\n    this.value = this.value.substr(0, len);\n    return false;\n  }\n}\n\n...\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 2
                },
                {
                    "body": "<p><strong>Update</strong> Use Eirik's solution using <code>.live()</code> instead as it is a bit more robust.</p>\n\n<hr>\n\n<p>Even though you wanted a solution that wasn't using jQuery, I thought I'd add one in for anyone finding this page via Google and looking for a jQuery-esque solution:</p>\n\n<pre><code>$(function() {        \n    // Get all textareas that have a \"maxlength\" property.\n    $('textarea[maxlength]').each(function() {\n\n        // Store the jQuery object to be more efficient...\n        var $textarea = $(this);\n\n        // Store the maxlength and value of the field.\n        var maxlength = $textarea.attr('maxlength');\n        var val = $textarea.val();\n\n        // Trim the field if it has content over the maxlength.\n        $textarea.val(val.slice(0, maxlength));\n\n        // Bind the trimming behavior to the \"keyup\" event.\n        $textarea.bind('keyup', function() {\n            $textarea.val($textarea.val.slice(0, maxlength));\n        });\n\n    });\n});\n</code></pre>\n\n<p>Hope that is useful to you Googlers out there...</p>\n",
                    "is_accepted": false,
                    "score": 31
                },
                {
                    "body": "<p>I know you want to avoid jQuery, but as the solution requires JavaScript, this solution (using jQuery 1.4) is the most consise and robust. </p>\n\n<p>Inspired by, but an improvement over Dana Woodman's answer:</p>\n\n<p>Changes from that answer are: Simplified and more generic, using jQuery.live and also not setting val if length is OK (leads to working arrow-keys in IE, and noticable speedup in IE):</p>\n\n<pre><code>    // Get all textareas that have a \"maxlength\" property. Now, and when later adding HTML using jQuery-scripting:\n    $('textarea[maxlength]').live('keyup blur', function() {\n        // Store the maxlength and value of the field.\n        var maxlength = $(this).attr('maxlength');\n        var val = $(this).val();\n\n        // Trim the field if it has content over the maxlength.\n        if (val.length &gt; maxlength) {\n            $(this).val(val.slice(0, maxlength));\n        }\n    });\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 76
                },
                {
                    "body": "<p>HTML5 adds a <code>maxlength</code> attribute to the <code>textarea</code> element, like so:</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n    &lt;body&gt;\n        &lt;form action=\"processForm.php\" action=\"post\"&gt;\n            &lt;label for=\"story\"&gt;Tell me your story:&lt;/label&gt;&lt;br&gt;\n            &lt;textarea id=\"story\" maxlength=\"100\"&gt;&lt;/textarea&gt;\n            &lt;input type=\"submit\" value=\"Submit\"&gt;\n        &lt;/form&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>This is currently supported in Chrome 13, FF 5, and Safari 5.  Not surprisingly, this is not supported in IE 9.  (Tested on Win 7)</p>\n",
                    "is_accepted": false,
                    "score": 26
                },
                {
                    "body": "<p>Small problem with code above is that val() does not trigger change() event, so if you using backbone.js (or another frameworks for model binding), model won't be updated.</p>\n\n<p>I'm posting the solution worked great for me.</p>\n\n<pre><code>$(function () {\n\n    $(document).on('keyup', '.ie8 textarea[maxlength], .ie9 textarea[maxlength]', function (e) {\n        var maxLength = $(this).attr('maxlength');\n        if (e.keyCode &gt; 47 &amp;&amp; $(this).val().length &gt;= maxLength) {\n            $(this).val($(this).val().substring(0, maxLength)).trigger('change');\n        }\n        return true;\n    });\n\n});\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>I implemented <code>maxlength</code> behaviour on <code>textarea</code> recently, and run into problem described in this question: <a href=\"http://stackoverflow.com/questions/10030921/chrome-counts-characters-wrong-in-textarea-with-maxlength-attribute\">Chrome counts characters wrong in textarea with maxlength attribute</a>.</p>\n\n<p>So all implementations listed here will work little buggy. To solve this issue I add <code>.replace(/(\\r\\n|\\n|\\r)/g, \"11\")</code> before <code>.length</code>. And kept it in mind when cuting string.</p>\n\n<p>I ended with something like this:</p>\n\n<pre><code>var maxlength = el.attr(\"maxlength\");\nvar val = el.val();\nvar length = val.length;\nvar realLength = val.replace(/(\\r\\n|\\n|\\r)/g, \"11\").length;\nif (realLength &gt; maxlength) {\n    el.val(val.slice(0, maxlength - (realLength - length)));\n}\n</code></pre>\n\n<p>Don't sure if it solves problem completely, but it works for me for now.</p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>This is some tweaked code I've just been using on my site.  <strong>It is improved to display the number of remaining characters to the user.</strong></p>\n\n<p>(Sorry again to OP who requested no jQuery.  But seriously, who doesn't use jQuery these days?)</p>\n\n<pre><code>$(function() {\n    // Get all textareas that have a \"maxlength\" property.\n    $(\"textarea[maxlength]\").each(function() {\n\n        // Store the jQuery object to be more efficient...\n        var $textarea = $(this);\n\n        // Store the maxlength and value of the field\n        var maxlength = $textarea.attr(\"maxlength\");\n\n        // Add a DIV to display remaining characters to user\n        $textarea.after($(\"&lt;div&gt;\").addClass(\"charsRemaining\"));\n\n        // Bind the trimming behavior to the \"keyup\" &amp; \"blur\" events (to handle mouse-based paste)\n        $textarea.on(\"keyup blur\", function(event) {\n            // Fix OS-specific line-returns to do an accurate count\n            var val = $textarea.val().replace(/\\r\\n|\\r|\\n/g, \"\\r\\n\").slice(0, maxlength);\n            $textarea.val(val);\n            // Display updated count to user\n            $textarea.next(\".charsRemaining\").html(maxlength - val.length + \" characters remaining\");\n        }).trigger(\"blur\");\n\n    });\n});\n</code></pre>\n\n<p><em>Has NOT been tested with international multi-byte characters, so I'm not sure how it works with those exactly.</em></p>\n",
                    "is_accepted": false,
                    "score": 2
                },
                {
                    "body": "<p>This solution avoids the issue in IE where the last character is removed when a character in the middle of the text is added.  It also works fine with other browsers.</p>\n\n<pre><code>$(\"textarea[maxlength]\").keydown( function(e) {\n    var key = e.which;  // backspace = 8, delete = 46, arrows = 37,38,39,40\n\n    if ( ( key &gt;= 37 &amp;&amp; key &lt;= 40 ) || key == 8 || key == 46 ) return;\n\n    return $(this).val().length &lt; $(this).attr( \"maxlength\" );\n});\n</code></pre>\n\n<p>My form validation then deals with any issues where the user may have pasted (only seems to be a problem in IE) text exceeding the maximum length of the textarea.</p>\n",
                    "is_accepted": false,
                    "score": 2
                },
                {
                    "body": "<p>$(\".tbMsg\").attr('maxlength', 200);</p>\n",
                    "is_accepted": false,
                    "score": -3
                },
                {
                    "body": "<p>Better Solution compared to trimming the value of the textarea.</p>\n\n<pre><code>$('textarea[maxlength]').live('keypress', function(e) {\n    var maxlength = $(this).attr('maxlength');\n    var val = $(this).val();\n\n    if (val.length &gt; maxlength) {\n        return false;\n    }\n});\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>This is much easier:</p>\n\n<pre><code>&lt;textarea  name=\"question\" cols=\"100\" rows=\"8\" maxlength=\"500px\" onKeyPress=\"return ( this.value.length &lt; 1000 );\"&gt;&lt;/textarea&gt;\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>Try this jQuery which works in IE9, FF, Chrome and provides a countdown to users:</p>\n\n<pre><code>$(\"#comments\").bind(\"keyup keydown\", function() {\n    var max = 500;\n    var value = $(this).val();\n    var left = max - value.length;\n    if(left &lt; 0) {\n        $(this).val( value.slice(0, left) );\n        left = 0;\n    }\n    $(\"#charcount\").text(left);\n}); \n\n&lt;textarea id=\"comments\" onkeyup=\"ismaxlength(this,500)\"&gt;&lt;/textarea&gt;\n&lt;span class=\"max-char-limit\"&gt;&lt;span id=\"charcount\"&gt;500&lt;/span&gt; characters left&lt;/span&gt;\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>Try to use this code example:</p>\n\n<pre><code>$(\"#TextAreaID1\").bind('input propertychange', function () {\n    var maxLength = 4000;\n    if ($(this).val().length &gt; maxLength) {\n        $(this).val($(this).val().substring(0, maxLength));\n    }\n});\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<blockquote>\n  <p>The maxlength attribute is supported in Internet Explorer 10, Firefox, Chrome, and Safari.</p>\n  \n  <p><strong>Note:</strong> The maxlength attribute of the <code>&lt;textarea&gt;</code> tag is not supported in Internet Explorer 9 and earlier versions, or in Opera.</p>\n</blockquote>\n\n<p>from <a href=\"http://www.w3schools.com/tags/att_textarea_maxlength.asp\" rel=\"nofollow\">HTML  maxlength Attribute w3schools.com</a></p>\n\n<p>For IE8 or earlier versions you have to use the following</p>\n\n<pre><code>//only call this function in IE\nfunction maxLengthLimit($textarea){\n    var maxlength = parseInt($textarea.attr(\"maxlength\"));\n    //in IE7,maxlength attribute can't be got,I don't know why...\n    if($.browser.version==\"7.0\"){\n        maxlength = parseInt($textarea.attr(\"length\"));\n    }\n    $textarea.bind(\"keyup blur\",function(){\n        if(this.value.length&gt;maxlength){\n            this.value=this.value.substr(0,maxlength);\n        }\n    });\n}\n</code></pre>\n\n<p>P.S. </p>\n\n<blockquote>\n  <p>The maxlength attribute of the <code>&lt;input&gt;</code> tag is supported in all major browsers.</p>\n</blockquote>\n\n<p>from <a href=\"http://www.w3schools.com/tags/att_input_maxlength.asp\" rel=\"nofollow\">HTML  maxlength Attribute w3schools.com</a></p>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>You can use jQuery to make it easy and clear</p>\n\n<p>JSFiddle <a href=\"http://jsfiddle.net/L7vey/1/\" rel=\"nofollow\">DEMO</a></p>\n\n<pre><code>&lt;textarea id=\"ta\" max=\"10\"&gt;&lt;/textarea&gt;\n\n&lt;script&gt;\n$(\"#ta\").keypress(function(){\n\n    var text      = $(this).val();\n    var maxlength = $(this).attr(\"max\");\n\n    if(text.length &gt; maxlength) {\n        return false;   \n    }\n    return true;\n});\n&lt;/script&gt;\n</code></pre>\n\n<p>It is tested in <code>Firefox</code>, <code>Google Chrome</code> and <code>Opera</code></p>\n",
                    "is_accepted": false,
                    "score": 0
                }
            ],
            "body": "<p>I would like to have some functionality by which if I write</p>\n\n<pre><code>&lt;textarea maxlength=\"50\"&gt;&lt;/textarea&gt;\n&lt;textarea maxlength=\"150\"&gt;&lt;/textarea&gt;\n&lt;textarea maxlength=\"250\"&gt;&lt;/textarea&gt;\n</code></pre>\n\n<p>it will automatically impose the maxlength on the textArea. If possible please do not provide the solution in jQuery.</p>\n\n<p>Note: This can be done if I do something like this:</p>\n\n<pre><code>&lt;textarea onkeypress=\"return imposeMaxLength(event, this, 110);\" rows=\"4\" cols=\"50\"&gt;\n\nfunction imposeMaxLength(Event, Object, MaxLen)\n{\n    return (Object.value.length &lt;= MaxLen)||(Event.keyCode == 8 ||Event.keyCode==46||(Event.keyCode&gt;=35&amp;&amp;Event.keyCode&lt;=40))\n}\n</code></pre>\n\n<p>Copied from <em><a href=\"http://stackoverflow.com/questions/451491/what-is-the-best-way-to-emulate-an-html-input-maxlength-attribute-on-an-html-te\">What is the best way to emulate an HTML input \u201cmaxlength\u201d attribute on an HTML textarea?</a></em></p>\n\n<p>But the point is I don't want to write onKeyPress and onKeyUp every time I declare a textArea.</p>\n",
            "last_activity_date": 1401945404,
            "question_id": 1125482,
            "score": 103,
            "tags": [
                "javascript",
                "html",
                "textarea"
            ],
            "title": "How to impose maxlength on textArea in HTML using JavaScript"
        },
        {
            "answer_count": 9,
            "answers": [
                {
                    "body": "<p>Try adding a cachebreaker at the end of the url:</p>\n\n<pre><code>newImage.src = \"http://localhost/image.jpg?\" + new Date().getTime();\n</code></pre>\n\n<p>This will append the current timestamp automatically when you are creating the image, and it will make the browser look again for the image instead of retrieving the one in the cache.</p>\n",
                    "is_accepted": false,
                    "score": 131
                },
                {
                    "body": "<p>Try using a worthless querystring to make it a unique url:</p>\n\n<pre><code>function updateImage()\n{\n    if(newImage.complete) {\n        document.getElementById(\"theText\").src = newImage.src;\n        newImage = new Image();\n        number++;\n        newImage.src = \"http://localhost/image.jpg?\" + new Date();\n    }\n\n    setTimeout(updateImage, 1000);\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>One answer is to hackishly add some get query parameter like has been suggested.</p>\n\n<p>A better answer is to emit a couple of extra options in your HTTP header.</p>\n\n<pre><code>Pragma: no-cache\nExpires: Fri, 30 Oct 1998 14:19:41 GMT\nCache-Control: no-cache, must-revalidate\n</code></pre>\n\n<p>By providing a date in the past, it won't be cached by the browser. <code>Cache-Control</code> was added in HTTP/1.1 and the must-revalidate tag indicates that proxies should never serve up an old image even under extenuating circumstances, and the <code>Pragma: no-cache</code> isn't really necessary for current modern browsers/caches but may help with some crufty broken old implementations.</p>\n",
                    "is_accepted": false,
                    "score": 3
                },
                {
                    "body": "<p>After creating the new image, are you removing the old image from the DOM and replacing it with the new one?</p>\n\n<p>You could be grabbing new images every updateImage call, but not adding them to the page.</p>\n\n<p>There are a number of ways to do it. Something like this would work.</p>\n\n<pre><code>function updateImage()\n{\n    var image = document.getElementById(\"theText\");\n    if(image.complete) {\n        var new_image = new Image();\n        //set up the new image\n        new_image.id = \"theText\";\n        new_image.src = image.src;           \n        // insert new image and remove old\n        image.parentNode.insertBefore(new_image,image);\n        image.parentNode.removeChild(image);\n    }\n\n    setTimeout(updateImage, 1000);\n}\n</code></pre>\n\n<p>After getting that working, if there are still problems it is probably a caching issue like the other answers talk about.</p>\n",
                    "is_accepted": false,
                    "score": 3
                },
                {
                    "body": "<p>What I ended up doing was having the server map any request for an image at that directory to the source that I was trying to update. I then had my timer append a number onto the end of the name so the DOM would see it as a new image and load it.</p>\n\n<p>E.g.</p>\n\n<pre><code>http://localhost/image.jpg\n//and\nhttp://localhost/image01.jpg\n</code></pre>\n\n<p>will request the same image generation code but it will look like different images to the browser.</p>\n\n<pre><code>var newImage = new Image();\nnewImage.src = \"http://localhost/image.jpg\";\nvar count = 0;\nfunction updateImage()\n{\n    if(newImage.complete) {\n        document.getElementById(\"theText\").src = newImage.src;\n        newImage = new Image();\n        newImage.src = \"http://localhost/image/id/image\" + count++ + \".jpg\";\n    }\n    setTimeout(updateImage, 1000);\n}\n</code></pre>\n",
                    "is_accepted": true,
                    "score": 1
                },
                {
                    "body": "<p>As an alternative to...</p>\n\n<pre><code>newImage.src = \"http://localhost/image.jpg?\" + new Date().getTime();\n</code></pre>\n\n<p>...it seems that...</p>\n\n<pre><code>newImage.src = \"http://localhost/image.jpg#\" + new Date().getTime();\n</code></pre>\n\n<p>...is sufficient to fool the browser cache without bypassing any upstream caches, assuming you returned the correct <code>Cache-Control</code> headers. Although you can use...</p>\n\n<pre><code>Cache-Control: no-cache, must-revalidate\n</code></pre>\n\n<p>...you lose the benefits of the <code>If-Modified-Since</code> or <code>If-None-Match</code> headers, so something like...</p>\n\n<pre><code>Cache-Control: max-age=0, must-revalidate\n</code></pre>\n\n<p>...should prevent the browser from re-downloading the entire image if it hasn't actually changed. Tested and working on IE, Firefox, and Chrome. Annoyingly it fails on Safari unless you use...</p>\n\n<pre><code>Cache-Control: no-store\n</code></pre>\n\n<p>...although this still may be preferable to filling upstream caches with hundreds of identical images, particularly when they're running on your own server. ;-)</p>\n\n<p><strong>Update</strong> (2014-09-28): Nowadays it looks like <code>Cache-Control: no-store</code> is needed for Chrome as well.</p>\n",
                    "is_accepted": false,
                    "score": 86
                },
                {
                    "body": "<p>I solved this problem by sending the data back through a servlet.</p>\n\n<pre><code>response.setContentType(\"image/png\");\nresponse.setHeader(\"Pragma\", \"no-cache\");\nresponse.setHeader(\"Cache-Control\", \"no-cache, must-revalidate\");\nresponse.setDateHeader(\"Expires\", 0);\n\nBufferedImage img = ImageIO.read(new File(imageFileName));\n\nImageIO.write(img, \"png\", response.getOutputStream());\n</code></pre>\n\n<p>Then from the page you just give it the servlet with some params to grab the correct image file.</p>\n\n<pre><code>&lt;img src=\"YourServlet?imageFileName=imageNum1\"&gt;\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>I've seen a lot of variation in answers for how to do this, so I thought I'd summarize them here:</p>\n\n<hr>\n\n<h2>(1)  Add a unique cache-busting query parameter to the URL, such as:</h2>\n\n<pre><code>newImage.src = \"image.jpg?t=\" + new Date().getTime();\n</code></pre>\n\n<p><strong>Pros:</strong> 100% reliable, quick &amp; easy to understand and implement.</p>\n\n<p><strong>Cons:</strong> Bypasses caching altogether, meaning unnecessary delays and bandwidth use whenever the image <em>doesn't</em> change between views. Will potentially fill browser cache (and any intermediate caches) with many, many copies of exactly the same image! Also, requires modifying image URL.</p>\n\n<p><strong>When to use:</strong> Use when image is constantly changing, such as for a live webcam feed.  If you use this method, <em>make sure to serve the images themselves with <code>Cache-control: no-cache</code> HTTP headers!!!</em>  (Often this can be set up using a .htaccess file).  Otherwise you'll be progressively filling caches up with old versions of the image!</p>\n\n<hr>\n\n<h2>(2) Add query parameter to the URL that changes only when the file does, e.g.:</h2>\n\n<pre><code>echo '&lt;img src=\"image.jpg?m=' . filemtime('image.jpg') . '\"&gt;';\n</code></pre>\n\n<p>(That's PHP server-side code, but the important point here is just that a ?m=<em>[file last-modified time]</em> querystring is appended to the filename).</p>\n\n<p><strong>Pros:</strong> 100% reliable, quick &amp; easy to understand and implement, <em>and</em> preserves caching advantages perfectly.</p>\n\n<p><strong>Cons:</strong> Requires modifying the image URL.  Also, a little more work for the server - it has to get access to the file-last-modified time.  Also, requires server-side information, so not suitable for a purely client-side-only solution to check for a refreshed image. </p>\n\n<p><strong>When to use:</strong> When you want to cache images, but may need to update them at the server end from time to time without changing the filename itself. AND when you can easily ensure that the correct querystring is added to every image instance in your HTML.</p>\n\n<hr>\n\n<h2>(3) Serve your images with the header <code>Cache-control: max-age=0, must-revalidate</code>, and add a unique <em>memcache</em>-busting fragment identifier to the URL, such as:</h2>\n\n<pre><code>newImage.src = \"image.jpg#\" + new Date().getTime();\n</code></pre>\n\n<p>The idea here is that the cache-control header puts images in the browser cache, but immediately markes them stale, so that and every time they are re-displayed the browser must check with the server to see if they've changed.  This ensures that the browser's <em>HTTP cache</em> always returns the latest copy of the image.  However, browsers will often re-use an in-memory copy of an image if they have one, and not even check their HTTP cache in that case.  To prevent this, a fragment identifier is used:  Comparison of in-memory image <code>src</code>'s includes the fragment identifier, but it gets stripped of before querying the HTTP cache. (So, e.g., <code>image.jpg#A</code> and <code>image.jpg#B</code> might both be displayed from the <code>image.jpg</code> entry in the browser's HTTP cache, but <code>image.jpg#B</code> would never be displayed using in-memory retained image data from when <code>image.jpg#A</code> was last displayed).</p>\n\n<p><strong>Pros:</strong> Makes proper use of HTTP caching mechanisms, and uses cached images if they haven't changed.  Works for servers that choke on a querystring added to a static image URL (since servers never see fragment identifiers - they're for the browsers' own use only).</p>\n\n<p><strong>Cons:</strong> Relies on somewhat dubious (or at least poorly documented) behaviour of browsers, in regard to images with fragment identifiers in their URLs (However, I've tested this successfully in FF27, Chrome33, and IE11).  Does still send a revalidation request to the server for every image view, which may be overkill if images only change rarely and/or latency is a big issue (since you need to wait for the revalidation response even when the cached image is still good).  Requires modifying image URLs.</p>\n\n<p><strong>When to use:</strong> Use when images may change frequently, or need to be refreshed intermittently by the client without server-side script involvement, but where you still want the advantage of caching.  For example, polling a live webcam that updates an image irregularly every few minutes.  Alternatively, use instead of (1) or (2) if your server doesn't allow querystrings on static image URLs.</p>\n\n<hr>\n\n<h2>(4) Forcibly refresh a particular image using Javascript, by putting it in a hidden <code>&lt;iframe&gt;</code> and calling <code>location.reload(true)</code> on that iframe.</h2>\n\n<p>Here's how you might do it:</p>\n\n<pre><code>function refreshUri(uri, callback) {\n    var reload = function () {\n        // Force a reload of the iframe\n        this.contentWindow.location.reload(true);\n\n        // Remove `load` event listener and remove iframe\n        this.removeEventListener('load', reload, false);\n        this.parentElement.removeChild(this);\n\n        // Run the callback if it is provided\n        if (typeof callback === 'function') {\n            callback();\n        }\n    };\n\n    var iframe = document.createElement('iframe');\n    iframe.style.display = 'none';\n\n    // Reload iframe once it has loaded\n    iframe.addEventListener('load', reload, false);\n\n    // Only call callback if error occured while loading\n    iframe.addEventListener('error', callback, false);\n    iframe.src = uri;\n    document.body.appendChild(iframe);\n}\n</code></pre>\n\n<p>... and then to refresh an image with <code>id=\"img1\"</code></p>\n\n<pre><code>function replaceImage(id) {\n    return function(){\n        var oldImage = document.getElementById(id);\n        var newImage = new Image();\n        newImage.src = oldImage.src;\n        newImage.id = oldImage.id;\n        oldImage.parentNode.replaceChild(newImage,oldImage);\n    }\n}\n\nrefreshUri(\"image.jpg\", replaceImage('img1'));\n</code></pre>\n\n<p>Note that if there are multiple copies of the same image (i.e.  tags with the same <code>src</code>) anywhere on the page (even if invisible, in a different frame, or in javascript Image objects outside the DOM tree), then in the callback you'll need to either delete them all and then re-create them, or else set all the <code>src</code>s to empty and then all back again.  Otherwise, I've observed, IE11 may not refresh the image properly.</p>\n\n<p><strong>Pros:</strong> Works just like the image.reload() function you <em>wish</em> the DOM had! Allows images to by cached normally (even with in-the-future expiry dates if you want them, thus avoiding frequent revalidation).  Allows you to refresh a particular image without altering the URLs for that image on the current page, or on any other pages, using only client-side code.</p>\n\n<p><strong>Cons:</strong> Relies on Javascript.  Not 100% guaranteed to work properly in every browser (I've tested this successfully in FF27, Chrome33, and IE11 though).  Very complicated relative to the other methods.</p>\n\n<p><strong>When to use:</strong> When you have a collection of basically static images that you'd like cached, but you still need to be able to update them occasionally and get immediate visual feedback that the update took place.  (Especially when just refreshing the whole browser page wouldn't work, as in some web apps built on AJAX for example).  And when methods (1)-(3) aren't feasible because (for whatever reason) you can't change all the URLs that might potentially display the image you need to have updated.  (Note that using those 3 methods the image will be refreshed, but if <em>another</em> page then tries to displays that image <em>without</em> the appropriate querystring or fragment identifier, it may show an older version instead).    </p>\n",
                    "is_accepted": false,
                    "score": 37
                },
                {
                    "body": "<p>This does what you want using one line of HTML and includes error recovery and there is a working demo shown here:</p>\n\n<p><a href=\"http://foscam.us/forum/a-how-to-embed-any-foscam-ip-camera-in-webpage-using-1-line-t9113.html#p43654\" rel=\"nofollow\">http://foscam.us/forum/a-how-to-embed-any-foscam-ip-camera-in-webpage-using-1-line-t9113.html#p43654</a></p>\n\n<p>Don</p>\n",
                    "is_accepted": false,
                    "score": -2
                }
            ],
            "body": "<p>I am accessing a link on my site that will provide a new image each time it is accessed.</p>\n\n<p>The issue I am running into is that if I try to load the image in the background and then update the one on the page, the image doesn't change--though it is updated when I reload the page.</p>\n\n<pre><code>var newImage = new Image();\nnewImage.src = \"http://localhost/image.jpg\";\n\nfunction updateImage()\n{\nif(newImage.complete) {\n    document.getElementById(\"theText\").src = newImage.src;\n    newImage = new Image();\n    number++;\n    newImage.src = \"http://localhost/image/id/image.jpg?time=\" + new Date();\n}\n\n    setTimeout(updateImage, 1000);\n}\n</code></pre>\n\n<p>Headers as FireFox sees them:</p>\n\n<pre><code>HTTP/1.x 200 OK\nCache-Control: no-cache, must-revalidate\nPragma: no-cache\nTransfer-Encoding: chunked\nContent-Type: image/jpeg\nExpires: Fri, 30 Oct 1998 14:19:41 GMT\nServer: Microsoft-HTTPAPI/1.0\nDate: Thu, 02 Jul 2009 23:06:04 GMT\n</code></pre>\n\n<p>I need to force a refresh of just that image on the page. Any ideas?</p>\n",
            "last_activity_date": 1411931427,
            "question_id": 1077041,
            "score": 104,
            "tags": [
                "javascript",
                "image",
                "url",
                "refresh"
            ],
            "title": "Refresh image with a new one at the same url"
        },
        {
            "answer_count": 10,
            "answers": [
                {
                    "body": "<pre><code>var keys = [];\nfor(var k in obj) keys.push(k);\n\nalert(\"total \" + keys.length + \" keys: \" + keys);\n</code></pre>\n",
                    "is_accepted": true,
                    "score": 158
                },
                {
                    "body": "<pre><code>var keys = new Array();\nfor(var key in obj)\n{\n   keys[keys.length] = key;\n}\n\nvar keyLength = keys.length;\n</code></pre>\n\n<p>to access any value from the object, you can use obj[key];</p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<pre><code>Object.keys(obj); // ['key1', 'key2', 'key3', 'key4']\n</code></pre>\n\n<p><strong>Update</strong></p>\n\n<p>It's <a href=\"http://kangax.github.com/es5-compat-table/\">supported</a> on most major browsers now.</p>\n\n<hr />\n\n<p>It's an addition in ECMAScript 5, and only works on Chrome currently.</p>\n",
                    "is_accepted": false,
                    "score": 303
                },
                {
                    "body": "<p>If you only want the keys which are specific to that particular object and not any derived <code>prototype</code> properties:</p>\n\n<pre><code>function getKeys(obj) {\n    var r = []\n    for (var k in obj) {\n        if (!obj.hasOwnProperty(k)) \n            continue\n        r.push(k)\n    }\n    return r\n}\n</code></pre>\n\n<p>e.g:</p>\n\n<pre><code>var keys = getKeys({'eggs': null, 'spam': true})\nvar length = keys.length // access the `length` property as usual for arrays\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 13
                },
                {
                    "body": "<pre><code>obj = {'a':'c','b':'d'}\n</code></pre>\n\n<p>You can try: </p>\n\n<pre><code>[index for (index in obj)] \n</code></pre>\n\n<p>this will return:</p>\n\n<pre><code>['a','b']\n</code></pre>\n\n<p>to get the list of keys\nor </p>\n\n<pre><code>[obj[index] for (index in obj)]\n</code></pre>\n\n<p>to get the values</p>\n",
                    "is_accepted": false,
                    "score": 3
                },
                {
                    "body": "<p>Underscore.js makes the transformation pretty clean:</p>\n\n<pre><code>var keys = _.map(x, function(v, k) { return k; });\n</code></pre>\n\n<p>Edit: I missed that you can do this too:</p>\n\n<pre><code>var keys = _.keys(x);\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 18
                },
                {
                    "body": "<p>Note that in coffeescript this can be accomplished in all browsers and node as</p>\n\n<pre><code>k for k of obj\n</code></pre>\n\n<p>and thus</p>\n\n<pre><code>(1 for _ of obj).length\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>using slice, apply and join method.</p>\n\n<pre><code>var print = Array.prototype.slice.apply( obj );\nalert('length='+print.length+' list'+print.join());\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>For a comma-delineated string listing the keys of a JSON Object, try the following:</p>\n\n<pre><code>function listKeys(jObj){\n    var keyString = '';\n    for(var k in jObj){\n        keyString+=(','+k);\n    }\n    return keyString.slice(1);\n}\n\n\n\n/* listKeys({'a' : 'foo', 'b' : 'foo', 'c' : 'foo'}) -&gt; 'a,b,c' */\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>Anurags answer is basically correct.\nBut to support <code>Object.keys(obj)</code> in older browsers as well you can use the code below that is copied from \n<a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/keys\" rel=\"nofollow\">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/keys</a>\n. It adds the <code>Object.keys(obj)</code> method if it's not available from the browser.</p>\n\n<pre><code>if (!Object.keys) {\n Object.keys = (function() {\n 'use strict';\n var hasOwnProperty = Object.prototype.hasOwnProperty,\n    hasDontEnumBug = !({ toString: null }).propertyIsEnumerable('toString'),\n    dontEnums = [\n      'toString',\n      'toLocaleString',\n      'valueOf',\n      'hasOwnProperty',\n      'isPrototypeOf',\n      'propertyIsEnumerable',\n      'constructor'\n    ],\n    dontEnumsLength = dontEnums.length;\n\nreturn function(obj) {\n  if (typeof obj !== 'object' &amp;&amp; (typeof obj !== 'function' || obj === null)) {\n    throw new TypeError('Object.keys called on non-object');\n  }\n\n  var result = [], prop, i;\n\n  for (prop in obj) {\n    if (hasOwnProperty.call(obj, prop)) {\n      result.push(prop);\n    }\n  }\n\n  if (hasDontEnumBug) {\n    for (i = 0; i &lt; dontEnumsLength; i++) {\n      if (hasOwnProperty.call(obj, dontEnums[i])) {\n        result.push(dontEnums[i]);\n      }\n    }\n  }\n  return result;\n};\n}());\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 2
                }
            ],
            "body": "<p>I have a JavaScript object like</p>\n\n<pre><code>var obj = {\n   key1: 'value1',\n   key2: 'value2',\n   key3: 'value3',\n   key4: 'value4'\n}\n</code></pre>\n\n<p>How can I get the length and list of keys in this object?</p>\n",
            "last_activity_date": 1417303358,
            "question_id": 3068534,
            "score": 118,
            "tags": [
                "javascript"
            ],
            "title": "Getting JavaScript object key list"
        },
        {
            "answer_count": 16,
            "answers": [
                {
                    "body": "<p>You can't do regular ping in browser Javascript, but you can find out if remote server is alive by for example loading an image from the remote server. If loading fails -> server down. </p>\n\n<p>You can even calculate the loading time by using onload-event. Here's an <a href=\"http://stackoverflow.com/questions/3908414/js-verify-image-size/3908492#3908492\">example</a> how to use onload event.</p>\n",
                    "is_accepted": false,
                    "score": 4
                },
                {
                    "body": "<p>You can't directly \"ping\" in javascript.\nThere may be a few other ways:</p>\n\n<ul>\n<li>Ajax</li>\n<li>Using a java applet with <a href=\"http://download.oracle.com/javase/1.5.0/docs/api/java/net/InetAddress.html#isReachable%28int%29\">isReachable</a> </li>\n<li>Writing a serverside script which pings and using AJAX to communicate to your serversidescript</li>\n<li>You might also be able to ping in flash (actionscript)</li>\n</ul>\n",
                    "is_accepted": false,
                    "score": 7
                },
                {
                    "body": "<p>I don't know what version of Ruby you're running, but have you tried implementing ping for ruby instead of javascript? <a href=\"http://raa.ruby-lang.org/project/net-ping/\" rel=\"nofollow\">http://raa.ruby-lang.org/project/net-ping/</a></p>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>you can try this:</p>\n\n<p>put <strong>ping.html</strong> on the server with or without any content, on the javascript do same as below:</p>\n\n<pre><code>&lt;script&gt;\n    function ping(){\n       $.ajax({\n          url: 'ping.html',\n          success: function(result){\n             alert('reply');\n          },     \n          error: function(result){\n              alert('timeout/error');\n          }\n       });\n    }\n&lt;/script&gt;\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 8
                },
                {
                    "body": "<p>You could try using PHP in your web page...something like this:</p>\n\n<pre><code>&lt;html&gt;&lt;body&gt;\n&lt;form method=\"post\" name=\"pingform\" action=\"&lt;?php echo $_SERVER['PHP_SELF']; ?&gt;\"&gt;\n&lt;h1&gt;Host to ping:&lt;/h1&gt;\n&lt;input type=\"text\" name=\"tgt_host\" value='&lt;?php echo $_POST['tgt_host']; ?&gt;'&gt;&lt;br&gt;\n&lt;input type=\"submit\" name=\"submit\" value=\"Submit\" &gt;\n&lt;/form&gt;&lt;/body&gt;\n&lt;/html&gt;\n&lt;?php\n\n$tgt_host = $_POST['tgt_host'];\n$output = shell_exec('ping -c 10 '. $tgt_host.');\n\necho \"&lt;html&gt;&lt;body style=\\\"background-color:#0080c0\\\"&gt;\n&lt;script type=\\\"text/javascript\\\" language=\\\"javascript\\\"&gt;alert(\\\"Ping Results: \" . $output . \".\\\");&lt;/script&gt;\n&lt;/body&gt;&lt;/html&gt;\";\n\n?&gt;\n</code></pre>\n\n<p>This is not tested so it may have typos etc...but I am confident it would work. Could be improved too...</p>\n",
                    "is_accepted": false,
                    "score": -5
                },
                {
                    "body": "<p>To keep your requests fast, cache the server side results of the ping and update the ping file or database every couple of minutes(or however accurate you want it to be). You can use cron to run a shell command with your 8 pings and write the output into a file, the webserver will include this file into your view.</p>\n",
                    "is_accepted": false,
                    "score": 5
                },
                {
                    "body": "<p>The problem with standard pings is they're ICMP, which <a href=\"http://en.wikipedia.org/wiki/Ping#History\" rel=\"nofollow\">a lot of places don't let through for security and traffic reasons</a>. That might explain the failure. </p>\n\n<p>Ruby prior to 1.9 had a TCP-based <code>ping.rb</code>, which will run with Ruby 1.9+. All you have to do is copy it from the 1.8.7 installation to somewhere else. I just confirmed that it would run by pinging my home router.</p>\n",
                    "is_accepted": false,
                    "score": 4
                },
                {
                    "body": "<p>It might be a lot easier than all that.  If you want your page to load then check on the availability or content of some foreign page to trigger other web page activity, you could do it using only javascript and php like this.  </p>\n\n<p>yourpage.php</p>\n\n<pre><code>&lt;?php\nif (isset($_GET['urlget'])){\n  if ($_GET['urlget']!=''){\n    $foreignpage= file_get_contents('http://www.foreignpage.html');\n    // you could also use curl for more fancy internet queries or if http wrappers aren't active in your php.ini\n    // parse $foreignpage for data that indicates your page should proceed\n    echo $foreignpage; // or a portion of it as you parsed\n    exit();  // this is very important  otherwise you'll get the contents of your own page returned back to you on each call\n  }\n}\n?&gt;\n\n&lt;html&gt;\n  mypage html content\n  ...\n\n&lt;script&gt;\nvar stopmelater= setInterval(\"getforeignurl('?urlget=doesntmatter')\", 2000);\n\nfunction getforeignurl(url){\n  var handle= browserspec();\n  handle.open('GET', url, false);\n  handle.send();\n  var returnedPageContents= handle.responseText;\n  // parse page contents for what your looking and trigger javascript events accordingly.\n  // use handle.open('GET', url, true) to allow javascript to continue executing. must provide a callback function to accept the page contents with handle.onreadystatechange()\n}\nfunction browserspec(){\n  if (window.XMLHttpRequest){\n    return new XMLHttpRequest();\n  }else{\n    return new ActiveXObject(\"Microsoft.XMLHTTP\");\n  }\n}\n\n&lt;/script&gt;\n</code></pre>\n\n<p>That should do it.</p>\n\n<p>The triggered javascript should include clearInterval(stopmelater)</p>\n\n<p>Let me know if that works for you</p>\n\n<p>Jerry</p>\n",
                    "is_accepted": false,
                    "score": -4
                },
                {
                    "body": "<p>just replace</p>\n\n<pre><code>file_get_contents\n</code></pre>\n\n<p>with</p>\n\n<pre><code>$ip = $_SERVER['xxx.xxx.xxx.xxx'];\nexec(\"ping -n 4 $ip 2&gt;&amp;1\", $output, $retval);\nif ($retval != 0) { \n  echo \"no!\"; \n} \nelse{ \n  echo \"yes!\"; \n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": -1
                },
                {
                    "body": "<p>I have found someone that accomplishes this with a very clever usage of the native <code>Image</code> object. </p>\n\n<p>From their source, this is the main function (it has dependences on other parts of the source but you get the idea).</p>\n\n<pre><code>function Pinger_ping(ip, callback) {\n\n  if(!this.inUse) {\n\n    this.inUse = true;\n    this.callback = callback\n    this.ip = ip;\n\n    var _that = this;\n\n    this.img = new Image();\n\n    this.img.onload = function() {_that.good();};\n    this.img.onerror = function() {_that.good();};\n\n    this.start = new Date().getTime();\n    this.img.src = \"http://\" + ip;\n    this.timer = setTimeout(function() { _that.bad();}, 1500);\n\n  }\n}\n</code></pre>\n\n<p>This works on all types of servers that I've tested (web servers, ftp servers, and game servers). It also works with ports. If anyone encounters a use case that fails, please post in the comments and I will update my answer.</p>\n\n<p><strong>Update</strong>: Previous link has been removed. If anyone finds or implements the above, please comment and I'll add it into the answer.</p>\n\n<p><strong>Update 2</strong>: @trante was nice enough to provide a jsFiddle. </p>\n\n<p><a href=\"http://jsfiddle.net/GSSCD/203/\">http://jsfiddle.net/GSSCD/203/</a></p>\n\n<p><strong>Update 3</strong>: @Jonathon created a GitHub repo with the implementation.</p>\n\n<p><a href=\"https://github.com/jdfreder/pingjs\">https://github.com/jdfreder/pingjs</a></p>\n",
                    "is_accepted": true,
                    "score": 50
                },
                {
                    "body": "<p>Ping is ICMP, but if there is any open TCP port on the remote server it could be achieved like this:</p>\n\n<p></p>\n\n<pre><code>function ping(host, port, pong) {\n\n  var started = new Date().getTime();\n\n  var http = new XMLHttpRequest();\n\n  http.open(\"GET\", \"http://\" + host + \":\" + port, /*async*/true);\n  http.onreadystatechange = function() {\n    if (http.readyState == 4) {\n      var ended = new Date().getTime();\n\n      var milliseconds = ended - started;\n\n      if (pong != null) {\n        pong(milliseconds);\n      }\n    }\n  };\n  try {\n    http.send(null);\n  } catch(exception) {\n    // this is expected\n  }\n\n}\n</code></pre>\n\n<p></p>\n",
                    "is_accepted": false,
                    "score": 6
                },
                {
                    "body": "<p>Pitching in with a websocket solution...</p>\n\n<pre><code>function ping(ip, isUp, isDown) {\n  var ws = new WebSocket(\"ws://\" + ip);\n  ws.onerror = function(e){\n    isUp();\n    ws = null;\n  };\n  setTimeout(function() { \n    if(ws != null) {\n      ws.close();\n      ws = null;\n      isDown();\n    }\n  },2000);\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 2
                },
                {
                    "body": "<p>You can run the DOS ping.exe command from javaScript using the folowing:</p>\n\n<pre><code>function ping(ip)\n{\n    var input = \"\";\n    var WshShell = new ActiveXObject(\"WScript.Shell\");\n    var oExec = WshShell.Exec(\"c:/windows/system32/ping.exe \" + ip);\n\n    while (!oExec.StdOut.AtEndOfStream)\n    {\n            input += oExec.StdOut.ReadLine() + \"&lt;br /&gt;\";\n    }\n    return input;\n}\n</code></pre>\n\n<p>Is this what was asked for, or am i missing something?</p>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>You could simply do this <a href=\"http://khromov.wordpress.com/2012/02/07/minimalist-server-online-status-checker-htmljavascript/\" rel=\"nofollow\">http://khromov.wordpress.com/2012/02/07/minimalist-server-online-status-checker-htmljavascript/</a> . It uses javascript but it is all contained in one image tag. Unfortunately it is only for webservers. :(</p>\n",
                    "is_accepted": false,
                    "score": 2
                },
                {
                    "body": "<p>If what you are trying to see is whether the server \"exists\", you can use the following:</p>\n\n<pre><code>function isValidURL(url) {\n    var encodedURL = encodeURIComponent(url);\n    var isValid = false;\n\n    $.ajax({\n      url: \"http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20html%20where%20url%3D%22\" + encodedURL + \"%22&amp;format=json\",\n      type: \"get\",\n      async: false,\n      dataType: \"json\",\n      success: function(data) {\n        isValid = data.query.results != null;\n      },\n      error: function(){\n        isValid = false;\n      }\n    });\n\n    return isValid;\n}\n</code></pre>\n\n<p>This will return a true/false indication whether the server exists.<br /></p>\n\n<p>If you want response time, a slight modification will do:</p>\n\n<pre><code>function ping(url) {\n    var encodedURL = encodeURIComponent(url);\n    var startDate = new Date();\n    var endDate = null;\n    $.ajax({\n      url: \"http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20html%20where%20url%3D%22\" + encodedURL + \"%22&amp;format=json\",\n      type: \"get\",\n      async: false,\n      dataType: \"json\",\n      success: function(data) {\n        if (data.query.results != null) {\n            endDate = new Date();\n        } else {\n            endDate = null;\n        }\n      },\n      error: function(){\n        endDate = null;\n      }\n    });\n\n    if (endDate == null) {\n        throw \"Not responsive...\";\n    }\n\n    return endDate.getTime() - startDate.getTime();\n}\n</code></pre>\n\n<p>The usage is then trivial:</p>\n\n<pre><code>var isValid = isValidURL(\"http://www.wix.com\");\nalert(isValid ? \"Valid URL!!!\" : \"Damn...\");\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>var responseInMillis = ping(\"wix.com\");\nalert(responseInMillis);\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>Using @chuck-callebs general idea, I created a script and put it in a GH repository.  See <a href=\"https://github.com/jdfreder/pingjs\" rel=\"nofollow\">https://github.com/jdfreder/pingjs</a> .</p>\n",
                    "is_accepted": false,
                    "score": 1
                }
            ],
            "body": "<p>I'm making a web app that requires that I check to see if remote servers are online or not. When I run it from the command line, my page load goes up to a full 60s (for 8 entries, it will scale linearly with more).</p>\n\n<p>I decided to go the route of pinging on the user's end. This way, I can load the page and just have them wait for the \"server is online\" data while browsing my content.</p>\n\n<p>If anyone has the answer to the above question, or if they know a solution to keep my page loads fast, I'd definitely appreciate it.</p>\n",
            "last_activity_date": 1424714189,
            "question_id": 4282151,
            "score": 62,
            "tags": [
                "javascript"
            ],
            "title": "Is it possible to ping a server from Javascript?"
        },
        {
            "answer_count": 4,
            "answers": [
                {
                    "body": "<p>You can't. CSS does not support \"events\". Dare I ask what you need it for? Check out this <a href=\"http://stackoverflow.com/questions/1329621/jquery-detect-change-in-class-assignment\">post</a> here on SO. I can't think of a reason why you would want to hook up an event to a style change. I'm assuming here that the style change is triggered somwhere else by a piece of javascript. Why not add extra logic there?</p>\n",
                    "is_accepted": false,
                    "score": -9
                },
                {
                    "body": "<p>You can use jQuery's <code>css</code> function to test the CSS properties, eg. <code>if ($('node').css('display') == 'block')</code>.</p>\n\n<p>Colin is right, that there is no explicit event that gets fired when a specific CSS property gets changed. But you may be able to flip it around, and trigger an event that sets the display, and whatever else.</p>\n\n<p>Also consider using adding CSS classes to get the behavior you want. Often you can add a class to a containing element, and use CSS to affect all elements. I often slap a class onto the body element to indicate that an AJAX response is pending. Then I can use CSS selectors to get the display I want.</p>\n\n<p>Not sure if this is what you're looking for.</p>\n",
                    "is_accepted": false,
                    "score": 3
                },
                {
                    "body": "<p>Yes you can. DOM L2 Events module defines <a href=\"http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-eventgroupings-mutationevents\">mutation events</a>; one of them - <strong>DOMAttrModified</strong> is the one you need. Granted, these are not widely implemented, but are supported in at least Gecko and Opera browsers.</p>\n\n<p>Try something along these lines:</p>\n\n<pre><code>document.documentElement.addEventListener('DOMAttrModified', function(e){\n  if (e.attrName === 'style') {\n    console.log('prevValue: ' + e.prevValue, 'newValue: ' + e.newValue);\n  }\n}, false);\n\ndocument.documentElement.style.display = 'block';\n</code></pre>\n\n<p>You can also try utilizing <a href=\"http://msdn.microsoft.com/en-us/library/ms536956%28VS.85%29.aspx\">IE's \"propertychange\" event</a> as a replacement to <code>DOMAttrModified</code>. It should allow to detect <code>style</code> changes reliably.</p>\n",
                    "is_accepted": true,
                    "score": 62
                },
                {
                    "body": "<p>You can use <a href=\"http://meetselva.github.io/attrchange/\" rel=\"nofollow\">attrchange jQuery plugin</a>. The main function of the plugin is to bind a listener function on attribute change of HTML elements.</p>\n\n<p>Code sample:</p>\n\n<pre><code>$(\"#myDiv\").attrchange({\n    trackValues: true, // set to true so that the event object is updated with old &amp; new values\n    callback: function(evnt) {\n        if(evnt.attributeName == \"display\") { // which attribute you want to watch for changes\n            if(evnt.newValue.search(/inline/i) == -1) {\n\n                // your code to execute goes here...\n            }\n        }\n    }\n});\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 3
                }
            ],
            "body": "<p>Is there a way to detect if the \"display\" css property of an element is changed (to whether none or block or inline-block...)? if not, any plugin? Thanks</p>\n",
            "last_activity_date": 1391318811,
            "question_id": 1397251,
            "score": 45,
            "tags": [
                "javascript",
                "jquery",
                "html"
            ],
            "title": "Event detect when css property changed using Jquery"
        },
        {
            "answer_count": 7,
            "answers": [
                {
                    "body": "<pre><code>&lt;form action=\"product.php\" method=\"post\" name=\"frmProduct\" id=\"frmProduct\" enctype=\"multipart/form-data\"&gt;\n\n&lt;input id=\"submit_value\" type=\"button\" name=\"submit_value\" value=\"\"&gt;\n\n&lt;/form&gt;\n\n&lt;script type=\"text/javascript\"&gt;\n\ndocument.getElementById(\"submit_value\").onclick = submitAction;\n\nfunction submitAction()\n{\n    document.getElementById(\"frmProduct\").submit();\n    return false;\n}\n&lt;/script&gt;\n</code></pre>\n\n<p>EDIT: I accidentally swapped the id's around</p>\n",
                    "is_accepted": false,
                    "score": 3
                },
                {
                    "body": "<p>You can try </p>\n\n<pre><code>&lt;form action=\"product.php\" method=\"get\" name=\"frmProduct\" id=\"frmProduct\" enctype=\"multipart/form-data\"&gt;\n\n&lt;input onclick=\"submitAction(this)\" id=\"submit_value\" type=\"button\" name=\"submit_value\" value=\"\"&gt;\n\n&lt;/form&gt;\n\n&lt;script type=\"text/javascript\"&gt;\nfunction submitAction(element)\n{\n    element.form.submit();\n}\n&lt;/script&gt;\n</code></pre>\n\n<p>Don't you have more than one form with the same name ?</p>\n",
                    "is_accepted": false,
                    "score": -1
                },
                {
                    "body": "<p>I have to admit, my answer to you has to be \"Remove the JavaScript\".</p>\n\n<p>Just use a submit button, which will work whether or not JavaScript works and if you want to perform some other action in JavaScript, such as validtion, use the onsubmit event on the form...</p>\n\n<pre><code>document.getElementById(\"frmProduct\").onsubmit = function () {\n    // You can do things here such as validate the form\n    return true; // return false; if the form is not valid\n};\n</code></pre>\n\n<p>So your submit button can be an input of type submit, or a button element if you like.</p>\n\n<pre><code>&lt;input type=\"submit\" value=\"Submit\"&gt;\n</code></pre>\n",
                    "is_accepted": false,
                    "score": -2
                },
                {
                    "body": "<p>Use getElementById:</p>\n\n<pre><code>document.getElementById ('frmProduct').submit ()\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>\"submit is not a function\" means that you named your submit button or some other element submit. Rename the button to btnSubmit and your call will magically work. </p>\n\n<p>When you name the button submit, you override the submit() function on the form. </p>\n",
                    "is_accepted": true,
                    "score": 210
                },
                {
                    "body": "<p>I had the same issue when i was creating a MVC application using with master pages.\nTried looking for element with 'submit' as names as mentioned above but it wasn't the case. </p>\n\n<p>For my case it created multiple  tags on my page so there were some issues referencing the correct form.</p>\n\n<p>To work around this i'll let the button handle which form object to use:</p>\n\n<pre><code>onclick=\"return SubmitForm(this.form)\"\n</code></pre>\n\n<p>and with the js:</p>\n\n<pre><code>function SubmitForm(frm) {\n    frm.submit();\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>Make sure that there is no another form with the same name and make sure that there is no name=\"submit\" or id=\"submit\" in the form.</p>\n",
                    "is_accepted": false,
                    "score": 0
                }
            ],
            "body": "<p>Can anyone tell me what is going wrong with this code? I tried to submit a form with JavaScript, but an error \".submit is not a function\" shown. See below for more details of the code:</p>\n\n<pre><code>&lt;form action=\"product.php\" method=\"get\" name=\"frmProduct\" id=\"frmProduct\" enctype=\"multipart/form-data\"&gt;\n\n&lt;input onclick=\"submitAction()\" id=\"submit_value\" type=\"button\" name=\"submit_value\" value=\"\"&gt;\n\n&lt;/form&gt;\n\n&lt;script type=\"text/javascript\"&gt;\n    function submitAction()\n    {\n        document.frmProduct.submit();\n    }\n&lt;/script&gt;\n</code></pre>\n\n<p>I also tried this:</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n    function submitAction()\n    {\n        document.forms[\"frmProduct\"].submit();\n    }\n&lt;/script&gt;\n</code></pre>\n\n<p>Both show me the same error  :(</p>\n",
            "last_activity_date": 1418728991,
            "question_id": 833032,
            "score": 73,
            "tags": [
                "javascript",
                "html",
                "dom",
                "submit"
            ],
            "title": "&quot;Submit is not a function&quot; error in JavaScript"
        },
        {
            "answer_count": 8,
            "answers": [
                {
                    "body": "<p>I think placing text inbetween the  tags is reserved for browsers that cant handle iframes i.e...</p>\n\n<pre><code>&lt;iframe src =\"html_intro.asp\" width=\"100%\" height=\"300\"&gt;\n  &lt;p&gt;Your browser does not support iframes.&lt;/p&gt;\n&lt;/iframe&gt;\n</code></pre>\n\n<p>You use the 'src' attribute to set the source of the iframes html...</p>\n\n<p>Hope that helps <strong>:)</strong></p>\n",
                    "is_accepted": false,
                    "score": 2
                },
                {
                    "body": "<p>Chalkey is correct, you need to use the src attribute to specify the page to be contained in the iframe. Providing you do this, and the document in the iframe is in the same domain as the parent document, you can use this:</p>\n\n<pre><code>var e = document.getElementById(\"id_description_iframe\");\nif(e != null) {\n   alert(e.contentWindow.document.body.innerHTML);\n}\n</code></pre>\n\n<p>Obviously you can then do something useful with the contents instead of just putting them in an alert.</p>\n",
                    "is_accepted": false,
                    "score": -1
                },
                {
                    "body": "<p>AFAIK, an Iframe cannot be used that way. You need to point its src attribute to another page.</p>\n\n<p>Here's how to get its body content using plane old javascript. This works with both IE and Firefox.</p>\n\n<pre><code>function getFrameContents(){\n   var iFrame =  document.getElementById('id_description_iframe');\n   var iFrameBody;\n   if ( iFrame.contentDocument ) \n   { // FF\n     iFrameBody = iFrame.contentDocument.getElementsByTagName('body')[0];\n   }\n   else if ( iFrame.contentWindow ) \n   { // IE\n     iFrameBody = iFrame.contentWindow.document.getElementsByTagName('body')[0];\n   }\n    alert(iFrameBody.innerHTML);\n }\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 19
                },
                {
                    "body": "<p>Using JQuery, try this:</p>\n\n<pre><code>$(\"#id_description_iframe\").contents().find(\"body\").html()\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 43
                },
                {
                    "body": "<p>The following code is cross-browser compliant. It works in IE7, IE8, Fx 3, Safari, and Chrome, so no need to handle cross-browser issues. Did not test in IE6.</p>\n\n<pre><code>&lt;iframe id=\"iframeId\" name=\"iframeId\"&gt;...&lt;/iframe&gt;\n\n&lt;script type=\"text/javascript\"&gt;\n    var iframeDoc;\n    if (window.frames &amp;&amp; window.frames.iframeId &amp;&amp;\n        (iframeDoc = window.frames.iframeId.document)) {\n        var iframeBody = iframeDoc.body;\n        var ifromContent = iframeBody.innerHTML;\n    }\n&lt;/script&gt;\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 3
                },
                {
                    "body": "<p>use <code>content</code> in iframe with JS:</p>\n\n<pre><code>document.getElementById('id_iframe').contentWindow.document.write('content');\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 5
                },
                {
                    "body": "<p>it works perfectly for me : </p>\n\n<pre><code>document.getElementById('iframe_id').contentWindow.document.body.innerHTML;\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 4
                },
                {
                    "body": "<p>I always use the solution that can be found in jQuery's source code.</p>\n\n<p>For me it's the best and even the shortest way to get the iframes content with direct javascript. </p>\n\n<p>First get your iframe:</p>\n\n<pre><code>var iframe = document.getElementById('your-iframe-id');\n</code></pre>\n\n<p>From jQuery's source code:</p>\n\n<pre><code>var iframeDocument = iframe.contentDocument || iframe.contentWindow.document;\n</code></pre>\n\n<blockquote>\n  <p>It works even in the Internet Explorer which does this trick during the <code>contentWindow</code> property of the <code>iframe</code> object. Most other browsers uses the <code>contentDocument</code> property and that is the reason why we proof this property first in this OR condition. If it is not set try <code>contentWindow.document</code>.</p>\n</blockquote>\n\n<p>And then you can usually use <code>getElementById()</code> or even <code>querySelectorAll()</code> to select the DOM-Element from the <code>iframeDocument</code>:</p>\n\n<pre><code>var iframeContent;\n\nif (iframeDocument) {\n    iframeContent = iframeDocument.getElementById('frameBody');\n\n    // or\n    iframeContent = iframeDocument.querySelectorAll('#frameBody');\n}\n</code></pre>\n\n<p>Get just the <code>window</code> element from iframe to call some global function, e.g. <code>jQuery</code>:</p>\n\n<pre><code>var iframeWindow = iframe.contentWindow\n\nif (iframeWindow) {\n    // you can even call jQuery or other frameworks if it is loaded in the iframe\n    iframeContent = iframeWindow.jQuery('#frameBody');\n\n    // or\n    iframeContent = iframeWindow.$('#frameBody');\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 27
                }
            ],
            "body": "<pre><code>&lt;iframe id=\"id_description_iframe\" class=\"rte-zone\" height=\"200\" frameborder=\"0\" title=\"description\"&gt;\n  &lt;html&gt;\n    &lt;head&gt;&lt;/head&gt;\n    &lt;body class=\"frameBody\"&gt;\n      test&lt;br/&gt;\n    &lt;/body&gt;\n  &lt;/html&gt;\n&lt;/iframe&gt;\n</code></pre>\n\n<p>What I want to get is:</p>\n\n<pre><code>test&lt;br/&gt;\n</code></pre>\n",
            "last_activity_date": 1421924159,
            "question_id": 926916,
            "score": 48,
            "tags": [
                "javascript",
                "html",
                "iframe"
            ],
            "title": "How to get the body&#39;s content of an iframe in Javascript?"
        },
        {
            "answer_count": 6,
            "answers": [
                {
                    "body": "<p>You can get the dimensions using <code>getElement(...).width</code> and <code>...height</code>.</p>\n\n<p>Since JavaScript can't access anything on the local disk for security reasons, you can't examine local files. This is also true for files in the browser's cache.</p>\n\n<p>You really need a server which can process AJAX requests. On that server, install a service that downloads the image and saves the data stream in a dummy output which just counts the bytes. Note that you can't always rely on the <a href=\"http://tools.ietf.org/html/rfc2616#page-33\" rel=\"nofollow\">Content-length</a> header field since the image data might be encoded. Otherwise, it would be enough to send a HTTP HEAD request.</p>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p><strong>Edit</strong>:</p>\n\n<p>To get the current in-browser pixel size of a DOM element (in your case IMG elements) excluding the border and margin, you can use the <a href=\"https://developer.mozilla.org/en/DOM/element.clientWidth\">clientWidth</a> and <a href=\"https://developer.mozilla.org/en/DOM/element.clientheight\">clientHeight</a> properties.</p>\n\n<pre><code>var img = document.getElementById('imageId'); \n\nvar width = img.clientWidth;\nvar height = img.clientHeight;\n</code></pre>\n\n<p>Now to get the file size, now I can only think about the <a href=\"http://msdn.microsoft.com/en-us/library/ms533752%28VS.85%29.aspx\">fileSize property</a> that Internet Explorer exposes for document and <a href=\"http://msdn.microsoft.com/en-us/library/ms535259%28VS.85%29.aspx\">IMG</a> elements...</p>\n\n<p><strong>Edit 2:</strong> Something comes to my mind... </p>\n\n<p>To get the size of a file hosted on the server, you could simply make an <a href=\"http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.4\">HEAD HTTP Request</a> using Ajax. This kind of request is used to obtain metainformation about the url implied by the request without transferring any content of it in the response.</p>\n\n<p>At the end of the HTTP Request, we have access to the response HTTP Headers, including the <a href=\"http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.13\">Content-Length</a> which represents the size of the file in bytes.</p>\n\n<p>A basic example using raw <a href=\"http://www.w3.org/TR/XMLHttpRequest/\">XHR</a>:</p>\n\n<pre><code>var xhr = new XMLHttpRequest();\nxhr.open('HEAD', 'img/test.jpg', true);\nxhr.onreadystatechange = function(){\n  if ( xhr.readyState == 4 ) {\n    if ( xhr.status == 200 ) {\n      alert('Size in bytes: ' + xhr.getResponseHeader('Content-Length'));\n    } else {\n      alert('ERROR');\n    }\n  }\n};\nxhr.send(null);\n</code></pre>\n\n<p><strong>Note:</strong> Keep in mind that when you do Ajax requests,  you are restricted by the <a href=\"http://en.wikipedia.org/wiki/Same_origin_policy\">Same origin policy</a>, which allows you to make requests only within the same domain.</p>\n\n<p>Check a working proof of concept <a href=\"http://jsbin.com/izojo\">here</a>.</p>\n\n<p><strong>Edit 3:</strong></p>\n\n<p>1.) About the Content-Length, I think that a size mismatch could happen for example if the server response is gzipped, you can do some tests to see if this happens on your server.</p>\n\n<p>2.) For get the original dimensions of a image, you could create an IMG element programmatically, for example:</p>\n\n<pre><code>var img = document.createElement('img');\n\nimg.onload = function () { alert(img.width + ' x ' + img.height); };\n\nimg.src='http://sstatic.net/so/img/logo.png';\n</code></pre>\n",
                    "is_accepted": true,
                    "score": 47
                },
                {
                    "body": "<p>The only thing you can do is to upload the image to a server and check the image size and dimension using some server side language like C#.</p>\n\n<p>Edit:</p>\n\n<p>Your need can't be done using javascript only.</p>\n",
                    "is_accepted": false,
                    "score": -2
                },
                {
                    "body": "<p>You can find dimension of an image on the page using something like</p>\n\n<pre><code>document.getElementById('someImage').width\n</code></pre>\n\n<p>file size, however, you will have to use something server-side</p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<pre><code>var img = new Image();\nimg.src = sYourFilePath;\nvar iSize = img.fileSize;\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 2
                },
                {
                    "body": "<p>Check the uploaded image size using Javascript</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n    function check(){\n      var imgpath=document.getElementById('imgfile');\n      if (!imgpath.value==\"\"){\n        var img=imgpath.files[0].size;\n        var imgsize=img/1024; \n        alert(imgsize);\n      }\n    }\n&lt;/script&gt;\n</code></pre>\n\n<p>Html code</p>\n\n<pre><code>&lt;form method=\"post\" enctype=\"multipart/form-data\" onsubmit=\"return check();\"&gt;\n&lt;input type=\"file\" name=\"imgfile\" id=\"imgfile\"&gt;&lt;br&gt;&lt;input type=\"submit\"&gt;\n&lt;/form&gt;\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 5
                }
            ],
            "body": "<p>As part of a web app, once images have been downloaded and rendered on a web page, I need to determine an image's file size (kb) and resolution within the browser context (so I could, for example, display that info on the page. This needs to be done client-side, obviously. Must be able to be solved x-browser without an ActiveX control or Java applet (IE7+, FF3+, Safari 3+, IE6 nice to have), though it doesn't have to be the same solution per browser.</p>\n\n<p>Ideally this would be done using system Javascript, but if I absolutely need a JQuery or similar library (or a tiny subset of it), that could be done.</p>\n",
            "last_activity_date": 1404976021,
            "question_id": 1310378,
            "score": 18,
            "tags": [
                "javascript",
                "image"
            ],
            "title": "Determining image file size + dimensions via Javascript?"
        },
        {
            "answer_count": 7,
            "answers": [
                {
                    "body": "<p>Since you're using jQuery, it's worth noting that <code>this</code> is already maintained by jQuery itself:</p>\n\n<pre><code>$(\"li\").each(function(j,o){\n  $(\"span\", o).each(function(x,y){\n    alert(o + \" \" + y);\n  });\n});\n</code></pre>\n\n<p>In this example, <code>o</code> represents the <code>li</code>, whereas <code>y</code> represents the child <code>span</code>. And with <code>$.click()</code>, you can get the scope from the <code>event</code> object:</p>\n\n<pre><code>$(\"li\").click(function(e){\n  $(\"span\", this).each(function(i,o){\n    alert(e.target + \" \" + o);\n  });\n});\n</code></pre>\n\n<p>Where <code>e.target</code> represents the <code>li</code>, and <code>o</code> represents the child <code>span</code>.</p>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>You can set the scope by using the <a href=\"http://www.digital-web.com/articles/scope_in_javascript/\" rel=\"nofollow\">call() and apply() functions</a></p>\n",
                    "is_accepted": false,
                    "score": 3
                },
                {
                    "body": "<p>For preserving the context, the <code>bind</code> method is really useful, it's now part of the recently released <a href=\"http://www.ecma-international.org/publications/standards/Ecma-262.htm\">ECMAScript 5th Edition</a> Specification, the implementation of this function is simple (only 8 lines long):</p>\n\n<pre><code>// The .bind method from Prototype.js \nif (!Function.prototype.bind) { // check if native implementation available\n  Function.prototype.bind = function(){ \n    var fn = this, args = Array.prototype.slice.call(arguments),\n        object = args.shift(); \n    return function(){ \n      return fn.apply(object, \n        args.concat(Array.prototype.slice.call(arguments))); \n    }; \n  };\n}\n</code></pre>\n\n<p>And you could use it, in your example like this:</p>\n\n<pre><code>MyClass.prototype.myfunc = function() {\n\n  this.element.click((function() {\n    // ...\n  }).bind(this));\n};\n</code></pre>\n\n<p>Another example:</p>\n\n<pre><code>var obj = {\n  test: 'obj test',\n  fx: function() {\n    alert(this.test + '\\n' + Array.prototype.slice.call(arguments).join());\n  }\n};\n\nvar test = \"Global test\";\nvar fx1 = obj.fx;\nvar fx2 = obj.fx.bind(obj, 1, 2, 3);\n\nfx1(1,2);\nfx2(4, 5);\n</code></pre>\n\n<p>In this second example we can observe more about the behavior of <code>bind</code>.</p>\n\n<p>It basically generates a new function, that will be the responsible of calling our function, preserving the function context (<code>this</code> value), that is defined as the first argument of <code>bind</code>.</p>\n\n<p>The rest of the arguments are simply passed to our function.</p>\n\n<p>Note in this example that the function <code>fx1</code>, is invoked without any <em>object context</em> (<code>obj.method()</code> ), just as a simple function call, in this type of invokation, the <code>this</code> keyword inside will refer to the Global object, it will alert \"global test\".</p>\n\n<p>Now, the <code>fx2</code> is the new function that the <code>bind</code> method generated, it will call our function preserving the context and correctly passing the arguments, it will alert \"obj test 1, 2, 3, 4, 5\" because we invoked it adding the two additionally arguments, it already had <em>binded</em> the first three.</p>\n",
                    "is_accepted": true,
                    "score": 37
                },
                {
                    "body": "<p>For your last <code>MyClass</code> example, you could do this:</p>\n\n<pre><code>var myThis=this;\nthis.elements.each(function() { myThis.doSomething.apply(myThis, arguments); });\n</code></pre>\n\n<p>In the function that is passed to <code>each</code>, <code>this</code> refers to a jQuery object, as you already know. If inside that function you get the <code>doSomething</code> function from <code>myThis</code>, and then call the apply method on that function with the arguments array (see the <a href=\"https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Global_Objects/Function/apply\"><code>apply</code> function</a> and the <a href=\"https://developer.mozilla.org/En/Core_JavaScript_1.5_Reference/Functions_and_function_scope/arguments\"><code>arguments</code> variable</a>), then <code>this</code> will be set to <code>myThis</code> in <code>doSomething</code>.</p>\n",
                    "is_accepted": false,
                    "score": 6
                },
                {
                    "body": "<p>Another solution (and my favorite way in jQuery) is to use the jQuery provided 'e.data' to pass 'this'. Then you can do this:</p>\n\n<pre><code>this.element.bind('click', this, function(e) {\n    e.data.myValue; //e.data now references the 'this' that you want\n});\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>You can create a reference to the this object or you can use the <code>with (this)</code> method. The later is extremely useful when your using event handlers and you have no way of passing in a reference.</p>\n\n<pre><code>MyClass = function() {\n    // More code here ...\n}\n\nMyClass.prototype.myfunc = function() {       \n    // Create a reference\n    var obj = this;\n    this.element.click(function() {\n        // \"obj\" refers to the original class instance            \n        with (this){\n            // \"this\" now also refers to the original class instance\n        }\n    });\n\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": -1
                },
                {
                    "body": "<p>I realize this is an old thread, but I have a solution that is much more elegant, and has few drawbacks apart from the fact that it is not generally done, as I have noticed. </p>\n\n<p>Consider the following: </p>\n\n<pre><code>var f=function(){\n    var context=this;\n}    \n\nf.prototype.test=function(){\n    return context;\n}    \n\nvar fn=new f();\nfn.test(); \n// should return undefined because the prototype definition\n// took place outside the scope where 'context' is available\n</code></pre>\n\n<p>In the function above we defined a local variable (context). We then added a prototypical function (test) that returns the local variable. As you have probably predicted, when we create an instance of this function and then execute the test method, it does not return the local variable because when we defined the prototypical function as a member to our main function, it was outside the scope where the local variable is defined.\nThis is a general problem with creating functions and then adding prototypes to it - you cannot access anything that was created in the scope of the main function.</p>\n\n<p>To create methods that are within the scope of the local variable, we need to directly define them as members of the function and get rid of the prototypical reference:</p>\n\n<pre><code>var f=function(){\n    var context=this;    \n\n    this.test=function(){\n        console.log(context);\n        return context;\n    };\n}    \n\nvar fn=new(f);\nfn.test(); \n//should return an object that correctly references 'this'\n//in the context of that function;    \n\nfn.test().test().test(); \n//proving that 'this' is the correct reference;\n</code></pre>\n\n<p>You may be worried that because the methods are not being created prototypically, different instances may not really be data-separated. To demonstrate that they are, consider this: </p>\n\n<pre><code>var f=function(val){\n    var self=this;\n    this.chain=function(){\n        return self;\n    };    \n\n    this.checkval=function(){\n        return val;\n    };\n}    \n\nvar fn1=new f('first value');\nvar fn2=new f('second value');    \n\nfn1.checkval();\nfn1.chain().chain().checkval();\n// returns 'first value' indicating that not only does the initiated value remain untouched,\n// one can use the internally stored context reference rigorously without losing sight of local variables.     \n\nfn2.checkval();\nfn2.chain().chain().checkval();\n// the fact that this set of tests returns 'second value'\n// proves that they are really referencing separate instances\n</code></pre>\n\n<p>Another way to use this method is to create singletons. More often than not, our javascript functions are not being instantiated more than once. If you know that you will never need a second instance of the same function, then there is a shorthand way to create them. Be warned, however: lint will complain that it is a weird construction, and question your use of the keyword 'new':</p>\n\n<pre><code>fn=new function(val){\n    var self=this;\n    this.chain=function(){\n        return self;\n    };        \n\n    this.checkval=function(){\n        return val;\n    };  \n}    \n\nfn.checkval();\nfn.chain().chain().checkval();\n</code></pre>\n\n<p><strong>Pro's:</strong>\nThe benefits to using this method to create function objects are plentiful. </p>\n\n<ul>\n<li>It makes your code easier to read, since it indents the methods of a function object in a way that makes it visually easier to follow. </li>\n<li>It allows access to the locally defined variables <strong><em>only in methods originally defined in this manner</em></strong> even if you later add prototypical functions or even member functions to the function-object, it cannot access the local variables and whatever functionality or data you store on that level remains safe and inaccessible from anywhere else.</li>\n<li>It allows a simple and straight-forward way to define singletons.</li>\n<li>It allows you to store a reference to 'this' and maintain that reference indefinitely.</li>\n</ul>\n\n<p><strong>Con's:</strong>\nThere are some drawbacks to using this method. I don't pretend to be comprehensive :)</p>\n\n<ul>\n<li><strike>Because the methods are defined as members to the object and not prototypes - inheritance can be achieved using member definition but not prototypical definitions.</strike> This is actually incorrect. The same prototypical inheritance can be achieved by acting on <code>f.constructor.prototype</code>. </li>\n</ul>\n",
                    "is_accepted": false,
                    "score": 1
                }
            ],
            "body": "<p>I'm just getting into using prototypal JavaScript and I'm having trouble figuring out how to preserve a <code>this</code> reference to the main object from inside a prototype function when the scope changes. Let me illustrate what I mean (I'm using jQuery here):</p>\n\n<pre><code>MyClass = function() {\n  this.element = $('#element');\n  this.myValue = 'something';\n\n  // some more code\n}\n\nMyClass.prototype.myfunc = function() {\n  // at this point, \"this\" refers to the instance of MyClass\n\n  this.element.click(function() {\n    // at this point, \"this\" refers to the DOM element\n    // but what if I want to access the original \"this.myValue\"?\n  });\n}\n\nnew MyClass();\n</code></pre>\n\n<p>I know that I can preserve a reference to the main object by doing this at the beginning of <code>myfunc</code>:</p>\n\n<pre><code>var myThis = this;\n</code></pre>\n\n<p>and then using <code>myThis.myValue</code> to access the main object's property. But what happens when I have a whole bunch of prototype functions on <code>MyClass</code>? Do I have to save the reference to <code>this</code> at the beginning of each one? Seems like there should be a cleaner way. And what about a situation like this:</p>\n\n<pre><code>MyClass = function() {\n  this.elements $('.elements');\n  this.myValue = 'something';\n\n  this.elements.each(this.doSomething);\n}\n\nMyClass.prototype.doSomething = function() {\n  // operate on the element\n}\n\nnew MyClass();\n</code></pre>\n\n<p>In that case, I can't create a reference to the main object with <code>var myThis = this;</code> because even the original value of <code>this</code> within the context of <code>doSomething</code> is a <code>jQuery</code> object and not a <code>MyClass</code> object.</p>\n\n<p>It's been suggested to me to use a global variable to hold the reference to the original <code>this</code>, but that seems like a really bad idea to me. I don't want to pollute the global namespace and that seems like it would prevent me from instantiating two different <code>MyClass</code> objects without them interfering with each other.</p>\n\n<p>Any suggestions? Is there a clean way to do what I'm after? Or is my entire design pattern flawed?</p>\n",
            "last_activity_date": 1423566335,
            "question_id": 2025789,
            "score": 47,
            "tags": [
                "javascript",
                "oop",
                "scope",
                "this",
                "prototype-programming"
            ],
            "title": "Preserving a reference to &quot;this&quot; in JavaScript prototype functions"
        },
        {
            "answer_count": 1,
            "answers": [
                {
                    "body": "<p>I described in <a href=\"http://stackoverflow.com/a/6575634/315935\">the answer</a> one good way how you can implement the highlighting.</p>\n\n<p>Version 4.3.2 of jqGrid has new feature - <code>rowattr</code> callback (see <a href=\"http://www.trirand.com/blog/?page_id=393/feature-request/introduce-rowattr-jqgrid-like-cellattr-but-for-setting-attributes-on-tr-element-instead-of-td/#p26208\" rel=\"nofollow\">my original suggestion</a>), which was introduced especially for cases like yours. It allows you to highlight some rows of grid <em>during filling</em> of the grid. To have the best performance advantage you should use <code>gridview: true</code> additionally. By the way <strong>I recommend you to use <code>gridview: true</code> in all jqGrids</strong>.</p>\n\n<p>The usage of <code>rowattr</code> callback is very easy:</p>\n\n<pre><code>gridview: true,\nrowattr: function (rd) {\n    if (rd.GroupHeader === \"1\") { // verify that the testing is correct in your case\n        return {\"class\": \"myAltRowClass\"};\n    }\n}\n</code></pre>\n\n<p>The CSS class <code>myAltRowClass</code> should define background color of highlighted rows.</p>\n\n<p>The corresponding demo you can find <a href=\"http://www.ok-soft-gmbh.com/jqGrid/SimpleLocalGridChangeRowBackgroundBasedOnCheckboxes3.htm\" rel=\"nofollow\">here</a>:</p>\n\n<p><img src=\"http://i.stack.imgur.com/Lp7Te.png\" alt=\"enter image description here\"></p>\n\n<p>Because in your demo you need just highlight and not select the rows I didn't used <code>multiselect: true</code> in my demo. In case of <code>multiselect: true</code> it works exactly in the same way.</p>\n\n<p>At the end of my answer I would like to recommend you to use <a href=\"http://stackoverflow.com/a/6047856/315935\">column templates</a>. The feature will make your code shorter, more readable and easy to maintain. What you need to do is the following:</p>\n\n<ul>\n<li>you can include common or the most frequently used settings from column definitions in <code>cmTemplete</code>. In your case it could be</li>\n</ul>\n\n<pre class=\"lang-js prettyprint-override\"><code>cmTemplate: {align: 'center', sortable: false, editable: true, width: 80}\n</code></pre>\n\n<ul>\n<li>then you can define some variables which describe common properties which you use frequently in some columns. For example:</li>\n</ul>\n\n<pre class=\"lang-js prettyprint-override\"><code>var myCheckboxTemplate = {formatter: 'checkbox', edittype: 'checkbox', type: 'select',\n        editoptions: {value: \"1:0\"}},\n    myTextareaTemplate = {edittype: \"textarea\",\n        editoptions: {size: \"30\", maxlength: \"30\"}};\n</code></pre>\n\n<ul>\n<li>after that you can use <code>myCheckboxTemplate</code> and <code>myTextareaTemplate</code> inside of <code>colModel</code> which will reduced in your case to the following</li>\n</ul>\n\n<pre class=\"lang-js prettyprint-override\"><code>colModel: [\n    {name: 'TypeID', index: 'TypeID', width: 350, hidden: true, edittype: \"select\",\n        editoptions: {value: getTypeID()}, editrules: { edithidden: true}},\n    {name: 'Order1', index: 'Order1', template: myTextareaTemplate},\n    {name: 'Order2', index: 'Order2', template: myTextareaTemplate},\n    {name: 'Order3', index: 'Order3', template: myTextareaTemplate},\n    {name: 'Description', index: 'Description', width: 140, template: myTextareaTemplate},\n    {name: 'Notes', index: 'Notes', width: 120, template: myTextareaTemplate},\n    {name: 'Measure', index: 'Measure', template: myTextareaTemplate},\n    {name: 'UnitPrice', index: 'UnitPrice', width: 100, editable: false, template: myTextareaTemplate},\n    {name: 'Remarks', index: 'Remarks', width: 140, template: myTextareaTemplate},\n    {name: 'UnitCost', index: 'UnitCost', width: 100, template: myTextareaTemplate},\n    {name: 'Service', index: 'Service', width: 120, template: myTextareaTemplate},\n    //If the GroupHeader is true the row background is yellow\n    {name: 'GroupHeader', index: 'GroupHeader', width: 100, template: myCheckboxTemplate},\n    {name: 'IsGroup', index: 'IsGroup', template: myCheckboxTemplate}\n],\ncmTemplate: {align: 'center', sortable: false, editable: true, width: 80},\n</code></pre>\n",
                    "is_accepted": true,
                    "score": 25
                }
            ],
            "body": "<p>Can Some one help me, I have a jqgrid and I want to highlight the row if the checkbox is true, thanks!!</p>\n\n<p><img src=\"http://i.stack.imgur.com/gNi4x.jpg\" alt=\"enter image description here\"></p>\n\n<p>this is what i want to make in this project...</p>\n\n<pre><code>function loadjqGrid(jsonGridData){\n    var xaxis=1300\n    var yaxis = $(document).height();\n    yaxis = yaxis-500;\n    getGrids();     \n    $(\"#maingrid\").jqGrid({\n        url:'models/mod.quoservicetypedetails.php?ACTION=view',\n        mtype: 'POST',\n        datatype: 'xml',\n        colNames:getColumnNames(jsonGridData),\n        colModel :[ \n            {name:'TypeID', index:'TypeID', width:350,hidden:true, align:'center',sortable:false,editable:true,\n            edittype:\"select\",editoptions:{value:getTypeID()},editrules: { edithidden: true}},  \n            {name:'Order1', index:'Order1', width:80, align:'center',sortable:false,editable:true,edittype:\"textarea\",editoptions:{size:\"30\",maxlength:\"30\"}},                  \n            {name:'Order2', index:'Order2', width:80, align:'center',sortable:false,editable:true,edittype:\"textarea\",editoptions:{size:\"30\",maxlength:\"30\"}}, \n            {name:'Order3', index:'Order3', width:80, align:'center',sortable:false,editable:true,edittype:\"textarea\",editoptions:{size:\"30\",maxlength:\"30\"}},                      \n            {name:'Description', index:'Description', width:140, align:'center',sortable:false,editable:true,\n            edittype:\"textarea\",editoptions:{size:\"30\",maxlength:\"30\"}},                    \n            {name:'Notes', index:'Notes', width:120, align:'center',sortable:false,editable:true,edittype:\"textarea\",editoptions:{size:\"30\",maxlength:\"30\"}}, \n            {name:'Measure', index:'Measure', width:80, align:'center',sortable:false,editable:true, edittype:\"textarea\", editoptions:{size:\"30\",maxlength:\"30\"}},                  \n            {name:'UnitPrice', index:'UnitPrice', width:100, align:'center',sortable:false,editable:false,edittype:\"textarea\",editoptions:{size:\"30\",maxlength:\"30\"}},  \n            {name:'Remarks', index:'Remarks', width:140, align:'center',sortable:false,editable:true,edittype:\"textarea\",editoptions:{size:\"30\",maxlength:\"30\"}}, \n            {name:'UnitCost', index:'UnitCost', width:100, align:'center',sortable:false,editable:true,edittype:\"textarea\",editoptions:{size:\"30\",maxlength:\"30\"}},     \n            {name:'Service', index:'Service', width:120, align:'center',sortable:false,editable:true,edittype:\"textarea\",editoptions:{size:\"30\",maxlength:\"30\"}}, \n            //If the GroupHeader is true the row background is yellow\n            {name:'GroupHeader', index:'GroupHeader', width:100, align:'center',sortable:false,editable:true,formatter:'checkbox', edittype:'checkbox', type:'select', editoptions:{value:\"1:0\"}}, \n            {name:'IsGroup', index:'IsGroup', width:80, align:'center',sortable:false,editable:true,formatter:'checkbox', edittype:'checkbox', type:'select', editoptions:{value:\"1:0\"}}, \n        ],\n        viewrecords: true,  \n        rowNum:20,\n        sortname: 'id', \n        viewrecords: true, \n        sortorder: \"desc\",\n        height: yaxis,\n        pager : '#gridpager',\n        recordtext: \"View {0} - {1} of {2}\",\n        emptyrecords: \"No records to view\",\n        loadtext: \"Loading...\",\n        pgtext : \"Page {0} of {1}\",         \n        height: yaxis,\n        width: xaxis,\n        shrinkToFit: false,\n        multiselect: true,\n        editurl:'models/mod.quoservicetypedetails.php?ACTION=edit'\n    }); \n}\n</code></pre>\n\n<p>How could I do this? Can someone help me?</p>\n",
            "last_activity_date": 1426082590,
            "question_id": 10529955,
            "score": 13,
            "tags": [
                "php",
                "javascript",
                "jqgrid",
                "jqgrid-php"
            ],
            "title": "Highlight row when the checkbox is true"
        },
        {
            "answer_count": 7,
            "answers": [
                {
                    "body": "<p>_GET accesses query string variables, test is not a querystring variable (PHP does not process the JS in any way).  You need to rethink.  You could make a php variable $test, and do something like:</p>\n\n<pre><code>&lt;?php\n$test = \"tester\";\n?&gt;\n&lt;script type=\"text/javascript\" charset=\"utf-8\"&gt;\n    var test = \"&lt;?php echo $test?&gt;\";\n&lt;/script&gt;\n\n&lt;?php\n    echo $test;\n?&gt;\n</code></pre>\n\n<p>Of course, I don't know why you want this, so I'm not sure the best solution.</p>\n\n<p>EDIT: As others have noted, if the JavaScript variable is really generated on the client, you will need AJAX or a form to send it to the server.</p>\n",
                    "is_accepted": false,
                    "score": 2
                },
                {
                    "body": "<p>JS ist browser-based, PHP is server-based. You have to generate some browser-based request/signal to get the data from the JS into the PHP. Take a look into <a href=\"http://en.wikipedia.org/wiki/Ajax_%28programming%29\" rel=\"nofollow\">Ajax</a>.</p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>The short answer is <strong>you can't</strong>.</p>\n\n<p>I don't know any PHP syntax, but what I can tell you is that PHP is executed on the server and JavaScript is executed on the client (on the browser).</p>\n\n<p>You're doing a $_GET, which is used to <a href=\"http://www.w3schools.com/PHP/php_get.asp\">retrieve form values</a>:</p>\n\n<blockquote>\n  <p>The built-in $_GET function is used to collect values in a form with method=\"get\".</p>\n</blockquote>\n\n<p>In other words, if on your page you had:</p>\n\n<pre><code>&lt;form method=\"get\" action=\"blah.php\"&gt;\n    &lt;input name=\"test\"&gt;&lt;/input&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>Your $_GET call would retrieve the value in that input field.</p>\n\n<p>So how to retrieve a value from JavaScript?</p>\n\n<p>Well, you could stick the javascript value in a hidden form field...</p>\n\n<pre><code>&lt;script type=\"text/javascript\" charset=\"utf-8\"&gt;\n    var test = \"tester\";\n    // find the 'test' input element and set its value to the above variable\n    document.getElementByID(\"test\").value = test;\n&lt;/script&gt;\n\n... elsewhere on your page ...\n\n&lt;form method=\"get\" action=\"blah.php\"&gt;\n    &lt;input id=\"test\" name=\"test\" visibility=\"hidden\"&gt;&lt;/input&gt;\n    &lt;input type=\"submit\" value=\"Click me!\"&gt;&lt;/input&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>Then, when the user clicks your submit button, he/she will be issuing a \"GET\" request to blah.php, sending along the value in 'test'.</p>\n",
                    "is_accepted": true,
                    "score": 17
                },
                {
                    "body": "<p>As JavaScript is a client-side language and PHP is a server-side language you would need to physically push the variable to the PHP script, by either including the variable on the page load of the PHP script (script.php?var=test), which really has nothing to do with JavaScript, or by passing the variable to the PHP via an AJAX/AHAH call each time the variable is changed.</p>\n\n<p>If you did want to go down the second path, you'd be looking at XMLHttpRequest, or my preference, jQuerys Ajax calls: <a href=\"http://docs.jquery.com/Ajax\" rel=\"nofollow\">http://docs.jquery.com/Ajax</a></p>\n",
                    "is_accepted": false,
                    "score": 3
                },
                {
                    "body": "<p>If showing data to the user, do a redirect:</p>\n\n<pre><code>&lt;script language=\"JavaScript\"&gt;\n    var tester = \"foobar\";\n    document.location=\"http://www.host.org/myphp.php?test=\" + tester;\n&lt;/script&gt;\n</code></pre>\n\n<p>or an iframe:</p>\n\n<pre><code>&lt;script language=\"JavaScript\"&gt;\n    var tester = \"foobar\";\n    document.write(\"&lt;iframe src=\\\"http://www.host.org/myphp.php?test=\" + tester + \"\\\"&gt;&lt;/iframe&gt;\");\n&lt;/script&gt;\n</code></pre>\n\n<p>If you don't need user output, create an iframe with width=0 and height=0.</p>\n",
                    "is_accepted": false,
                    "score": 2
                },
                {
                    "body": "<p>Well the problem with the GET is that the user is able to change the value by himself if he has some knowledges. I wrote this so that PHP is able to retrive the timezone from Javascript: </p>\n\n<p>// -- index.php</p>\n\n<pre><code>&lt;?php\n  if (!isset($_COOKIE['timezone'])) {\n?&gt;\n&lt;html&gt;\n&lt;script language=\"javascript\"&gt;  \n  var d = new Date(); \n  var timezoneOffset = d.getTimezoneOffset() / 60;\n  // the cookie expired in 3 hours\n  d.setTime(d.getTime()+(3*60*60*1000));\n  var expires = \"; expires=\"+d.toGMTString();\n  document.cookie = \"timezone=\" +  timezoneOffset + expires + \"; path=/\";\n  document.location.href=\"index.php\"\n&lt;/script&gt;\n&lt;/html&gt;\n&lt;?php\n} else {\n  ?&gt;\n\n  &lt;html&gt;\n  &lt;head&gt;\n  &lt;body&gt;\n\n  &lt;?php \n  if(isset($_COOKIE['timezone'])){ \n    dump_var($_COOKIE['timezone']); \n  } \n}\n?&gt;\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 1
                },
                {
                    "body": "<p>Simple answer would be to use a hidden field in the form\nset value for hidden field access that with form.\nhidden will be working as TEMP.</p>\n",
                    "is_accepted": false,
                    "score": 0
                }
            ],
            "body": "<p>I need to access a <strong>JavaScript</strong> variable with <strong>PHP</strong>. Here's a stripped-down version of the code I'm currently trying, which isn't working:</p>\n\n<pre><code>&lt;script type=\"text/javascript\" charset=\"utf-8\"&gt;\n    var test = \"tester\";\n&lt;/script&gt;\n\n&lt;?php\n    echo $_GET['test'];\n?&gt;\n</code></pre>\n\n<p>I'm a completely new to both JavaScript and PHP, so I would really appreciate any advice.</p>\n\n<p><strong>UPDATE</strong>: OK, I guess I simplified that too much. What I'm trying to do is create a form that will update a Twitter status when submitted. I've got the form working OK, but I want to also add geolocation data. Since I'm using Javascript (specifically, the Google Geolocation API) to get the location, how do I access that information with PHP when I'm submitting the form?</p>\n",
            "last_activity_date": 1387633328,
            "question_id": 2338942,
            "score": 13,
            "tags": [
                "php",
                "javascript",
                "variables"
            ],
            "title": "Access a JavaScript variable from PHP"
        },
        {
            "answer_count": 2,
            "answers": [
                {
                    "body": "<p>You can use the <code>DOMNodeInserted</code> event to call you callback, e.g.:</p>\n\n<pre><code>document.addEventListener('DOMNodeInserted', function() { alert('hi') }, false);\n</code></pre>\n\n<p>Note that the event will be triggered by any change in the page structure, so you'll have to check that you're targeting the right change.</p>\n",
                    "is_accepted": false,
                    "score": 2
                },
                {
                    "body": "<p>The simplest, most robust way is to use <a href=\"https://gist.github.com/2625891\">the waitForKeyElements() utility</a>.</p>\n\n<p>Here is a <strong><em>complete script</em></strong> that uses jQuery and <code>waitForKeyElements</code> to alter Amazon search results:</p>\n\n<pre><code>// ==UserScript==\n// @name     _Amazon Search, alter results\n// @include  http://www.amazon.com/s/*\n// @require  http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js\n// @require  https://gist.github.com/raw/2625891/waitForKeyElements.js\n// @grant    GM_addStyle\n// ==/UserScript==\n/*- The @grant directive is needed to work around a design change\n    introduced in GM 1.0.   It restores the sandbox.\n*/\n\nfunction addCustomSearchResult (jNode) {\n    //***** YOUR CODE HERE *****\n    jNode.prepend (\n        '&lt;div id=\"result_000\" class=\"fstRow\"&gt;Buy my stuff, instead!&lt;/div&gt;'\n    );\n}\n\nwaitForKeyElements (\"#atfResults\", addCustomSearchResult);\n</code></pre>\n",
                    "is_accepted": true,
                    "score": 17
                }
            ],
            "body": "<p>I'm totally new to Greasemonkey, javascript, in fact all the UI stuff. </p>\n\n<p>Requirement: Userscript is run by GS once after the page loads. However, I need the same script to be run multiple times without refresh</p>\n\n<p>Use case: For ex, Amazon.com search happens using Ajax. I need to embed a custom element in the search results. </p>\n\n<p>I need to inject my content to the search-results-div along with the results every time a search happens in the same page (there's no page refresh)</p>\n\n<p>My current script runs only with the page refresh. </p>\n\n<p>I hope above explanation is clear. Please help.</p>\n",
            "last_activity_date": 1369657272,
            "question_id": 11195658,
            "score": 8,
            "tags": [
                "javascript",
                "ajax",
                "greasemonkey"
            ],
            "title": "Run Greasemonkey script on the same page, multiple times?"
        },
        {
            "answer_count": 6,
            "answers": [
                {
                    "body": "<p>You could say the same about CSS and including inline styles. It would be easy to not have to wade through a css file to find the current class/id, or parent/child elements your working with.</p>\n\n<p>Is it really better to bind a click to say 10 different items inline? Or just one event handler targeting a class? Even if you don't need 10 click handlers its always a better idea to set your code up for maintainability, and upgrades down the road.</p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>Basically it has to do with the whole keep everything separate I believe. So keep HTML/CSS/JS all separate. It makes your HTML tidier and, I think, easier to navigate without.</p>\n\n<p>Then when/if you need to make large changes, you have ample space with having to shift the inline JS to an external file anyway OR if you want to apply the same function to more than one button, then it's less code. And less code is a happier place</p>\n\n<p>If you have your JS files properly, and thoroughly documented then navigating them by an outside person is made eaiser</p>\n",
                    "is_accepted": true,
                    "score": 5
                },
                {
                    "body": "<p>i'm not aware of and advantage of using inline handler vs attach the handler later. In my experience i prefer to use the inline method when i have to deal with dynamic element, for example i want to add an handler to each image and the number of images changes according to other data (ex images in db). In this case using inline allow me to add an handler to each image, otherwise i have to recalculate the number of images in the javascript file to attach and handler to each image.</p>\n\n<p>Off course when you can use libs like jQuery where you can easily get the list of elements inline aren't useful</p>\n",
                    "is_accepted": false,
                    "score": 0
                },
                {
                    "body": "<p>There are a lot of reasons to avoid inline JavaScript and one of the perhaps most important is code maintainability.</p>\n\n<p>A quick example (I am using jQuery simply for demonstration purposes).</p>\n\n<pre><code>&lt;p class=\"element\" onclick=\"doSomething();\"&gt;Click me&lt;/p&gt;\n&lt;p class=\"element\" onclick=\"doSomething();\"&gt;Click me&lt;/p&gt;\n&lt;p class=\"element\" onclick=\"doSomething();\"&gt;Click me&lt;/p&gt;\n&lt;p class=\"element\" onclick=\"doSomething();\"&gt;Click me&lt;/p&gt;\n&lt;p class=\"element\" onclick=\"doSomething();\"&gt;Click me&lt;/p&gt;\n&lt;p class=\"element\" onclick=\"doSomething();\"&gt;Click me&lt;/p&gt;\n</code></pre>\n\n<p>What if suddenly you get a request to change all your paragraphs to execute another function? In your example you would have to change everything manually in your HTML code. However if you choose to separate HTML from JavaScript you could simply do it like this.</p>\n\n<pre><code>&lt;p class=\"element\"&gt;Click me&lt;/p&gt;\n&lt;p class=\"element\"&gt;Click me&lt;/p&gt;\n&lt;p class=\"element\"&gt;Click me&lt;/p&gt;\n&lt;p class=\"element\"&gt;Click me&lt;/p&gt;\n&lt;p class=\"element\"&gt;Click me&lt;/p&gt;\n&lt;p class=\"element\"&gt;Click me&lt;/p&gt;\n\n$('.element').bind('click', doSomethingElse);\n</code></pre>\n\n<p>The HTML code is also cleaner which allows the designers to focus exclusively on design without fear that they might actually break something while working on a project which also involves other people.</p>\n\n<p><strong>EDIT:</strong> Providing example for my comment bellow.</p>\n\n<pre><code>Project = {\n    // All the variables/constants/objects that need to be globally accessible inside the Project object.\n\n    init : function(){\n        // Main entry point...\n        this.MainMenu.init();\n\n        // Rest of the code which should execute the moment Project is initiated.\n    }\n}\n\nProject.MainMenu = {\n    // All the variables/constants/objects that need to be accessible only to MainMenu.\n\n    init : function(){ // Is run immediatelly by Project.init()\n        // Event handlers relevant to the main menu are bound here\n\n        // Rest of the initialization code\n    }\n}\n\nProject.SlideShow = {\n    // All the variables/constants/objects that need to be accessible only to SlideShow.\n\n    init : function(){ // Is run only on pages that really require it.\n        // Event handlers for the slideshow.\n    }\n}\n</code></pre>\n",
                    "is_accepted": false,
                    "score": 4
                },
                {
                    "body": "<p>Despite what other people may think, I think there are redeeming value to inlining listeners in markup. Specifically, it gives you a lot more freedom to modifying the DOM nodes. If you're adding listeners though JavaScript, the listeners are lost when you replace the innerHTML of any parent nodes. If you're inlining the listeners in markup, you can clone the node, make modifications to it, then replace the original node with the node you just cloned and modified.</p>\n\n<p>Perhaps it's better to describe it in a specific use case. I want to make changes to multiple part of the document without triggering reflow multiple times. So in this case, I can clone the node, make any change to it (no reflow since its detached), then replace the previous node with the modified one (triggering one reflow). With inlined listeners, this prevents any listeners from getting lost during the replacement.</p>\n",
                    "is_accepted": false,
                    "score": 2
                },
                {
                    "body": "<p>One big argument against inline event handlers, and the argument that is addressed by the other answers here is <a href=\"http://www.digital-web.com/articles/separating_behavior_and_structure_2/\" rel=\"nofollow\">the separation of presentation and logic</a>.</p>\n\n<p>However, there is actually a bigger problem IMO: The somehow elusive way how inline event handlers are evaluated.</p>\n\n<p>As you may now, the content of the <code>on*</code> attributes will be used as <em>body</em> of the event handler function. But what characteristics does this function have?</p>\n\n<p>One of the surprising ones is that <strong>properties of some ancestor elements</strong> and of <strong>the element itself</strong> are in the <strong>scope</strong> of the inline event handler. </p>\n\n<p><a href=\"http://jsfiddle.net/LHJJj/2/\" rel=\"nofollow\">Here is an example</a>:</p>\n\n<pre><code>&lt;form&gt;\n    &lt;input name=\"foo\" /&gt;\n    &lt;button type=\"button\" onclick=\"console.log(foo); console.log(window.foo);\"&gt;\n        Click me\n    &lt;/button&gt;\n    &lt;div onclick=\"console.log(foo);\"&gt;Click me as well!&lt;/div&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>Clicking the <code>button</code> logs </p>\n\n<pre><code>[object HTMLInputElement]\nundefined\n</code></pre>\n\n<p>in the console. The fact that <code>window.foo</code> is <code>undefined</code> tells you that there is no global variable <code>foo</code>. So where does the variable <code>foo</code> come from? Why does <code>console.log(foo)</code> log the input element and not throw a reference error?<br>\nBecause the properties of the <code>form</code> element are in the scope of the event handler and the <code>form</code> element has a property for each named form control element it contains. You can easily test this with <code>console.log(document.querySelector('form').foo)</code>.</p>\n\n<p>Now, clicking the <code>div</code> element actually throws a reference error:</p>\n\n<blockquote>\n  <p><code>ReferenceError: foo is not defined</code></p>\n</blockquote>\n\n<p>So apparently the <code>form</code> element is only in scope of form control elements, not any descendant. How confusing is that?</p>\n\n<p>Similarly, the <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/document\" rel=\"nofollow\">properties of the <code>document</code></a> object are also in the scope of inline event handlers, which <a href=\"http://jsfiddle.net/MSLWL/\" rel=\"nofollow\">can lead to some surprising bugs</a> (did you know that <code>document</code> has a property <code>plugins</code>?).</p>\n\n<hr>\n\n<p><strong>Conclusion</strong>:</p>\n\n<p>Because of this  <em>implicit</em> connection between elements and inline event handlers, bugs can be really hard to track. It's of course fine to use inline event handlers if you just want to test something. But using them in production code comes with a higher maintenance cost.</p>\n\n<p><a href=\"http://www.quirksmode.org/js/introevents.html\" rel=\"nofollow\">The articles at quirksmode.org</a> explain the different ways of binding event handlers and their (dis)advantages very well.</p>\n",
                    "is_accepted": false,
                    "score": 12
                }
            ],
            "body": "<p>If I want a function to be executed, I prefer doing inline js:</p>\n\n<pre><code>&lt;p id=\"element\" onclick=\"doSomething();\"&gt;Click me&lt;/p&gt;\n</code></pre>\n\n<p>because it is easier to debug.</p>\n\n<p>However, I hear people saying not to use inline js, and do:</p>\n\n<pre><code>document.getElementById('element').onclick = doSomething;\n</code></pre>\n\n<p>Why is the js event listener recommended?</p>\n",
            "last_activity_date": 1416376389,
            "question_id": 6941483,
            "score": 15,
            "tags": [
                "javascript",
                "event-handling",
                "inline-code"
            ],
            "title": "onclick=&quot;&quot; vs event handler"
        },
        {
            "answer_count": 2,
            "answers": [
                {
                    "body": "<p>There is no inconsistency. Just don't think of nested objects: a <em>direct</em> property of an object is always either on its prototype or an own property. It's irrelevant wheter the property value a primitive or an object.</p>\n\n<p>So, when you do</p>\n\n<pre><code>var parent = {\n    x: {a:0}\n};\nvar child = Object.create(parent);\n</code></pre>\n\n<p><code>child.x</code> will be referencing the same object as <code>parent.x</code> - that one <code>{a:0}</code> object. And when you change a property of it:</p>\n\n<pre><code>var prop_val = child.x; // == parent.x\nprop_val.a = 1;\n</code></pre>\n\n<p>both will be affected. To change a \"nested\" property independently, you first will have to create an independent object:</p>\n\n<pre><code>child.x = {a:0};\nchild.x.a = 1;\nparent.x.a; // still 0\n</code></pre>\n\n<p>What you can do is</p>\n\n<pre><code>child.x = Object.create(parent.x);\nchild.x.a = 1;\ndelete child.x.a; // (child.x).a == 0, because child.x inherits from parent.x\ndelete child.x; // (child).x.a == 0, because child inherits from parent\n</code></pre>\n\n<p>which means they are not absolutely independent - but still two different objects.</p>\n",
                    "is_accepted": true,
                    "score": 7
                },
                {
                    "body": "<p>I think what's happening is that when you create <code>person2</code>, the <code>sex</code> and <code>info</code> properties of it refer to those in <code>nestObj</code>. When you reference <code>person2.info</code>, since <code>person2</code> doesn't redefine the <code>info</code> property, it goes through to the prototype and modifies the object there.</p>\n\n<p>It looks like the \"right\" way to do it is the way you build <code>person3</code>, so that the object has its own <code>info</code> object to modify and doesn't go up to the prototype.</p>\n\n<p>I'm reading the book too (slowly), so I sympathize with you. :)</p>\n",
                    "is_accepted": false,
                    "score": 1
                }
            ],
            "body": "<p>I've been reading \"Javascript: The Good Parts\" by Douglas Crockford - and while it's a bit extreme, I'm on board with a lot of what he has to say.  </p>\n\n<p>In chapter 3, he discusses objects and at one point lays out a pattern (also <a href=\"http://javascript.crockford.com/prototypal.html\" rel=\"nofollow\">found here</a>) for simplifying &amp; avoiding some of the confusion/issues that come with the use of the built-in \"new\" keyword.</p>\n\n<pre><code>if (typeof Object.create !== 'function') {\n    Object.create = function (o) {\n        function F() {}\n        F.prototype = o;\n        return new F();\n    };\n}\nnewObject = Object.create(oldObject);\n</code></pre>\n\n<p>So I've tried using this in a project I'm working on, and I noticed an issue when attempting to inherit from objects that are nested.  If I overwrite a value of a nested object inherited using this pattern, it overwrites the nested element all the way up the prototype chain.</p>\n\n<p>Crockford's example is like the <code>flatObj</code> in the following example, which works well. The behaviour, however, is inconsistent with nested objects:</p>\n\n<pre><code>var flatObj = {\n    firstname: \"John\",\n    lastname: \"Doe\",\n    age: 23\n}\nvar person1 = Object.create(flatObj);\n\nvar nestObj = {\n    sex: \"female\",\n    info: {\n        firstname: \"Jane\",\n        lastname: \"Dough\",\n        age: 32  \n    }\n}\nvar person2 = Object.create(nestObj);\n\nvar nestObj2 = {\n    sex: \"male\",\n    info: {\n        firstname: \"Arnold\",\n        lastname: \"Schwarzenneger\",\n        age: 61  \n    }\n}\nvar person3 = {\n    sex: \"male\"\n}\nperson3.info = Object.create(nestObj2.info);\n\n// now change the objects:\nperson1.age = 69;\nperson2.info.age = 96;\nperson3.info.age = 0;\n\n// prototypes should not have changed:\nflatObj.age // 23\nnestObj.info.age // 96 ???\nnestObj2.info.age // 61\n\n// now delete properties:\ndelete person1.age;\ndelete person2.info.age;\ndelete person3.info.age;\n\n// prototypes should not have changed:\nflatObj.age // 23\nnestObj.info.age // undefined ???\nnestObj2.info.age // 61\n</code></pre>\n\n<p>(also on a <a href=\"http://jsfiddle.net/tM7R7/\" rel=\"nofollow\">fiddle</a>)</p>\n\n<p>Am I doing something wrong, or is this a limitation of this pattern?</p>\n",
            "last_activity_date": 1402233190,
            "question_id": 10131052,
            "score": 9,
            "tags": [
                "javascript",
                "prototypal-inheritance"
            ],
            "title": "Crockford&#39;s Prototypal inheritance - Issues with nested objects"
        }
    ]
}
